"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[81070],{970001:(e,n,t)=>{t.d(n,{_:()=>l,S:()=>o});var l="Guild Welcome Screen",o="hasClickedWelcomeEmojiPicker"},281070:(e,n,t)=>{t.r(n);t.d(n,{default:()=>H});var l=t(785893),o=t(667294),r=t(791462),i=t(444450),a=t(489992),s=t(152163),u=t(239396),c=t(53211),d=t(394803),m=t(536989),f=t(356004),C=t(392115),h=t(1812),E=t(105405),j=t(859023),p=t(191940),v=t(629858),_=t(487502),N=t(761434),O=t(801593),g=t(757987),S=t(272729),b=t(15063),I=t(880680),x=t(976703),L=t(67416),y=t(521495),P=t(108580),Z=t(94181),T=t(431583),M=t(970001),A=t(461061),k=t(959797),w=t(585398),D=t.n(w);function G(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,l=new Array(n);t<n;t++)l[t]=e[t];return l}function B(e,n,t){n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t;return e}function U(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},l=Object.keys(t)
;"function"==typeof Object.getOwnPropertySymbols&&(l=l.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))));l.forEach((function(n){B(e,n,t[n])}))}return e}function W(e,n){n=null!=n?n:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);n&&(l=l.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})));t.push.apply(t,l)}return t}(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}));return e}function R(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var l,o,r=[],i=!0,a=!1;try{for(t=t.call(e);!(i=(l=t.next()).done);i=!0){r.push(l.value);if(n&&r.length===n)break}}catch(e){a=!0;o=e}finally{try{
i||null==t.return||t.return()}finally{if(a)throw o}}return r}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return G(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return G(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const H=function(e){var n,t,w=e.guildId,G=e.welcomeChannel,B=e.transitionState,H=e.onSave,z=e.onClose,K=(0,S.Dt)(),Y=R(o.useState(null!=G?G.channel_id:null),2),F=Y[0],J=Y[1],V=R(o.useState(null!=G?G.description:""),2),X=V[0],q=V[1],$=R(o.useState(null!=G?{id:G.emoji_id,name:G.emoji_name}:null),2),Q=$[0],ee=$[1],ne=R(o.useState(!1),2),te=ne[0],le=ne[1],oe=(0,r.e7)([C.Z],(function(){
return null!=(null==Q?void 0:Q.id)?C.Z.getUsableCustomEmojiById(Q.id):null})),re=(0,r.e7)([h.ZP],(function(){return h.ZP.getChannels(w)[h.sH]}),[w]),ie=(0,r.e7)([Z.Z],(function(){return Z.Z.get(w)})),ae=null!==(t=null==ie||null===(n=ie.welcome_channels)||void 0===n?void 0:n.map((function(e){return e.channel_id})))&&void 0!==t?t:[],se=R(o.useState(!1),2),ue=se[0],ce=se[1];o.useEffect((function(){i.Z.get(M.S)||setTimeout((function(){return ce(!0)}),300)}),[]);var de=[];re.forEach((function(e){var n=e.channel;!P.ZP.canEveryoneRole(A.Plq.VIEW_CHANNEL,n)||(null==G?void 0:G.channel_id)!==n.id&&ae.includes(n.id)||de.push({value:n.id,label:(0,c.F)(n,j.default,E.Z)})}));var me=function(){ce(!1);z()},fe=o.useCallback((function(e){return q(e)}),[]),Ce=o.useCallback((function(){i.Z.set(M.S,!0);ce(!1)}),[]);return(0,l.jsx)(u.Z,{page:A.ZY5.CHANNEL_WELCOME_CREATE_MODAL,children:(0,l.jsxs)(L.Y0,{transitionState:B,"aria-labelledby":K,children:[(0,l.jsxs)("div",{className:D().modalContents,children:[(0,
l.jsx)(L.ol,{onClick:me,className:D().closeButton}),(0,l.jsx)(a.X6,{variant:"heading-md/semibold",className:D().headerText,id:K,children:k.Z.Messages.GUILD_SETTINGS_PUBLIC_WELCOME_SELECT_A_CHANNEL}),(0,l.jsxs)(I.Z,{className:D().formGroup,children:[(0,l.jsx)(y.Z,{options:de,onChange:function(e){return J(e)},value:F,renderOptionPrefix:function(e){if(null===e)return null;var n,t=e.value,o=f.Z.getChannel(t),r=null!==(n=(0,d.KS)(o))&&void 0!==n?n:x.Z;return(0,l.jsx)(r,{className:D().channelTitleIcon,width:16,height:16})}}),(0,l.jsx)(a.xv,{variant:"text-xs/normal",color:"text-muted",className:D().formDescription,children:k.Z.Messages.GUILD_SETTINGS_PUBLIC_WELCOME_ONLY_VIEWABLE_CHANNELS})]}),(0,l.jsx)(b.Z,{}),(0,l.jsx)(a.X6,{variant:"heading-md/semibold",className:D().headerText,children:k.Z.Messages.GUILD_SETTINGS_PUBLIC_WELCOME_SET_DESCRIPTION}),(0,l.jsx)(I.Z,{className:D().formGroup,children:(0,l.jsx)(O.ZP,{maxLength:42,value:X,inputClassName:D().input,
placeholder:k.Z.Messages.GUILD_SETTINGS_PUBLIC_WELCOME_CHANNEL_DESCRIPTION_PLACEHOLDER,onChange:fe})}),(0,l.jsx)(b.Z,{}),(0,l.jsx)(I.Z,{className:D().formGroup,children:(0,l.jsxs)("div",{className:D().emojiSectionContainer,children:[(0,l.jsxs)("div",{className:D().emojiTitleContainer,children:[(0,l.jsx)(a.X6,{variant:"heading-md/semibold",children:k.Z.Messages.GUILD_SETTINGS_PUBLIC_WELCOME_PICK_EMOJI}),(0,l.jsx)(a.xv,{variant:"text-xs/normal",color:"text-muted",children:k.Z.Messages.GUILD_SETTINGS_PUBLIC_WELCOME_PICK_EMOJI_UPSELL})]}),(0,l.jsx)("div",{className:D().emojiButtonContainer,children:(0,l.jsx)(N.ZP,{renderPopout:function(e){var n=e.closePopout,t=h.ZP.getDefaultChannel(w);return(0,l.jsx)(m.Z,{guildId:w,closePopout:n,onSelectEmoji:function(e,t){!function(e){if(null!=e){var n,t,l;ee(null!=e.id?{id:null!==(n=e.id)&&void 0!==n?n:null,name:null!==(t=e.name)&&void 0!==t?t:null}:{id:null,name:null!==(l=e.optionallyDiverseSequence)&&void 0!==l?l:null})}}(e);t&&n()},
pickerIntention:A.HzX.COMMUNITY_CONTENT,onNavigateAway:me,channel:t})},position:N.ZP.Positions.LEFT,animation:N.ZP.Animation.NONE,align:N.ZP.Align.BOTTOM,children:function(e,n){var t=n.isShown;return(0,l.jsx)(g.DY,{color:g.FG.BRAND,tooltipClassName:D().tooltip,position:g.as.LEFT,text:ue?k.Z.Messages.WELCOME_CHANNEL_EMOJI_PICKER_TOOLTIP:null,forceOpen:ue,children:(0,l.jsx)(v.Z,W(U({},e),{onClick:function(n){var t;Ce();null===(t=e.onClick)||void 0===t||t.call(e,n)},active:t,className:D().emojiButton,tabIndex:0,renderButtonContents:null==Q||null==Q.id&&null==Q.name?null:function(){return(0,l.jsx)(s.Z,{className:D().emoji,emojiId:Q.id,emojiName:Q.name,animated:Boolean(null==oe?void 0:oe.animated)})}}))})}})})]})})]}),(0,l.jsxs)(L.mz,{className:D().footer,justify:_.Z.Justify.BETWEEN,children:[(0,l.jsxs)(_.Z,{grow:0,align:_.Z.Align.CENTER,children:[(0,l.jsx)(p.Co,{onClick:me,size:p.Co.Sizes.SMALL,look:p.Co.Looks.LINK,color:p.Co.Colors.PRIMARY,children:k.Z.Messages.CANCEL}),(0,l.jsx)(p.Co,{
onClick:function(){null!=F&&X.length>0&&H({channel_id:F,description:X,emoji_id:null==Q?void 0:Q.id,emoji_name:null==Q?void 0:Q.name});me()},disabled:null==F||0===X.length,children:k.Z.Messages.SAVE})]}),null!=G&&(0,l.jsx)(p.Co,{onClick:function(){le(!0)},size:p.Co.Sizes.MIN,look:p.Co.Looks.LINK,color:p.Co.Colors.RED,children:k.Z.Messages.REMOVE})]}),te&&(0,l.jsx)(T.Z,{onConfirm:function(){H();me()},onCancel:function(){return le(!1)},channelId:F})]})})}}}]);
//# sourceMappingURL=50f6dcdd6b8635972b74.js.map