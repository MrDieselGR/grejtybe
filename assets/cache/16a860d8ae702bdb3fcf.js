"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[40505],{140505:(e,r,n)=>{n.r(r);n.d(r,{default:()=>P});var t=n(785893),o=n(667294),l=n(294184),a=n.n(l),i=n(647446),s=n(368365),u=n(489992),c=n(289965),d=n(780921),f=n(304856),h=n(191940),v=n(82961),p=n(736488),y=n(67416),m=n(521495),N=n(108580),b=n(831950),O=n(959797),E=n(663849),S=n.n(E);function w(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function _(e,r,n,t,o,l,a){try{var i=e[l](a),s=i.value}catch(e){n(e);return}i.done?r(s):Promise.resolve(s).then(t,o)}function R(e,r,n){r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n;return e}function x(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,o,l=[],a=!0,i=!1;try{for(n=n.call(e);!(a=(t=n.next()).done);a=!0){l.push(t.value)
;if(r&&l.length===r)break}}catch(e){i=!0;o=e}finally{try{a||null==n.return||n.return()}finally{if(i)throw o}}return l}}(e,r)||M(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||M(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,r){if(e){if("string"==typeof e)return w(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);return"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,r):void 0}}var g=function(e,r){var n,t,o,l,a={
label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return l={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function i(l){return function(i){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,t&&(o=2&l[0]?t.return:l[0]?t.throw||((o=t.return)&&o.call(t),0):t.next)&&!(o=o.call(t,l[1])).done)return o;(t=0,o)&&(l=[2&l[0],o.value]);switch(l[0]){case 0:case 1:o=l;break;case 4:a.label++;return{value:l[1],done:!1};case 5:a.label++;t=l[1];l=[0];continue;case 7:l=a.ops.pop();a.trys.pop();continue;default:if(!(o=a.trys,o=o.length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){a=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){a.label=l[1];break}if(6===l[0]&&a.label<o[1]){a.label=o[1];o=l;break}if(o&&a.label<o[2]){a.label=o[2];a.ops.push(l);break}o[2]&&a.ops.pop();a.trys.pop();continue}l=r.call(e,a)}catch(e){l=[6,e];t=0}finally{n=o=0}if(5&l[0])throw l[1];return{
value:l[0]?l[1]:void 0,done:!0}}([l,i])}}},j=function(e,r){return o.useCallback((function(n,t){var o=(0,b.KV)(e),l=new Set(t),a=function(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{},t=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));t.forEach((function(r){R(e,r,n[r])}))}return e}({},r.permissionOverwrites),i=[],u=[];o.forEach((function(r){var t=r.id,o=l.has(t);if(o){var c,h,v,p,y,m;i.push({id:t,type:d.BN.ROLE,allow:o?s.Z.add(null!==(p=null===(c=a[t])||void 0===c?void 0:c.allow)&&void 0!==p?p:N.ZP.NONE,n):s.Z.remove(null!==(y=null===(h=a[t])||void 0===h?void 0:h.allow)&&void 0!==y?y:N.ZP.NONE,n),deny:s.Z.remove(null!==(m=null===(v=a[t])||void 0===v?void 0:v.deny)&&void 0!==m?m:N.ZP.NONE,n)})}else if((0,f.pM)(e.id,t)){var b,O,E,S;i.push({id:t,type:d.BN.ROLE,
allow:s.Z.remove(null!==(E=null===(b=a[t])||void 0===b?void 0:b.allow)&&void 0!==E?E:N.ZP.NONE,n),deny:s.Z.add(null!==(S=null===(O=a[t])||void 0===O?void 0:O.deny)&&void 0!==S?S:N.ZP.NONE,n)})}else t in a&&u.push(t)}),[]);return(0,c.kU)(r.id,i,u)}),[e,r])},C=function(e){return function(r){return null!=r&&!(0,f.pM)(e,r)}},I=function(e){var r=e.rolesRow;return(0,t.jsx)("div",{"aria-hidden":!0,className:S().roleCircle,style:{backgroundColor:null==r?void 0:r.colorString}})};const P=function(e){var r,n,l=e.guild,s=e.channel,c=e.permission,d=e.onClose,f=e.transitionState,E=e.currentSelectedRoles,w=void 0===E?[]:E,R=function(e,r,n){var t=N.ZP.canEveryoneRole(n,r),l=x(o.useState(t),2);return{shouldEveryonePost:l[0],setShouldEveryonePost:l[1]}}(0,s,c),M=R.shouldEveryonePost,P=R.setShouldEveryonePost,L=o.useRef(null),Z=function(e){return o.useMemo((function(){return(0,b.KV)(e).filter((function(r){return C(e.id)(r.id)}))}),[e])}(l),k=Z.reduce((function(e,r){e.set(r.id,r);return e
}),new Map),D=Z.map((function(e){return{key:e.key,label:e.name,value:e.id}})),B=x(o.useState(w.map((function(e){return e.id})).filter(C(l.id))),2),T=B[0],H=B[1],U=x(o.useState(!1),2),G=U[0],z=U[1],F=x(o.useState(!1),2),V=F[0],Y=F[1],J=T.length>0||M,K=j(l,s),W=(n=(r=function(){var e,r;return g(this,(function(n){switch(n.label){case 0:if(!J)return[2];z(!0);Y(!1);e=A(T);if(M){r=l.id;e.push(r)}n.label=1;case 1:n.trys.push([1,3,4,5]);return[4,K(c,e)];case 2:n.sent();d();return[3,5];case 3:n.sent();Y(!0);return[3,5];case 4:z(!1);return[7];case 5:return[2]}}))},function(){var e=this,n=arguments;return new Promise((function(t,o){var l=r.apply(e,n);function a(e){_(l,t,o,a,i,"next",e)}function i(e){_(l,t,o,a,i,"throw",e)}a(void 0)}))}),function(){return n.apply(this,arguments)});return G?(0,t.jsx)(v.Z,{}):(0,t.jsxs)(y.Y0,{transitionState:f,"aria-label":O.Z.Messages.HUB_WAITLIST_MODAL_JOIN_HEADER,children:[(0,t.jsx)(y.xB,{separator:!1,className:S().modalHeader,children:(0,t.jsx)(u.X6,{
variant:"heading-md/semibold",className:S().header,children:O.Z.Messages.FORUM_CHANNEL_ONBOARDING_PERMISSION_MODAL_TITLE})}),(0,t.jsx)(y.hz,{children:(0,t.jsxs)("div",{className:S().container,children:[(0,t.jsx)("div",{className:S().row,children:(0,t.jsx)("div",{ref:L,className:S().roleSelectorContainer,children:(0,t.jsx)(i.Jc,{containerRef:L,children:(0,t.jsx)(m.Z,{closeOnSelect:!1,className:S().roleSelector,maxVisibleItems:5,placeholder:O.Z.Messages.FORUM_CHANNEL_ONBOARDING_PERMISSION_MODAL_ROLE_INPUT_PLACEHOLDER,multi:!0,value:T,options:D,onChange:function(e){H(e)},renderOptionPrefix:function(e){return null!=e?(0,t.jsx)(I,{rolesRow:k.get(e.value)}):null}})})})}),(0,t.jsxs)("div",{className:S().row,children:[(0,t.jsx)(p.Z,{value:M,hideBorder:!0,onChange:P,className:S().switchGroup,children:O.Z.Messages.FORUM_CHANNEL_ONBOARDING_PERMISSION_MODAL_LET_EVERYONE_POST}),(0,t.jsx)(u.xv,{variant:"text-sm/normal",
children:O.Z.Messages.FORUM_CHANNEL_ONBOARDING_PERMISSION_MODEL_DESCRIPTION.format()})]}),V?(0,t.jsx)("div",{className:S().row,children:(0,t.jsx)(u.xv,{className:a()(S().row,S().error),variant:"text-sm/normal",children:O.Z.Messages.FORUM_CHANNEL_ONBOARDING_PERMISSION_MODEL_ERROR})}):null]})}),(0,t.jsxs)(y.mz,{className:S().footer,children:[(0,t.jsx)(h.Co,{type:"submit",color:h.Co.Colors.BRAND_NEW,size:h.Co.Sizes.SMALL,className:S().button,onClick:W,disabled:!J,autoFocus:!0,children:O.Z.Messages.SAVE}),(0,t.jsx)(h.Co,{color:h.Co.Colors.PRIMARY,size:h.Co.Sizes.SMALL,className:S().button,onClick:d,children:O.Z.Messages.CANCEL})]})]})}}}]);
//# sourceMappingURL=16a860d8ae702bdb3fcf.js.map