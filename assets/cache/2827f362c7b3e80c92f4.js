"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[46494],{98728:(e,n,r)=>{r.d(n,{Z:()=>y});var t=r(785893),l=r(667294),a=r(294184),o=r.n(a),u=r(489992),i=r(191940),s=r(272729),c=r(67416),f=r(959797),d=r(998723),h=r.n(d);function p(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function v(e,n,r,t,l,a,o){try{var u=e[a](o),i=u.value}catch(e){r(e);return}u.done?n(i):Promise.resolve(i).then(t,l)}function m(e){return function(){var n=this,r=arguments;return new Promise((function(t,l){var a=e.apply(n,r);function o(e){v(a,t,l,o,u,"next",e)}function u(e){v(a,t,l,o,u,"throw",e)}o(void 0)}))}}function b(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var t,l,a=[],o=!0,u=!1;try{for(r=r.call(e);!(o=(t=r.next()).done);o=!0){a.push(t.value);if(n&&a.length===n)break}}catch(e){u=!0;l=e}finally{try{
o||null==r.return||r.return()}finally{if(u)throw l}}return a}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return p(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var E=function(e,n){var r,t,l,a,o={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,t&&(l=2&a[0]?t.return:a[0]?t.throw||((l=t.return)&&l.call(t),
0):t.next)&&!(l=l.call(t,a[1])).done)return l;(t=0,l)&&(a=[2&a[0],l.value]);switch(a[0]){case 0:case 1:l=a;break;case 4:o.label++;return{value:a[1],done:!1};case 5:o.label++;t=a[1];a=[0];continue;case 7:a=o.ops.pop();o.trys.pop();continue;default:if(!(l=o.trys,l=l.length>0&&l[l.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!l||a[1]>l[0]&&a[1]<l[3])){o.label=a[1];break}if(6===a[0]&&o.label<l[1]){o.label=l[1];l=a;break}if(l&&o.label<l[2]){o.label=l[2];o.ops.push(a);break}l[2]&&o.ops.pop();o.trys.pop();continue}a=n.call(e,o)}catch(e){a=[6,e];t=0}finally{r=l=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};function y(e){var n=e.errorText,r=e.title,a=e.description,d=e.transitionState,p=e.onCancel,v=e.onConfirm,y=e.children,R=(0,s.Dt)(),x=b(l.useState(!1),2),C=x[0],g=x[1],I=l.useCallback(m((function(){return E(this,(function(e){switch(e.label){case 0:g(!0);e.label=1;case 1:e.trys.push([1,3,4,5]);return[4,v()];case 2:e.sent();return[3,5];case 3:
throw e.sent();case 4:g(!1);return[7];case 5:return[2]}}))})),[v]);return(0,t.jsxs)(c.Y0,{className:h().modal,transitionState:d,"aria-labelledby":R,size:c.Cg.SMALL,children:[(0,t.jsxs)(c.hz,{className:h().modalContent,children:[(0,t.jsx)(u.X6,{variant:"heading-md/semibold",id:R,children:r}),null!=a&&""!==a?(0,t.jsx)(u.xv,{variant:"text-sm/normal",color:"header-secondary",className:h().description,children:a}):null,(0,t.jsx)("div",{className:h().body,children:y}),null!=n&&""!==n?(0,t.jsx)(u.xv,{className:h().errorText,variant:"text-xs/normal",color:"text-danger",children:n}):null]}),(0,t.jsxs)(c.mz,{children:[(0,t.jsx)(i.Co,{submitting:C,className:h().button,size:i.Co.Sizes.SMALL,color:i.Co.Colors.BRAND,onClick:I,children:f.Z.Messages.SAVE}),(0,t.jsx)(i.Co,{className:o()(h().cancelButton,h().button),size:i.Co.Sizes.SMALL,color:i.Co.Colors.PRIMARY,onClick:p,children:f.Z.Messages.CANCEL})]})]})}},646494:(e,n,r)=>{r.r(n);r.d(n,{default:()=>W})
;var t=r(785893),l=r(667294),a=r(294184),o=r.n(a),u=r(873955),i=r.n(u),s=r(176907),c=r(698534),f=r(791462),d=r(489992),h=r(239396),p=r(323657),v=r(952013),m=r(691869),b=r(172458),E=r(994858),y=r(832010),R=r(292074),x=r(356004),C=r(191940),g=r(629590),I=r(757987),_=r(962271),M=r(523283),j=r(58877),N=r(855550),O=r(570239),S=r(98728),L=r(580946),A=r(461061),w=r(959797),Z=r(998723),T=r.n(Z);function k(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function P(e,n,r,t,l,a,o){try{var u=e[a](o),i=u.value}catch(e){r(e);return}u.done?n(i):Promise.resolve(i).then(t,l)}function F(e,n,r){n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r;return e}function U(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){
return Object.getOwnPropertyDescriptor(r,e).enumerable}))));t.forEach((function(n){F(e,n,r[n])}))}return e}function B(e,n){n=null!=n?n:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})));r.push.apply(r,t)}return r}(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}));return e}function V(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var t,l,a=[],o=!0,u=!1;try{for(r=r.call(e);!(o=(t=r.next()).done);o=!0){a.push(t.value);if(n&&a.length===n)break}}catch(e){u=!0;l=e}finally{try{o||null==r.return||r.return()}finally{if(u)throw l}}return a}}(e,n)||z(e,n)||function(){
throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e){return function(e){if(Array.isArray(e))return k(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||z(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,n){if(e){if("string"==typeof e)return k(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);return"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?k(e,n):void 0}}var K=function(e,n){var r,t,l,a,o={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},
"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,t&&(l=2&a[0]?t.return:a[0]?t.throw||((l=t.return)&&l.call(t),0):t.next)&&!(l=l.call(t,a[1])).done)return l;(t=0,l)&&(a=[2&a[0],l.value]);switch(a[0]){case 0:case 1:l=a;break;case 4:o.label++;return{value:a[1],done:!1};case 5:o.label++;t=a[1];a=[0];continue;case 7:a=o.ops.pop();o.trys.pop();continue;default:if(!(l=o.trys,l=l.length>0&&l[l.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!l||a[1]>l[0]&&a[1]<l[3])){o.label=a[1];break}if(6===a[0]&&o.label<l[1]){o.label=l[1];l=a;break}if(l&&o.label<l[2]){o.label=l[2];o.ops.push(a);break}l[2]&&o.ops.pop();o.trys.pop();continue}a=n.call(e,o)}catch(e){a=[6,e];t=0}finally{r=l=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},H="RULE";function X(e){
var n=e.rule,r=e.rulesChannel,a=e.index,u=e.onChange,i=e.onKeyDown,f=e.onClear,h=e.onRuleReorder,p=e.isDropHovered,v=e.focused,y=e.onFocus,R=e.previewEnabled,x=l.useRef(null),I=l.useRef(null),_=V(l.useState((0,b.eK)(n.value)),2),N=_[0],O=N.textValue,S=N.richValue,A=_[1],Z=V((0,s.c)({type:H,item:{rule:n,index:a},end:function(e,n){null==e||n.didDrop()||h(e.rule,null,!0)}}),3),k=Z[1],P=Z[2],U=V((0,c.L)({accept:H,hover:function(e,n){var r,t=e.index,l=null===(r=x.current)||void 0===r?void 0:r.getBoundingClientRect(),o=n.getClientOffset();if(null!=l&&null!=o){var u=(l.bottom-l.top)/2,i=o.y-l.top;t<a&&i<u||t>a&&i>u||h(e.rule,a,!1)}},drop:function(e){h(e.rule,a,!0)}}),2),B=U[1];l.useLayoutEffect((function(){k(I);P(B(x));return function(){k(null);B(null)}}),[k,B,P]);l.useEffect((function(){""!==n.value&&""===O&&A((0,b.eK)(n.value))}),[n.value,O]);if(null==r)return null;var D=""!==n.value?n.value:n.id;return(0,t.jsxs)("div",{ref:x,className:o()(T().draggableInputContainer,F({},T().dragging,p)),
"data-dnd-name":D,children:[(0,t.jsxs)("div",{className:T().inputWrapper,children:[(0,t.jsx)(g.Z,{onMouseDown:function(){return y(a)},children:(0,t.jsx)(E.Z,{innerClassName:T().rulesTextAreaInput,type:m.I.RULES_INPUT,textValue:O,richValue:S,channel:r,placeholder:w.Z.Messages.MEMBER_VERIFICATION_RULE_PLACEHOLDER,focused:v,onChange:function(e,n,r){var t=n;t.length>L.fn&&(t=t.slice(0,L.fn));if(n!==t){n=t;r=(0,b.JM)(t)}u(n);A({textValue:n,richValue:r})},onKeyDown:i,canMentionChannels:R,canMentionRoles:R,maxCharacterCount:L.fn,characterCountClassName:T().characterCount,onSubmit:function(){return Promise.resolve({shouldClear:!1,shouldRefocus:!0})}})}),(0,t.jsx)(C.Co,{className:T().clearButton,onClick:f,look:C.Co.Looks.BLANK,size:C.Co.Sizes.NONE,children:(0,t.jsx)(M.Z,{className:T().clearIcon})}),(0,t.jsx)(d.xv,{className:T().rulesInputNumber,variant:"text-md/normal",color:"text-muted",children:"".concat(a+1,".")})]}),(0,t.jsx)("div",{ref:I,className:T().dragContainer,"data-dnd-name":D,
children:(0,t.jsx)(j.Z,{className:T().dragIcon})})]})}function G(e){var n=e.shortRule,r=e.fullRule,l=e.disabled,a=e.onClick;return l?(0,t.jsx)(I.ZP,{text:w.Z.Messages.MEMBER_VERIFICATION_RULE_LIMIT.format({number:L.X2}),children:function(e){return(0,t.jsx)("div",B(U({},e),{className:o()(T().exampleRule,F({},T().disabled,l)),children:(0,t.jsx)(d.xv,{variant:"text-sm/normal",color:"header-secondary",children:n})}))}}):(0,t.jsx)(g.Z,{className:o()(T().exampleRule,F({},T().disabled,l)),onClick:function(){return a(r)},children:(0,t.jsx)(d.xv,{variant:"text-sm/normal",color:"header-secondary",children:n})})}const W=function(e){var n,r,a=e.field,o=e.onSave,u=e.onClose,s=(0,v.ZP)(),c=(0,f.e7)([R.Z],(function(){return R.Z.getProps().guild})),m=null==c?void 0:c.rulesChannelId,b=null==c?void 0:c.hasFeature(A.oNc.PREVIEW_ENABLED),E=(0,f.e7)([x.Z],(function(){return null!=m?x.Z.getChannel(m):null})),C=V(l.useState(null!=(null==a?void 0:a.values)?null==a?void 0:a.values.map((function(e){return{
id:i()(),value:e}})):[{id:i()(),value:""}]),2),I=C[0],M=C[1],j=V(l.useState(null),2),Z=j[0],k=j[1],F=V(l.useState(null),2),z=F[0],H=F[1],W=V(l.useState(0),2),Y=W[0],q=W[1],J=function(e){if(I.length!==L.X2)if(null!=e&&""===I[I.length-1].value){var n=D(I);n[I.length-1].value=e;M(n);q(n.length-1)}else{M(D(I).concat([{id:i()(),value:null!=e?e:""}]));q(I.length)}},Q=l.useCallback((function(e,n,r){if(null!=I){var t=I.indexOf(e);if(null!=n&&n!==t){var l=D(I);l.splice(t,1);l.splice(n,0,e);M(l)}r?null!==z&&H(null):n!==z&&H(n)}}),[z,I]),$=(r=(n=function(){var e,n,r,t;return K(this,(function(l){switch(l.label){case 0:null!=Z&&k(null);if(0===(e=I.map((function(e){return e.value.trim()})).filter((function(e){return""!==e}))).length){k(w.Z.Messages.MEMBER_VERIFICATION_RULES_REQUIRED_ERROR);return[2]}n={field_type:O.QJ.TERMS,label:w.Z.Messages.MEMBER_VERIFICATION_FORM_RULES_LABEL,values:e,required:!0};l.label=1;case 1:l.trys.push([1,3,,4]);return[4,o(n)];case 2:l.sent();u();return[3,4];case 3:
r=l.sent();t=new p.Hx(r);k(t.getAnyErrorMessage());return[3,4];case 4:return[2]}}))},function(){var e=this,r=arguments;return new Promise((function(t,l){var a=n.apply(e,r);function o(e){P(a,t,l,o,u,"next",e)}function u(e){P(a,t,l,o,u,"throw",e)}o(void 0)}))}),function(){return r.apply(this,arguments)});if(null==c||null==E)return null;var ee=I.length===L.X2;return(0,t.jsx)(h.Z,{page:A.ZY5.GUILD_RULES_CREATE_MODAL,children:(0,t.jsxs)(S.Z,B(U({},e),{errorText:Z,title:w.Z.Messages.MEMBER_VERIFICATION_FORM_ITEM_RULES,onCancel:u,onConfirm:$,children:[I.map((function(e,n){return(0,t.jsx)(X,{rulesChannel:E,rule:e,index:n,onChange:function(e){return function(e,n){var r=D(I);r[n].value=e;M(r)}(e,n)},onClear:function(){return function(e){var n=D(I.slice(0,e)).concat(D(I.slice(e+1)));M(0===n.length?[{id:i()(),value:""}]:n)}(n)},onRuleReorder:Q,isDropHovered:n===z,focused:n===Y,onFocus:q,previewEnabled:null==b||b},e.id)})),!ee&&(0,t.jsxs)("div",{className:T().addItemContainer,children:[(0,
t.jsx)(N.Z,{height:17,width:17,color:(0,y.Lq)(s===A.BRd.DARK?A.Ilk.LINK_500:A.Ilk.LINK_LIGHT_500)}),(0,t.jsx)(g.Z,{className:T().addItemButton,onClick:function(){return J()},children:(0,t.jsx)(d.xv,{color:"text-link",variant:"text-md/normal",children:w.Z.Messages.MEMBER_VERIFICATION_ADD_RULE})})]}),(0,t.jsx)("div",{className:T().divider}),(0,t.jsx)(_.Z,{children:w.Z.Messages.MEMBER_VERIFICATION_EXAMPLE_RULES_SUBTITLE}),(0,t.jsxs)("div",{className:T().termsExampleRulesContainer,children:[(0,t.jsxs)("div",{className:T().termsExampleRulePairContainer,children:[(0,t.jsx)(G,{shortRule:w.Z.Messages.MEMBER_VERIFICATION_RULE_BE_RESPECTFUL,fullRule:w.Z.Messages.MEMBER_VERIFICATION_RULE_BE_RESPECTFUL_FULL,disabled:ee,onClick:J}),(0,t.jsx)(G,{shortRule:w.Z.Messages.MEMBER_VERIFICATION_RULE_NO_SPAM,fullRule:w.Z.Messages.MEMBER_VERIFICATION_RULE_NO_SPAM_FULL,disabled:ee,onClick:J})]}),(0,t.jsxs)("div",{className:T().termsExampleRulePairContainer,children:[(0,t.jsx)(G,{
shortRule:w.Z.Messages.MEMBER_VERIFICATION_RULE_NO_NSFW,fullRule:w.Z.Messages.MEMBER_VERIFICATION_RULE_NO_NSFW_FULL,disabled:ee,onClick:J}),(0,t.jsx)(G,{shortRule:w.Z.Messages.MEMBER_VERIFICATION_RULE_SAFE,fullRule:w.Z.Messages.MEMBER_VERIFICATION_RULE_SAFE_FULL,disabled:ee,onClick:J})]})]})]}))})}}}]);
//# sourceMappingURL=2827f362c7b3e80c92f4.js.map