"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[35596],{354290:(e,t,n)=>{n.d(t,{Z:()=>k});var r=n(506884),i=n(675860),o=n(173436),u=n(168831),a=n(538796),l=n(836343),c=n(218276),s=n(355309),d=n(414954),f=n(351793),E=n(655695),_=n(510174),h=n(631134),p=n(1812),g=n(653772),v=n(379822),I=n(971738),y=n(859023),O=n(108580),T=n(590483),m=n(666492),A=n(992497),S=n(461061),b=n(959797);function C(e,t,n,r,i,o,u){try{var a=e[o](u),l=a.value}catch(e){n(e);return}a.done?t(l):Promise.resolve(l).then(r,i)}function N(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function u(e){C(o,r,i,u,a,"next",e)}function a(e){C(o,r,i,u,a,"throw",e)}u(void 0)}))}}function R(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n)
;"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){R(e,t,n[t])}))}return e}function D(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function P(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++){n=o[r];t.indexOf(n)>=0||(i[n]=e[n])}return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++){n=o[r]
;t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}}return i}var w=function(e,t){var n,r,i,o,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;(r=0,i)&&(o=[2&o[0],i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:u.label++;return{value:o[1],done:!1};case 5:u.label++;r=o[1];o=[0];continue;case 7:o=u.ops.pop();u.trys.pop();continue;default:if(!(i=u.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){u=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){u.label=o[1];break}if(6===o[0]&&u.label<i[1]){u.label=i[1];i=o;break}if(i&&u.label<i[2]){u.label=i[2];u.ops.push(o);break}
i[2]&&u.ops.pop();u.trys.pop();continue}o=t.call(e,u)}catch(e){o=[6,e];r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},M=function(e){A.Z.show({title:b.Z.Messages.TOO_MANY_USER_GUILDS_ALERT_TITLE,body:b.Z.Messages.TOO_MANY_USER_GUILDS_ALERT_DESCRIPTION.format({quantity:e})})},U=function(){A.Z.show({title:b.Z.Messages.SERVER_IS_CURRENTLY_FULL,body:b.Z.Messages.PLEASE_TRY_AGAIN_LATER})};function Z(e){return G.apply(this,arguments)}function G(){G=N((function(e){var t,r,u,c,s,d,_,p,O,m,A,C,N,R,P,G,k,H,F,j,V=arguments;return w(this,(function(w){switch(w.label){case 0:t=V.length>1&&void 0!==V[1]?V[1]:{};r=t.source,u=t.loadId,c=t.lurkLocation;d=null!==(s=t.lurker)&&void 0!==s&&s;_=y.default.getCurrentUser();if(null!==(p=null==_?void 0:_.hasFlag(S.xW$.QUARANTINED))&&void 0!==p&&p){(0,f.Z)();return[2,new Promise((function(e,t){return t(new Error)}))]}o.Z.wait((function(){return o.Z.dispatch({type:"GUILD_JOIN",guildId:e,lurker:d,source:r,loadId:u})}))
;w.label=1;case 1:w.trys.push([1,5,,9]);O=I.Z.getGuildId();m=e===O&&null!=g.Z.getGuild(e);A=m?v.Z.getChannelId(e):null;return[4,i.Z.put({url:S.ANM.GUILD_JOIN(e),query:{lurker:d,session_id:d?h.default.getSessionId():null,recommendation_load_id:u,location:d&&null!=c?c:null},context:{source:r},oldFormErrors:!0,body:null!==(C=null==t?void 0:t.captchaPayload)&&void 0!==C?C:{}})];case 2:null!=(N=w.sent()).body.join_request&&o.Z.dispatch({type:"USER_GUILD_JOIN_REQUEST_UPDATE",guildId:e,request:N.body.join_request});if(null==g.Z.getGuild(e)&&N.body.show_verification_form){(0,E.uL)(S.Z5c.GUILD_MEMBER_VERIFICATION(e));return[2,N]}null!=N.body.welcome_screen&&o.Z.dispatch({type:"WELCOME_SCREEN_UPDATE",guildId:N.body.id,welcomeScreen:N.body.welcome_screen});null!=N.body.approximate_presence_count&&o.Z.dispatch({type:"ONLINE_GUILD_MEMBER_COUNT_UPDATE",guildId:N.body.id,count:N.body.approximate_presence_count});return d?[3,4]:[4,(0,l.ZP)({guildId:e,returnChannelId:A})];case 3:w.sent();w.label=4
;case 4:return[2,N];case 5:R=w.sent();if((null===(P=R.body)||void 0===P?void 0:P.code)===S.evJ.TOO_MANY_USER_GUILDS){k=y.default.getCurrentUser();H=T.ZP.canUseIncreasedGuildCap(k)||(null==k?void 0:k.isStaff());M(H?S.tHP:S.DZw)}(null===(G=R.body)||void 0===G?void 0:G.code)===S.evJ.GUILD_AT_CAPACITY&&U();return null==R.body.captcha_key||null!=(null==t?void 0:t.captchaPayload)?[3,8]:[4,n.e(41704).then(n.bind(n,141704))];case 6:F=w.sent();return[4,F.default.showCaptchaAsync((0,a.z)(R.body),{bodyText:b.Z.Messages.GUILD_JOIN_CAPTCHA_DESCRIPTION})];case 7:j=w.sent();return[2,Z(e,D(L({},t),{captchaPayload:j}))];case 8:throw R;case 9:return[2]}}))}));return G.apply(this,arguments)}const k={joinGuild:Z,transitionToGuildSync:function(e,t,n,r){return new Promise((function(i){return g.Z.addConditionalChangeListener((function(){var o=g.Z.getGuild(e);if(null==o)return!0;var u=(0,d.cn)()?void 0:null!=n?n:(0,_.V)(o.id),a=t
;(null==t?void 0:t.hasOwnProperty("welcomeModalChannelId"))&&null==t.welcomeModalChannelId&&(a=D(L({},t),{welcomeModalChannelId:u}));(0,E.uL)(S.Z5c.CHANNEL(e,u),a,void 0,r);setImmediate(i);return!1}))}))},deleteGuild:function(e){o.Z.dispatch({type:"GUILD_DELETE",guild:{id:e}})},selectGuild:function(e){(0,s.a)(e)},addGuild:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return N((function(){var o;return w(this,(function(a){switch(a.label){case 0:a.trys.push([0,2,,3]);return[4,i.Z.post({url:S.ANM.GUILDS,body:{name:e,icon:t,channels:n,system_channel_id:r},oldFormErrors:!0})];case 1:return[2,a.sent().body];case 2:o=a.sent();throw new u.Z(o);case 3:return[2]}}))}))()},createGuild:function(e){o.Z.dispatch({type:"GUILD_CREATE",guild:e})},setServerMute:function(e,t,n){return i.Z.patch({url:S.ANM.GUILD_MEMBER(e,t),body:{mute:n},oldFormErrors:!0})},
setServerDeaf:function(e,t,n){return i.Z.patch({url:S.ANM.GUILD_MEMBER(e,t),body:{deaf:n},oldFormErrors:!0})},setChannel:function(e,t,n){i.Z.patch({url:S.ANM.GUILD_MEMBER(e,t),body:{channel_id:n},oldFormErrors:!0})},setMemberFlags:function(e,t,n){i.Z.patch({url:S.ANM.GUILD_MEMBER(e,t),body:{flags:n},oldFormErrors:!0})},kickUser:function(e,t,n){return i.Z.delete({url:S.ANM.GUILD_MEMBER(e,t),reason:n,oldFormErrors:!0})},setCommunicationDisabledUntil:function(e,t,n,i,o){return m.Z.patch({url:S.ANM.GUILD_MEMBER(e,t),reason:o,body:{communication_disabled_until:n},oldFormErrors:!0,trackedActionData:{event:r.a9.USER_COMMUNICATION_DISABLED_UPDATE,properties:{guild_id:e,target_user_id:t,duration:null!=i?i:null,reason:null!=o?o:null,communication_disabled_until:n}}})},banUser:function(e,t,n,r){return i.Z.put({url:S.ANM.GUILD_BAN(e,t),reason:r,body:{delete_message_seconds:n},oldFormErrors:!0})},unbanUser:function(e,t){return i.Z.delete({url:S.ANM.GUILD_BAN(e,t),oldFormErrors:!0})},
createRole:function(e){return N((function(){var t;return w(this,(function(n){switch(n.label){case 0:return[4,i.Z.post({url:S.ANM.GUILD_ROLES(e),oldFormErrors:!0,body:{name:b.Z.Messages.NEW_ROLE}})];case 1:t=n.sent();o.Z.dispatch({type:"GUILD_SETTINGS_ROLE_SELECT",roleId:t.body.id});c.Z.checkGuildTemplateDirty(e);return[2,t.body]}}))}))()},createRoleWithNameColor:function(e,t,n){return N((function(){var r,a,l;return w(this,(function(c){switch(c.label){case 0:r={name:null!=t&&""!==t?t:b.Z.Messages.NEW_ROLE,color:null!=n?n:0,permissions:O.ZP.NONE};c.label=1;case 1:c.trys.push([1,3,,4]);return[4,i.Z.post({url:S.ANM.GUILD_ROLES(e),oldFormErrors:!0,body:r})];case 2:a=c.sent();o.Z.dispatch({type:"GUILD_SETTINGS_ROLE_SELECT",roleId:a.body.id});return[2,a.body];case 3:l=c.sent();throw new u.Z(l);case 4:return[2]}}))}))()},updateRole:function(e,t,n){return N((function(){var r,o,u,a,l;return w(this,(function(s){switch(s.label){case 0:r=n.icon,o=n.unicodeEmoji,u=P(n,["icon","unicodeEmoji"])
;a=null===r||(null==r?void 0:r.startsWith("data:"))?r:void 0;return[4,i.Z.patch({url:S.ANM.GUILD_ROLE(e,t),body:D(L({},u),{icon:a,unicode_emoji:o}),oldFormErrors:!0})];case 1:l=s.sent();c.Z.checkGuildTemplateDirty(e);return[2,l]}}))}))()},updateRolePermissions:function(e,t,n){return i.Z.patch({url:S.ANM.GUILD_ROLE(e,t),body:{permissions:n},oldFormErrors:!0})},deleteRole:function(e,t){i.Z.delete({url:S.ANM.GUILD_ROLE(e,t),oldFormErrors:!0}).then((function(){c.Z.checkGuildTemplateDirty(e)}))},batchChannelUpdate:function(e,t){return N((function(){var n;return w(this,(function(r){switch(r.label){case 0:return[4,i.Z.patch({url:S.ANM.GUILD_CHANNELS(e),body:t,oldFormErrors:!0})];case 1:n=r.sent();c.Z.checkGuildTemplateDirty(e);return[2,n]}}))}))()},batchRoleUpdate:function(e,t){return N((function(){var n;return w(this,(function(r){switch(r.label){case 0:return[4,i.Z.patch({url:S.ANM.GUILD_ROLES(e),body:t,oldFormErrors:!0})];case 1:n=r.sent();c.Z.checkGuildTemplateDirty(e);return[2,n]}}))}))()
},requestMembers:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];o.Z.dispatch({type:"GUILD_MEMBERS_REQUEST",guildIds:Array.isArray(e)?e:[e],query:t,limit:n,presences:r})},requestMembersById:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];o.Z.dispatch({type:"GUILD_MEMBERS_REQUEST",guildIds:Array.isArray(e)?e:[e],userIds:Array.isArray(t)?t:[t],presences:n})},move:function(e,t,n,r){o.Z.dispatch({type:"GUILD_MOVE",fromIndex:e,toIndex:t,fromFolderIndex:n,toFolderIndex:r})},moveById:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];o.Z.dispatch({type:"GUILD_MOVE_BY_ID",sourceId:e,targetId:t,moveToBelow:n,combine:r})},toggleGuildFolderExpand:function(e){o.Z.dispatch({type:"TOGGLE_GUILD_FOLDER_EXPAND",folderId:e})},
setGuildFolderExpanded:function(e,t){o.Z.dispatch({type:"SET_GUILD_FOLDER_EXPANDED",folderId:e,expanded:t})},collapseAllFolders:function(){o.Z.dispatch({type:"GUILD_FOLDER_COLLAPSE"})},nsfwAgree:function(e){o.Z.dispatch({type:"GUILD_NSFW_AGREE",guildId:e})},nsfwReturnToSafety:function(e){var t=p.ZP.getDefaultChannel(e);null==t||t.isNSFW()?(0,E.uL)(S.Z5c.FRIENDS):(0,E.uL)(S.Z5c.CHANNEL(e,t.id))},escapeToDefaultChannel:function(e){var t=p.ZP.getDefaultChannel(e);null!=t?(0,E.uL)(S.Z5c.CHANNEL(e,t.id)):(0,E.uL)(S.Z5c.FRIENDS)},fetchApplications:function(e,t){return N((function(){var n,r,u;return w(this,(function(a){switch(a.label){case 0:n={url:S.ANM.GUILD_APPLICATIONS(e),oldFormErrors:!0};null!=t&&(n.query={channel_id:t});return[4,i.Z.get(n)];case 1:r=a.sent();u=r.body;o.Z.dispatch({type:"GUILD_APPLICATIONS_FETCH_SUCCESS",guildId:e,applications:u});return[2]}}))}))()},fetchGuildBans:function(e){return N((function(){return w(this,(function(t){switch(t.label){case 0:return[4,i.Z.get({
url:S.ANM.GUILD_BANS(e),oldFormErrors:!0}).then((function(e){o.Z.dispatch({type:"GUILD_SETTINGS_LOADED_BANS",bans:e.body})}))];case 1:t.sent();return[2]}}))}))()},fetchGuildRoleConnectionsEligibility:function(e,t){return i.Z.get({url:S.ANM.GUILD_ROLE_CONNECTIONS_ELIGIBILITY(e,t),oldFormErrors:!0}).then((function(e){var n=e.body;o.Z.dispatch({type:"GUILD_ROLE_CONNECTION_ELIGIBILITY_FETCH_SUCCESS",roleId:t,roleConnectionEligibility:n});return n}))},assignGuildRoleConnection:function(e,t){return N((function(){return w(this,(function(n){switch(n.label){case 0:return[4,i.Z.post({url:S.ANM.GUILD_ROLE_CONNECTIONS_ASSIGN(e,t),oldFormErrors:!0})];case 1:n.sent();return[2]}}))}))()},unassignGuildRoleConnection:function(e,t){return N((function(){return w(this,(function(n){switch(n.label){case 0:return[4,i.Z.post({url:S.ANM.GUILD_ROLE_CONNECTIONS_UNASSIGN(e,t),oldFormErrors:!0})];case 1:n.sent();return[2]}}))}))()},getGuildRoleConnectionsConfigurations:function(e){return N((function(){
return w(this,(function(t){switch(t.label){case 0:return[4,i.Z.get({url:S.ANM.GUILD_ROLE_CONNECTIONS_CONFIGURATIONS(e),oldFormErrors:!0})];case 1:return[2,t.sent().body]}}))}))()}}},478695:(e,t,n)=>{n.d(t,{k:()=>g,Lr:()=>v,zD:()=>I,mB:()=>y,PR:()=>O,In:()=>T,Sr:()=>A});var r=n(441143),i=n.n(r),o=n(391809),u=n(675860),a=n(173436),l=n(948571),c=n(859023),s=n(461061);function d(e,t,n,r,i,o,u){try{var a=e[o](u),l=a.value}catch(e){n(e);return}a.done?t(l):Promise.resolve(l).then(r,i)}function f(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function u(e){d(o,r,i,u,a,"next",e)}function a(e){d(o,r,i,u,a,"throw",e)}u(void 0)}))}}function E(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n)
;"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){E(e,t,n[t])}))}return e}var h=function(e,t){var n,r,i,o,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;(r=0,i)&&(o=[2&o[0],i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:u.label++;return{value:o[1],done:!1};case 5:u.label++;r=o[1];o=[0];continue;case 7:o=u.ops.pop();u.trys.pop();continue;default:if(!(i=u.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){u=0;continue}
if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){u.label=o[1];break}if(6===o[0]&&u.label<i[1]){u.label=i[1];i=o;break}if(i&&u.label<i[2]){u.label=i[2];u.ops.push(o);break}i[2]&&u.ops.pop();u.trys.pop();continue}o=t.call(e,u)}catch(e){o=[6,e];r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},p=new o.Z("UserProfileModalActionCreators");function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.withAnalyticsToken,n=void 0!==t&&t;return u.Z.get({url:s.ANM.ME,query:{with_analytics_token:n},oldFormErrors:!0}).then((function(e){a.Z.dispatch({type:"CURRENT_USER_UPDATE",user:e.body,analyticsToken:n?e.body.analytics_token:void 0});return new l.Z(e.body)}))}function v(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return u.Z.patch({url:s.ANM.USER_AGREEMENTS,body:{terms:e,privacy:t},oldFormErrors:!0}).then((function(){return!0}),(function(){return!1}))}function I(){
return u.Z.patch({url:s.ANM.USER_AGREEMENTS,body:{acknowledgment:!0},oldFormErrors:!0}).then((function(){return!0}),(function(){return!1}))}function y(e,t){var n=c.default.getCurrentUser();i()(null!=n,"setFlag: user cannot be undefined");var r=t?n.flags|e:n.flags&~e;return u.Z.patch({url:s.ANM.ME,body:{flags:r},oldFormErrors:!0})}function O(e){var t=c.default.getUser(e);return null!=t?Promise.resolve(t):u.Z.get({url:s.ANM.USER(e),oldFormErrors:!0}).then((function(t){a.Z.dispatch({type:"USER_UPDATE",user:t.body});return c.default.getUser(e)}))}function T(e){return m.apply(this,arguments)}function m(){m=f((function(e){var t,n,r,i,o,l,c,d,f,E=arguments;return h(this,(function(h){switch(h.label){case 0:t=E.length>1&&void 0!==E[1]?E[1]:{},n=t.friendToken,r=t.withMutualGuilds,i=t.withMutualFriendsCount,o=t.guildId,l=t.connectionsRoleId,c=E.length>2?E[2]:void 0;a.Z.dispatch({type:"USER_PROFILE_FETCH_START",userId:e});h.label=1;case 1:h.trys.push([1,3,,4]);return[4,u.Z.get({
url:s.ANM.USER_PROFILE(e),query:{friend_token:n,with_mutual_guilds:r,with_mutual_friends_count:i,guild_id:o,connections_role_id:l},oldFormErrors:!0})];case 2:d=h.sent();null==c||c(d.body,o);a.Z.dispatch({type:"USER_UPDATE",user:d.body.user});a.Z.dispatch(_({type:"USER_PROFILE_FETCH_SUCCESS"},d.body));null!=o&&null!=d.body.guild_member&&a.Z.dispatch({type:"GUILD_MEMBER_PROFILE_UPDATE",guildId:o,guildMember:d.body.guild_member});return[2,d.body];case 3:null!=(f=h.sent())&&null!=(null==f?void 0:f.body)&&p.warn("fetchProfile error: ".concat(f.body.code," - ").concat(f.body.message));a.Z.dispatch({type:"USER_PROFILE_FETCH_FAILURE",userId:e});throw f;case 4:return[2]}}))}));return m.apply(this,arguments)}function A(e){return S.apply(this,arguments)}function S(){return(S=f((function(e){var t,n;return h(this,(function(r){switch(r.label){case 0:a.Z.dispatch({type:"MUTUAL_FRIENDS_FETCH_START",userId:e});r.label=1;case 1:r.trys.push([1,3,,4]);return[4,u.Z.get({url:s.ANM.USER_RELATIONSHIPS(e),
oldFormErrors:!0})];case 2:t=r.sent();a.Z.dispatch({type:"MUTUAL_FRIENDS_FETCH_SUCCESS",userId:e,mutualFriends:t.body});return[3,4];case 3:null!=(null==(n=r.sent())?void 0:n.body)&&p.warn("fetchMutualFriends error: ".concat(n.body.code," - ").concat(n.body.message));a.Z.dispatch({type:"MUTUAL_FRIENDS_FETCH_FAILURE",userId:e});throw n;case 4:return[2]}}))}))).apply(this,arguments)}},559769:(e,t,n)=>{n.d(t,{T_:()=>a,al:()=>l,dx:()=>s,gH:()=>d,S1:()=>f,Rz:()=>E});var r=n(496486),i=n(173436),o=n(787619),u=n(266644);function a(e,t){i.Z.dispatch({type:"WINDOW_FOCUS",windowId:(0,u.ZY)(e),focused:t})}function l(e){i.Z.dispatch({type:"WINDOW_HIDDEN",windowId:(0,u.ZY)(e)})}var c=(0,r.memoize)((function(e){return(0,r.debounce)((function(t,n){i.Z.dispatch({type:"WINDOW_RESIZED",windowId:e,width:t,height:n})}),100)}));function s(e){var t=(0,u.ZY)(e);c(t)(e.innerWidth,e.innerHeight)}function d(e){var t=(0,u.ZY)(e);i.Z.dispatch({type:"WINDOW_FULLSCREEN_CHANGE",windowId:t,isElementFullscreen:(0,
o.rB)(null,e.document)})}function f(e){var t=(0,u.ZY)(e),n=e.document;i.Z.dispatch({type:"WINDOW_INIT",windowId:t,isElementFullscreen:(0,o.rB)(null,n),focused:n.hasFocus(),width:e.innerWidth,height:e.innerHeight})}function E(e){i.Z.dispatch({type:"WINDOW_UNLOAD",windowId:(0,u.ZY)(e)})}},772731:(e,t,n)=>{n.r(t);n.d(t,{default:()=>S});var r=n(717187),i=n.n(r),o=n(131795),u=n.n(o),a=n(817673),l=n(468811),c=n.n(l),s=n(675860),d=n(856640),f=n(461061);function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1;r.configurable=!0;"value"in r&&(r.writable=!0);Object.defineProperty(e,r.key,r)}}function h(e){h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return h(e)}function p(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?function(e){
if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e,t){g=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return g(e,t)}var v=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var i=h(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p(this,n)}}var y=f.V6Z+f.frH-1;function O(e,t){if(null==e||null==t)throw new Error("cmd and name required");return"".concat(e,":").concat(t)}var T=a.parse(location.search.slice(1)),m=parseInt(null!=T.rpc&&""!==T.rpc?T.rpc:f.V6Z,10),A=null;const S=new(function(e){!function(e,t){
if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&g(e,t)}(n,e);var t=I(n);function n(){E(this,n);return t.apply(this,arguments)}var r=n.prototype;r.connect=function(){var e=this;if(null==A)if(m>y){m=f.V6Z;this.emit("disconnected")}else{try{A=new WebSocket("ws://127.0.0.1:".concat(this.port,"/?v=").concat(f.X6Q))}catch(e){this.disconnect({code:f.$VG.CLOSE_ABNORMAL});return}if(null!=A){A.onmessage=function(t){var n;try{if("string"!=typeof t.data)throw new Error("payload data not a string");n=JSON.parse(t.data)}catch(t){e.emit("error",t);e.disconnect();return}var r=n.cmd,i=n.evt,o=n.nonce,u=n.data;if(r!==f.Etm.DISPATCH){var a=null;if(i===f.zMe.ERROR){a=new d.Z(u.code,u.message);u=null}e.emit(O(r,o),a,u)}else{if(i===f.zMe.READY){e.emit("connected");return}if(i===f.zMe.ERROR){e.emit("error",new d.Z(u.code,u.message));e.disconnect();return
}e.emit(O(r,i),u)}};A.onclose=A.onerror=function(t){return e.disconnect(t)}}}};r.disconnect=function(e){if(null!=e&&"code"in e&&[f.$VG.CLOSE_ABNORMAL,f.$VG.INVALID_CLIENTID].includes(e.code)){m++;A=null;this.connect()}else if(null!=A){this.emit("disconnected");A.close();A=null}};r.subscribe=function(e,t,n){this.on(O(f.Etm.DISPATCH,e),n);return this.request(f.Etm.SUBSCRIBE,t,e)};r.unsubscribe=function(e,t,n){this.removeListener(O(f.Etm.DISPATCH,e),n);return this.request(f.Etm.UNSUBSCRIBE,t,e)};r.request=function(e,t,n){var r=this;return new Promise((function(i,o){if(r.connected){var u=c().v4(),a=JSON.stringify({cmd:e,args:t,evt:n,nonce:u});r.once(O(e,u),(function(e,t){return null!=e?o(e):i(t)}));null==A||A.send(a)}else{r.once("connected",(function(){r.removeAllListeners("disconnected");i(r.request(e,t,n))}));r.once("disconnected",(function(){r.removeAllListeners("connected");o(new Error("disconnected during request"))}));r.connect()}}))};r.requestOnce=function(e,t,n){return s.Z.post({
url:"http://127.0.0.1:".concat(this.port,"/rpc?v=").concat(f.X6Q),body:{cmd:e,args:t,evt:n,nonce:c().v4()}}).then((function(e){var t=e.body,n=t.evt,r=t.data;if(n===f.zMe.ERROR)throw new d.Z(r.code,r.message);return r}))};r.requestRedirect=function(e,t,n){if("Chrome"===u().name&&parseInt(u().version,10)>=58)return this.requestOnce(e,t,n);var r=encodeURIComponent(JSON.stringify({cmd:e,args:t,evt:n,nonce:c().v4()})),i=encodeURIComponent("".concat(location.protocol,"//").concat(location.host).concat(location.pathname,"?done=true"));window.open("http://127.0.0.1:".concat(this.port,"/rpc?v=").concat(f.X6Q,"&payload=").concat(r,"&callback=").concat(i),"_self");return new Promise((function(){return null}))};!function(e,t,n){t&&_(e.prototype,t);n&&_(e,n)}(n,[{key:"port",get:function(){return m}},{key:"connected",get:function(){return null!=A&&A.readyState===WebSocket.OPEN}}]);return n}(i()))},587156:(e,t,n)=>{n.d(t,{$j:()=>f,zP:()=>E,lW:()=>p,sr:()=>h,Ty:()=>_})
;var r=n(772731),i=n(856640),o=n(661627),u=n(496486),a=n.n(u),l=n(368365);function c(e){return a().cloneDeepWith(e,(function(e){if((0,l.B)(e))return{__tag__:"bigflag",data:e.toJSON()}}))}function s(e){return a().cloneDeepWith(e,(function(e){if(null!=e&&"object"==typeof e&&"__tag__"in e&&"bigflag"===e.__tag__)return l.Z.deserialize(e.data)}))}var d=n(461061);function f(){r.default.connect()}function E(){r.default.disconnect()}function _(e,t){if(!__OVERLAY__)throw new i.Z(d.lTL.UNKNOWN_ERROR,"called from wrong app context");r.default.subscribe(d.zMe.OVERLAY,{token:t},(function(t){return e(s(t))}))}function h(e,t){if(__OVERLAY__)throw new i.Z(d.lTL.UNKNOWN_ERROR,"called from wrong app context");o.Z.setCommandHandler(d.Etm.OVERLAY,{scope:d.cEn,handler:function(n){var r=n.args;if(!t(r.token))throw new i.Z(d.lTL.INVALID_TOKEN,"Invalid RPC auth token provided");e(s(r))}});o.Z.setEventHandler(d.zMe.OVERLAY,{scope:d.cEn,handler:function(e){var n=e.args
;if(!t(n.token))throw new i.Z(d.lTL.INVALID_TOKEN,"Invalid RPC auth token provided")}})}function p(e){__OVERLAY__?r.default.request(d.Etm.OVERLAY,c(e)):o.Z.dispatchToSubscriptions(d.zMe.OVERLAY,{},c(e))}},623899:(e,t,n)=>{n.d(t,{i6:()=>b,ZP:()=>W});var r=n(791462),i=n(173436),o=n(631134),u=n(356004),a=n(940712),l=n(859023),c=n(882699),s=n(90816),d=n(188363),f=n(488839),E=n(461061),_=n(959797);function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function g(e){g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return g(e)}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){
return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){p(e,t,n[t])}))}return e}function I(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function y(e,t){return!t||"object"!==T(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function O(e,t){O=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return O(e,t)}var T=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function m(e){var t=function(){
if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var i=g(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return y(this,n)}}var A=864e5,S=(new Set([]),{currentFreeActivity:null,shouldShowFreeActivityIndicator:!1,lastFreeActivityRotationTimestampMs:null,seenActivities:[],shouldShowNewActivityIndicator:!1}),b=[],C=new Map,N=new Map,R=new Map,L=!1,D=new Map,P=new Map,w=new Map,M=new Map,U=new Map,Z=36e5,G=new Map;function k(e,t,n,r,i){var l,s=(0,d.Z)(n.application_id);if(null!=s){var h=u.Z.getBasicChannel(t);if(null!=h&&a.Z.canBasicChannel(E.Plq.CONNECT,h)){var p,g=function(e,t,n,r,i){var o,u,a=new Map;t.forEach((function(e){a.set(e.user_id,e)}));return I(v({},e),{
name:null!==(o=e.name)&&void 0!==o?o:_.Z.Messages.EMBEDDED_ACTIVITIES_UNKNOWN_ACTIVITY_NAME,type:null!==(u=e.type)&&void 0!==u?u:E.IIU.PLAYING,url:n,connections:a,guildId:r,channelId:i})}(n,r,s,e,t),y=o.default.getId(),O=C.get(g.application_id);r.some((function(e){return e.user_id===y}))&&null!=O&&C.set(O.application_id,v({},O,g));if(0===r.length&&(null==O?void 0:O.channelId)===t&&i===f.m2.ACTIVITY_TERMINATED_NO_ELIGIBLE_HOST&&(null==O?void 0:O.connections.has(y))&&!(null===(l=O.connections.get(y))||void 0===l?void 0:l.metadata.is_eligible_host)){c.S.dispatch(E.CkL.LAST_NITRO_HOST_LEFT,{applicationId:g.application_id});C.delete(g.application_id)}var T,m=(null!==(p=R.get(t))&&void 0!==p?p:[]).filter((function(e){return e.application_id!==n.application_id})),A=(null!==(T=N.get(e))&&void 0!==T?T:[]).filter((function(e){return!(e.application_id===n.application_id&&e.channelId===t)}));if(0!==r.length){m.push(g);A.push(g)}R.set(t,m);N.set(e,A)}}}function H(e){
e.embedded_activities.forEach((function(t){var n=t.channel_id,r=t.embedded_activity,i=t.connections;k(e.id,n,r,i)}))}var F=function(){S.shouldShowFreeActivityIndicator=!1;S.shouldShowNewActivityIndicator=!1};function j(){L=!1}function V(e,t){return"".concat(e,":").concat(t)}var B=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&O(e,t)}(n,e);var t=m(n);function n(){h(this,n);return t.apply(this,arguments)}var r=n.prototype;r.initialize=function(e){null!=e&&(S=e)};r.getState=function(){return S};r.shouldShowIndicatorForActivity=function(e){return(0,s.lm)(e)?e===S.currentFreeActivity&&S.shouldShowFreeActivityIndicator:S.shouldShowFreeActivityIndicator};r.getSelfEmbeddedActivityForChannel=function(e){var t;return null!==(t=Array.from(C.values()).find((function(t){var n=t.channelId;return e===n
})))&&void 0!==t?t:null};r.isLastEligibleHost=function(e,t){var n,r=null===(n=C.get(t))||void 0===n?void 0:n.connections,i=(0,s.lm)(r)?Array.from(r.values()):[],o=i.filter((function(e){return e.metadata.is_eligible_host}));return i.length>1&&1===o.length&&o.some((function(t){return t.user_id===e}))};r.getSelfEmbeddedActivities=function(){return C};r.getEmbeddedActivitiesForGuild=function(e){var t;return null!==(t=N.get(e))&&void 0!==t?t:b};r.getEmbeddedActivitiesForChannel=function(e){var t;return null!==(t=R.get(e))&&void 0!==t?t:b};r.getEmbeddedActivitiesByChannel=function(){return R};r.getEmbeddedActivityDurationMs=function(e,t){var n=G.get(V(e,t));return null==n?null:Date.now()-n};r.isLaunchingActivity=function(){return L};r.getBundleItems=function(e){var t;return null!==(t=D.get(e))&&void 0!==t?t:[]};r.getShelfFetchStatus=function(e){return P.get(e)};r.shouldFetchShelf=function(e){var t,n,r=null!==(t=P.get(e))&&void 0!==t?t:{isFetching:!1
},i=null!=(null==r?void 0:r.expiresAt)?r.expiresAt.getTime():0,o=Date.now(),u=o-(null!==(n=null==r?void 0:r.lastFetchTimestampMs)&&void 0!==n?n:0)>Z||i<=o;return!(null==r?void 0:r.isFetching)&&u};r.getOrientationLockStateForApp=function(e){var t;return null!==(t=w.get(e))&&void 0!==t?t:null};r.getPipOrientationLockStateForApp=function(e){var t;return null!==(t=M.get(e))&&void 0!==t?t:this.getOrientationLockStateForApp(e)};r.getPipModeForApp=function(e){var t;return null!==(t=U.get(e))&&void 0!==t?t:null};r.__getLocalVars=function(){return{MINIMUM_ROTATION_TIME_MS:A,persistedState:S,connectedActivities:C,embeddedActivitiesByGuild:N,embeddedActivitiesByChannel:R,isLaunchingActivity:L,shelfByGuild:D,shelfFetchStatus:P,orientationLockStateByApp:w,pipOrientationLockStateByApp:M,pipModeByApp:U,CACHE_TIME_MS:Z,activityJoinTimesMs:G,handleDismissFreeIndicator:F,instance:x}};return n}(r.ZP.PersistedStore);B.displayName="EmbeddedActivitiesStore";B.persistKey="EmbeddedActivities"
;B.migrations=[function(e){return I(v({},e),{seenFeaturedActivities:[],shouldShowNewActivityIndicator:!1})},function(e){delete e.seenFeaturedActivities;return I(v({},e),{seenActivities:[]})},function(e){return I(v({},e),{lastFreeActivityRotationTimestampMs:null})}];var x=new B(i.Z,{ACTIVITY_PIP_MODE_UPDATE:function(e){var t=e.applicationId,n=e.isPIPMode;U.set(t,n)},CONNECTION_OPEN_SUPPLEMENTAL:function(e){var t=e.guilds;R.clear();N.clear();t.forEach((function(e){return H(e)}))},GUILD_CREATE:function(e){H(e.guild)},EMBEDDED_ACTIVITY_LAUNCH_START:function(){L=!0},EMBEDDED_ACTIVITY_LAUNCH_SUCCESS:j,EMBEDDED_ACTIVITY_LAUNCH_FAIL:j,EMBEDDED_ACTIVITY_OPEN:function(e){var t,n,r=e.channelId,i=e.embeddedActivity,a=i.application_id,c=(0,d.Z)(a),s=o.default.getSessionId();if(null==c||null==s)return!1;if((null===(t=C.get(a))||void 0===t?void 0:t.channelId)===r)return!1;var f=null===(n=u.Z.getChannel(r))||void 0===n?void 0:n.getGuildId(),h=l.default.getCurrentUser();if(null==f||null==h)return!1
;var p,g=new Map,v=h.id;g.set(v,{user_id:v,metadata:{is_eligible_host:!1}});C.set(a,{guildId:f,channelId:r,application_id:a,name:null!==(p=i.name)&&void 0!==p?p:_.Z.Messages.EMBEDDED_ACTIVITIES_UNKNOWN_ACTIVITY_NAME,url:c,type:E.IIU.PLAYING,connections:g,connectedSince:Date.now(),connectedPremiumType:h.premiumType});G.set(V(r,a),Date.now())},EMBEDDED_ACTIVITY_CLOSE:function(e){var t=e.applicationId;C.delete(t)},EMBEDDED_ACTIVITY_INBOUND_UPDATE:function(e){k(e.guildId,e.channelId,e.embeddedActivity,e.connections,e.updateCode)},LOCAL_ACTIVITY_UPDATE:function(e){var t,n=e.activity;if(null==n)return!1;var r,i=C.get(null!==(t=n.application_id)&&void 0!==t?t:"");if(null==i)return!1;C.set(i.application_id,I(v({},i),{type:null!==(r=n.type)&&void 0!==r?r:i.type,secrets:n.secrets}))},EMBEDDED_ACTIVITY_SET_CONFIG:function(e){var t=e.applicationId,n=e.config,r=C.get(t);null!=r&&C.set(r.application_id,I(v({},r),{config:n}))},EMBEDDED_ACTIVITY_FETCH_SHELF:function(e){var t=e.guildId,n=P.get(t)
;P.set(t,{isFetching:!0,lastFetchTimestampMs:null==n?void 0:n.lastFetchTimestampMs})},EMBEDDED_ACTIVITY_FETCH_SHELF_SUCCESS:function(e){var t=e.guildId,n=e.items,r=e.expiresAt;D.set(t,n);var i=Date.now();n.forEach((function(e){var t=e.application_id;(0,s.lm)(e.new_until)&&new Date(e.new_until).getTime()>i&&!S.seenActivities.includes(t)&&(S.shouldShowNewActivityIndicator=!0);S.seenActivities.push(t)}));P.set(t,{isFetching:!1,lastFetchTimestampMs:i,expiresAt:r})},EMBEDDED_ACTIVITY_FETCH_SHELF_FAIL:function(e){var t=e.guildId,n=P.get(t);P.set(t,{isFetching:!1,lastFetchTimestampMs:null==n?void 0:n.lastFetchTimestampMs})},EMBEDDED_ACTIVITY_FREE_ACTIVITY_UPDATE:function(e){var t=e.freeActivityId,n=Date.now(),r=null===S.lastFreeActivityRotationTimestampMs?A:n-S.lastFreeActivityRotationTimestampMs;if(t!==S.currentFreeActivity&&r>=A){null!==S.currentFreeActivity&&(S.shouldShowFreeActivityIndicator=!0);S.currentFreeActivity=t;S.lastFreeActivityRotationTimestampMs=n}},
EMBEDDED_ACTIVITY_DISMISS_FREE_INDICATOR:F,EMBEDDED_ACTIVITY_SET_ORIENTATION_LOCK_STATE:function(e){var t=e.applicationId,n=e.lockState,r=e.pictureInPictureLockState;null==n?w.delete(t):w.set(t,n);null===r?M.delete(t):void 0!==r&&M.set(t,r)}});const W=x},188363:(e,t,n)=>{n.d(t,{Z:()=>i});var r=n(331792);function i(e){return r.Z.inTestModeForEmbeddedApplication(e)?r.Z.testModeOriginURL:function(e){var t=window.GLOBAL_ENV.ACTIVITY_APPLICATION_HOST;return null==t?null:"https://".concat(e,".").concat(t)}(e)}},190177:(e,t,n)=>{n.d(t,{fO:()=>r,dF:()=>i,_5:()=>o,Io:()=>u,f3:()=>a});var r,i;!function(e){e[e.STREAM=0]="STREAM";e[e.HIDDEN_STREAM=1]="HIDDEN_STREAM";e[e.USER=2]="USER";e[e.ACTIVITY=3]="ACTIVITY"}(r||(r={}));!function(e){e.NONE="NONE";e.AUTO="AUTO"}(i||(i={}));function o(e){return Boolean((null==e?void 0:e.type)===r.STREAM||(null==e?void 0:e.type)===r.HIDDEN_STREAM)}function u(e){return Boolean((null==e?void 0:e.type)===r.USER)}var a=320},131291:(e,t,n)=>{n.d(t,{qz:()=>R,sI:()=>C,
ZP:()=>D});var r=n(496486),i=n(105994),o=n(623899),u=n(997163),a=n(18416),l=n(631134),c=n(464623),s=n(356004),d=n(934714),f=n(248604),E=n(859023),_=n(569395),h=n(882687),p=n(570992),g=n(190177),v=n(461061),I=n(866452);function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1;r.configurable=!0;"value"in r&&(r.writable=!0);Object.defineProperty(e,r.key,r)}}function T(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){T(e,t,n[t])}))}return e}function A(e,t){t=null!=t?t:{}
;Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function S(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||b(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){if(e){if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name)
;return"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}var C,N="__EMBEDDED_ACTIVITIES__",R=function(e,t){return"".concat(e.toLowerCase().padEnd(32,"!")).concat(t.discriminator)};function L(e){switch(e.type){case g.fO.ACTIVITY:return"\0".concat(e.sortKey);case g.fO.HIDDEN_STREAM:case g.fO.STREAM:return"".concat(e.userVideo?"":"").concat(R(e.userNick,e.user),"");case g.fO.USER:var t,n,r="";(null===(t=e.voiceState)||void 0===t?void 0:t.selfVideo)?r="":(null===(n=e.voiceState)||void 0===n?void 0:n.selfStream)&&(r="");return"".concat(r).concat(R(e.userNick,e.user))}}!function(e){e.VIDEO="VIDEO";e.STREAM="STREAM";e.FILTERED="FILTERED";e.SPEAKING="SPEAKING"}(C||(C={}));var D=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);this.participants={};this.lastSpoke={};this.participantByIndex=new i.Z((function(e){var t,n=[]
;e.type===g.fO.USER&&e.speaking&&n.push(C.SPEAKING);if(e.type===g.fO.USER&&(null===(t=e.voiceState)||void 0===t?void 0:t.selfVideo)){n.push(C.VIDEO);e.localVideoDisabled||n.push(C.FILTERED)}else if((0,g._5)(e)){n.push(C.STREAM);e.type!==g.fO.HIDDEN_STREAM&&null!=e.streamId&&n.push(C.FILTERED)}return n}),L);this.channelId=t}var t=e.prototype;t.size=function(e){return this.participantByIndex.size(e)};t.toArray=function(e){return this.participantByIndex.values(e,!0)};t.rebuild=function(){var e=this,t=s.Z.getChannel(this.channelId);if(null==t||t.type===v.d4z.GUILD_TEXT)return!1;this.call=c.Z.getCall(this.channelId);if(t.isPrivate()&&(null==this.call||this.call.unavailable))return!1;var n=new Set(t.isGuildVocalOrThread()?Object.keys(h.Z.getVoiceStatesForChannel(t.id)):t.recipients);n.add(l.default.getId());a.Z.getAllActiveStreamsForChannel(this.channelId).forEach((function(e){var t=e.ownerId;return n.add(t)}));this.participantByIndex.clear();this.participants={};n.forEach((function(t){
return e.updateParticipant(t)}));this.updateEmbeddedActivities();return!0};t.getParticipant=function(e){var t;return null!==(t=this.participantByIndex.get(e))&&void 0!==t?t:null};t.updateEmbeddedActivities=function(){return this.updateParticipant(N)};t.hasEmbeddedActivity=function(){var e=this.participants.__EMBEDDED_ACTIVITIES__;return null!=e&&e.length>0};t.updateParticipant=function(e){var t=this,n=this.participants[e],r=e===N?this._getParticipantsForEmbeddedActivities():this._getParticipantsForUser(e);if(null==n&&0===r.length)return!1;null==n||n.forEach((function(e){t.participantByIndex.delete(e.id)}));r.forEach((function(e){t.participantByIndex.set(e.id,e)}));this.participants[e]=r;return!0};t.updateParticipantSpeaking=function(e){var t,n,r=this;return null!==(n=null===(t=this.participants[e])||void 0===t?void 0:t.reduce((function(t,n){if(n.type===g.fO.USER){var i,o=null==n||null===(i=n.voiceState)||void 0===i?void 0:i.isVoiceMuted(),u=f.Z.isSpeaking(e)&&!o
;u&&(r.lastSpoke[e]=Date.now());r.participantByIndex.set(n.id,A(m({},n),{speaking:u,lastSpoke:r.lastSpoke[e],soundsharing:f.Z.isSoundSharing(e)}));return!0}return t}),!1))&&void 0!==n&&n};t.updateParticipantQuality=function(e,t,n){var r,i,o=this;return null!==(i=null===(r=this.participants[e])||void 0===r?void 0:r.reduce((function(e,r){if(r.type===g.fO.STREAM){o.participantByIndex.set(r.id,A(m({},r),{maxResolution:t,maxFrameRate:n}));return!0}return e}),!1))&&void 0!==i&&i};t._getEmbeddedActivities=function(){var e=o.ZP.getEmbeddedActivitiesForChannel(this.channelId),t=o.ZP.getSelfEmbeddedActivityForChannel(this.channelId);return null==t?e:(0,r.uniqBy)(S(e).concat([t]),"application_id")};t._getParticipantsForEmbeddedActivities=function(){var e=this;return this._getEmbeddedActivities().map((function(t,n){var r,i,o,u;return{type:g.fO.ACTIVITY,id:t.application_id,activityType:t.type,activityUrl:t.url,participants:new Set(t.connections.keys()),
canJoin:null!=(null==t||null===(r=t.secrets)||void 0===r?void 0:r.join),joinSecret:null==t||null===(i=t.secrets)||void 0===i?void 0:i.join,guildId:null!==(u=null===(o=s.Z.getChannel(e.channelId))||void 0===o?void 0:o.getGuildId())&&void 0!==u?u:null,sortKey:n.toString()}}))};t._getParticipantsForUser=function(e){var t,n,r=[],i=E.default.getUser(e);if(null==i)return r;var o,c,v,y,O=h.Z.getVoiceStateForChannel(this.channelId,e),T=null!==(c=null===(t=this.call)||void 0===t||null===(n=t.ringing)||void 0===n?void 0:n.includes(e))&&void 0!==c&&c;if(null!=O||T){var S,b,C=null==O?void 0:O.isVoiceMuted();o=A(m({type:g.fO.USER},_.Z.getUserStreamData(e)),{user:i,id:i.id,voiceState:O,speaking:f.Z.isSpeaking(e)&&!C,lastSpoke:null!==(b=this.lastSpoke[e])&&void 0!==b?b:0,soundsharing:f.Z.isSoundSharing(e),ringing:T,userNick:p.Z.getName(null===(S=s.Z.getChannel(this.channelId))||void 0===S?void 0:S.getGuildId(),this.channelId,i),localVideoDisabled:d.Z.isLocalVideoDisabled(i.id)});r.push(o)}
var N=null!==(y=a.Z.getStreamForUser(e))&&void 0!==y?y:a.Z.getActiveStreamForUser(e);if(null!=N&&N.channelId===this.channelId){var R,L,D=(0,u.V9)(N),P=this.getParticipant(D),w=N.ownerId===l.default.getId()&&a.Z.isSelfStreamHidden(this.channelId),M=(null==P?void 0:P.type)===g.fO.STREAM?{maxResolution:null!=P.maxResolution?m({},P.maxResolution):void 0,maxFrameRate:P.maxFrameRate}:null;v=A(m({},_.Z.getUserStreamData(e,I.Yn.STREAM),M),{type:w?g.fO.HIDDEN_STREAM:g.fO.STREAM,id:D,userVideo:null!==(L=null==O?void 0:O.selfVideo)&&void 0!==L&&L,user:i,userNick:p.Z.getName(null===(R=s.Z.getChannel(this.channelId))||void 0===R?void 0:R.getGuildId(),this.channelId,i),stream:N});r.push(v)}return r};!function(e,t,n){t&&O(e.prototype,t);n&&O(e,n)}(e,[{key:"version",get:function(){return this.participantByIndex.version}}]);return e}()},67874:(e,t,n)=>{n.d(t,{Z:()=>_e})
;var r=n(441143),i=n.n(r),o=n(496486),u=n.n(o),a=n(791462),l=n(173436),c=n(623899),s=n(832691),d=n(430923),f=n(997163),E=n(18416),_=n(631134),h=n(464623),p=n(356004),g=n(379822),v=n(248604),I=n(859023),y=n(569395),O=n(882687),T=n(131291),m=n(190177),A=n(461061);function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function N(e){N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return N(e)}function R(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){
return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function L(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function D(e,t){D=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return D(e,t)}function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],u=!0,a=!1;try{for(n=n.call(e);!(u=(r=n.next()).done);u=!0){o.push(r.value);if(t&&o.length===t)break}}catch(e){a=!0;i=e}finally{try{u||null==n.return||n.return()}finally{if(a)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1)
;"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var w=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=N(e);if(t){var i=N(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return L(this,n)}}var U=new s.Z("ChannelRTCStore"),Z=Object.freeze([]),G=[],k={},H={},F={},j={},V={},B={},x={},W={},Y={},K={}
;function z(e){var t=k[e];if(null==t){t=new T.ZP(e);k[e]=t}return t}function q(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:G;return t.reduce((function(t,n){var r=z(n);if(!e(r))return t;re(n);ne(n);return!0}),!1)}function Q(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:G;return q((function(t){return t.updateParticipant(e)}),t)}function X(e){var t,n=p.Z.getChannel(e),r=(null==n?void 0:n.isDM())?m.dF.AUTO:m.dF.NONE;return null!==(t=H[e])&&void 0!==t?t:[r,m.dF.NONE]}function J(e){return null!=H[e]&&P(H[e],1)[0]!==m.dF.NONE}function $(e){null==F[e]&&(F[e]={gridDurationMs:0,focusDurationMs:0,toggleCount:0,lastUpdate:0});var t=F[e],n=performance.now(),r=J(e);if(t.lastUpdate>0){var i=n-t.lastUpdate;t[r?"focusDurationMs":"gridDurationMs"]+=i}t.lastUpdate=n}function ee(e,t){$(e);var n=J(e);null==t?delete H[e]:H[e]=t;n!==J(e)&&F[e].toggleCount++}function te(e){return e.size(T.sI.STREAM)>0||e.size(T.sI.VIDEO)>0||e.hasEmbeddedActivity()}function ne(e){
var t=_.default.getId(),n=z(e);if(0!==n.size()&&g.Z.getVoiceChannelId()===e){var r=m.dF.NONE,o=n.toArray(T.sI.STREAM).find((function(e){return e.type===m.fO.STREAM&&E.Z.getActiveStreamForStreamKey(e.id)}));if(null!=o){i()(o.type===m.fO.STREAM,"Impossible condition");r=o.id}else if(1===n.size())r=t;else if(1===n.size(T.sI.VIDEO)){r=P(n.toArray(T.sI.VIDEO),1)[0].id}else{var u,a=n.toArray().find((function(e){return e.type===m.fO.USER&&e.id!==t&&!e.ringing}));r=null!==(u=null==a?void 0:a.id)&&void 0!==u?u:t}var l=P(X(e),1)[0];if(l!==m.dF.AUTO&&l!==m.dF.NONE){var c=n.getParticipant(l);(null==c||c.type===m.fO.STREAM&&null==E.Z.getActiveStreamForStreamKey(c.id))&&(l=m.dF.NONE)}ee(e,[l,r])}else ee(e,null)}function re(e){var t=z(e);if(0!==t.size()){var n=de(e)||te(t)?A.WtW.VIDEO:A.WtW.VOICE;if(n===A.WtW.VOICE){delete j[e];delete V[e]}else j[e]=n}}function ie(e){delete k[e];delete H[e];delete j[e];delete V[e]}function oe(){return q((function(e){return e.rebuild()}),function(){
var e=[],t=g.Z.getChannelId();null!=t&&e.push(t);var n=g.Z.getVoiceChannelId();null==n||e.includes(n)||e.push(n);var r=d.Z.getRemoteSessionId(),i=O.Z.getVoiceStateForSession(_.default.getId(),r);null!=(null==i?void 0:i.channelId)&&e.push(null==i?void 0:i.channelId);u().difference(G,e).forEach(ie);var o=u().difference(e,G);G=e;return o}())}function ue(){return q((function(e){return e.updateEmbeddedActivities()}))}function ae(e){return Q(e.user.id)}function le(e){return q((function(e){return e.rebuild()}),[e.channelId])}function ce(e){var t=e.channel.id;delete W[t];delete Y[t];return ie(t)}function se(e){var t=e.streamKey,n=(0,f.my)(t),r=n.channelId;return Q(n.ownerId,[r])}function de(e){var t;return Boolean(null===(t=p.Z.getChannel(e))||void 0===t?void 0:t.isGuildVoice())}function fe(e){var t;return Boolean(null===(t=p.Z.getChannel(e))||void 0===t?void 0:t.isGuildVocal())}var Ee=function(e){!function(e,t){
if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&D(e,t)}(n,e);var t=M(n);function n(){b(this,n);return t.apply(this,arguments)}var r=n.prototype;r.initialize=function(){this.waitFor(E.Z,_.default,h.Z,p.Z,c.ZP,g.Z,v.Z,I.default,y.Z,O.Z);this.syncWith([c.ZP],ue);this.syncWith([d.Z],oe)};r.getParticipantsVersion=function(e){return z(e).version};r.getParticipants=function(e){var t;return null!==(t=z(e).toArray())&&void 0!==t?t:Z};r.getSpeakingParticipants=function(e){var t;return null!==(t=z(e).toArray(T.sI.SPEAKING))&&void 0!==t?t:Z};r.getFilteredParticipants=function(e){return x[e]?z(e).toArray(T.sI.FILTERED):z(e).toArray()};r.getVideoParticipants=function(e){var t;return null!==(t=z(e).toArray(T.sI.VIDEO))&&void 0!==t?t:Z};r.getStreamParticipants=function(e){var t;return null!==(t=z(e).toArray(T.sI.STREAM))&&void 0!==t?t:Z}
;r.getParticipant=function(e,t){return z(e).getParticipant(t)};r.getUserParticipantCount=function(e){var t=z(e);return t.size()-t.size(T.sI.STREAM)};r.getParticipantsOpen=function(e){var t;return null===(t=B[e])||void 0===t||t};r.getVoiceParticipantsHidden=function(e){var t;return null!==(t=x[e])&&void 0!==t&&t};r.getSelectedParticipantId=function(e){var t=P(X(e),2),n=t[0],r=t[1];return n===m.dF.NONE?null:n!==m.dF.AUTO?n:r===m.dF.NONE||r===m.dF.AUTO?null:r};r.getSelectedParticipant=function(e){var t=this.getSelectedParticipantId(e);return null==t?null:z(e).getParticipant(t)};r.getSelectedParticipantStats=function(e){var t=F[e];return null==t?{}:{view_mode_grid_duration_ms:Math.floor(t.gridDurationMs),view_mode_focus_duration_ms:Math.floor(t.focusDurationMs),view_mode_toggle_count:t.toggleCount}};r.getMode=function(e){var t;return null!==(t=j[e])&&void 0!==t?t:de(e)?A.WtW.VIDEO:A.WtW.VOICE};r.getLayout=function(e){
var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:A.IlC.APP;return __OVERLAY__?A.AEg.NORMAL:null!==(n=null===(t=V[e])||void 0===t?void 0:t[r])&&void 0!==n?n:fe(e)?A.AEg.NO_CHAT:A.AEg.NORMAL};r.getStageStreamSize=function(e){return Y[e]};r.getStageVideoLimitBoostUpsellDismissed=function(e){return K[e]};r.getChatOpen=function(e){return W[e]};r.isFullscreenInContext=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A.IlC.APP;return Object.values(V).some((function(t){return t[e]===A.AEg.FULL_SCREEN}))};r.__getLocalVars=function(){return{logger:U,activeChannelIds:G,rtcParticipants:k,selectedParticipantIds:H,selectedParticipantStats:F,modes:j,layouts:V,participantsOpen:B,voiceParticipantsHidden:x,chatOpen:W,stageStreamSize:Y,stageVideoLimitBoostUpsellDismissed:K}};return n}(a.ZP.Store);Ee.displayName="ChannelRTCStore";const _e=new Ee(l.Z,{CONNECTION_OPEN:oe,CONNECTION_OPEN_SUPPLEMENTAL:oe,THREAD_LIST_SYNC:oe,OVERLAY_INITIALIZE:oe,
VOICE_CHANNEL_SELECT:function(e){var t=e.channelId,n=e.currentVoiceChannelId;if(null!=t)delete F[t];else if(null!=n){delete W[n];delete Y[n];$(n)}return oe()},CHANNEL_SELECT:function(e){var t=e.channelId,n=e.messageId,r=oe(),i=p.Z.getChannel(t);if(null!=t&&null!=n&&((null==i?void 0:i.type)===A.d4z.GUILD_VOICE||(null==i?void 0:i.type)===A.d4z.GUILD_STAGE_VOICE)&&!W[t]){W[t]=!0;return!0}return r},CHANNEL_RTC_ACTIVE_CHANNELS:oe,VOICE_STATE_UPDATES:function(e){var t=e.voiceStates,n=e.initial;return t.reduce((function(e,t){var r=t.userId,i=t.channelId;return n&&null!=i&&!G.includes(i)?e:Q(r)||e}),!1)},CHANNEL_CREATE:function(e){var t=e.channel;if(t.type===A.d4z.GROUP_DM){var n=t.originChannelId;if(null!=n){var r,i;V[t.id]=C({},A.IlC.APP,null!==(i=null===(r=V[n])||void 0===r?void 0:r[A.IlC.APP])&&void 0!==i?i:A.AEg.NORMAL);return!0}}return!1},CHANNEL_DELETE:ce,THREAD_DELETE:ce,CALL_CREATE:le,CALL_UPDATE:le,CALL_DELETE:function(e){return ie(e.channelId)},
CHANNEL_RTC_SELECT_PARTICIPANT:function(e){var t=e.channelId,n=e.id,r=z(t);null==n&&r.toArray(T.sI.STREAM).forEach((function(e){(0,m._5)(e)&&r.updateParticipant(e.user.id)}));var i=P(X(t),2)[1];ee(t,[null!=n?n:m.dF.NONE,i]);if((0,f.DB)(n)){try{var o=(0,f.my)(n).ownerId;o===_.default.getId()&&Q(o,[t])}catch(e){U.warn("INVALID STREAM KEY FORMAT ".concat(n),e)}te(r)||(B[t]=!1)}},CHANNEL_RTC_UPDATE_LAYOUT:function(e){var t=e.channelId,n=e.layout,r=e.appContext;V[t]=R(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){C(e,t,n[t])}))}return e}({},V[t]),C({},r,n))},CHANNEL_RTC_UPDATE_PARTICIPANTS_OPEN:function(e){var t=e.channelId,n=e.participantsOpen;B[t]=n},CHANNEL_RTC_UPDATE_VOICE_PARTICIPANTS_HIDDEN:function(e){
var t=e.channelId,n=e.voiceParticipantsHidden;x[t]=n},CHANNEL_RTC_UPDATE_STAGE_STREAM_SIZE:function(e){var t=e.channelId,n=e.large;Y[t]=n},CHANNEL_RTC_UPDATE_STAGE_VIDEO_LIMIT_BOOST_UPSELL_DISMISSED:function(e){var t=e.channelId,n=e.dismissed;K[t]=n},STREAM_UPDATE_SELF_HIDDEN:function(e){var t=e.channelId,n=e.selfStreamHidden,r=_.default.getId();if(n){var i=P(X(t),1)[0];(0,f.DB)(i)&&i.includes(r)&&ee(t,null)}Q(r,[t])},CHANNEL_RTC_UPDATE_CHAT_OPEN:function(e){var t=e.channelId,n=e.chatOpen;W[t]=n},RTC_CONNECTION_VIDEO:function(e){var t=e.channelId;return Q(e.userId,[t])},AUDIO_SET_LOCAL_VIDEO_DISABLED:function(e){return Q(e.userId)},MEDIA_ENGINE_VIDEO_SOURCE_QUALITY_CHANGED:function(e){var t=e.channelId,n=e.senderUserId,r=e.maxResolution,i=e.maxFrameRate;return q((function(e){return e.updateParticipantQuality(n,r,i)}),[t])},STREAM_CLOSE:se,STREAM_DELETE:se,STREAM_WATCH:function(e){var t=e.streamKey,n=(0,f.my)(t),r=n.channelId;return Q(n.ownerId,[r])},SPEAKING:function(e){var t=e.userId
;return q((function(e){return e.updateParticipantSpeaking(t)}))},USER_UPDATE:ae,GUILD_MEMBER_UPDATE:ae})},538796:(e,t,n)=>{n.d(t,{p:()=>r,z:()=>i});var r;!function(e){e.CANCEL="cancel";e.ERROR="error";e.EXPIRED="expired"}(r||(r={}));function i(e){return{captchaService:e.captcha_service,sitekey:e.captcha_sitekey,options:{rqdata:e.captcha_rqdata,rqtoken:e.captcha_rqtoken}}}},500847:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(368365),i=n(653772),o=n(461061),u=[o.d4z.GUILD_TEXT,o.d4z.GUILD_VOICE,o.d4z.GUILD_ANNOUNCEMENT,o.d4z.GUILD_FORUM,o.d4z.PUBLIC_THREAD,o.d4z.PRIVATE_THREAD],a=r.Z.combine(o.Plq.VIEW_CHANNEL,o.Plq.SEND_MESSAGES);function l(e){if(null==e||!u.includes(e.type))return[];var t=i.Z.getGuild(e.guild_id);return null==t?[]:Object.values(e.permissionOverwrites).filter((function(e){var n,i;return 0===e.type&&null===(null===(n=t.roles[e.id])||void 0===n||null===(i=n.tags)||void 0===i?void 0:i.guild_connections)&&!r.Z.hasAny(e.deny,a)})).map((function(e){return t.roles[e.id]
})).filter((function(e){return null!=e}))}},789105:(e,t,n)=>{n.d(t,{rd:()=>l,HK:()=>c,Do:()=>s});var r=n(277563),i=n(791462),o=n(495798);function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){var n=a((0,i.e7)([o.Z],(function(){return o.Z.getHighlightedMessageIds(e)}),[e]))
;n.sort(r.default.compare);return n.filter((function(e){return r.default.compare(e,t)>0}))}function c(e,t){var n=a(o.Z.getHighlightedMessageIds(e));n.sort(r.default.compare);return n.filter((function(e){return r.default.compare(e,t)>0}))}function s(e,t){var n=o.Z.getHighlightedMessageIds(e),i=!0,u=!1,a=void 0;try{for(var l,c=n[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;if(r.default.compare(s,t)>0)return!0}}catch(e){u=!0;a=e}finally{try{i||null==c.return||c.return()}finally{if(u)throw a}}return!1}},842667:(e,t,n)=>{n.d(t,{OL:()=>i,hB:()=>o});var r=(0,n(553494).B)({kind:"user",id:"2022-07_channel_highlights",label:"Channel Highlights",defaultConfig:{showChannelHighlights:!1},treatments:[{id:1,label:"Show Channel Highlights",config:{showChannelHighlights:!0}}]});function i(){return r.useExperiment({}).showChannelHighlights}function o(){return r.getCurrentConfig({}).showChannelHighlights}},495798:(e,t,n)=>{n.d(t,{Z:()=>A})
;var r=n(791462),i=n(173436),o=n(664970),u=n(1812),a=n(390504),l=n(859023),c=n(932847),s=n(461061);function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e){f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return f(e)}function E(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _(e,t){_=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return _(e,t)}var h=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){
var n,r=f(e);if(t){var i=f(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return E(this,n)}}var g=new Set,v={},I={},y={},O={},T={};var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&_(e,t)}(n,e);var t=p(n);function n(){d(this,n);return t.apply(this,arguments)}var r=n.prototype;r.initialize=function(){this.waitFor(a.Z,u.ZP)};r.getHighlightedMessageIds=function(e){var t;return null!==(t=v[e])&&void 0!==t?t:g};r.getTempHighlightedMessageIds=function(e){var t;return null!==(t=O[e])&&void 0!==t?t:g};r.getHighlightedMessageIdCount=function(e){var t,n;return null!==(n=null===(t=v[e])||void 0===t?void 0:t.size)&&void 0!==n?n:0};r.getLastFetchedMillis=function(e){return y[e]};r.isLoading=function(e){return"loading"===I[e]};r.__getLocalVars=function(){return{
MAX_HIGHLIGHTS_PER_CHANNEL:5,EMPTY_SET:g,highlights:v,fetchStatusByGuild:I,lastFetchedMillisByGuild:y,temporaryHighlights:O,loadIds:T}};return n}(r.ZP.Store);m.displayName="ChannelHighlightsStore";const A=new m(i.Z,{CHANNEL_HIGHLIGHTS_FETCH_START:function(e){var t=e.guildId;I[t]="loading"},CHANNEL_HIGHLIGHTS_FETCH_SUCCESS:function(e){var t=e.guildId,n=e.data;y[t]=Date.now();var r=l.default.getCurrentUser();if(null==n||null==r)return!1;T[t]=n.load_id;n.channels.forEach((function(e){v[e.channel_id]=new Set(e.highlighted_message_ids.slice(0,5))}));c.default.track(s.rMx.GUILD_CHANNEL_HIGHLIGHTS_LOADED,{guild_id:t,num_channels_highlighted:n.channels.length});delete I[t]},SIDEBAR_VIEW_CHANNEL:function(e){var t=e.guildId,n=e.details;(null==n?void 0:n.type)===o.F.HOME&&null!=t&&(O[t]=new Set(n.highlightMessageIds))}})},144857:(e,t,n)=>{n.d(t,{bO:()=>p,SJ:()=>g,O1:()=>h,xp:()=>v,AK:()=>I,n_:()=>y,kQ:()=>O,Ur:()=>T})
;var r=n(441143),i=n.n(r),o=n(496486),u=n.n(o),a=n(608575),l=n(394003),c=n(332233),s=n(500847),d=n(653772),f=n(995740),E=n(461061),_=n(959797);var h,p=function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}({},E.ABu.INSTAGRAM,["1036753656588017764"]),g=["426537812993638400","1042836142560645130","296023718839451649","979802510766268446","1031611223235637258","512333785338216465"];!function(e){e[e.AND=0]="AND";e[e.OR=1]="OR"}(h||(h={}));function v(e){var t=a.parse(e,!0).query,n=t.code,r=t.state,o=t.error,u=t.error_description;i()(!Array.isArray(n),"Received multiple query param values for code");i()(!Array.isArray(r),"Received multiple query param values for state");i()(!Array.isArray(o),"Received multiple query param values for error");i()(!Array.isArray(u),"Received multiple query param values for error_description");return{code:n,state:r,error:o,errorDescription:u}}function I(){
var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return u().sortBy(c.Z.filter((function(n){return!!(n.enabled||null!=e&&e.has(n.type))&&(null==t||!t.has(n.type))})),[function(e){return null!=n&&n.has(e.type)},function(e){return e.hasMetadata},function(e){return!E.vbS.has(e.type)},function(e){return e.name}])}function y(e){var t=e.connectionType,n=e.connectionMetadataField,r=e.operator,i=e.operatorText,o=e.value,u=null,a=Math.round(Number(o));switch(r){case f.iO.EQUAL:u=_.Z.Messages.CONNECTIONS_ROLE_POPOUT_MUST_BE;t===E.ABu.PAYPAL&&n===f.PC.PAYPAL_VERIFIED&&(u=_.Z.Messages.CONNECTIONS_ROLE_POPOUT_MUST_HAVE_A);break;case f.iO.NOT_EQUAL:u=_.Z.Messages.CONNECTIONS_ROLE_POPOUT_MUST_NOT_BE;break;case f.iO.LESS_THAN:u=_.Z.Messages.CONNECTIONS_ROLE_POPOUT_MUST_HAVE_AT_MOST;a=Math.max(0,a-1);break;case f.iO.GREATER_THAN:
u=_.Z.Messages.CONNECTIONS_ROLE_POPOUT_MUST_HAVE_AT_LEAST;a=Math.max(0,a+1);break;case void 0:case null:return null}null!=i&&(u=i);if(u instanceof l._H&&null!=r)switch(t){case E.ABu.REDDIT:switch(n){case f.PC.CREATED_AT:u=u.format({platformQuantityHook:function(){return _.Z.Messages.CONNECTIONS_ROLE_RULE_ACCOUNT_AGE.format({days:a})}});break;case f.PC.REDDIT_TOTAL_KARMA:u=u.format({platformQuantityHook:function(){return _.Z.Messages.CONNECTIONS_ROLE_RULE_REDDIT_KARMA.format({karma:a})}});break;case f.PC.REDDIT_GOLD:u=u.format({platformQuantityHook:function(){return _.Z.Messages.CONNECTIONS_ROLE_RULE_REDDIT_GOLD}});break;case f.PC.REDDIT_MOD:u=u.format({platformQuantityHook:function(){return _.Z.Messages.CONNECTIONS_ROLE_RULE_REDDIT_MODERATOR}});break;default:return null}break;case E.ABu.STEAM:switch(n){case f.PC.CREATED_AT:u=u.format({platformQuantityHook:function(){return _.Z.Messages.CONNECTIONS_ROLE_RULE_ACCOUNT_AGE.format({days:a})}});break;case f.PC.STEAM_GAME_COUNT:u=u.format({
platformQuantityHook:function(){return _.Z.Messages.CONNECTIONS_ROLE_RULE_STEAM_GAMES.format({count:a})}});break;case f.PC.STEAM_ITEM_COUNT_TF2:u=u.format({platformQuantityHook:function(){return _.Z.Messages.CONNECTIONS_ROLE_RULE_STEAM_TF2_ITEMS.format({count:a})}});break;case f.PC.STEAM_ITEM_COUNT_DOTA2:u=u.format({platformQuantityHook:function(){return _.Z.Messages.CONNECTIONS_ROLE_RULE_STEAM_DOTA2_ITEMS.format({count:a})}});break;default:return null}break;case E.ABu.TWITTER:switch(n){case f.PC.CREATED_AT:u=u.format({platformQuantityHook:function(){return _.Z.Messages.CONNECTIONS_ROLE_RULE_ACCOUNT_AGE.format({days:a})}});break;case f.PC.TWITTER_VERIFIED:u=u.format({platformQuantityHook:function(){return _.Z.Messages.CONNECTIONS_ROLE_RULE_TWITTER_VERIFIED}});break;case f.PC.TWITTER_FOLLOWERS_COUNT:u=u.format({platformQuantityHook:function(){return _.Z.Messages.CONNECTIONS_ROLE_RULE_TWITTER_FOLLOWERS.format({count:a})}});break;case f.PC.TWITTER_STATUSES_COUNT:u=u.format({
platformQuantityHook:function(){return _.Z.Messages.CONNECTIONS_ROLE_RULE_TWITTER_STATUSES.format({count:a})}});break;default:return null}break;case E.ABu.PAYPAL:switch(n){case f.PC.CREATED_AT:u=u.format({platformQuantityHook:function(){return _.Z.Messages.CONNECTIONS_ROLE_RULE_ACCOUNT_AGE.format({days:a})}});break;case f.PC.PAYPAL_VERIFIED:u=u.format({platformQuantityHook:function(){return _.Z.Messages.CONNECTIONS_ROLE_RULE_PAYPAL_VERIFIED}});break;default:return null}break;case E.ABu.EBAY:switch(n){case f.PC.CREATED_AT:u=u.format({platformQuantityHook:function(){return _.Z.Messages.CONNECTIONS_ROLE_RULE_ACCOUNT_AGE.format({days:a})}});break;case f.PC.EBAY_TOP_RATED_SELLER:u=u.format({platformQuantityHook:function(){return _.Z.Messages.CONNECTIONS_EBAY_TOP_RATED_SELLER}});break;case f.PC.EBAY_POSITIVE_FEEDBACK_PERCENTAGE:u=u.format({platformQuantityHook:function(){return _.Z.Messages.CONNECTIONS_ROLE_RULE_EBAY_POSITIVE_FEEDBACK_PERCENTAGE.format({value:a})}});break
;case f.PC.EBAY_UNIQUE_POSITIVE_FEEDBACK_COUNT:u=u.format({platformQuantityHook:function(){return _.Z.Messages.CONNECTIONS_ROLE_RULE_EBAY_UNIQUE_POSITIVE_FEEDBACK_COUNT.format({count:a})}});break;case f.PC.EBAY_UNIQUE_NEGATIVE_FEEDBACK_COUNT:u=u.format({platformQuantityHook:function(){return _.Z.Messages.CONNECTIONS_ROLE_RULE_EBAY_UNIQUE_NEGATIVE_FEEDBACK_COUNT.format({count:a})}});break;default:return null}break;case E.ABu.INSTAGRAM:if(n!==f.PC.INSTAGRAM_MEDIA_COUNT)return null;u=u.format({platformQuantityHook:function(){return _.Z.Messages.CONNECTIONS_ROLE_RULE_INSTAGRAM_POSTS.format({count:a})}});break;case E.ABu.TIKTOK:switch(n){case f.PC.TIKTOK_VERIFIED:u=u.format({platformQuantityHook:function(){return _.Z.Messages.CONNECTIONS_ROLE_RULE_TIKTOK_VERIFIED}});break;case f.PC.TIKTOK_FOLLOWER_COUNT:u=u.format({platformQuantityHook:function(){return _.Z.Messages.CONNECTIONS_ROLE_RULE_TIKTOK_FOLLOWER_COUNT.format({count:a})}});break;case f.PC.TIKTOK_FOLLOWING_COUNT:u=u.format({
platformQuantityHook:function(){return _.Z.Messages.CONNECTIONS_ROLE_RULE_TIKTOK_FOLLOWING_COUNT.format({count:a})}});break;case f.PC.TIKTOK_LIKES_COUNT:u=u.format({platformQuantityHook:function(){return _.Z.Messages.CONNECTIONS_ROLE_RULE_TIKTOK_LIKES_COUNT.format({count:a})}});break;default:return null}break;default:return null}return u}function O(e){return Object.values(e.roles).some((function(e){var t;return null===(null===(t=e.tags)||void 0===t?void 0:t.guild_connections)}))}function T(e){var t=e.guildMember,n=e.guild,r=e.channel,o=e.onlyChannelConnectionRoles,a=void 0!==o&&o;if(null==t)return null;null==n&&null!=r&&(n=d.Z.getGuild(r.getGuildId()));if(null==n)return null;var l,c=t.roles.map((function(e){var t;return null==n||null===(t=n.roles)||void 0===t?void 0:t[e]})).filter((function(e){var t;return null===(null==e||null===(t=e.tags)||void 0===t?void 0:t.guild_connections)})).sort((function(e,t){i()(null!=e&&null!=t,"roleA or roleB is null");return t.position-e.position
})),f=u().intersection(c,(0,s.Z)(r));if(f.length>0){var E;return null!==(E=f[0])&&void 0!==E?E:null}return a?null:null!==(l=c[0])&&void 0!==l?l:null}},995740:(e,t,n)=>{n.d(t,{iO:()=>r,PC:()=>i,Kt:()=>u,xn:()=>o});var r,i;!function(e){e[e.EQUAL=1]="EQUAL";e[e.NOT_EQUAL=2]="NOT_EQUAL";e[e.LESS_THAN=3]="LESS_THAN";e[e.GREATER_THAN=4]="GREATER_THAN"}(r||(r={}));!function(e){e.CREATED_AT="created_at";e.REDDIT_TOTAL_KARMA="total_karma";e.REDDIT_GOLD="gold";e.REDDIT_MOD="mod";e.STEAM_GAME_COUNT="game_count";e.STEAM_ITEM_COUNT_TF2="item_count_tf2";e.STEAM_ITEM_COUNT_DOTA2="item_count_dota2";e.TWITTER_VERIFIED="verified";e.TWITTER_FOLLOWERS_COUNT="followers_count";e.TWITTER_STATUSES_COUNT="statuses_count";e.PAYPAL_VERIFIED="verified";e.EBAY_POSITIVE_FEEDBACK_PERCENTAGE="positive_feedback_percentage";e.EBAY_TOP_RATED_SELLER="top_rated_seller";e.EBAY_UNIQUE_NEGATIVE_FEEDBACK_COUNT="unique_negative_feedback_count";e.EBAY_UNIQUE_POSITIVE_FEEDBACK_COUNT="unique_positive_feedback_count"
;e.TIKTOK_VERIFIED="verified";e.TIKTOK_FOLLOWER_COUNT="follower_count";e.TIKTOK_FOLLOWING_COUNT="following_count";e.TIKTOK_LIKES_COUNT="likes_count";e.INSTAGRAM_MEDIA_COUNT="media_count"}(i||(i={}));var o,u="application";!function(e){e[e.INTEGER_LESS_THAN_EQUAL=1]="INTEGER_LESS_THAN_EQUAL";e[e.INTEGER_GREATER_THAN_EQUAL=2]="INTEGER_GREATER_THAN_EQUAL";e[e.INTEGER_EQUAL=3]="INTEGER_EQUAL";e[e.INTEGER_NOT_EQUAL=4]="INTEGER_NOT_EQUAL";e[e.DATETIME_LESS_THAN_EQUAL=5]="DATETIME_LESS_THAN_EQUAL";e[e.DATETIME_GREATER_THAN_EQUAL=6]="DATETIME_GREATER_THAN_EQUAL";e[e.BOOLEAN_EQUAL=7]="BOOLEAN_EQUAL";e[e.BOOLEAN_NOT_EQUAL=8]="BOOLEAN_NOT_EQUAL"}(o||(o={}))},997163:(e,t,n)=>{n.d(t,{DB:()=>u,my:()=>a,V9:()=>l});var r=n(855846);function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]
;if(null!=n){var r,i,o=[],u=!0,a=!1;try{for(n=n.call(e);!(u=(r=n.next()).done);u=!0){o.push(r.value);if(t&&o.length===t)break}}catch(e){a=!0;i=e}finally{try{u||null==n.return||n.return()}finally{if(a)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e){return null!=e&&(e.startsWith(r.lo.GUILD)||e.startsWith(r.lo.CALL))}function a(e){var t=e.split(":"),n=t[0];switch(n){case r.lo.GUILD:var i=o(t,4);return{streamType:i[0],guildId:i[1],channelId:i[2],ownerId:i[3]};case r.lo.CALL:var u=o(t,3);return{streamType:u[0],channelId:u[1],
ownerId:u[2]};default:throw new Error("Unknown stream type ".concat(n))}}function l(e){var t=e.streamType,n=e.guildId,i=e.channelId,o=e.ownerId;switch(t){case r.lo.GUILD:return[t,n,i,o].join(":");case r.lo.CALL:return[t,i,o].join(":");default:throw new Error("Unknown stream type ".concat(t))}}},337160:(e,t,n)=>{n.d(t,{JL:()=>h,P9:()=>p,p9:()=>g,wq:()=>v,h_:()=>I});var r,i=n(368365),o=n(791462),u=n(430923),a=n(1812),l=n(653772),c=n(940712),s=n(882687),d=n(268333),f=n(461061),E=n(959797),_=function(e,t){return e.isPrivate()||t.can(i.Z.combine(f.Plq.CONNECT,f.Plq.VIEW_CHANNEL),e)};function h(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(e.isPrivate())return!0;var i,o=t.getGuild(e.getGuildId()),u=null!==(i=null==o?void 0:o.maxStageVideoChannelUsers)&&void 0!==i?i:0;return!(e.isGuildStageVoice()&&u<=0)&&(!(r&&!_(e,n))&&(!!n.can(f.Plq.STREAM,e)&&(null!=o&&o.afkChannelId!==e.id)))}function p(e){switch(e){case r.REMOTE_MODE:
return E.Z.Messages.CONSOLE_STREAM_UNAVAILABLE;case r.CHANNEL_FULL:return E.Z.Messages.UNABLE_TO_JOIN_CHANNEL_FULL_MODAL_HEADER;case r.NO_PERMISSION:return E.Z.Messages.STREAM_NO_PERMISSION_CTA;default:return E.Z.Messages.WATCH_STREAM}}!function(e){e[e.REMOTE_MODE=0]="REMOTE_MODE";e[e.CHANNEL_FULL=1]="CHANNEL_FULL";e[e.NO_PERMISSION=2]="NO_PERMISSION"}(r||(r={}));function g(e,t,n,i,o){var u;if(null==e)return[!1,r.NO_PERMISSION];var a=t.isInChannel(e.id),l=(0,d.rY)(e,t,n),c=_(e,i),s=null!=o.getAwaitingRemoteSessionInfo()||null!=o.getRemoteSessionId();s?u=r.REMOTE_MODE:c||a?l&&!a&&(u=r.CHANNEL_FULL):u=r.NO_PERMISSION;return[!__OVERLAY__&&!s&&(a||c&&!l),u]}function v(e){return(0,o.Wu)([s.Z,l.Z,c.Z,u.Z],(function(){return g(e,s.Z,l.Z,c.Z,u.Z)}))}function I(e,t,n){var r=[],i=!0,o=!1,u=void 0;try{for(var l,c=e[a.Zb][Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value.channel;h(s,t,n)&&r.push(s)}}catch(e){o=!0;u=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw u}}
return r}},945296:(e,t,n)=>{n.d(t,{Z:()=>i});var r=n(866452);function i(e){return e.supportsInApp(r.AN.VIDEO)}},487657:(e,t,n)=>{n.d(t,{Z:()=>r});const r=(0,n(553494).B)({kind:"user",id:"2022-09_community_bleeding_edge",label:"(Staff only) Bleeding edge experiment for Community 2.0 features",defaultConfig:{enableOptIn:!1,enableCommunityOnboarding:!1,enableChannelHighlights:!1,enableGuildUnreads:!1,enableGuildHome:!1},treatments:[{id:1,label:"Enable everything",config:{enableOptIn:!0,enableCommunityOnboarding:!0,enableChannelHighlights:!0,enableGuildUnreads:!0,enableGuildHome:!0}}]})},169445:(e,t,n)=>{n.d(t,{w8:()=>r,Ji:()=>i,EO:()=>o,Gj:()=>l,lD:()=>c,SB:()=>a});var r,i,o,u=n(777087);!function(e){e.MESSAGE_CLICKED="message_clicked";e.MESSAGE_CHANNEL_CLICKED="message_channel_clicked";e.REACTION_ADDED="reaction_added";e.REACTION_REMOVED="reaction_removed";e.THREAD_EMBED_CLICKED="thread_embed_clicked";e.LINK_CLICKED="link_clicked";e.IMAGE_CLICKED="image_clicked"
;e.BUTTON_CLICKED="button_clicked";e.REFERENCED_MESSAGE_CLICKED="referenced_message_clicked";e.MESSAGED_IN_SIDEBAR="messaged_in_sidebar";e.REPLIED_IN_SIDEBAR="replied_in_sidebar";e.REPLIED_TO_MESSAGE="replied_to_message";e.EXPANDED_ITEM="expanded_item";e.VIEW_MORE_REPLIES="view_more_replies"}(r||(r={}));!function(e){e.UNREAD="UNREAD";e.READ="READ";e.HIGHLIGHTED="HIGHLIGHTED";e.ALL="ALL"}(i||(i={}));!function(e){e[e.SEGMENTED_READ=0]="SEGMENTED_READ";e[e.TOP=1]="TOP";e[e.NEW=2]="NEW"}(o||(o={}));var a,l="(max-width: 1300px)",c=new Set([u.d.GUILD_TEXT,u.d.GUILD_ANNOUNCEMENT,u.d.GUILD_FORUM]);!function(e){e.ORGANIC="ORGANIC";e.TIMER="TIMER";e.HIGHLIGHTS="HIGHLIGHTS"}(a||(a={}))},814281:(e,t,n)=>{n.d(t,{lY:()=>l,VW:()=>c,xk:()=>s,m5:()=>d,$6:()=>f,mh:()=>E,m2:()=>_});var r=n(173436),i=n(932847),o=n(223173),u=n(407723),a=n(461061);function l(e,t){r.Z.dispatch({type:"GUILD_HOME_SET_SCROLL_POSITION",guildId:e,scrollPosition:t})}function c(e){r.Z.dispatch({
type:"GUILD_HOME_ENSURE_HOME_SESSION",guildId:e})}function s(e){if(!o.Z.isGuildFeedbackShown(e)){i.default.track(a.rMx.HOME_FEEDBACK_PROMPT_VIEWED,{guild_id:e});r.Z.dispatch({type:"GUILD_HOME_FEEDBACK_SHOWN",guildId:e})}}function d(e,t){i.default.track(a.rMx.HOME_REPORT_PROBLEM,{guild_id:e,home_session_id:u.Z.getHomeSessionId(e),rating:t});r.Z.dispatch({type:"GUILD_HOME_FEEDBACK_REPORT",guildId:e,rating:t})}function f(e){r.Z.dispatch({type:"GUILD_HOME_FEEDBACK_DISMISS",guildId:e})}function E(e,t){r.Z.dispatch({type:"GUILD_HOME_SET_SOURCE",guildId:e,source:t})}function _(e,t){i.default.track(a.rMx.HOME_OPENED,{guild_id:e,home_session_id:u.Z.getHomeSessionId(e),home_session_source:t})}},449024:(e,t,n)=>{n.d(t,{jD:()=>y,Dx:()=>I,bO:()=>O,Xp:()=>T,YM:()=>v,N2:()=>g});var r=n(667294),i=n(791462),o=n(537204),u=n(553494);const a=(0,u.B)({kind:"guild",id:"2022-10_communities_multi",
label:"A multi-arm guild experiment that segments all eligible guilds to test different combinations of the Communities 2.0 experience",defaultConfig:{enableGuildHome:!1,forceEnableGuildHome:!1},treatments:[{id:0,label:"Holdout",config:{enableGuildHome:!1,forceEnableGuildHome:!1}},{id:1,label:"NMX Core",config:{enableGuildHome:!1,forceEnableGuildHome:!1}},{id:2,label:"NMX Core + Home",config:{enableGuildHome:!1,forceEnableGuildHome:!1}},{id:3,label:"NMX Core + Highlights",config:{enableGuildHome:!1,forceEnableGuildHome:!1}},{id:4,label:"Home",config:{enableGuildHome:!0,forceEnableGuildHome:!1}}]});var l=n(487657),c=n(1812),s=n(653772),d=n(940712),f=n(859023),E=n(461061);function _(e,t,n){return t.getChannels(e)[c.sH].filter((function(t){var r=t.channel;return!n.isChannelGated(e,r.id)})).length>5}var h=(0,u.B)({kind:"guild",id:"2022-01_home_tab_guild",label:"Home Tab Guild",defaultConfig:{showGuildHome:!1},treatments:[{id:1,label:"Check User as well",config:{showGuildHome:!0}},{id:2,
label:"Force on",config:{showGuildHome:!0,force:!0}}]}),p=(0,u.B)({kind:"user",id:"2022-01_home_tab_user",label:"Home Tab User",defaultConfig:{showGuildHome:!1},treatments:[{id:1,label:"Show Home Tab",config:{showGuildHome:!0}},{id:2,label:"Force on",config:{showGuildHome:!0,force:!0}},{id:3,label:"Overflow",config:{showGuildHome:!0}}]});function g(e){var t,n,u=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],s=(0,i.e7)([f.default],(function(){return f.default.getCurrentUser()})),g=h.useExperiment({guildId:null!==(t=null==e?void 0:e.id)&&void 0!==t?t:""}),v=g.showGuildHome,I=g.force,y=p.useExperiment({}),O=y.showGuildHome,T=y.force,m=l.Z.useExperiment({}),A=m.enableGuildHome,S=a.useExperiment({guildId:null!==(n=null==e?void 0:e.id)&&void 0!==n?n:""}),b=S.enableGuildHome,C=S.forceEnableGuildHome,N=v||b,R=I||C||A,L=(0,i.e7)([c.ZP,o.Z],(function(){return null!=e&&_(e.id,c.ZP,o.Z)})),D=(0,i.e7)([d.Z],(function(){return d.Z.can(E.Plq.MANAGE_MESSAGES,e)}));r.useEffect((function(){
if(u&&!__OVERLAY__&&null!=(null==e?void 0:e.id)){a.trackExposure({guildId:e.id});p.trackExposure({});L&&(D||h.trackExposure({guildId:e.id}))}}),[null==e?void 0:e.id,u,s,I,D,v,L]);return!__OVERLAY__&&(!!L&&(!(!T&&!R)||!!N&&(!!D||O)))}function v(e){if(__OVERLAY__)return!1;if(e===E.ME||e===E.I_8)return!1;var t=s.Z.getGuild(e);if(null!=t&&!_(e,c.ZP,o.Z))return!1;var n=h.getCurrentConfig({guildId:e}),r=n.showGuildHome,i=n.force,u=p.getCurrentConfig({}),f=u.showGuildHome,g=u.force,v=l.Z.getCurrentConfig({}).enableGuildHome,I=a.getCurrentConfig({guildId:e}),y=I.enableGuildHome,O=I.forceEnableGuildHome;return!(!g&&!(i||O||v))||!(!r&&!y)&&(!!d.Z.can(E.Plq.MANAGE_MESSAGES,t)||f)}var I=(0,u.B)({kind:"user",id:"2022-01_home_feed_toggle",label:"Show Guild Feed Sorting Selector",defaultConfig:{showSelector:!1},treatments:[{id:1,label:"Yes Selector",config:{showSelector:!0}}]}),y=(0,u.B)({kind:"user",id:"2022-06_home_refresh_button",label:"Show refresh button",defaultConfig:{showRefreshButton:!1},
treatments:[{id:1,label:"Yes button",config:{showRefreshButton:!0}}]}),O=(0,u.B)({kind:"user",id:"2022-08_home_badge",label:"Show badge on home channel",defaultConfig:{showBadge:!1},treatments:[{id:1,label:"show badge",config:{showBadge:!0}}]}),T=((0,u.B)({kind:"user",id:"2022-08_home_drawer_autoclose",label:"Auto close home drawer",defaultConfig:{autoCloseDrawer:!1,animation:!1,delay:null},treatments:[{id:1,label:"normal animation",config:{autoCloseDrawer:!0,animation:!0,delay:null}},{id:2,label:"no animate",config:{autoCloseDrawer:!0,animation:!1,delay:null}},{id:3,label:"150 delayed animation",config:{autoCloseDrawer:!0,animation:!0,delay:150}},{id:4,label:"250 delayed animation",config:{autoCloseDrawer:!0,animation:!0,delay:250}},{id:5,label:"500 delayed animation",config:{autoCloseDrawer:!0,animation:!0,delay:500}}]}),(0,u.B)({kind:"user",id:"2022-09_welcome_header",label:"Show welcome header for home",defaultConfig:{showWelcomeHeader:!1},treatments:[{id:1,
label:"show welcome header",config:{showWelcomeHeader:!0}}]}),(0,u.B)({kind:"user",id:"2022-12_home_feedback_ux",label:"Show post feedback for home",defaultConfig:{showFeedback:!1},treatments:[{id:100,label:"show feedback",config:{showFeedback:!0}}]}))},223173:(e,t,n)=>{n.d(t,{Z:()=>p});var r=n(791462),i=n(173436);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e){u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return u(e)}function a(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t){l=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return l(e,t)}var c=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function s(e){var t=function(){
if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var i=u(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}var d=new Set,f=new Set,E={},_={};var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&l(e,t)}(n,e);var t=s(n);function n(){o(this,n);return t.apply(this,arguments)}var r=n.prototype;r.initialize=function(e){if(null!=e){var t,n,r;d=new Set(null!==(t=e.guildsWithFinishedFeedback)&&void 0!==t?t:[]);f=new Set(null!==(n=e.guildsWithShownFeedback)&&void 0!==n?n:[]);E=null!==(r=e.numCleanLoadsForGuild)&&void 0!==r?r:{}}}
;r.getState=function(){return{guildsWithFinishedFeedback:d,guildsWithShownFeedback:f,numCleanLoadsForGuild:E}};r.getNumCleanLoads=function(e){var t;return null!==(t=E[e])&&void 0!==t?t:0};r.getTotalNumCleanLoads=function(){var e=0;for(var t in E){var n;e+=null!==(n=E[t])&&void 0!==n?n:0}return e};r.isGuildFeedbackFinished=function(e){return d.has(e)};r.isGuildFeedbackShown=function(e){return f.has(e)||this.isGuildFeedbackFinished(e)};r.getSubmittedFeedback=function(e){return _[e]};r.__getLocalVars=function(){return{MAX_NUM_CLEAN_LOADS:50,guildsWithFinishedFeedback:d,guildsWithShownFeedback:f,numCleanLoadsForGuild:E,submittedFeedbackForGuild:_}};return n}(r.ZP.PersistedStore);h.displayName="GuildHomeFeedbackStore";h.persistKey="GuildHomeFeedbackStore";const p=new h(i.Z,{GUILD_FEED_FETCH_SUCCESS:function(e){var t,n=e.guildId;if(!e.fresh)return!1;E[n]=Math.min(50,(null!==(t=E[n])&&void 0!==t?t:0)+1);delete _[n]},GUILD_HOME_FEEDBACK_SHOWN:function(e){var t=e.guildId;f.add(t)},
GUILD_HOME_FEEDBACK_REPORT:function(e){var t=e.guildId,n=e.rating;d.add(t);_[t]=n},GUILD_HOME_FEEDBACK_DISMISS:function(e){var t=e.guildId;d.add(t)},LOGOUT:function(){d=new Set;f=new Set;E={};_={}}})},407723:(e,t,n)=>{n.d(t,{Z:()=>m});var r=n(468811),i=n.n(r),o=n(791462),u=n(173436),a=n(35236),l=n(169445);function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e){s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return s(e)}function d(e,t){return!t||"object"!==E(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e,t){f=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return f(e,t)}var E=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function _(e){var t=function(){
if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var i=s(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d(this,n)}}var h,p,g,v,I={};function y(e){return{guildId:e,sessionId:i().v4()}}function O(e){if(null!=g&&g.guildId===e){p=g;g=void 0}else p=y(e)}var T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&f(e,t)}(n,e);var t=_(n);function n(){c(this,n);return t.apply(this,arguments)}var r=n.prototype;r.getSavedScrollPosition=function(e){return I[e]};r.getHomeSessionId=function(e){
return null!=p&&p.guildId===e?p.sessionId:null!=g&&g.guildId===e?g.sessionId:void 0};r.getHomeSessionSource=function(e){return null!=v&&v.guildId===e?v.source:l.SB.ORGANIC};r.__getLocalVars=function(){return{scrollPosition:I,lastSelectedHomeChannelId:h,sessionData:p,preloadData:g,sourceData:v}};return n}(o.ZP.Store);T.displayName="GuildHomeStore";const m=new T(u.Z,{CONNECTION_OPEN:function(){I={}},GUILD_FEED_FETCH_FRESH_START:function(e){var t=e.guildId;delete I[t]},GUILD_HOME_SET_SCROLL_POSITION:function(e){var t=e.guildId,n=e.scrollPosition;I[t]=n},CHANNEL_SELECT:function(e){var t=e.guildId,n=e.channelId;if(null!=t&&null!=n&&(0,a.AB)(n)&&(0,a.ME)(n)){var r=(0,a.Qk)(n,t);if(h===r)return!1;if(null!=p&&p.guildId===t)return!1;O(t);h=r;null!=v&&v.guildId!==t&&(v=void 0)}else{h=void 0;p=void 0;g=void 0;v=void 0}},CHANNEL_PRELOAD:function(e){var t=e.guildId,n=e.channelId;if(null!=t&&null!=n&&(0,a.AB)(n)&&(0,a.ME)(n)){if(null!=g&&g.guildId===t)return!1;g=y(t)}else g=void 0},
GUILD_HOME_SET_SOURCE:function(e){var t=e.source,n=e.guildId;v={guildId:n,source:t}},GUILD_HOME_ENSURE_HOME_SESSION:function(e){var t=e.guildId;if(null!=p&&p.guildId===t)return!1;O(t)},LOGOUT:function(){p=void 0;g=void 0;v=void 0}})},204424:(e,t,n)=>{n.d(t,{vV:()=>s,qQ:()=>d});var r=n(791462),i=n(212218),o=n(653772),u=n(859023),a=n(418674),l=864e5;function c(e,t,n){return(0,r.e7)([],(function(){return function(e,t,n){var r=t.maxDaysOld,u=t.minDaysOld,a=void 0===u?0:u,c=o.Z.getGuild(e),s=null==c?void 0:c.joinedAt;if(null!=n){var d=i.ZP.getMember(e,n);s=null==(null==d?void 0:d.joinedAt)?null:new Date(d.joinedAt)}if(null==s)return!1;var f=Date.now()-s.getTime();return(null==r||f<=l*r)&&f>=l*a}(e,t,n)}),[t,e,n])}var s=function(e,t){var n,l=(0,r.e7)([i.ZP],(function(){var r;return(0,a.yE)(null!==(n=null===(r=i.ZP.getMember(e,t))||void 0===r?void 0:r.flags)&&void 0!==n?n:0,d.DID_REJOIN)})),s=(0,r.e7)([o.Z],(function(){var t;return null===(t=o.Z.getGuild(e))||void 0===t?void 0:t.isNew()
})),f=(0,r.e7)([u.default],(function(){var e;return null===(e=u.default.getUser(t))||void 0===e?void 0:e.bot}));return c(e,{maxDaysOld:7},t)&&!s&&!f&&!l},d=Object.freeze({DID_REJOIN:1,COMPLETED_ONBOARDING:2,BYPASSES_VERIFICATION:4})},182434:(e,t,n)=>{n.d(t,{eM:()=>E,rK:()=>_,I1:()=>h});var r=n(675860),i=n(173436),o=n(204424),u=n(513073),a=n(631134),l=n(212218),c=n(418674),s=n(353637),d=n(461061);function f(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function E(e){i.Z.dispatch({type:"GUILD_ONBOARDING_PROMPTS_FETCH_START",guildId:e});return r.Z.get({url:d.ANM.GUILD_ONBOARDING(e)}).then((function(t){var n=t.body,r=(0,s.cf)(n);return i.Z.dispatch(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))))
;r.forEach((function(t){f(e,t,n[t])}))}return e}({type:"GUILD_ONBOARDING_PROMPTS_FETCH_SUCCESS",guildId:e},r)).then((function(){return r.prompts}))}),(function(t){i.Z.dispatch({type:"GUILD_ONBOARDING_PROMPTS_FETCH_FAILURE",guildId:e});return t}))}function _(e){var t,n,r=a.default.getId();if((0,c.yE)(null!==(n=null===(t=l.ZP.getMember(e,r))||void 0===t?void 0:t.flags)&&void 0!==n?n:0,o.qQ.COMPLETED_ONBOARDING))return Promise.resolve();if(!(0,u.f3)(e))return Promise.resolve();h(e);return E(e)}function h(e){i.Z.dispatch({type:"GUILD_ONBOARDING_START",guildId:e})}},353637:(e,t,n)=>{n.d(t,{iU:()=>l,NE:()=>c,NO:()=>s,YW:()=>d,gs:()=>f,b3:()=>E,md:()=>_,l7:()=>a,RF:()=>h,ae:()=>p,yZ:()=>g,dr:()=>v,cf:()=>y});var r=n(110251),i=n.n(r),o=n(959797);function u(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++){n=o[r];t.indexOf(n)>=0||(i[n]=e[n])}return i}(e,t);if(Object.getOwnPropertySymbols){
var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++){n=o[r];t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}}return i}var a,l=100,c=50,s=100,d=15,f=12,E=4,_=7;!function(e){e[e.CUSTOMIZE=0]="CUSTOMIZE";e[e.BROWSE=1]="BROWSE"}(a||(a={}));function h(e){if(e.options.length>0)return!1;var t=p(),n=(t.id,u(t,["id"])),r=(e.id,u(e,["id"]));return i()(n,r)}function p(){return{id:String(Date.now()),title:o.Z.Messages.ONBOARDING_PROMPT_DEFAULT_TITLE,options:[],singleSelect:!1,required:!1,inOnboarding:!0}}function g(){return{id:String(Date.now()),title:"",options:[],singleSelect:!1,required:!1,inOnboarding:!0}}function v(e){return{id:e.id,options:e.options.map((function(e){return{id:e.id,channel_ids:e.channelIds,role_ids:e.roleIds,emoji_id:e.emojiId,emoji_name:e.emojiName,title:e.title,description:e.description}})),title:e.title,single_select:e.singleSelect,disabled:e.disabled,required:e.required,in_onboarding:e.inOnboarding}}function I(e){var t;return{
id:e.id,options:e.options.map((function(e){return{id:e.id,channelIds:e.channel_ids,roleIds:e.role_ids,emojiId:e.emoji_id,emojiName:e.emoji_name,title:e.title,description:null!==(t=e.description)&&void 0!==t?t:""}})),title:e.title,singleSelect:e.single_select,disabled:e.disabled,required:e.required,inOnboarding:e.in_onboarding}}function y(e){var t;return{prompts:e.prompts.map(I),defaultChannelIds:e.default_channel_ids,enableOnboardingPrompts:e.enable_onboarding_prompts,enableDefaultChannels:e.enable_default_channels,responses:null!==(t=e.responses)&&void 0!==t?t:[]}}},853524:(e,t,n)=>{n.d(t,{uX:()=>s,kp:()=>E,ZP:()=>g});var r=n(791462),i=n(173436),o=n(461061);function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e){a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return a(e)}function l(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){
if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e,t){c=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return c(e,t)}var s,d=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=a(e);if(t){var i=a(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l(this,n)}}!function(e){e.STARTED="started";e.READY="ready";e.COMPLETED="completed";e.NOT_APPLICABLE="not_applicable"}(s||(s={}));function E(e){return null!=e&&[s.STARTED,s.READY].includes(e)}var _,h={};var p=function(e){!function(e,t){
if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&c(e,t)}(n,e);var t=f(n);function n(){u(this,n);return t.apply(this,arguments)}var r=n.prototype;r.shouldShowOnboarding=function(e){return e!==o.ME&&e!==o.I_8&&!!E(h[e])};r.getOnboardingStatus=function(e){return h[e]};r.resetOnboardingStatus=function(e){h[e]=s.STARTED;_="cover"};r.getCurrentOnboardingStep=function(){return _};r.__getLocalVars=function(){return{onboardingStatus:h,currentOnboardingStep:_}};return n}(r.ZP.Store);p.displayName="GuildOnboardingStore";const g=new p(i.Z,{LOGOUT:function(){h={};_="cover"},GUILD_DELETE:function(e){var t=e.guild;delete h[t.id];_="cover"},GUILD_ONBOARDING_START:function(e){var t=e.guildId;h[t]=s.STARTED},GUILD_ONBOARDING_PROMPTS_FETCH_SUCCESS:function(e){var t=e.guildId,n=e.enableOnboardingPrompts;if(h[t]!==s.STARTED)return!1
;h[t]=n?s.READY:s.NOT_APPLICABLE},GUILD_ONBOARDING_PROMPTS_FETCH_FAILURE:function(e){var t=e.guildId;h[t]=s.NOT_APPLICABLE},GUILD_ONBOARDING_COMPLETE:function(e){var t=e.guildId;h[t]=s.COMPLETED},GUILD_ONBOARDING_SET_STEP:function(e){var t=e.step;_=t},CONNECTION_OPEN:function(){_="cover"}})},836343:(e,t,n)=>{n.d(t,{Tw:()=>p,EI:()=>g,ZP:()=>v});var r=n(441143),i=n.n(r),o=n(655695),u=n(653772),a=n(897576),l=n(182434),c=n(853524),s=n(461061),d=n(35236);function f(e,t,n,r,i,o,u){try{var a=e[o](u),l=a.value}catch(e){n(e);return}a.done?t(l):Promise.resolve(l).then(r,i)}function E(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function u(e){f(o,r,i,u,a,"next",e)}function a(e){f(o,r,i,u,a,"throw",e)}u(void 0)}))}}var _=function(e,t){var n,r,i,o,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o
;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;(r=0,i)&&(o=[2&o[0],i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:u.label++;return{value:o[1],done:!1};case 5:u.label++;r=o[1];o=[0];continue;case 7:o=u.ops.pop();u.trys.pop();continue;default:if(!(i=u.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){u=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){u.label=o[1];break}if(6===o[0]&&u.label<i[1]){u.label=i[1];i=o;break}if(i&&u.label<i[2]){u.label=i[2];u.ops.push(o);break}i[2]&&u.ops.pop();u.trys.pop();continue}o=t.call(e,u)}catch(e){o=[6,e];r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},h={};function p(e){var t;null===(t=h[e])||void 0===t||t.call(h);h[e]=null}function g(e){h[e]=null}function v(e){return I.apply(this,arguments)}function I(){
return(I=E((function(e){var t,n,r,u;return _(this,(function(d){switch(d.label){case 0:t=e.guildId,n=e.returnChannelId,r=e.fetchPrompts,u=void 0===r||r;(0,a.pT)();i()(null==h[t],"should not double-join guilds");return[4,y(t)];case 1:return d.sent().hasFeature(s.oNc.GUILD_ONBOARDING)?u?[4,(0,l.rK)(t)]:[3,3]:[2];case 2:d.sent();return[3,4];case 3:(0,l.I1)(t);d.label=4;case 4:return c.ZP.shouldShowOnboarding(t)?[4,O(t)]:[3,6];case 5:d.sent();null!=n&&(0,o.uL)(s.Z5c.CHANNEL(t,n));d.label=6;case 6:return[2]}}))}))).apply(this,arguments)}function y(e){return new Promise((function(t){u.Z.addConditionalChangeListener((function(){var n=u.Z.getGuild(e);null!=n&&t(n);return null==n}))}))}function O(e){return new Promise((function(t){h[e]=t;(0,o.uL)(s.Z5c.CHANNEL(e,d.oC.GUILD_ONBOARDING))}))}},613258:(e,t,n)=>{n.d(t,{bN:()=>m,CQ:()=>A,xt:()=>F,Ld:()=>j,Z2:()=>V,ZP:()=>x});var r=n(496486),i=n.n(r),o=n(791462),u=n(105994),a=n(173436),l=n(948571),c=n(631134),s=n(212218),d=n(859023),f=n(998689)
;function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function h(e){h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return h(e)}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){_(e,t,n[t])}))}return e}function g(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})))
;n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function v(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++){n=o[r];t.indexOf(n)>=0||(i[n]=e[n])}return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++){n=o[r];t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}}return i}function I(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e,t){y=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return y(e,t)}var O=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1
;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var i=h(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return I(this,n)}}var m={EVENT:"event",EVENT_ACTIVE:"active",EVENT_UPCOMING:"event-upcoming",GUILD_EVENT:function(e){return"".concat(e,"-").concat(m.EVENT)},GUILD_EVENT_ACTIVE:function(e){return"".concat(e,"-").concat(m.EVENT_ACTIVE)},GUILD_EVENT_UPCOMING:function(e){return"".concat(e,"-").concat(m.EVENT_UPCOMING)},CHANNEL_EVENT:function(e){return"".concat(e,"-").concat(m.EVENT)},CHANNEL_EVENT_ACTIVE:function(e){return"".concat(e,"-").concat(m.EVENT_ACTIVE)},CHANNEL_EVENT_UPCOMING:function(e){return"".concat(e,"-").concat(m.EVENT_UPCOMING)}};function A(e){var t=e.id,n=e.scheduled_start_time,r=F(e)?"\0":"";return"".concat(r,"-").concat(new Date(n).getTime(),"-").concat(t)}
var S=function(e){var t=e.guild_id,n=e.entity_id,r=e.channel_id,i=[t];null!=n&&i.push(n);i.push(m.GUILD_EVENT(t));null!=r&&i.push(m.CHANNEL_EVENT(r));if(F(e)){i.push(m.EVENT_ACTIVE);i.push(m.GUILD_EVENT_ACTIVE(t));null!=r&&i.push(m.CHANNEL_EVENT_ACTIVE(r))}if(j(e)){i.push(m.EVENT_UPCOMING);i.push(m.GUILD_EVENT_UPCOMING(t));null!=r&&i.push(m.CHANNEL_EVENT_UPCOMING(r))}return i},b=new u.Z(S,A);function C(e){var t,n=b.get(e.id),r=null!==(t=e.user_count)&&void 0!==t?t:null==n?void 0:n.user_count,i=w(e.id,e.guild_id)?1:0;e.user_count=Math.max(i,null!=r?r:0);b.set(e.id,e);L+=1}function N(e,t){b.delete(e);U(e,t);L+=1}var R="orphaned",L=0,D={},P=[];function w(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:R;if(r!==R&&(null===(t=D.orphaned)||void 0===t?void 0:t.has(e))){M(e,r);U(e,R)}return Boolean(null===(n=D[r])||void 0===n?void 0:n.has(e))}function M(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:R;null==D[t]&&(D[t]=new Set);D[t].add(e);L+=1}
function U(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:R;null===(t=D[n])||void 0===t||t.delete(e);L+=1}var Z={};function G(e,t){var n;return Boolean(null===(n=Z[e])||void 0===n?void 0:n[t])}function k(e){b.values(m.GUILD_EVENT(e)).forEach((function(t){return N(t.id,e)}))}function H(e){C(e.guildScheduledEvent);return!0}function F(e){return null!=e&&(null!==(t=(null==e?void 0:e.status)===f.p1.ACTIVE)&&void 0!==t&&t);var t}function j(e){return!f.$I.has(e.status)}function V(e){return null!=e&&f.$I.has(e.status)}var B=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&y(e,t)}(n,e);var t=T(n);function n(){E(this,n);return t.apply(this,arguments)}var r=n.prototype;r.getGuildScheduledEvent=function(e){return null==e?null:null!==(t=b.get(e))&&void 0!==t?t:null;var t}
;r.getGuildEventCountByIndex=function(e){return b.size(e)};r.getGuildScheduledEventsForGuild=function(e){return null==e?[]:b.values(e)};r.getGuildScheduledEventsByIndex=function(e){return b.values(e)};r.getRsvpVersion=function(){return L};r.hasRsvp=function(e,t){return null!=e&&null!=t&&w(e,t)};r.isActive=function(e){return null!=e&&F(b.get(e))};r.getActiveEventByChannel=function(e){if(null!=e){return this.getGuildScheduledEventsByIndex(m.CHANNEL_EVENT_ACTIVE(e))[0]}};r.getUsersForGuildEvent=function(e){return null==e?{}:null!==(t=Z[e])&&void 0!==t?t:{};var t};r.__getLocalVars=function(){return{scheduledEventIndex:S,guildScheduledEvents:b,ORPHANED_GUILD_ID:R,guildScheduledEventRSVPVersion:L,guildScheduledEventRSVPs:D,previousDirectoryGuildEventsSnapshot:P,usersForGuildEvent:Z}};return n}(o.ZP.Store);B.displayName="GuildScheduledEventStore";const x=new B(a.Z,{CONNECTION_OPEN:function(e){var t=e.guilds;b.clear();D={};L=0;Z={};P.forEach(C);t.forEach((function(e){
return e.guild_scheduled_events.forEach(C)}));return!0},GUILD_CREATE:function(e){var t=e.guild;k(t.id);t.guild_scheduled_events.forEach((function(e){return C(e)}));return!0},GUILD_DELETE:function(e){k(e.guild.id);return!0},FETCH_GUILD_EVENTS_FOR_GUILD:function(e){var t=e.guildId,n=e.guildScheduledEvents,r=b.values(m.GUILD_EVENT(t),!0).map((function(e){return e.id})),o=n.map((function(e){return e.id}));i().difference(r,o).forEach((function(e){N(e,t)}));var u=!0,a=!1,l=void 0;try{for(var c,s=n[Symbol.iterator]();!(u=(c=s.next()).done);u=!0){C(c.value)}}catch(e){a=!0;l=e}finally{try{u||null==s.return||s.return()}finally{if(a)throw l}}return!0},GUILD_SCHEDULED_EVENT_CREATE:H,GUILD_SCHEDULED_EVENT_UPDATE:H,GUILD_SCHEDULED_EVENT_DELETE:function(e){var t=e.guildScheduledEvent;N(t.id,t.guild_id);return!0},GUILD_SCHEDULED_EVENT_USER_ADD:function(e){var t=e.userId,n=e.guildEventId,r=e.guildId,i=b.get(n),o=c.default.getId(),u=w(n,r),a=o===t;if(!(null==i||u&&a)){
var l,f=null!==(l=i.user_count)&&void 0!==l?l:0;C(g(p({},i),{user_count:f+1}))}a&&!u&&M(n,r);if(null!=t&&!G(n,t)){var E=d.default.getUser(t),_=s.ZP.getMember(r,t);if(null!=E){!function(e,t){null==Z[e]&&(Z[e]={});Z[e][t.user.id]=t;L+=1}(n,{user:E,guild_member:null!=_?_:{guildId:r}})}}return!0},GUILD_SCHEDULED_EVENT_USER_REMOVE:function(e){var t=e.userId,n=e.guildEventId,r=e.guildId,i=b.get(n),o=c.default.getId(),u=w(n,r),a=o===t;a&&u&&U(n,r);null!=t&&G(n,t)&&function(e,t){var n;null===(n=Z[e])||void 0===n||delete n[t];L+=1}(n,t);if(null!=i&&(u||!a)){var l,s=null!==(l=i.user_count)&&void 0!==l?l:0,d=Math.max(0,s-1);C(g(p({},i),{user_count:d}))}return!0},GUILD_SCHEDULED_EVENT_RSVPS_FETCH_SUCESS:function(e){var t=e.guildId,n=e.guildScheduledEventUsers;D[t]=new Set;n.forEach((function(e){e.user_id===c.default.getId()&&M(e.guild_scheduled_event_id,t)}));return!0},GUILD_SCHEDULED_EVENT_USERS_FETCH_SUCCESS:function(e){var t,n=e.guildEventId,r=e.rsvpUsers,i=e.guildId
;t=g(p({},Z),_({},n,r.reduce((function(e,t){var n=t.guild_member,r=v(t,["guild_member"]),o={user:new l.Z(g(p({},r),{guildMemberAvatars:null!=(null==n?void 0:n.avatar)?_({},i,n.avatar):null})),guild_member:g(p({},null!=n?n:{}),{guildId:i})};e[r.id]=o;return e}),{}))),Z=t;return!0},INVITE_RESOLVE_SUCCESS:function(e){var t=e.invite.guild_scheduled_event;if(null==t)return!1;C(t);return!0},EVENT_DIRECTORY_FETCH_SUCCESS:function(e){var t=e.entries,n=i().map(t,"guild_scheduled_event"),r=!0,o=!1,u=void 0;try{for(var a,l=n[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;C(c);null!=c.user_rsvp?M(c.id,c.guild_id):U(c.id,c.guild_id)}}catch(e){o=!0;u=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw u}}P=n;return!0},LOGOUT:function(){b.clear();return!0}})},21588:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(675860),i=n(173436),o=n(932847),u=n(814111),a=n(461061);const l={resolveGuildTemplate:function e(t){if(i.Z.isDispatching())return Promise.resolve().then((function(){return e(t)
}));i.Z.dispatch({type:"GUILD_TEMPLATE_RESOLVE",code:t});return r.Z.get({url:a.ANM.UNRESOLVED_GUILD_TEMPLATE(t),oldFormErrors:!0}).then((function(e){var n=e.body;o.default.track(a.rMx.GUILD_TEMPLATE_RESOLVED,{resolved:!0,guild_template_code:t,guild_template_name:n.name,guild_template_description:n.description,guild_template_guild_id:n.source_guild_id});i.Z.dispatch({type:"GUILD_TEMPLATE_RESOLVE_SUCCESS",guildTemplate:n,code:t});return{guildTemplate:(0,u.Z)(n),code:t}}),(function(){o.default.track(a.rMx.GUILD_TEMPLATE_RESOLVED,{resolved:!1,guild_template_code:t});i.Z.dispatch({type:"GUILD_TEMPLATE_RESOLVE_FAILURE",code:t});return{guildTemplate:null,code:t}}))},loadTemplatesForGuild:function(e){return r.Z.get({url:a.ANM.GUILD_TEMPLATES(e),oldFormErrors:!0}).then((function(e){i.Z.dispatch({type:"GUILD_TEMPLATE_LOAD_FOR_GUILD_SUCCESS",guildTemplates:e.body});return e}))},createGuildTemplate:function(e,t,n){return r.Z.post({url:a.ANM.GUILD_TEMPLATES(e),body:{name:t,description:n},
oldFormErrors:!0}).then((function(e){i.Z.dispatch({type:"GUILD_TEMPLATE_CREATE_SUCCESS",guildTemplate:e.body,code:e.body.code})}))},syncGuildTemplate:function(e,t){return r.Z.put({url:a.ANM.GUILD_TEMPLATE(e,t),oldFormErrors:!0}).then((function(e){i.Z.dispatch({type:"GUILD_TEMPLATE_SYNC_SUCCESS",guildTemplate:e.body,code:t})}))},updateGuildTemplate:function(e,t,n,o){return r.Z.patch({url:a.ANM.GUILD_TEMPLATE(e,t),body:{name:n,description:o},oldFormErrors:!0}).then((function(e){i.Z.dispatch({type:"GUILD_TEMPLATE_SYNC_SUCCESS",guildTemplate:e.body,code:t})}))},deleteGuildTemplate:function(e,t){return r.Z.delete({url:a.ANM.GUILD_TEMPLATE(e,t),oldFormErrors:!0}).then((function(){i.Z.dispatch({type:"GUILD_TEMPLATE_DELETE_SUCCESS",guildId:e,code:t})}))}}},218276:(e,t,n)=>{n.d(t,{Z:()=>c});var r=n(173436),i=n(940712),o=n(21588),u=n(461061);function a(e,t,n,r,i,o,u){try{var a=e[o](u),l=a.value}catch(e){n(e);return}a.done?t(l):Promise.resolve(l).then(r,i)}var l=function(e,t){var n,r,i,o,u={
label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;(r=0,i)&&(o=[2&o[0],i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:u.label++;return{value:o[1],done:!1};case 5:u.label++;r=o[1];o=[0];continue;case 7:o=u.ops.pop();u.trys.pop();continue;default:if(!(i=u.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){u=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){u.label=o[1];break}if(6===o[0]&&u.label<i[1]){u.label=i[1];i=o;break}if(i&&u.label<i[2]){u.label=i[2];u.ops.push(o);break}i[2]&&u.ops.pop();u.trys.pop();continue}o=t.call(e,u)}catch(e){o=[6,e];r=0}finally{n=i=0}if(5&o[0])throw o[1];return{
value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};const c={checkGuildTemplateDirty:function(e){return(t=function(){var t;return l(this,(function(n){switch(n.label){case 0:return i.Z.canWithPartialContext(u.Plq.MANAGE_GUILD,{guildId:e})?[4,o.Z.loadTemplatesForGuild(e)]:[2];case 1:(t=n.sent()).body.length>0&&r.Z.dispatch({type:"GUILD_TEMPLATE_DIRTY_TOOLTIP_REFRESH",guildTemplate:t.body[0]});return[2]}}))},function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function u(e){a(o,r,i,u,l,"next",e)}function l(e){a(o,r,i,u,l,"throw",e)}u(void 0)}))})();var t},hideGuildTemplateDirtyTooltip:function(e){r.Z.dispatch({type:"GUILD_TEMPLATE_DIRTY_TOOLTIP_HIDE",guildId:e})},hideGuildTemplatePromotionTooltip:function(){r.Z.dispatch({type:"GUILD_TEMPLATE_PROMOTION_TOOLTIP_HIDE"})}}},517845:(e,t,n)=>{n.d(t,{Rj:()=>r,HQ:()=>i});var r,i;!function(e){e.RESOLVING="RESOLVING";e.RESOLVED="RESOLVED";e.EXPIRED="EXPIRED";e.ACCEPTED="ACCEPTED";e.ACCEPTING="ACCEPTING"}(r||(r={}))
;!function(e){e.CLASSROOM="fVfBazbqjhXg";e.LOCAL_COMMUNITIES="64UDvRNCC52Y";e.CREATORS_HOBBIES="6exdzMgjZgah";e.GLOBAL_COMMUNITIES="4sgbPdCjzAYU";e.FRIENDS_FAMILY="hgM48av5Q69A";e.STUDY_GROUPS="FbwUwRp4j8Es";e.CREATE_FROM_SCRATCH="WYAQmEzjw3Pj";e.CAMPUS_CLUBS="Ctg7PUHcQmZu";e.LEAGUE_CLUBS="PJ6VvgEJYg45";e.GITHUB_HACKATHON="UqzZCTj2zfwy"}(i||(i={}))},814111:(e,t,n)=>{n.d(t,{Z:()=>i});var r=n(517845);function i(e){var t;return{code:e.code,state:r.Rj.RESOLVED,name:e.name,description:null!==(t=e.description)&&void 0!==t?t:"",creatorId:e.creator_id,creator:e.creator,createdAt:e.created_at,updatedAt:e.updated_at,sourceGuildId:e.source_guild_id,serializedSourceGuild:e.serialized_source_guild,usageCount:e.usage_count,isDirty:e.is_dirty}}},825431:(e,t,n)=>{n.d(t,{RX:()=>u,kC:()=>a});var r=n(553494),i=n(487657),o=(0,r.B)({kind:"user",id:"2022-08_guild_unreads",label:"Guild Unreads",defaultConfig:{allowUnreadHighlightsOption:!1},treatments:[{id:1,label:'Allow "Highlights" as an Unreads Option',
config:{allowUnreadHighlightsOption:!0}}]});function u(){var e=i.Z.useExperiment({}).enableGuildUnreads;return o.useExperiment({}).allowUnreadHighlightsOption||e}function a(){var e=i.Z.getCurrentConfig({}).enableGuildUnreads;return o.getCurrentConfig({}).allowUnreadHighlightsOption||e}},685740:(e,t,n)=>{n.d(t,{LS:()=>E,nH:()=>_,j$:()=>h});var r=n(441143),i=n.n(r),o=n(791462),u=n(668479),a=n(53551),l=n(356004),c=n(390504),s=n(825431),d=n(53619),f=n(461061);function E(e){var t=e.isExperimentEnabled,n=e.hasUserEnabledGuildUnreads,r=e.channelNotificationOverrides,i=e.categoryNotificationOverrides,o=e.unreadSetting,u=e.hasJoinedThread,a=null!=r&&r.message_notifications!==f.bL.NULL||null!=i&&i.message_notifications!==f.bL.NULL;return t&&n?u?d.N.ALL_MESSAGES:a?null==o||o===d.N.NULL?d.N.ALL_MESSAGES:o:null!=o?o:d.N.NULL:d.N.ALL_MESSAGES}function _(e){var t=null==e?void 0:e.guild_id,n=null==e?void 0:e.parent_id,r=(0,o.e7)([l.Z],(function(){return l.Z.getChannel(n)
}),[n]),a=(null==e?void 0:e.isThread())?n:null==e?void 0:e.id;i()(null!=a,"parent_id cannot be null for threads");var f=(null==e?void 0:e.isThread())?null==r?void 0:r.parent_id:n,_=(0,s.RX)(),h=(0,o.cj)([c.Z],(function(){return{channelNotificationOverrides:c.Z.getChannelOverrides(t)[a],categoryNotificationOverrides:null!=f?c.Z.getChannelOverrides(t)[f]:null,unreadSetting:null!=t?c.Z.getChannelUnreadSetting(t,a):d.N.NULL,hasUserEnabledGuildUnreads:null!=t&&c.Z.isGuildUnreadSettingEnabled(t)}}),[t,a]),p=h.channelNotificationOverrides,g=h.categoryNotificationOverrides,v=h.unreadSetting;return E({isExperimentEnabled:_,hasUserEnabledGuildUnreads:h.hasUserEnabledGuildUnreads,channelNotificationOverrides:p,categoryNotificationOverrides:g,unreadSetting:v,hasJoinedThread:(0,o.e7)([u.Z],(function(){return null!=(null==e?void 0:e.id)&&u.Z.hasJoined(e.id)}))})}function h(e){var t=e.guild_id,n=l.Z.getBasicChannel(e.parent_id),r=(0,a.Q5)(e.type)?e.parent_id:e.id
;i()(null!=r,"parent_id cannot be null for threads");var o=(0,a.Q5)(e.type)?null==n?void 0:n.parent_id:e.parent_id,d=(0,s.kC)(),f=c.Z.isGuildUnreadSettingEnabled(t),_=c.Z.getChannelUnreadSetting(t,r);return E({isExperimentEnabled:d,hasUserEnabledGuildUnreads:f,channelNotificationOverrides:c.Z.getChannelOverrides(t)[r],categoryNotificationOverrides:null!=o?c.Z.getChannelOverrides(t)[o]:null,unreadSetting:_,hasJoinedThread:u.Z.hasJoined(e.id)})}},388337:(e,t,n)=>{n.d(t,{Zz:()=>a,K4:()=>l,q9:()=>c});var r=n(441143),i=n.n(r),o=n(45692),u=n(959797);function a(e){var t=o.Z.find((function(t){return t.alpha2===e}));if(null!=t)return{name:t.name,code:t.phoneCountryCode,alpha2:t.alpha2}}function l(){var e=function(e){var t=o.Z.find((function(t){return t.name===e}));if(null!=t)return{name:t.name,code:t.phoneCountryCode,alpha2:t.alpha2}}("United States");i()(e,"Default country code cannot be missing.");return e}function c(e){return u.Z.Messages["COUNTRY_NAME_".concat(e)]}},355309:(e,t,n)=>{n.d(t,{
O:()=>f,a:()=>_});var r=n(675860),i=n(173436),o=n(733285),u=n(90816),a=n(630695),l=n(461061);function c(e,t,n,r,i,o,u){try{var a=e[o](u),l=a.value}catch(e){n(e);return}a.done?t(l):Promise.resolve(l).then(r,i)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function u(e){c(o,r,i,u,a,"next",e)}function a(e){c(o,r,i,u,a,"throw",e)}u(void 0)}))}}var d=function(e,t){var n,r,i,o,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;(r=0,i)&&(o=[2&o[0],i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:u.label++;return{value:o[1],done:!1};case 5:u.label++
;r=o[1];o=[0];continue;case 7:o=u.ops.pop();u.trys.pop();continue;default:if(!(i=u.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){u=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){u.label=o[1];break}if(6===o[0]&&u.label<i[1]){u.label=i[1];i=o;break}if(i&&u.label<i[2]){u.label=i[2];u.ops.push(o);break}i[2]&&u.ops.pop();u.trys.pop();continue}o=t.call(e,u)}catch(e){o=[6,e];r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};function f(e){return E.apply(this,arguments)}function E(){E=s((function(e){var t,n;return d(this,(function(o){switch(o.label){case 0:t=a.Z.lurkingGuildIds();if(0===(n=t.filter((function(t){return!e.includes(t)}))).length)return[2];i.Z.dispatch({type:"GUILD_STOP_LURKING",ignoredGuildIds:e});return[4,Promise.all(n.map((u=s((function(e){var t;return d(this,(function(n){switch(n.label){case 0:t=a.Z.getLurkingSource();n.label=1;case 1:n.trys.push([1,3,,4]);return[4,r.Z.delete({url:l.ANM.GUILD_LEAVE(e),body:{lurking:!0},
oldFormErrors:!0})];case 2:n.sent();return[3,4];case 3:n.sent();i.Z.dispatch({type:"GUILD_STOP_LURKING_FAILURE",lurkingGuildId:e,lurkingSource:t});return[3,4];case 4:return[2]}}))})),function(e){return u.apply(this,arguments)})))];case 1:o.sent();return[2]}var u}))}));return E.apply(this,arguments)}function _(){return h.apply(this,arguments)}function h(){h=s((function(){var e,t,n,r=arguments;return d(this,(function(i){switch(i.label){case 0:e=r.length>0&&void 0!==r[0]?r[0]:null;if(0===(t=a.Z.lurkingGuildIds()).length)return[2];if(!(null==e||!t.includes(e)))return[2];n=o.Z.getGuildId();return[4,f([e,n].filter(u.lm))];case 1:i.sent();return[2]}}))}));return h.apply(this,arguments)}},205949:(e,t,n)=>{n.d(t,{D:()=>r});function r(){}},35197:(e,t,n)=>{n.d(t,{Z:()=>T});var r=n(791462),i=n(173436),o=n(388337),u=n(356004);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e){l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){
return e.__proto__||Object.getPrototypeOf(e)};return l(e)}function c(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e,t){s=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return s(e,t)}var d=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var i=l(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c(this,n)}}var E=new Set,_=new Set,h=!1,p=null;function g(e){return e.isMessageRequest&&!e.isSpam}function v(e){var t=!1;if(g(e)&&!E.has(e.id)){
E.add(e.id);t=!0}if(!g(e)&&E.has(e.id)){E.delete(e.id);t=!0}if(!g(e)&&_.has(e.id)){_.delete(e.id);t=!0}return t}function I(e){if(null!=e){var t;p=null!==(t=(0,o.Zz)(e))&&void 0!==t?t:(0,o.K4)()}}function y(e){"CONNECTION_OPEN"===e.type&&I(e.countryCode);E.clear();_.clear();Object.values(u.Z.getMutablePrivateChannels()).forEach((function(e){v(e)}));h=!0}var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&s(e,t)}(n,e);var t=f(n);function n(){a(this,n);return t.apply(this,arguments)}var r=n.prototype;r.initialize=function(){this.waitFor(u.Z)};r.getMessageRequestChannelIds=function(){return E};r.getMessageRequestsCount=function(){return E.size};r.isMessageRequest=function(e){return E.has(e)};r.isAcceptedOptimistic=function(e){return _.has(e)};r.getUserCountryCode=function(){return p};r.isReady=function(){
return h};r.__getLocalVars=function(){return{channelIds:E,acceptedOptimistic:_,isReady:h,userCountryCode:p}};return n}(r.ZP.Store);O.displayName="MessageRequestStore";const T=new O(i.Z,{CONNECTION_OPEN:y,CONNECTION_OPEN_SUPPLEMENTAL:y,CACHE_LOADED_LAZY:function(e){e.messageRequestChannelIds.forEach((function(e){return E.add(e)}))},CHANNEL_CREATE:function(e){return v(e.channel)},CHANNEL_UPDATES:function(e){var t=e.updates,n=!0,r=!1,i=void 0;try{for(var o,u=t[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){v(o.value.channel)}}catch(e){r=!0;i=e}finally{try{n||null==u.return||u.return()}finally{if(r)throw i}}},CHANNEL_DELETE:function(e){var t=e.channel;if(E.has(t.id)){E.delete(t.id);return!0}return!1},SET_LOCATION_METADATA:function(e){I(e.countryCode)},MESSAGE_REQUEST_ACCEPT_OPTIMISTIC:function(e){var t=e.channelId;_.add(t)}})},996515:(e,t,n)=>{n.d(t,{hP:()=>a,k1:()=>l,Ug:()=>d,tU:()=>f,h3:()=>E});var r=n(35197),i=n(47195);function o(e,t){(null==t||t>e.length)&&(t=e.length)
;for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],u=!0,a=!1;try{for(n=n.call(e);!(u=(r=n.next()).done);u=!0){o.push(r.value);if(t&&o.length===t)break}}catch(e){a=!0;i=e}finally{try{u||null==n.return||n.return()}finally{if(a)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e){
var t=u(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[r.Z],1),n=t[0],i=c(e),o=i.filter((function(e){var t=u(e,2)[1];return!n.isMessageRequest(t.id)}));return s(o)}function l(e){var t=u(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[r.Z,i.Z],2),n=t[0],o=t[1],a=c(e),l=a.filter((function(e){var t=u(e,2)[1];return!n.isMessageRequest(t.id)&&!o.isSpam(t.id)}));return s(l)}function c(e){return Object.keys(e).map((function(t){return[t,e[t]]}))}function s(e){return Array.from(e).reduce((function(e,t){var n=u(t,2),r=n[0],i=n[1];return Object.assign(e,function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}({},r,i))}),{})}function d(e){var t=u(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[r.Z],1),n=t[0];return e.filter((function(e){return!n.isMessageRequest(e)}))}function f(e){var t=u(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[r.Z,i.Z],2),n=t[0],o=t[1];return e.filter((function(e){
return!n.isMessageRequest(e)&&!o.isSpam(e)}))}function E(e){var t=u(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[r.Z,i.Z],2),n=t[0],o=t[1];return n.isMessageRequest(e)||o.isSpam(e)}},47195:(e,t,n)=>{n.d(t,{Z:()=>I});var r=n(791462),i=n(173436),o=n(356004);function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e){a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return a(e)}function l(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e,t){c=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return c(e,t)}var s=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1
;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=a(e);if(t){var i=a(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l(this,n)}}var f=new Set,E=new Set,_=!1;function h(e){return e.isSpam}function p(e){var t=!1;if(h(e)&&!f.has(e.id)){f.add(e.id);t=!0}if(!h(e)&&f.has(e.id)){f.delete(e.id);t=!0}if(!h(e)&&E.has(e.id)){E.delete(e.id);t=!0}return t}function g(){f.clear();E.clear();Object.values(o.Z.getMutablePrivateChannels()).forEach((function(e){p(e)}));_=!0}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&c(e,t)}(n,e);var t=d(n);function n(){u(this,n);return t.apply(this,arguments)}var r=n.prototype;r.initialize=function(){
this.waitFor(o.Z)};r.getSpamChannelIds=function(){return f};r.getSpamChannelsCount=function(){return f.size};r.isSpam=function(e){return f.has(e)};r.isAcceptedOptimistic=function(e){return E.has(e)};r.isReady=function(){return _};r.__getLocalVars=function(){return{channelIds:f,acceptedOptimistic:E,isReady:_}};return n}(r.ZP.Store);v.displayName="SpamMessageRequestStore";const I=new v(i.Z,{CONNECTION_OPEN:g,CONNECTION_OPEN_SUPPLEMENTAL:g,CACHE_LOADED_LAZY:function(e){var t=e.spamChannelIds;(null==t?void 0:t.length)>0&&t.forEach((function(e){return f.add(e)}))},CHANNEL_CREATE:function(e){return p(e.channel)},CHANNEL_UPDATES:function(e){var t=e.updates,n=!0,r=!1,i=void 0;try{for(var o,u=t[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){p(o.value.channel)}}catch(e){r=!0;i=e}finally{try{n||null==u.return||u.return()}finally{if(r)throw i}}},CHANNEL_DELETE:function(e){var t=e.channel,n=!1;if(f.has(t.id)){f.delete(t.id);n=!0}return n},MESSAGE_REQUEST_ACCEPT_OPTIMISTIC:function(e){
var t=e.channelId;E.add(t)}})},114929:(e,t,n)=>{n.d(t,{sv:()=>o,Fl:()=>u});var r=n(667294),i=(0,n(553494).B)({kind:"user",id:"2022-11_desktop_notification_center",label:"Desktop notification center",defaultConfig:{enabled:!1},treatments:[{id:1,label:"Notification center desktop enabled",config:{enabled:!0}}]}),o=function(){var e=i.useExperiment({}).enabled;r.useEffect((function(){i.trackExposure({})}),[]);return e},u=function(){return i.getCurrentConfig({}).enabled}},492421:(e,t,n)=>{n.d(t,{Z:()=>H});var r=n(791462),i=n(173436),o=n(859023),u=n(346529),a=n(50522),l=n(958899),c=n(461061),s=n(959797);function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1;r.configurable=!0;"value"in r&&(r.writable=!0);Object.defineProperty(e,r.key,r)}}function _(e,t,n){
t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function h(e){h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return h(e)}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){_(e,t,n[t])}))}return e}function g(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){
Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function v(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function I(e,t){I=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return I(e,t)}function y(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e)||function(){
throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var O=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var i=h(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return v(this,n)}}var m,A,S,b,C,N=7776e6,R=[],L=new Set,D=[],P=!0;function w(e){return null!=e.id&&null!=e.body&&null!=e.type}function M(){m=!1;A=!1;R=[];D=[];L=new Set;P=!0;b=void 0;S=!1;C=!1}function U(e){return g(p({},e),{kind:"notification-center-item"})}function Z(e){var t="NOTIFICATION_CENTER_ITEM_CREATE"===e.type?U(e.item):e.item
;if(!A||!w(t)||L.has(t.id))return!1;L.add(t.id);(R=[t].concat(y(R))).sort((function(e,t){return u.Z.compare(t.id,e.id)}))}function G(e,t,n){var r;return e.type===t&&(null===(r=e.other_user)||void 0===r?void 0:r.id)==n}var k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&I(e,t)}(n,e);var t=T(n);function n(){f(this,n);return t.apply(this,arguments)}var r=n.prototype;r.initialize=function(){this.waitFor(o.default)};r.__getLocalVars=function(){return{NINETY_DAYS_MS:N,loading:m,initialized:A,errored:S,notifCenterItems:R,notifCenterIds:L,notifCenterLocalItems:D,paginationHasMore:P,paginationCursor:b,notifCenterActive:C}};!function(e,t,n){t&&E(e.prototype,t);n&&E(e,n)}(n,[{key:"loading",get:function(){return m}},{key:"initialized",get:function(){return A}},{key:"items",get:function(){return R}},{key:"hasMore",
get:function(){return P}},{key:"cursor",get:function(){return b}},{key:"errored",get:function(){return S}},{key:"active",get:function(){return C}},{key:"localItems",get:function(){return D}}]);return n}(r.ZP.Store);k.displayName="NotificationCenterItemsStore";const H=new k(i.Z,{CONNECTION_OPEN:function(e){M();e.relationships.forEach((function(e){var t=e.type,n=e.user,r=e.since;if(t!==c.OGo.PENDING_INCOMING)return null;if(null==n||null==r)return null;var i=o.default.getUser(n.id);if(null==i)return null;var a=(0,l.mH)(i,r);u.Z.age(a.id)>N||(D=y(D).concat([a]))}))},LOGOUT:M,NOTIFICATION_CENTER_ITEMS_ACK:function(e){var t=e.id;R=R.map((function(e){return e.id===t?g(p({},e),{acked:!0}):e})).filter(w)},NOTIFICATION_CENTER_ITEMS_ACK_FAILURE:function(e){var t=e.id;R=R.map((function(e){return e.id===t?g(p({},e),{acked:!1}):e})).filter(w)},NOTIFICATION_CENTER_ITEM_CREATE:Z,NOTIFICATION_CENTER_ITEM_DELETE:function(e){var t=e.id;if(!L.has(t))return!1;L.delete(t);R=R.filter((function(e){
return e.id!==t}))},NOTIFICATION_CENTER_ITEM_DELETE_FAILURE:Z,LOAD_NOTIFICATION_CENTER_ITEMS:function(){m=!0},LOAD_NOTIFICATION_CENTER_ITEMS_FAILURE:function(){m=!1;A=!0;P=!1;b=void 0;S=!0},LOAD_NOTIFICATION_CENTER_ITEMS_SUCCESS:function(e){var t=e.items,n=e.hasMore,r=e.cursor;if(m){m=!1;A=!0;S=!1;P=t.length>0&&n;b=t.length>0?r:void 0;(R=y(R).concat(y(t.map(U).filter((function(e){return!L.has(e.id)}))))).sort((function(e,t){return u.Z.compare(t.id,e.id)}));t.forEach((function(e){return L.add(e.id)}))}},RESET_NOTIFICATION_CENTER:M,NOTIFICATION_CENTER_SET_ACTIVE:function(e){var t=e.active;C=t},RELATIONSHIP_ADD:function(e){if(e.relationship.type===c.OGo.PENDING_INCOMING){var t=e.relationship,n=t.user,r=t.since;if(null==r)return null;var i=o.default.getUser(n.id);if(null==i)return null;D=y(D).concat([(0,l.mH)(i,r)])}e.relationship.type===c.OGo.FRIEND&&(D=D.map((function(t){return G(t,a.O7.INCOMING_FRIEND_REQUESTS,e.relationship.user.id)?g(p({},t),{
type:a.O7.INCOMING_FRIEND_REQUESTS_ACCEPTED,body:s.Z.Messages.NOTIFICATION_CENTER_INCOMING_FRIEND_REQUEST_ACCEPTED.format({username:"**".concat(e.relationship.user.username,"**")})}):t})))},RELATIONSHIP_REMOVE:function(e){D=D.filter((function(t){return!G(t,a.O7.INCOMING_FRIEND_REQUESTS,e.relationship.id)&&!G(t,a.O7.INCOMING_FRIEND_REQUESTS_ACCEPTED,e.relationship.id)}))},NOTIFICATION_CENTER_ITEM_COMPLETED:function(e){var t=e.item_enum;R=R.map((function(e){return e.item_enum===t?g(p({},e),{completed:!0,acked:!0}):e})).filter(w)}})},50522:(e,t,n)=>{n.d(t,{AM:()=>i,ud:()=>o,b1:()=>u,DY:()=>a,O7:()=>l});var r,i,o,u,a,l;!function(e){e.LANDING="notification_center_landing"}(r||(r={}));!function(e){e[e.UPDATE_PROFILE=0]="UPDATE_PROFILE";e[e.FIND_FRIENDS=1]="FIND_FRIENDS";e[e.ADD_FRIEND=2]="ADD_FRIEND";e[e.FIRST_MESSAGE=3]="FIRST_MESSAGE"}(i||(i={}));!function(e){e.MARK_ALL_READ="mark_all_read";e.CLICKED="clicked"}(o||(o={}));!function(e){e.ForYou="ForYou";e.Mentions="Mentions"}(u||(u={}))
;!function(e){e.GO_LIVE_PUSH="go_live_push";e.FRIEND_REQUEST_ACCEPTED="friend_request_accepted";e.FRIEND_REQUEST_PENDING="friend_request_pending";e.FRIEND_SUGGESTION_CREATED="friend_suggestion_created";e.DM_FRIEND_NUDGE="dm_friend_nudge"}(a||(a={}));!function(e){e.INCOMING_FRIEND_REQUESTS="INCOMING_FRIEND_REQUESTS";e.INCOMING_FRIEND_REQUESTS_ACCEPTED="INCOMING_FRIEND_REQUESTS_ACCEPTED"}(l||(l={}))},958899:(e,t,n)=>{n.d(t,{a3:()=>E,TW:()=>p,mH:()=>h,r:()=>_});var r=n(730381),i=n.n(r),o=n(277563),u=n(437803),a=n(409271),l=n(493316),c=n(114929),s=(n(667294),(0,n(553494).B)({kind:"user",id:"2022-06_mobile_notification_center",label:"Mobile notification center",defaultConfig:{enabled:!1},treatments:[{id:1,label:"Notification center enabled",config:{enabled:!0}}]}));var d=n(50522),f=n(959797),E=function(e){return(0,u.Ye)(e,(function(){return{minutes:f.Z.Messages.FOR_YOU_TIMESTAMP_MINUTES_AGO,hours:f.Z.Messages.FOR_YOU_TIMESTAMP_HOURS_AGO,days:f.Z.Messages.FOR_YOU_TIMESTAMP_DAYS_AGO,month:(0,
l.vc)(i()(e),"LL")}}))},_=function(e,t){return e.acked||t!==a.uL&&o.default.compare(t,e.id)>=0};function h(e,t){return{acked:!1,other_user:e,kind:"notification-center-item",local_id:"incoming_friend_requests_".concat(e.id),deeplink:"https://discord.com/users/".concat(e.id),type:d.O7.INCOMING_FRIEND_REQUESTS,id:o.default.fromTimestamp(new Date(t).getTime()),body:f.Z.Messages.NOTIFICATION_CENTER_INCOMING_FRIEND_REQUEST.format({username:"**".concat(e.username,"**")})}}function p(){return s.getCurrentConfig({}).enabled||(0,c.Fl)()}},126303:(e,t,n)=>{n.d(t,{WQ:()=>o,j2:()=>u});var r=n(667294),i=(0,n(553494).B)({kind:"guild",id:"2022-08_community_onboarding",label:"Community Onboarding",defaultConfig:{showChannelHighlights:!1,showChannelOptIn:!1,showNewUnreadsBar:!1,enableOnboardingPrompts:!1,enableOnboardingDebug:!1},treatments:[{id:1,label:"Show Community Onboarding",config:{showChannelHighlights:!1,showChannelOptIn:!0,showNewUnreadsBar:!0,enableOnboardingPrompts:!0,
enableOnboardingDebug:!1}},{id:2,label:"Show Community Onboarding (DEBUG)",config:{showChannelHighlights:!1,showChannelOptIn:!0,showNewUnreadsBar:!0,enableOnboardingPrompts:!0,enableOnboardingDebug:!0}}]});function o(e){r.useEffect((function(){i.trackExposure({guildId:e})}),[e]);return i.useExperiment({guildId:e})}function u(e){i.trackExposure({guildId:e});return i.getCurrentConfig({guildId:e})}},357085:(e,t,n)=>{n.d(t,{ar:()=>i,fv:()=>o});var r=(0,n(553494).B)({kind:"user",id:"2022-05_channel_opt_in",label:"Channel Opt In",defaultConfig:{showChannelOptIn:!1,showActionBar:!1},treatments:[{id:1,label:"Show Channel Opt In w/ Action Bar",config:{showChannelOptIn:!0,showActionBar:!0}}]});function i(){return r.useExperiment({}).showChannelOptIn}function o(){return r.getCurrentConfig({}).showChannelOptIn}},513073:(e,t,n)=>{n.d(t,{m7:()=>O,f3:()=>b,Do:()=>S,r1:()=>g,tU:()=>I,pE:()=>m,sk:()=>y,p0:()=>A,DM:()=>p,Ks:()=>v,i8:()=>T,te:()=>C});var r=n(791462),i=n(842667),o=n(487657),u=n(553494)
;const a=(0,u.B)({kind:"guild",id:"2022-09_guild_onboarding_admin_only",label:"Guild Onboarding Admin only",defaultConfig:{enablePrompts:!1},treatments:[{id:1,label:"Enable onboarding prompts",config:{enablePrompts:!0}}]});var l=(0,u.B)({kind:"user",id:"2022-08_new_unreads_bar",label:"New Unreads Bar",defaultConfig:{showNewUnreadsBar:!1},treatments:[{id:1,label:"Show New Unreads Bar",config:{showNewUnreadsBar:!0}}]});var c=n(653772),s=n(940712),d=n(390504),f=n(859023),E=n(126303),_=n(357085),h=n(461061);function p(e){var t=(0,r.e7)([d.Z],(function(){return d.Z.isOptInEnabled(e)})),n=(0,r.e7)([c.Z],(function(){return c.Z.getGuild(e)})),i=(0,r.e7)([f.default],(function(){return f.default.getCurrentUser()})),o=v(e);return null!=e&&null!=n&&null!=i&&((n.hasFeature(h.oNc.COMMUNITY)||i.isStaff())&&o&&t)}function g(e){var t=c.Z.getGuild(e),n=f.default.getCurrentUser();return null!=e&&null!=t&&null!=n&&((t.hasFeature(h.oNc.COMMUNITY)||n.isStaff())&&I(e)&&d.Z.isOptInEnabled(e))}function v(e){
var t=(0,_.ar)(),n=o.Z.useExperiment({}).enableOptIn,r=(0,E.WQ)(e).showChannelOptIn;return t||r||n}function I(e){if(null==e)return!1;var t=(0,_.fv)(),n=o.Z.getCurrentConfig({}).enableOptIn,r=(0,E.j2)(e).showChannelOptIn;return t||r||n}function y(e){var t=(0,i.OL)(),n=o.Z.useExperiment({}).enableChannelHighlights,r=(0,E.WQ)(e).showChannelHighlights;return t||r||n}function O(e){var t=(0,i.hB)(),n=o.Z.getCurrentConfig({}).enableChannelHighlights,r=(0,E.j2)(e).showChannelHighlights;return t||r||n}function T(e){var t=l.useExperiment({}).showNewUnreadsBar,n=o.Z.useExperiment({}).enableOptIn,r=(0,E.WQ)(e).showNewUnreadsBar;return t||r||n}function m(e){var t=l.getCurrentConfig({}).showNewUnreadsBar,n=o.Z.getCurrentConfig({}).enableOptIn,r=(0,E.j2)(e).showNewUnreadsBar;return t||r||n}function A(e){var t=a.useExperiment({guildId:e}).enablePrompts,n=(0,E.WQ)(e).enableOnboardingPrompts;return t||n}function S(e){var t=a.getCurrentConfig({guildId:e}).enablePrompts,n=(0,
E.j2)(e).enableOnboardingPrompts;return t||n}function b(e){var t=(0,E.j2)(e).enableOnboardingPrompts,n=o.Z.getCurrentConfig({}).enableCommunityOnboarding;return t||n}function C(e){var t=A(e),n=(0,r.e7)([c.Z],(function(){return c.Z.getGuild(e)})),i=(0,r.cj)([s.Z],(function(){return{canManageGuild:s.Z.can(h.Plq.MANAGE_GUILD,n),canManageRoles:s.Z.can(h.Plq.MANAGE_ROLES,n)}})),o=i.canManageGuild,u=i.canManageRoles;if(null==n)return!1;var a=n.hasFeature(h.oNc.GUILD_ONBOARDING_EVER_ENABLED);return t&&o&&u&&!a}},254274:(e,t,n)=>{n.d(t,{a:()=>r,w:()=>i});var r=Object.freeze({LOW:"background-opacity-low",MEDIUM:"background-opacity-medium",HIGH:"background-opacity-high",FULL:"background-opacity-full",DISABLED:null}),i=Object.freeze({BOTTOM:0,LOWER:.25,UPPER:.75,TOP:1})},351793:(e,t,n)=>{n.d(t,{Z:()=>c});var r=n(785893),i=(n(667294),n(897576));function o(e,t,n,r,i,o,u){try{var a=e[o](u),l=a.value}catch(e){n(e);return}a.done?t(l):Promise.resolve(l).then(r,i)}function u(e){return function(){
var t=this,n=arguments;return new Promise((function(r,i){var u=e.apply(t,n);function a(e){o(u,r,i,a,l,"next",e)}function l(e){o(u,r,i,a,l,"throw",e)}a(void 0)}))}}function a(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}var l=function(e,t){var n,r,i,o,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;(r=0,i)&&(o=[2&o[0],i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:u.label++;return{value:o[1],done:!1};case 5:u.label++;r=o[1];o=[0];continue;case 7:o=u.ops.pop();u.trys.pop();continue;default:if(!(i=u.trys,
i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){u=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){u.label=o[1];break}if(6===o[0]&&u.label<i[1]){u.label=i[1];i=o;break}if(i&&u.label<i[2]){u.label=i[2];u.ops.push(o);break}i[2]&&u.ops.pop();u.trys.pop();continue}o=t.call(e,u)}catch(e){o=[6,e];r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};function c(){(0,i.ZD)(u((function(){var e,t;return l(this,(function(i){switch(i.label){case 0:return[4,Promise.all([n.e(40532),n.e(61697)]).then(n.bind(n,461697))];case 1:e=i.sent(),t=e.default;return[2,function(e){return(0,r.jsx)(t,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){a(e,t,n[t])}))}return e}({},e))}]}}))})))}},977898:(e,t,n)=>{n.d(t,{W:()=>r})
;var r;!function(e){e[e.CHANNEL=0]="CHANNEL";e[e.GUILD_EVENT=1]="GUILD_EVENT";e[e.NOTIFICATION_CENTER=2]="NOTIFICATION_CENTER";e[e.GUILD_HOME=3]="GUILD_HOME"}(r||(r={}))},510174:(e,t,n)=>{n.d(t,{V:()=>_,X:()=>h});var r=n(814281),i=n(971738),o=n(449024);var u=n(853524),a=n(414954),l=n(1812),c=n(379822),s=n(655695),d=n(461061),f=n(35236),E=n(169445);function _(e){var t,n=c.Z.getChannelId(e);if(n===f.oC.GUILD_ONBOARDING&&u.ZP.shouldShowOnboarding(e))return f.oC.GUILD_ONBOARDING;if(function(e){if(!(0,o.YM)(e))return!1;var t=i.Z.getLastSelectedTimestamp(e);return t!==i.i&&(null==t||Date.now()-t>72e6)}(e)){r.mh(e,E.SB.TIMER);return f.oC.GUILD_HOME}var a=null===(t=l.ZP.getDefaultChannel(e))||void 0===t?void 0:t.id;return[f.oC.GUILD_ONBOARDING].includes(n)?a:n}function h(e,t){var n=(0,a.cn)()?void 0:_(e);(0,s.uL)(d.Z5c.CHANNEL(e,n),t)}},664970:(e,t,n)=>{n.d(t,{t:()=>r,F:()=>i});var r,i;!function(e){e[e.CREATE_THREAD=0]="CREATE_THREAD";e[e.VIEW_THREAD=1]="VIEW_THREAD"
;e[e.VIEW_CHANNEL=2]="VIEW_CHANNEL";e[e.VIEW_MESSAGE_REQUEST=3]="VIEW_MESSAGE_REQUEST"}(r||(r={}));!function(e){e.MESSAGE_REQUEST="message-request";e.HOME="home"}(i||(i={}))},673221:(e,t,n)=>{n.d(t,{xO:()=>r,gf:()=>u,ZP:()=>a});var r,i=n(791462),o=n(882687);!function(e){e[e.NONE=0]="NONE";e[e.REQUESTED_TO_SPEAK=1]="REQUESTED_TO_SPEAK";e[e.REQUESTED_TO_SPEAK_AND_AWAITING_USER_ACK=2]="REQUESTED_TO_SPEAK_AND_AWAITING_USER_ACK";e[e.ON_STAGE=3]="ON_STAGE"}(r||(r={}));function u(e){return null==e?r.NONE:e.suppress&&null!=e.requestToSpeakTimestamp?r.REQUESTED_TO_SPEAK:e.suppress||null==e.requestToSpeakTimestamp?e.suppress||null!=e.requestToSpeakTimestamp?r.NONE:r.ON_STAGE:r.REQUESTED_TO_SPEAK_AND_AWAITING_USER_ACK}function a(e,t){return(0,i.e7)([o.Z],(function(){return null==e||null==t?r.NONE:u(o.Z.getVoiceStateForChannel(t,e))}),[e,t])}},973381:(e,t,n)=>{n.d(t,{Z:()=>N});var r=n(496486),i=n.n(r),o=n(791462),u=n(173436),a=n(53551),l=n(356004);function c(e,t){
if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function d(e){d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return d(e)}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){s(e,t,n[t])}))}return e}function E(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}
return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function _(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e,t){h=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return h(e,t)}var p=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var i=d(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _(this,n)}}var v={},I=new Set;function y(e){return{id:e.id,parentId:e.parent_id}}
function O(e){e in v&&delete v[e]}function T(e){if(null!=e.threads&&e.threads.length>0){v[e.id]={};e.threads.filter((function(e){return a.AW.has(e.type)})).forEach((function(t){return m(e.id,t)}))}}function m(e,t){var n=v[e],r=t.parent_id;r in n||(n[r]={});v[e][r][t.id]=y(t)}function A(e){var t,n=e.channel;if(!a.AW.has(n.type))return!1;if(!0===(null===(t=n.threadMetadata)||void 0===t?void 0:t.archived))return S(n);var r,i=null!==(r=v[n.guild_id])&&void 0!==r?r:{};v[n.guild_id]=E(f({},i),s({},n.parent_id,E(f({},i[n.parent_id]),s({},n.id,y(n)))))}function S(e){var t=e.guild_id,n=e.parent_id,r=e.id;if(null==t||null==n)return!1;if(!(t in v))return!1;if(!(n in v[t]))return!1;if(!(r in v[t][n]))return!1;v[t]=E(f({},v[t]),s({},n,f({},v[t][n])));delete v[t][n][r];i().isEmpty(v[t][n])&&delete v[t][n]}var b={},C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{
constructor:{value:e,writable:!0,configurable:!0}});t&&h(e,t)}(n,e);var t=g(n);function n(){c(this,n);return t.apply(this,arguments)}var r=n.prototype;r.initialize=function(){this.waitFor(l.Z)};r.isActive=function(e,t,n){return null!=e&&null!=this.getThreadsForParent(e,t)[n]};r.getThreadsForGuild=function(e){var t;return null!==(t=v[e])&&void 0!==t?t:b};r.getThreadsForParent=function(e,t){var n;return null!==(n=this.getThreadsForGuild(e)[t])&&void 0!==n?n:b};r.hasThreadsForChannel=function(e,t){return!i().isEmpty(this.getThreadsForParent(e,t))};r.forEachGuild=function(e){for(var t in v)e(t,v[t])};r.hasLoaded=function(e){return I.has(e)};r.__getLocalVars=function(){return{threadsByGuild:v,loadedGuildIds:I,NO_THREADS:b}};return n}(o.ZP.Store);C.displayName="ActiveThreadsStore";const N=new C(u.Z,{CONNECTION_OPEN:function(e){v={};I.clear();e.guilds.forEach((function(e){T(e)}))},OVERLAY_INITIALIZE:function(e){var t=e.channels;v={};i()(t).filter((function(e){return a.Ec.has(e.type)
})).groupBy("guild_id").forEach((function(e,t){v[t]={};e.forEach((function(e){return m(t,e)}))}))},GUILD_CREATE:function(e){var t=e.guild;O(t.id);T(t)},GUILD_DELETE:function(e){O(e.guild.id)},THREAD_CREATE:A,THREAD_UPDATE:A,THREAD_LIST_SYNC:function(e){var t=e.guildId,n=e.threads;null==e.channelIds&&I.add(t);v[t]=f({},v[t]);for(var r in v[t])v[t][r]=f({},v[t][r]);n.forEach((function(e){return m(t,e)}))},THREAD_DELETE:function(e){return S(e.channel)},CHANNEL_DELETE:function(e){var t=e.channel;if(null==t.guild_id||!(t.guild_id in v))return!1;v[t.guild_id]=f({},v[t.guild_id]);delete v[t.guild_id][t.id]}})},437803:(e,t,n)=>{n.d(t,{Ye:()=>y,A_:()=>O,U4:()=>T,q:()=>m,ZJ:()=>A});var r=n(730381),i=n.n(r),o=n(23816),u=n(390504),a=n(932847),l=n(418674),c=n(203271),s=n(668479),d=n(504003),f=n(461061),E=n(959797);function _(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function h(e,t){t=null!=t?t:{}
;Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function p(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++){n=o[r];t.indexOf(n)>=0||(i[n]=e[n])}return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++){n=o[r];t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}}return i}var g=3600,v=86400,I=function(){return{minutes:E.Z.Messages.THREAD_BROWSER_TIMESTAMP_MINUTES,hours:E.Z.Messages.THREAD_BROWSER_TIMESTAMP_HOURS,days:E.Z.Messages.THREAD_BROWSER_TIMESTAMP_DAYS,
month:E.Z.Messages.THREAD_BROWSER_TIMESTAMP_MORE_THAN_MONTH}},y=function(e,t){var n=i()().diff(i()(e),"s"),r=(null!=t?t:I)(),o=i()(e).format("LL");n<60?o=r.minutes.format({count:1}):n<g?o=r.minutes.format({count:Math.floor(n/60)}):n<v?o=r.hours.format({count:Math.floor(n/g)}):n<2592e3&&(o=r.days.format({count:Math.floor(n/v)}));return o};function O(){(0,o.yw)(f.rMx.THREAD_BROWSER_TAB_CHANGED)}function T(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Modal";(0,o.yw)(f.rMx.OPEN_MODAL,{type:"Thread Browser",location_section:e})}function m(){a.default.track(f.rMx.OPEN_POPOUT,{type:"Active Threads Popout"})}function A(e,t){var n=(0,o.KG)(e);if(null!=n){var r,i,E=e.getGuildId(),g=e.parent_id,v=(0,c.I)(E,g),I=function(e){return(0,l.yE)(e,d.iN.ALL_MESSAGES)?c.$R[f.bL.ALL_MESSAGES]:(0,l.yE)(e,d.iN.ONLY_MENTIONS)?c.$R[f.bL.ONLY_MENTIONS]:(0,l.yE)(e,d.iN.NO_MESSAGES)?c.$R[f.bL.NO_MESSAGES]:c.$R[f.bL.NULL]
},y=null!==(r=s.Z.flags(e.id))&&void 0!==r?r:0,O=I(y),T=s.Z.isMuted(e.id),m=(0,c.sK)(s.Z.getMuteConfig(e.id)),A=(n.can_send_message,h(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){_(e,t,n[t])}))}return e}({},p(n,["can_send_message"])),{channel_id:e.id,guild_id:E,parent_id:g,channel_type:e.type,has_interacted_with_thread:0!=(y&d.iN.HAS_INTERACTED),parent_is_muted:u.Z.isGuildOrCategoryOrChannelMuted(E,g),old_thread_notification_setting:O,new_thread_notification_setting:null!=t.flags?I(t.flags):O,parent_notification_setting:v.channel_message_notification_settings,old_thread_is_muted:T,new_thread_is_muted:null!==(i=t.muted)&&void 0!==i?i:T,old_thread_muted_until:m,new_thread_muted_until:null!=t.mute_config?(0,c.sK)(t.mute_config):m}))
;a.default.track(f.rMx.THREAD_NOTIFICATION_SETTINGS_UPDATED,A)}}},575698:(e,t,n)=>{n.d(t,{Z:()=>r});function r(e){return{id:e.id,userId:e.user_id,flags:e.flags,muted:e.muted,muteConfig:e.mute_config,joinTimestamp:e.join_timestamp}}},18416:(e,t,n)=>{n.d(t,{Z:()=>H});var r=n(791462),i=n(173436),o=n(430923),u=n(997163),a=n(337160),l=n(945296),c=n(631134),s=n(356004),d=n(653772),f=n(934714),E=n(940712),_=n(733285),h=n(73462),p=n(882687),g=n(461061),v=n(855846);function I(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function O(e){O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return O(e)}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n)
;"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){y(e,t,n[t])}))}return e}function m(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function A(e,t){return!t||"object"!==L(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function S(e,t){S=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return S(e,t)}var b,C,N,R,L=function(e){
return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=O(e);if(t){var i=O(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return A(this,n)}}var P=null,w={};M();function M(){b=new Map;C={};N={};R={};w={}}function U(e){b.delete(e)}function Z(e){var t=e.streamKey,n=e.region,r=e.viewerIds,i=e.paused;b.set(t,m(T({},(0,u.my)(t)),{state:i?g.jm8.PAUSED:g.jm8.ACTIVE}));N[t]={streamKey:t,region:n,viewerIds:r}}function G(e,t){return e===v.lo.CALL||E.Z.canWithPartialContext(g.Plq.VIEW_CHANNEL,{channelId:t})}var k=function(e){!function(e,t){
if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&S(e,t)}(n,e);var t=D(n);function n(){I(this,n);return t.apply(this,arguments)}var r=n.prototype;r.initialize=function(){this.syncWith([E.Z],(function(){return!0}));this.waitFor(h.Z,E.Z)};r.isSelfStreamHidden=function(e){var t;return null!==(t=w[e])&&void 0!==t&&t};r.getLastActiveStream=function(){return(0,l.Z)(f.Z)&&null!==(e=Array.from(b.values()).pop())&&void 0!==e?e:null;var e};r.getAllActiveStreams=function(){return(0,l.Z)(f.Z)?Array.from(b.values()):[]};r.getAllActiveStreamsForChannel=function(e){return(0,l.Z)(f.Z)?Array.from(b.values()).filter((function(t){return t.channelId===e})):[]};r.getActiveStreamForStreamKey=function(e){return(0,l.Z)(f.Z)&&null!==(t=b.get(e))&&void 0!==t?t:null;var t};r.getActiveStreamForApplicationStream=function(e){if(!(0,l.Z)(f.Z)||null==e)return null
;var t,n=(0,u.V9)(e);return null!==(t=this.getActiveStreamForStreamKey(n))&&void 0!==t?t:null};r.getActiveStreamForUser=function(e){var t,n=this.getStreamForUser(e);return null!=n?this.getActiveStreamForApplicationStream(n):null!==(t=this.getAllActiveStreams().find((function(t){return t.ownerId===e})))&&void 0!==t?t:null};r.getStreamerActiveStreamMetadata=function(){var e,t=this.getActiveStreamForUser(c.default.getId());return null==t?null:null!==(e=R[(0,u.V9)(t)])&&void 0!==e?e:null};r.getStreamForUser=function(e){if(!(0,l.Z)(f.Z))return null;var t=C[e];if(null==t)return null;var n=s.Z.getChannel(t.channelId);return G(t.streamType,t.channelId)||null!=n&&(0,a.p9)(n,p.Z,d.Z,E.Z,o.Z)[0]?t:null};r.getRTCStream=function(e){return(0,l.Z)(f.Z)&&null!==(t=N[e])&&void 0!==t?t:null;var t};r.getAllApplicationStreams=function(){return(0,l.Z)(f.Z)?Object.values(C).filter((function(e){return null!=e&&G(e.streamType,e.channelId)})):[]};r.getAllApplicationStreamsForChannel=function(e){return(0,
l.Z)(f.Z)?Object.values(C).filter((function(t){return null!=t&&t.channelId===e&&G(t.streamType,t.channelId)})):[]};r.getViewerIds=function(e){if(!(0,l.Z)(f.Z))return[];var t=null,n=null!=(t="string"==typeof e?e:(0,u.V9)(e))?N[t]:null;return null!=n?n.viewerIds:[]};r.getState=function(){return(0,l.Z)(f.Z)?{activeStreams:Array.from(b.entries()),streamsByUser:C,rtcStreams:N,streamerActiveStreamMetadatas:R}:{activeStreams:[],streamsByUser:{},rtcStreams:{},streamerActiveStreamMetadatas:{}}};r.__getLocalVars=function(){return{activeStreams:b,streamsByUser:C,rtcStreams:N,streamerActiveStreamMetadatas:R,selectedParticipantId:P,selfStreamParticipantsHidden:w}};return n}(r.ZP.Store);k.displayName="ApplicationStreamingStore";const H=new k(i.Z,{OVERLAY_INITIALIZE:function(e){var t=e.applicationStreamState;C=t.streamsByUser;b=new Map(t.activeStreams);N=t.rtcStreams;R=t.streamerActiveStreamMetadatas},VOICE_STATE_UPDATES:function(e){return e.voiceStates.reduce((function(e,t){
var n=t.userId,r=t.guildId,i=t.channelId,o=t.sessionId;if(t.selfStream&&null!=i){u={streamType:null!=r?v.lo.GUILD:v.lo.CALL,ownerId:n,guildId:r,channelId:i},C[u.ownerId]=u;return!0}var u,a=c.default.getSessionId();return n===c.default.getId()&&o!==a&&null!=_.Z.getChannelId()?e:function(e){if(null==C[e])return!1;delete C[e];return!0}(n)||e}),!1)},STREAM_WATCH:function(e){var t=e.streamKey,n=(0,u.my)(t);b.delete(t);b.set(t,m(T({},n),{state:g.jm8.CONNECTING}));n.ownerId===c.default.getId()&&(w[n.channelId]=!1)},STREAM_START:function(e){var t=e.streamType,n=e.guildId,r=e.channelId,i=e.pid,o=e.sourceName,a=(0,u.V9)({streamType:t,guildId:n,channelId:r,ownerId:c.default.getId()}),l=null!=i?h.Z.getGameForPID(i):null;R[a]={id:null==l?void 0:l.id,pid:i,sourceName:o};b.delete(a);b.set(a,{streamType:t,guildId:n,channelId:r,ownerId:c.default.getId(),state:g.jm8.CONNECTING})},STREAM_STOP:function(e){var t=e.streamKey;R[t]=null},STREAM_CREATE:Z,STREAM_UPDATE:Z,STREAM_TIMED_OUT:function(e){
var t=e.streamKey,n=b.get(t);if(null==n)return!1;b.set(t,m(T({},n),{state:g.jm8.FAILED}))},STREAM_DELETE:function(e){var t=e.streamKey,n=e.unavailable,r=e.reason;delete N[t];var i=b.get(t);if(null==i)return!1;var o=g.jm8.ENDED;n?o=g.jm8.RECONNECTING:r===g.si2.UNAUTHORIZED&&(o=g.jm8.FAILED);b.set(t,m(T({},i),{state:o}));o===g.jm8.ENDED&&P!==t&&U(t)},STREAM_CLOSE:function(e){U(e.streamKey)},STREAM_UPDATE_SELF_HIDDEN:function(e){var t=e.channelId,n=e.selfStreamHidden;(0,u.DB)(P)&&(null==P?void 0:P.includes(c.default.getId()))&&!1===w[t]&&!0===n&&(P=null);w[t]=n},RTC_CONNECTION_STATE:function(e){var t=e.streamKey,n=e.state;if(null==t)return!1;var r=b.get(t);if(null==r||r.state===g.jm8.ENDED)return!1;var i=r.state;switch(n){case g.hes.DISCONNECTED:i=g.jm8.RECONNECTING;break;case g.hes.RTC_CONNECTED:i=g.jm8.ACTIVE}if(i===r.state)return!1;b.set(t,m(T({},r),{state:i}))},CHANNEL_RTC_SELECT_PARTICIPANT:function(e){var t=e.id,n=e.channelId;P=t;Array.from(b.values()).forEach((function(e){(0,
u.V9)(e)!==P&&e.state===g.jm8.ENDED&&U((0,u.V9)(e))}));if(null!=t){(0,u.DB)(t)&&t.includes(c.default.getId())&&(w[n]=!1)}},CONNECTION_OPEN:M,CONNECTION_CLOSED:M,LOGOUT:M})},464623:(e,t,n)=>{n.d(t,{Z:()=>S});var r=n(496486),i=n.n(r),o=n(791462),u=n(675860),a=n(173436),l=n(356004),c=n(379822),s=n(971738),d=n(461061);function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function _(e){_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return _(e)}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){E(e,t,n[t])}))}return e}
function p(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function g(e,t){return!t||"object"!==I(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e,t){v=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return v(e,t)}var I=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0
;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=_(e);if(t){var i=_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}var O={},T={};function m(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.Z.getChannelId(),n=l.Z.getChannel(t);if(null!=n&&null==n.getGuildId()&&null!=t&&(null==O[t]||e)){var r;O[t]=null!==(r=O[t])&&void 0!==r?r:{channelId:t,ringing:[]};a.Z.dispatch({type:"CALL_CONNECT",channelId:t});return!0}return!1}var A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&v(e,t)}(n,e);var t=y(n);function n(){f(this,n);return t.apply(this,arguments)}var r=n.prototype;r.initialize=function(){
this.waitFor(s.Z,c.Z)};r.getCall=function(e){return O[e]};r.getCalls=function(){return Object.values(O)};r.getMessageId=function(e){var t=this.getCall(e);return null!=t?t.messageId:null};r.isCallActive=function(e,t){var n=O[e];return null!=n&&!n.unavailable&&(null!=t?n.messageId===t:null!=n.region)};r.isCallUnavailable=function(e){var t=O[e];return null!=t&&t.unavailable};r.getInternalState=function(){return{calls:O,enqueuedRings:T}};r.__getLocalVars=function(){return{calls:O,enqueuedRings:T}};return n}(o.ZP.Store);A.displayName="CallStore";const S=new A(a.Z,{CONNECTION_OPEN:function(){return m(!0)},CONNECTION_CLOSED:function(){O={};T={}},OVERLAY_INITIALIZE:function(e){var t=e.callStoreInternalState;O=h({},t.calls);T=h({},t.enqueuedRings)},CONNECTION_RESUMED:function(){return m(!0)},CHANNEL_SELECT:function(e){return m(!1,e.channelId)},CHANNEL_DELETE:function(e){var t=e.channel;null!=T[t.id]&&delete T[t.id];if(null==O[t.id])return!1;delete O[t.id]},CALL_CREATE:function(e){
var t=e.channelId,n=e.messageId,r=e.region,i=e.ringing;O[t]={channelId:t,messageId:n,region:r,ringing:i,unavailable:!1,regionUpdated:!1};if(null!=T[t]){var o=T[t];delete T[t];1!==o.indexOf("all")&&(o=null);u.Z.post({url:d.ANM.CALL_RING(t),body:{recipients:o},oldFormErrors:!0})}},CALL_UPDATE:function(e){var t=e.channelId,n=e.messageId,r=e.region,i=e.ringing,o=O[t],u=null!=o&&(o.regionUpdated||o.region!==r);O[t]=p(h({},O[t]),{messageId:n,region:r,ringing:i,regionUpdated:u})},CALL_DELETE:function(e){var t=e.channelId,n=e.unavailable,r=O[t];O[t]=!0===n&&null!=r?p(h({},r),{unavailable:n}):{channelId:t,ringing:[],messageId:null,region:null,regionUpdated:!1,unavailable:n};null!=T[t]&&delete T[t]},CALL_ENQUEUE_RING:function(e){var t,n=e.channelId,r=e.recipients;T[n]=i().union(null!==(t=T[n])&&void 0!==t?t:[],null!=r?r:["all"])},VOICE_CHANNEL_SELECT:function(e){null==e.channelId&&(T={})}})},710348:(e,t,n)=>{n.d(t,{Z:()=>T})
;var r=n(791462),i=n(173436),o=n(90816),u=n(356004),a=n(152666),l=n(1812),c=n(461061);function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1;r.configurable=!0;"value"in r&&(r.writable=!0);Object.defineProperty(e,r.key,r)}}function f(e){f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return f(e)}function E(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _(e,t){_=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return _(e,t)}var h=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1
;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var i=f(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return E(this,n)}}var g={},v=0;function I(){v+=1}function y(e){if(null==g[e])return!1;delete g[e]}var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&_(e,t)}(n,e);var t=p(n);function n(){s(this,n);return t.apply(this,arguments)}var r=n.prototype;r.initialize=function(e){this.waitFor(u.Z,a.Z);this.removeChangeListener(I);this.addChangeListener(I);g=null!=e?e:{}};r.getState=function(){return g};r.isCollapsed=function(e){return!(null==e||"null"===e||!g[e])&&g[e]};r.getCollapsedCategories=function(){return g}
;r.__getLocalVars=function(){return{collapsedCategories:g,version:v}};!function(e,t,n){t&&d(e.prototype,t);n&&d(e,n)}(n,[{key:"version",get:function(){return v}}]);return n}(r.ZP.PersistedStore);O.displayName="CategoryCollapseStore";O.persistKey="collapsedCategories";const T=new O(i.Z,{CONNECTION_OPEN:function(e){e.userGuildSettings.partial||(g={});var t=!0,n=!1,r=void 0;try{for(var i,o=e.userGuildSettings.entries[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var u=i.value;if(null!=u.channel_overrides){var a=!0,l=!1,c=void 0;try{for(var s,d=u.channel_overrides[Symbol.iterator]();!(a=(s=d.next()).done);a=!0){var f=s.value;f.collapsed?g[f.channel_id]=!0:delete g[f.channel_id]}}catch(e){l=!0;c=e}finally{try{a||null==d.return||d.return()}finally{if(l)throw c}}}}}catch(e){n=!0;r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}},USER_GUILD_SETTINGS_FULL_UPDATE:function(e){var t=e.userGuildSettings,n=new Set(t.map((function(e){return e.guild_id})).filter(o.lm))
;for(var r in g){var i=u.Z.getChannel(r);null!=i&&null!=i.guild_id&&n.has(i.guild_id)&&delete g[i.id]}var a=!0,l=!1,c=void 0;try{for(var s,d=t[Symbol.iterator]();!(a=(s=d.next()).done);a=!0){var f=s.value,E=!0,_=!1,h=void 0;try{for(var p,v=f.channel_overrides[Symbol.iterator]();!(E=(p=v.next()).done);E=!0){var I=p.value;I.collapsed&&(g[I.channel_id]=!0)}}catch(e){_=!0;h=e}finally{try{E||null==v.return||v.return()}finally{if(_)throw h}}}}catch(e){l=!0;c=e}finally{try{a||null==d.return||d.return()}finally{if(l)throw c}}},CATEGORY_COLLAPSE:function(e){var t=e.id;if(g[t])return!1;g[t]=!0},CATEGORY_EXPAND:function(e){return y(e.id)},CATEGORY_COLLAPSE_ALL:function(e){var t=e.guildId;l.ZP.getChannels(t)[c.d4z.GUILD_CATEGORY].forEach((function(e){var t=e.channel;"null"!==t.id&&(g[t.id]=!0)}))},CATEGORY_EXPAND_ALL:function(e){var t=e.guildId;l.ZP.getChannels(t)[c.d4z.GUILD_CATEGORY].forEach((function(e){var t=e.channel;delete g[t.id]}))},CHANNEL_DELETE:function(e){return y(e.channel.id)}})},
915354:(e,t,n)=>{n.d(t,{uZ:()=>m,D5:()=>R,ZP:()=>M});var r=n(606076),i=n(791462),o=n(173436),u=n(664970),a=n(882699),l=n(356004),c=n(940712),s=n(759194),d=n(379822),f=n(971738),E=n(859023),_=n(461061),h=n(35236),p=n(609993);function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e){v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return v(e)}function I(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e,t){y=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return y(e,t)}var O=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{
Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var i=v(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return I(this,n)}}var m="message_requests",A=!1,S=!0,b=!1,C={};function N(e){if(null==e)return null;if((0,h.AB)(e)){var t=f.Z.getGuildId();if(null==t)return null;e=(0,h.Qk)(e,t)}return e}function R(e){return[u.t.VIEW_CHANNEL,u.t.VIEW_THREAD,u.t.VIEW_MESSAGE_REQUEST].includes(e.type)}function L(e){var t=!1;if(b){b=!1;t=!0}var n=N(d.Z.getChannelId());if(null!=n&&n in C){delete C[n];t=!0}return t&&e?e:!e}function D(){var e=!1;for(var t in C){var n=C[t];if(n.type===u.t.VIEW_THREAD||n.type===u.t.VIEW_CHANNEL){var r=l.Z.getChannel(n.channelId);if(null==r||!c.Z.can(p.Pl.VIEW_CHANNEL,r)){delete C[t];e=!0}}}return e}function P(){if(b===s.Z.isActive())return!1;b=s.Z.isActive()}var w=function(e){!function(e,t){
if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&y(e,t)}(n,e);var t=T(n);function n(){g(this,n);return t.apply(this,arguments)}var r=n.prototype;r.initialize=function(e){if(null!=e){var t,n,r;A=null!==(t=e.isMembersOpen)&&void 0!==t&&t;S=null===(n=e.isProfileOpen)||void 0===n||n;C=null!==(r=e.sidebars)&&void 0!==r?r:{}}this.syncWith([s.Z],P);this.syncWith([c.Z],D)};r.getState=function(){return{isMembersOpen:A,isProfileOpen:S,sidebars:C}};r.getSection=function(e){var t=l.Z.getChannel(e);return b?_.ULH.SEARCH:null!=(e=N(e))&&null!=C[e]?_.ULH.SIDEBAR_CHAT:(null==t?void 0:t.isDM())&&S?_.ULH.PROFILE:A?_.ULH.MEMBERS:_.ULH.NONE};r.getSidebarState=function(e){return null==(e=N(e))?void 0:C[e]};r.getCurrentSidebarChannelId=function(e){if(null==(e=N(e)))return null;if(b)return null;var t=C[e]
;return null==t?null:t.type===u.t.VIEW_THREAD||t.type===u.t.VIEW_CHANNEL?t.channelId:null};r.__getLocalVars=function(){return{isMembersOpen:A,isProfileOpen:S,isSearchOpen:b,sidebars:C}};return n}(i.ZP.PersistedStore);w.displayName="ChannelSectionStore";w.persistKey="ChannelSectionStore2";const M=new w(o.Z,{CHANNEL_TOGGLE_MEMBERS_SECTION:function(){A=L(A)},PROFILE_PANEL_TOGGLE_SECTION:function(){S||a.S.dispatch(_.CkL.SEARCH_RESULTS_CLOSE);S=L(S)},SIDEBAR_VIEW_CHANNEL:function(e){var t=e.sidebarType,n=e.baseChannelId,r=e.channelId,i=e.details;b=!1;var o=N(n);null!=o&&(C[o]={type:t,channelId:r,details:i})},SIDEBAR_CREATE_THREAD:function(e){var t=e.parentChannelId,n=e.parentMessageId,r=e.location;b=!1;var i=N(t);null!=i&&(C[i]={type:u.t.CREATE_THREAD,parentChannelId:t,parentMessageId:n,location:r})},SIDEBAR_CLOSE:function(e){var t=N(e.baseChannelId);null!=t&&delete C[t]},CHANNEL_DELETE:function(e){var t=e.channel;if(t.id in C){delete C[t.id];return!0}var n=!1;for(var r in C){var i=C[r]
;if(null!=i&&i.type===u.t.VIEW_CHANNEL&&i.channelId===t.id){delete C[r];n=!0}}return n},CHANNEL_SELECT:function(){r.tq&&A&&(A=!1)},THREAD_CREATE:function(e){var t,n=e.channel;if(n.ownerId===(null===(t=E.default.getCurrentUser())||void 0===t?void 0:t.id))return!1;var r=C[n.parent_id];null!=r&&r.type===u.t.CREATE_THREAD&&r.parentMessageId===n.id&&(C[n.parent_id]={type:u.t.VIEW_THREAD,channelId:n.id})},THREAD_DELETE:function(e){var t=e.channel,n=C[t.parent_id];if(null==n||n.type!==u.t.VIEW_THREAD||n.channelId!==t.id)return!1;delete C[t.parent_id]}})},978627:(e,t,n)=>{n.d(t,{Z:()=>C});var r=n(791462),i=n(173436),o=n(891153),u=n(409271),a=n(742269),l=n(631134),c=n(461061),s=n(866452);function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e){f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return f(e)}function E(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?function(e){
if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _(e,t){_=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return _(e,t)}var h=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var i=f(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return E(this,n)}}var g=Date.now(),v=!1,I=!1,y=!1,O=!1,T=!1;function m(){return y||O||(0,a.Dt)()&&T}function A(){Date.now()-g>c.OSm||m()?v||i.Z.dispatch({type:"IDLE",idle:!0,idleSince:g}):v&&i.Z.dispatch({type:"IDLE",idle:!1})
;Date.now()-g>Math.min(1e3*u.CM.getSetting(),c.OSm)||m()?I||i.Z.dispatch({type:"AFK",afk:!0}):I&&i.Z.dispatch({type:"AFK",afk:!1})}if(!__OVERLAY__)if(a.FB&&null!=(null===o.Z||void 0===o.Z?void 0:o.Z.remotePowerMonitor)){!function e(){var t,r=function(t){g=Math.max(Date.now()-t,g);A();setTimeout(e,1e4)};if(null!=(null===o.Z||void 0===o.Z||null===(t=o.Z.remotePowerMonitor)||void 0===t?void 0:t.getSystemIdleTimeMs)){var i=o.Z.remotePowerMonitor.getSystemIdleTimeMs();i instanceof Promise?i.then(r):r(i)}else n(588641).default.getIdleMilliseconds(r)}();o.Z.remotePowerMonitor.on("resume",(function(){y=!1;S({})}));o.Z.remotePowerMonitor.on("suspend",(function(){y=!0;S({})}));o.Z.remotePowerMonitor.on("lock-screen",(function(){O=!0;S({})}));o.Z.remotePowerMonitor.on("unlock-screen",(function(){O=!1;S({})}))}else setInterval(A,.25*c.OSm);function S(e){var t=e.timestamp,n="OVERLAY_SET_NOT_IDLE"===e.type&&null!=t;if(n&&t<=g)return!1;g=n?t:Date.now();__OVERLAY__?i.Z.dispatch({
type:"OVERLAY_SET_NOT_IDLE",timestamp:g}):A();return!1}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&_(e,t)}(n,e);var t=p(n);function n(){d(this,n);return t.apply(this,arguments)}var r=n.prototype;r.isIdle=function(){return v};r.isAFK=function(){return I};r.getIdleSince=function(){return v?g:null};r.__getLocalVars=function(){return{idleSince:g,idle:v,afk:I,systemSuspended:y,systemLocked:O,appBackgrounded:T}};return n}(r.ZP.Store);b.displayName="IdleStore";const C=new b(i.Z,{IDLE:function(e){v=e.idle},AFK:function(e){I=e.afk},SPEAKING:function(e){var t=e.userId;e.speakingFlags!==s.Dg.NONE&&t===l.default.getId()&&S({});return!1},APP_STATE_UPDATE:function(e){var t=e.state;T=t===c.$7l.BACKGROUND;g=Date.now();A();return!1},OVERLAY_SET_NOT_IDLE:S,CHANNEL_SELECT:S,VOICE_CHANNEL_SELECT:S,WINDOW_FOCUS:S,
OVERLAY_INITIALIZE:S,OVERLAY_SET_INPUT_LOCKED:S,USER_SETTINGS_PROTO_UPDATE:S})},90354:(e,t,n)=>{n.d(t,{Z:()=>q});var r=n(496486),i=n.n(r),o=n(468811),u=n.n(o),a=n(791462),l=n(444450),c=n(173436),s=n(490640);function d(e){d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return d(e)}function f(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function E(e,t){E=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return E(e,t)}var _=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}()
;return function(){var n,r=d(e);if(t){var i=d(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f(this,n)}}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&E(e,t)}(n,e);var t=h(n);function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r;(r=t.call(this)).id=e.id||"";r.widgets=e.widgets||[];return r}return n}(s.Z);function g(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function v(e){v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return v(e)}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n)
;"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){g(e,t,n[t])}))}return e}function y(e,t){return!t||"object"!==T(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function O(e,t){O=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return O(e,t)}var T=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var i=v(this).constructor;n=Reflect.construct(r,arguments,i)
}else n=r.apply(this,arguments);return y(this,n)}}var A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&O(e,t)}(n,e);var t=m(n);function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r;(r=t.call(this)).id=e.id||"";r.layoutId=e.layoutId||"";r.type=e.type;r.anchor=I({left:0,top:0},e.anchor);r.size=I({width:0,height:0},e.size);r.pinned=!!e.pinned;r.zIndex=e.zIndex||0;r.meta=I({},e.meta);return r}return n}(s.Z),S=n(434987),b=n(461061);function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function N(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n
;return e}function L(e){L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return L(e)}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){R(e,t,n[t])}))}return e}function P(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function w(e,t){return!t||"object"!==G(t)&&"function"!=typeof t?function(e){
if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function M(e,t){M=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return M(e,t)}function U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],u=!0,a=!1;try{for(n=n.call(e);!(u=(r=n.next()).done);u=!0){o.push(r.value);if(t&&o.length===t)break}}catch(e){a=!0;i=e}finally{try{u||null==n.return||n.return()}finally{if(a)throw i}}return o}}(e,t)||k(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e){return function(e){if(Array.isArray(e))return C(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||k(e)||function(){
throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var G=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function k(e,t){if(e){if("string"==typeof e)return C(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);return"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?C(e,t):void 0}}function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=L(e);if(t){var i=L(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return w(this,n)}}
var F,j,V,B="migrated",x=(R(V={},b.Odu.GUILDS,{minSize:{width:312,height:300},resizeX:!1,resizeY:!0,dragAnywhere:!1,layoutPolicy:b.WxG.OPTIONAL,defaultSettings:{anchor:{left:.175,top:.15,bottom:null,right:null},size:{width:"auto",height:.65},pinned:!1}}),R(V,b.Odu.TEXT,{minSize:{width:430,height:300},resizeX:!0,resizeY:!0,dragAnywhere:!1,layoutPolicy:b.WxG.OPTIONAL,defaultSettings:{anchor:{left:.26,top:.15,bottom:null,right:null},size:{width:.565,height:.65},pinned:!0}}),R(V,b.Odu.VOICE,{minSize:{width:272,height:100},resizeX:!1,resizeY:!1,dragAnywhere:!0,layoutPolicy:b.WxG.REQUIRED,defaultSettings:{anchor:{left:.011,top:.011,bottom:null,right:null},size:{width:"auto",height:"auto"},pinned:!0}}),R(V,b.Odu.GUILDS_TEXT,{minSize:{height:300,width:610},resizeX:!0,resizeY:!0,dragAnywhere:!1,layoutPolicy:b.WxG.OPTIONAL_DEFAULT,defaultSettings:{anchor:{left:.15,top:.15,bottom:null,right:null},size:{width:.7,height:.65},pinned:!1}}),R(V,b.Odu.LOBBY_VOICE,{minSize:{width:272,height:100},
resizeX:!1,resizeY:!1,dragAnywhere:!0,layoutPolicy:b.WxG.REQUIRED,defaultSettings:{anchor:{left:null,top:.011,bottom:null,right:.011},size:{width:"auto",height:"auto"},pinned:!0}}),V);function W(e,t){var n=j[e];if(null==n)return!1;var r=F[n.layoutId];return null!=r&&t(n,r)}function Y(e,t){j=P(D({},j),R({},e.id,e.set("zIndex",t)))}function K(e){var t;return null===(t=x[e])||void 0===t?void 0:t.defaultSettings}var z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&M(e,t)}(n,e);var t=H(n);function n(){N(this,n);return t.apply(this,arguments)}var r=n.prototype;r.initialize=function(e){var t=this;if(null!=e&&null!=e.layouts&&null!=e.widgets){F=function(e){var t={};i().forEach(e,(function(e,n){t[n]=new p(e)}));return t}(e.layouts);j=function(e){var t={};i().forEach(e,(function(e,n){t[n]=new A(e)}));return t
}(e.widgets)}else{F={};j={}}var n=!1,r=[];i().forEach(x,(function(e,t){e.layoutPolicy===b.WxG.REQUIRED&&r.push(t)}));i().forEach(F,(function(e,i){var o=t.getWidgetsForLayout(i),a=!1,l=!0,c=!1,s=void 0;try{for(var d,f=function(){var e=d.value,r=o.find((function(t){return t.type===e}));if(null!=r)return"continue";a=n=!0;var l=u().v4();r=new A(P(D({},t.getWidgetDefaultSettings(e)),{type:e,id:l,layoutId:i,zIndex:o.length}));o.push(r);j=P(D({},j),R({},l,r))},E=r[Symbol.iterator]();!(l=(d=E.next()).done);l=!0)f()}catch(e){c=!0;s=e}finally{try{l||null==E.return||E.return()}finally{if(c)throw s}}if(a){e=e.set("widgets",o.map((function(e){return e.id})));F=P(D({},F),R({},i,e))}}));i().forEach(j,(function(e,t){var r=F[e.layoutId];if(null==r||r.widgets.indexOf(t)<0){delete(j=D({},j))[t];n=!0}}));if(n){this.persist();this.emitChange()}};r.getState=function(){return{layouts:F,widgets:j}};r.getLayouts=function(){return F};r.getLayout=function(e){return F[e]};r.getAllWidgets=function(){return j}
;r.getWidget=function(e){return j[e]};r.getWidgetsForLayout=function(e){var t=this,n=this.getLayout(e);return null==n?[]:n.widgets.reduce((function(e,n){var r=t.getWidget(n);null!=r&&e.push(r);return e}),[])};r.getWidgetConfig=function(e){return x[e]};r.getWidgetDefaultSettings=function(e){return K(e)};r.getWidgetType=function(e){var t=j[e];return null!=t?t.type:""};r.getRegisteredWidgets=function(){return x};r.getDefaultLayout=function(e){var t=[];i().forEach(this.getRegisteredWidgets(),(function(n,r){switch(n.layoutPolicy){case b.WxG.REQUIRED:case b.WxG.OPTIONAL_DEFAULT:t.push(P(D({},n.defaultSettings),{type:r,id:u().v4(),layoutId:e}))}}));return t};r.__getLocalVars=function(){return{MIGRATION_KEY:B,layouts:F,widgets:j,widgetConfigs:x}};return n}(a.ZP.PersistedStore);z.displayName="LayoutStore";z.persistKey="LayoutStore";z.migrations=[function(){var e=D({},l.Z.get("OverlayStore")),t=e.pinnedWidgets,n=e.positions,r=e.sizes;if(5===e.v&&t){var i=B,o=[],u=t.map((function(e){
var t=null!=n?n[e]:null,u=null!=r?r[e]:null,a={id:e,layoutId:i,type:e,anchor:t||{top:-1,left:-1,bottom:null,right:null},size:u||{width:-1,height:-1},pinned:!0,zIndex:0};o.push([a.id,a]);return a.id}));return{layouts:[[i,{id:i,widgets:u}]],widgets:o}}return{layouts:[],widgets:[]}},function(e){var t=e.layouts,n=e.widgets,r=new Set(Object.keys(b.Odu)),i=Array.from(n).filter((function(e){var t=U(e,1)[0];return!r.has(t)})),o=Array.from(t).filter((function(e){return U(e,1)[0]!==B}));o.forEach((function(e){var t=U(e,2),n=t[0],r=t[1],o=null,a=null;r.widgets.find((function(e){var t=i.find((function(t){var r=U(t,2),i=r[0],o=r[1];return i===e&&o.layoutId===n}));if(null==t)return!1;null==a&&t[1].type===b.Odu.VOICE&&(a=t[0]);null==o&&t[1].type===b.Odu.TEXT&&(o=t[1].pinned);return null!=o&&null!=a||void 0}));if(!o&&null!=a){var l=u().v4();r.widgets=[a,l];i.push([l,P(D({},K(b.Odu.GUILDS_TEXT)),{type:b.Odu.GUILDS_TEXT,id:l,layoutId:n,zIndex:2})])}}));return{widgets:i,layouts:o}},function(e){
var t=e.layouts,n=e.widgets,r=t.reduce((function(e,t){var n=U(t,2),r=n[0],i=n[1];e[r]=i;return e}),{}),i=n.reduce((function(e,t){var n=U(t,2),r=n[0],i=n[1];e[r]=i;return e}),{});return{layouts:r,widgets:i}}];const q=new z(c.Z,{LAYOUT_CREATE:function(e){var t=e.layoutId,n=e.widgets,r=e.defaultResolution;if(null!=F[t])return!1;var i=[];n.forEach((function(e,t){var n=function(e){var t=F.migrated;if(null!=t){var n=!0,r=!1,i=void 0;try{for(var o,u=t.widgets[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){var a=o.value,l=j[a];if(null!=l&&l.type===e)return l}}catch(e){r=!0;i=e}finally{try{n||null==u.return||u.return()}finally{if(r)throw i}}}return null}(e.type),o=P(D({},e),{zIndex:t});""===o.id&&(o.id=u().v4());if(null!=n){o.pinned=n.pinned;-1!==n.anchor.left&&(o.anchor=(0,S.jL)(n.anchor,r));-1!==n.size.width&&(o.size=(0,S.Ox)(n.size,r))}j=P(D({},j),R({},o.id,new A(o)));i.push(o.id)}));F=P(D({},F),R({},t,new p({id:t,widgets:i})))},LAYOUT_SET_PINNED:function(e){
return W(e.widgetId,(function(e,t){!function(e){j=P(D({},j),R({},e.id,e.set("pinned",!e.pinned)))}(e)}))},LAYOUT_UPDATE_WIDGET:function(e){var t=e.widgetId,n=e.anchor,r=e.size;return W(t,(function(e,t){return function(e,t,n){j=P(D({},j),R({},e.id,e.merge({anchor:t,size:n})))}(e,n,r)}))},LAYOUT_SET_TOP_WIDGET:function(e){return W(e.widgetId,(function(e,t){return function(e,t){var n=function(e){var t=[];e.widgets.forEach((function(e){var n=j[e];null!=n&&t.push(n)}));return t}(e);n.sort((function(e,t){return e.zIndex-t.zIndex}));var r=n.findIndex((function(e){return e.id===t}));if(r===n.length-1)return!1;n.push(n.splice(r,1)[0]);for(var i=0;i<n.length;i++){Y(n[i],i)}return!0}(t,e.id)}))},LAYOUT_DELETE_WIDGET:function(e){var t=e.widgetId;delete(j=D({},j))[t];i().forEach(F,(function(e,n){if(n!==B){var r=e.widgets.indexOf(t);if(r>=0){var i=Z(e.widgets);i.splice(r,1);F=P(D({},F),R({},n,e.set("widgets",i)))}}}))},LAYOUT_DELETE_ALL_WIDGETS:function(e){var t=e.layoutId,n=F[t];if(null==n)return!1
;n.widgets.forEach((function(e){delete(j=D({},j))[e]}));F=P(D({},F),R({},n.id,n.set("widgets",[])))},LAYOUT_CREATE_WIDGETS:function(e){e.widgetConfigs.forEach((function(e){var t=new A(e),n=F[t.layoutId];if(null==n)throw new Error("LayoutStore - handleAddWidget: Invalid layoutId");t=t.set("zIndex",n.widgets.length);j=P(D({},j),R({},t.id,t));var r=Z(n.widgets).concat([t.id]);F=P(D({},F),R({},n.id,n.set("widgets",r)))}))}})},718375:(e,t,n)=>{n.d(t,{ZP:()=>dt,Ex:()=>Ue});var r=n(441143),i=n.n(r),o=n(730381),u=n.n(o),a=n(368365),l=n(791462),c=n(675860),s=n(365523),d=n(856864),f=n(173436),E=n(23816),_=n(67874),h=n(537204),p=n(789105),g=n(832691),v=n(613258),I=n(685740),y=n(205949),O=n(35197),T=n(996515),m=n(47195),A=n(112371),S=n(492421);n(667294),(0,n(553494).B)({kind:"user",id:"2022-11_notification_center_polish",label:"Polish items for the NC this includes the activity card and friend requests",defaultConfig:{enabled:!1},treatments:[{id:1,label:"enabled",config:{enabled:!0}}]})
;var b=n(958899),C=n(513073),N=n(973381),R=n(668479),L=n(776357),D=n(537127),P=n(53551),w=n(90816),M=n(58857),U=n(346529),Z=n(631134),G=n(915354),k=n(356004),H=n(145072),F=n(202552),j=n(152666),V=n(653772),B=n(978627),x=n(171447),W=n(940712),Y=n(105405),K=n(379822),z=n(390504),q=n(859023),Q=n(426217),X=n(461061),J=n(35236),$=n(998689),ee=n(53619),te=n(977898);function ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function re(e,t,n,r,i,o,u){try{var a=e[o](u),l=a.value}catch(e){n(e);return}a.done?t(l):Promise.resolve(l).then(r,i)}function ie(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function u(e){re(o,r,i,u,a,"next",e)}function a(e){re(o,r,i,u,a,"throw",e)}u(void 0)}))}}function oe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1;r.configurable=!0
;"value"in r&&(r.writable=!0);Object.defineProperty(e,r.key,r)}}function ae(e){ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return ae(e)}function le(e,t){return!t||"object"!==fe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ce(e,t){ce=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return ce(e,t)}function se(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],u=!0,a=!1;try{for(n=n.call(e);!(u=(r=n.next()).done);u=!0){o.push(r.value);if(t&&o.length===t)break}}catch(e){a=!0;i=e}finally{try{u||null==n.return||n.return()}finally{if(a)throw i}}return o}}(e,t)||Ee(e,t)||function(){
throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function de(e){return function(e){if(Array.isArray(e))return ne(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ee(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var fe=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function Ee(e,t){if(e){if("string"==typeof e)return ne(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);return"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ne(e,t):void 0}}function _e(e){var t=function(){
if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=ae(e);if(t){var i=ae(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return le(this,n)}}var he,pe=function(e,t){var n,r,i,o,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;(r=0,i)&&(o=[2&o[0],i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:u.label++;return{value:o[1],done:!1};case 5:u.label++;r=o[1]
;o=[0];continue;case 7:o=u.ops.pop();u.trys.pop();continue;default:if(!(i=u.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){u=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){u.label=o[1];break}if(6===o[0]&&u.label<i[1]){u.label=i[1];i=o;break}if(i&&u.label<i[2]){u.label=i[2];u.ops.push(o);break}i[2]&&u.ops.pop();u.trys.pop();continue}o=t.call(e,u)}catch(e){o=[6,e];r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},ge=new g.Z("ReadStateStore");__OVERLAY__&&(he=n(300327).Z);var ve=function(){return!1},Ie=a.Z.add(X.Plq.READ_MESSAGE_HISTORY,X.Plq.VIEW_CHANNEL),ye=null,Oe=null,Te=null,me=!1,Ae=[],Se=!1,be={},Ce=new Set,Ne=2592e6;function Re(){return U.Z.fromTimestamp(Date.now()-Ne)}var Le=0,De=0,Pe=null;function we(){Le=Date.now()-6048e5;De=Date.now()-2592e5;clearTimeout(Pe);Pe=setTimeout((function(){f.Z.dispatch({type:"DECAY_READ_STATES"})}),36e5)}function Me(e){if(null==e)return 0;var t=Date.parse(e);return isNaN(t)?0:t}function Ue(e,t){
var n=k.Z.getChannel(e.channel_id);return null!=n&&(!Y.Z.isBlocked(e.author.id)&&(!!(0,A.ZP)({message:e,userId:t.id,suppressEveryone:z.Z.isSuppressEveryoneEnabled(n.guild_id),suppressRoles:z.Z.isSuppressRolesEnabled(n.guild_id)})||!!Ze(n)))}function Ze(e){return null!=e&&e.isPrivate()&&!z.Z.isGuildOrCategoryOrChannelMuted(e.guild_id,e.id)}function Ge(){return ke.apply(this,arguments)}function ke(){return(ke=ie((function(){var e;return pe(this,(function(t){switch(t.label){case 0:if(0===Ae.length){Se=!1;return[2]}Se=!0;e=Ae.splice(0,100);return[4,He((function(){return c.Z.post({url:X.ANM.BULK_ACK,body:{read_states:e},oldFormErrors:!0})}))];case 1:t.sent();return[4,(0,s.GR)(1e3)];case 2:t.sent();Ge();return[2]}}))}))).apply(this,arguments)}function He(e){return Fe.apply(this,arguments)}function Fe(){return(Fe=ie((function(e){var t,n,r;return pe(this,(function(i){switch(i.label){case 0:t=Z.default.getId();n=0;i.label=1;case 1:if(!(n<3))return[3,9];i.label=2;case 2:i.trys.push([2,4,,8])
;return[4,e()];case 3:return[2,i.sent()];case 4:r=i.sent();ge.error("",r);return n+1<3?[4,(0,s.GR)(2e3*(n+1))]:[3,7];case 5:i.sent();return[4,M.Z.awaitOnline()];case 6:i.sent();if(t!==Z.default.getId())return[2,Promise.reject(new Error("User changed."))];i.label=7;case 7:return[3,8];case 8:n++;return[3,1];case 9:return[2]}}))}))).apply(this,arguments)}function je(e){if(e.type!==te.W.CHANNEL)return!1;var t=k.Z.getChannel(e.channelId),n=null!=t&&t.isForumPost();if(B.Z.isIdle())return!1;if(!e.canTrackUnreads())return!1;if(!0!==(null==t?void 0:t.isForumChannel())){var r=be[e.channelId],i=null!=r&&Q.Z.isFocused(r),o=null!=he&&he.isInstanceFocused()&&he.isPinned(X.Odu.TEXT);if(!i&&!o)return!1}if(n&&!e._persisted)return!0;if(!e.hasUnreadOrMentions())return!1;if(!0===(null==t?void 0:t.isForumChannel()))return!1;if(!(n&&!e._isJoinedThread)&&!H.Z.isAtBottom(e.channelId))return!1;var u=_.Z.getLayout(e.channelId),a=_.Z.getChatOpen(e.channelId)
;if(!a&&(u===X.AEg.NO_CHAT||u===X.AEg.FULL_SCREEN))return!1;if(null==be[e.channelId])return!1;var l=x.Z.getMessages(e.channelId);if(null==l||!l.ready||l.loadingMore)return!1;0;return!0}var Ve=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:te.W.CHANNEL;oe(this,e);this.type=te.W.CHANNEL;this.outgoingAckTimer=null;this.ackMessageIdAtChannelSelect=null;this.channelId=t;this.type=n;this._guildId=null;this._isThread=!1;this._isActiveThread=!1;this._isJoinedThread=!1;this._persisted=!1;this.loadedMessages=!1;this._lastMessageId=null;this._lastMessageTimestamp=0;this._ackMessageId=null;this._ackMessageTimestamp=0;this.isManualAck=!1;this.ackPinTimestamp=0;this.lastPinTimestamp=0;this._oldestUnreadMessageId=null;this.oldestUnreadMessageIdStale=!1;this.estimated=!1;this._unreadCount=0;this._mentionCount=0;this.outgoingAck=null}var t=e.prototype;t.serialize=function(e){
var t=this,n=t.channelId,r=t.type,i=t._guildId,o=t._isThread,u=t._isActiveThread,a=t._isJoinedThread,l=t._persisted,c=t.loadedMessages,s=t._lastMessageId,d=t._lastMessageTimestamp,f=t._ackMessageId,E=t._ackMessageTimestamp,_=t.ackPinTimestamp,h=t.isManualAck,p=t.lastPinTimestamp,g=t._oldestUnreadMessageId,v=t.oldestUnreadMessageIdStale,I=t.estimated,y=t._unreadCount,O=t._mentionCount;if(e)return{channelId:n,type:r,_guildId:i,_isThread:o,_isActiveThread:u,_isJoinedThread:a,_persisted:l,loadedMessages:c,_lastMessageId:s,_lastMessageTimestamp:d,_ackMessageId:f,_ackMessageTimestamp:E,ackPinTimestamp:_,isManualAck:h,lastPinTimestamp:p,_oldestUnreadMessageId:g,oldestUnreadMessageIdStale:v,estimated:I,_unreadCount:y,_mentionCount:O};var T={channelId:n,type:r,_guildId:i,_persisted:l,_lastMessageId:s,_lastMessageTimestamp:d,_ackMessageId:f,_ackMessageTimestamp:E,ackPinTimestamp:_,lastPinTimestamp:p,_mentionCount:O};if(o){T._isThread=o;T._isActiveThread=u;T._isJoinedThread=a}return T}
;t.deserializeForOverlay=function(e){var t=e.channelId,n=e.type,r=e._guildId,i=e._isThread,o=e._isActiveJoinedThread,u=e._isActiveThread,a=e._isJoinedThread,l=e._persisted,c=e.loadedMessages,s=e._lastMessageId,d=e._lastMessageTimestamp,f=e._ackMessageId,E=e._ackMessageTimestamp,_=e.ackPinTimestamp,h=e.isManualAck,p=e.lastPinTimestamp,g=e._oldestUnreadMessageId,v=e.oldestUnreadMessageIdStale,I=e.estimated,y=e._unreadCount,O=e._mentionCount;this.channelId=t;this.type=null!=n?n:te.W.CHANNEL;this._guildId=r;this._isThread=null!=i&&i;if(null!=o){this._isActiveThread=o;this._isJoinedThread=o}else{this._isActiveThread=null!=u&&u;this._isJoinedThread=null!=a&&a}this._persisted=!1!==l;this.loadedMessages=null!=c&&c;this._lastMessageId=s;this._lastMessageTimestamp=d;this._ackMessageId=f;this._ackMessageTimestamp=E;this.ackPinTimestamp=_;this.isManualAck=null!=h&&h;this.lastPinTimestamp=p;this._oldestUnreadMessageId=g;this.oldestUnreadMessageIdStale=null!=v&&v;this.estimated=null!=I&&I
;this._unreadCount=null!=y?y:0;this._mentionCount=O};t.guessAckMessageId=function(){var e=x.Z.getMessages(this.channelId);if(null!=this.ackMessageId||!this.isPrivate()||e.hasMoreAfter)return this.ackMessageId;if(!this.hasMentions())return this.lastMessageId;var t=null,n=this.mentionCount,r=q.default.getCurrentUser();e.forEach((function(e){if(n>0&&e.author.id!==(null==r?void 0:r.id))--n;else if(0===n){t=e.id;return!1}}),this,!0);return t};t.isPrivate=function(){if(this.type!==te.W.CHANNEL)return!1;var e=k.Z.getChannel(this.channelId);return null!=e&&e.isPrivate()};t.rebuildChannelState=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2?arguments[2]:void 0,i=this;this.ackMessageId=null!==(t=null!=e?e:this._ackMessageId)&&void 0!==t?t:this.guessAckMessageId();this.isManualAck=null!=e;this.oldestUnreadMessageId=null;this.estimated=!1;this._unreadCount=0;n&&(this._mentionCount=0);if(this.hasUnread()){
var o,u=q.default.getCurrentUser(),a=this.getAckTimestamp(),l=!1,c=!1,s=null,d=x.Z.getMessages(this.channelId);d.forAll((function(e){if(l){var t;i.oldestUnreadMessageId=null!==(t=i._oldestUnreadMessageId)&&void 0!==t?t:e.id}else l=e.id===i._ackMessageId;if(U.Z.extractTimestamp(e.id)>a){i._unreadCount++;n&&Ue(e,u)&&i._mentionCount++;s=null!=s?s:e.id}else c=!0}));this.estimated=!d.hasPresent()||!(l||c)&&d.length===this._unreadCount;this.oldestUnreadMessageId=null!==(o=this._oldestUnreadMessageId)&&void 0!==o?o:s}null!=r&&(this._mentionCount=r)};t.handleGuildEventRemoval=function(e,t){if(!(U.Z.compare(this.ackMessageId,t)>=0)){var n=v.ZP.getGuildScheduledEventsForGuild(e),r=this.getAckTimestamp();if(!isNaN(r)){var i,o=null!==(i=this._ackMessageId)&&void 0!==i?i:U.Z.fromTimestamp(r),u=null,a=0;n.forEach((function(e){if((0,v.Ld)(e)){U.Z.compare(e.id,u)>0&&(u=e.id);U.Z.compare(e.id,o)>0&&a++}}));this.lastMessageId=u;this._mentionCount=a}}};t.canTrackUnreads=function(){
if(this.type!==te.W.CHANNEL)return!0;if(this._isThread&&!this._isActiveThread)return!1;var e=k.Z.getBasicChannel(this.channelId);return null!=e&&("computedPermissions"in e?a.Z.has(e.computedPermissions,X.Plq.VIEW_CHANNEL):!h.Z.isChannelGated(this.guildId,this.channelId)||W.Z.can(X.Plq.VIEW_CHANNEL,e))};t.canBeUnread=function(){if(this._isThread&&!this._isJoinedThread)return!1;if((0,T.h3)(this.channelId,[O.Z,m.Z]))return!1;if(!this._isThread&&(0,C.r1)(this._guildId)){if(this._lastMessageTimestamp<Le)return!1;if(!z.Z.isChannelOrParentOptedIn(this._guildId,this.channelId)&&!this.hasRecentlyVisitedAndRead()&&!this.hasMentions())return!1}return this.canTrackUnreads()};t.canHaveMentions=function(){return 0!==this._mentionCount&&(!(this._isThread&&!this._isJoinedThread)&&(!(0,T.h3)(this.channelId,[O.Z,m.Z])&&(!((0,C.r1)(this._guildId)&&this._lastMessageTimestamp<Le)&&this.canTrackUnreads())))};t.getGuildChannelUnreadState=function(e,t,n,r,i,o){if(t){if(this._lastMessageTimestamp<Le)return{
mentionCount:0,hasNotableUnread:!1};if(!z.Z.isChannelRecordOrParentOptedIn(e)&&!this.hasRecentlyVisitedAndRead()&&this.mentionCount<=0)return{mentionCount:0,hasNotableUnread:!1}}if("computedPermissions"in e){if(!a.Z.has(e.computedPermissions,X.Plq.VIEW_CHANNEL))return{mentionCount:0,hasNotableUnread:!1}}else if(h.Z.isChannelGated(this.guildId,this.channelId)&&!W.Z.can(X.Plq.VIEW_CHANNEL,e))return{mentionCount:0,hasNotableUnread:!1};if(i||o)return{mentionCount:this.mentionCount,hasNotableUnread:!1};var u=(0,I.LS)({isExperimentEnabled:n,hasUserEnabledGuildUnreads:z.Z.isGuildUnreadSettingEnabled(e.guild_id),channelNotificationOverrides:r[e.id],categoryNotificationOverrides:null==e.parent_id?null:r[e.parent_id],unreadSetting:z.Z.getChannelUnreadSetting(e.guild_id,e.id),hasJoinedThread:R.Z.hasJoined(e.id)}),l=!1;l=u===ee.N.NULL||u===ee.N.MENTIONS_AND_HIGHLIGHTS?this.mentionCount>0||(0,p.Do)(this.channelId,this._ackMessageId):this.getAckTimestamp()<this._lastMessageTimestamp;return{
mentionCount:this.mentionCount,hasNotableUnread:l}};t.hasUnread=function(){return this.getAckTimestamp()<this._lastMessageTimestamp};t.hasNotableUnread=function(){var e=k.Z.getBasicChannel(this.channelId),t=null!=e?(0,I.j$)(e):ee.N.ALL_MESSAGES;return t===ee.N.NULL||t===ee.N.MENTIONS_AND_HIGHLIGHTS?(0,p.HK)(this.channelId,this._ackMessageId).length>0||this.hasMentions():this.getAckTimestamp()<this._lastMessageTimestamp};t.hasRecentlyVisitedAndRead=function(){return this._lastMessageTimestamp>0&&null!=this._ackMessageId&&this.getAckTimestamp()>De&&D.Z.getGuildRecentsDismissedAt(this._guildId)<this.getAckTimestamp()};t.isForumPostUnread=function(){return!!this._isActiveThread&&(this._persisted?this._isJoinedThread&&this.hasUnread():this.hasUnread())};t.hasMentions=function(){return this.getMentionCount()>0};t.getMentionCount=function(){return this.mentionCount};t.hasUnreadOrMentions=function(){return this.hasMentions()||this.hasUnread()};t.ackPins=function(){
var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this;if(this.type!==te.W.CHANNEL)return!1;if(!this.canTrackUnreads())return!1;if(null==e){if(this.lastPinTimestamp===this.ackPinTimestamp)return!1;this._persisted=!0;He((function(){return c.Z.post({url:X.ANM.PINS_ACK(t.channelId),oldFormErrors:!0})}))}var n=Me(e);this.ackPinTimestamp=0!==n?n:this.lastPinTimestamp;return!0};t.ack=function(e){var t=e.messageId,n=e.local,r=void 0!==n&&n,i=e.immediate,o=void 0!==i&&i,u=e.force,a=void 0!==u&&u,l=e.isExplicitUserAction,c=void 0!==l&&l,s=e.location,d=void 0===s?{section:X.jXE.CHANNEL}:s,f=this;if(!this._shouldAck(a,r,c))return!1;if(!a&&!this.canTrackUnreads())return!1;var E=this.hasMentions();this.estimated=!1;this._unreadCount=0;this._mentionCount=0;if(null==t&&null==(t=this.lastMessageId))return!1;this.ackMessageId=t;this.isManualAck=!1;this._persisted=!0;if(r)this.oldestUnreadMessageId=null;else{null==this.outgoingAck&&(this.outgoingAckTimer=setTimeout((function(){
f.type===te.W.CHANNEL?f._ack(d):f._nonChannelAck();f.outgoingAck=null;f.outgoingAckTimer=null}),E||o?0:3e3));this.outgoingAck=t}return!0};t.clearOutgoingAck=function(){this.outgoingAck=null;if(null!=this.outgoingAckTimer){clearTimeout(this.outgoingAckTimer);this.outgoingAckTimer=null}};t._shouldAck=function(e,t,n){var r;return!!e||(!!n||(!!t||!this.isManualAck&&!(this.type===te.W.CHANNEL&&!this.loadedMessages&&!(null===(r=k.Z.getChannel(this.channelId))||void 0===r?void 0:r.isForumChannel()))))};t._ack=function(e){var t=this,n=this.outgoingAck;if(null!=n){var r=Z.default.getId(),i=Te;this._persisted=!0;He((function(){return c.Z.post({url:X.ANM.MESSAGE_ACK(t.channelId,n),body:{token:Te},oldFormErrors:!0})})).then((function(n){if(null!=n){Te===i&&r===Z.default.getId()&&(Te=n.body.token);var o=k.Z.getChannel(t.channelId);(0,E.yw)(X.rMx.ACK_MESSAGES,{channel_id:t.channelId,guild_id:null==o?void 0:o.getGuildId(),location:e})}}))}};t._nonChannelAck=function(){
var e=this,t=e.outgoingAck,n=e.channelId,r=e.type;if(null!=t){var i;switch(r){case te.W.GUILD_HOME:case te.W.GUILD_EVENT:i=X.ANM.GUILD_FEATURE_ACK(n,t,r);break;case te.W.NOTIFICATION_CENTER:i=X.ANM.USER_NON_CHANNEL_ACK(t,r);break;default:return}this._persisted=!0;He((function(){return c.Z.post({url:i,body:{},oldFormErrors:!0})}))}};t.delete=function(){var t,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=k.Z.getBasicChannel(this.channelId);ge.log("Deleting ReadState",this.channelId,this.type,{remote:n,persisted:this._persisted,channelMissing:null==r,isOld:qe(this,Re()),validType:null!=r&&P.AW.has(r.type),readableType:null!=r&&(0,P.Em)(r.type),oldThreadCutoff:Re(),mentionCount:this._mentionCount,channelId:this.channelId,ackMessageId:this._ackMessageId,lastMessageId:this._lastMessageId});n&&this._persisted&&c.Z.delete({url:X.ANM.CHANNEL_ACK(this.channelId),body:{version:2,read_state_type:this.type},oldFormErrors:!0})
;null===(t=e._readStates[this.type])||void 0===t||delete t[this.channelId]};t.shouldDeleteReadState=function(e){if(0!==j.Z.totalUnavailableGuilds)return!1;if(null!=this.type&&this.type!==te.W.CHANNEL)return!function(e){switch(e.type){case te.W.GUILD_HOME:case te.W.GUILD_EVENT:return null!=V.Z.getGuild(e.channelId);case te.W.NOTIFICATION_CENTER:var t;return(null===(t=q.default.getCurrentUser())||void 0===t?void 0:t.id)===e.channelId;default:return!0}}(this);var t=k.Z.getBasicChannel(this.channelId);return null==t?!!qe(this,e):!!P.AW.has(t.type)&&(!(0,P.Em)(t.type)||!(0,P.hv)(t.type)&&(!(!P.Ec.has(t.type)||!function(e,t,n){var r=e.guildId;return(null==r||!N.Z.isActive(r,t.parent_id,e.channelId))&&qe(e,n)}(this,t,e))||this._mentionCount>0&&!W.Z.canBasicChannel(Ie,t)))};t.getAckTimestamp=function(){if(0!==this._ackMessageTimestamp)return this._ackMessageTimestamp;if(this._isThread){this._ackMessageTimestamp=Ke(this.guildId,this.channelId)
;this._ackMessageId=U.Z.fromTimestamp(this._ackMessageTimestamp);return this._ackMessageTimestamp}var e,t;if(this.type===te.W.GUILD_EVENT)e=V.Z.getGuild(this.channelId);else if((0,J.AB)(this.channelId))e=V.Z.getGuild(this.guildId);else{var n=k.Z.getChannel(this.channelId);if(null!=n){var r=n.getGuildId();e=V.Z.getGuild(r)}}t=null!=e?ze(e):U.Z.extractTimestamp(this.channelId);this._ackMessageTimestamp=t;return t};t.syncThreadSettings=function(){this._isThread=!0;var e=k.Z.getChannel(this.channelId);if(null==e){ge.warn("syncThreadSettings called with channel not in memory ".concat(this.channelId));return!1}var t=this.guildId,n=null!=t&&N.Z.isActive(t,e.parent_id,this.channelId),r=R.Z.hasJoined(this.channelId);if(this._isActiveThread===n&&this._isJoinedThread===r)return!1;this._isActiveThread=n;this._isJoinedThread=r;return!0};e.forEach=function(t){var n=!0,r=!1,i=void 0;try{for(var o,u=Object.keys(e._readStates)[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){
var a,l=o.value,c=null!==(a=e._readStates[parseInt(l)])&&void 0!==a?a:{},s=!0,d=!1,f=void 0;try{for(var E,_=Object.keys(c)[Symbol.iterator]();!(s=(E=_.next()).done);s=!0){if(!1===t(c[E.value]))break}}catch(e){d=!0;f=e}finally{try{s||null==_.return||_.return()}finally{if(d)throw f}}}}catch(e){r=!0;i=e}finally{try{n||null==u.return||u.return()}finally{if(r)throw i}}};e.get=function(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:te.W.CHANNEL,i=null===(n=e._readStates[r])||void 0===n?void 0:n[t];if(null==i){i=new e(t,r);null==e._readStates[r]&&(e._readStates[r]={});e._readStates[r][t]=i}return i};e.getIfExists=function(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:te.W.CHANNEL;return null===(n=e._readStates[r])||void 0===n?void 0:n[t]};e.getValue=function(t){
var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:te.W.CHANNEL,i=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,u=null===(n=e._readStates[r])||void 0===n?void 0:n[t];return null==u?o:i(u)};e.clear=function(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:te.W.CHANNEL;if(null!=(null===(n=e._readStates[r])||void 0===n?void 0:n[t])){delete e._readStates[r][t];return!0}return!1};e.clearAll=function(){e._readStates={}};!function(e,t,n){t&&ue(e.prototype,t);n&&ue(e,n)}(e,[{key:"oldestUnreadMessageId",get:function(){return this._oldestUnreadMessageId},set:function(e){this._oldestUnreadMessageId=e;this.oldestUnreadMessageIdStale=!1}},{key:"lastMessageId",get:function(){return this._lastMessageId},set:function(e){this._lastMessageId=e;this._lastMessageTimestamp=U.Z.extractTimestamp(e)}},{key:"ackMessageId",get:function(){return this._ackMessageId},set:function(e){this._ackMessageId=e;this._ackMessageTimestamp=U.Z.extractTimestamp(e)
}},{key:"unreadCount",get:function(){return this._unreadCount}},{key:"mentionCount",get:function(){return this._mentionCount}},{key:"guildId",get:function(){if(null!=this._guildId)return this._guildId;var e=k.Z.getChannel(this.channelId);return this._guildId=null!=e?e.getGuildId():null}},{key:"oldestUnreadTimestamp",get:function(){return U.Z.extractTimestamp(this.oldestUnreadMessageId)}}]);return e}();Ve._readStates={};function Be(e){e.forEach((function(e){if((0,P.Em)(e.type)){var t=Ve.get(e.id);t._guildId=e.guild_id;t.lastMessageId=e.lastMessageId;t.lastPinTimestamp=Me(e.lastPinTimestamp);P.Ec.has(e.type)&&t.syncThreadSettings()}}))}function xe(e){e.forEach((function(e){if((0,P.Em)(e.type)){var t=Ve.get(e.id);t.lastMessageId=e.last_message_id;t.lastPinTimestamp=Me(e.last_pin_timestamp);P.Ec.has(e.type)&&t.syncThreadSettings()}}))}function We(e){!function(e){var t;null===(t=e.threads)||void 0===t||t.forEach((function(t){if(P.AW.has(t.type)){var n=Ve.get(t.id)
;n.lastMessageId=t.lastMessageId;n.lastPinTimestamp=Me(t.lastPinTimestamp);n._isThread=!0;n._isActiveThread=!0;n._isJoinedThread=null!=t.member;null==n.ackMessageId&&(n.ackMessageId=U.Z.fromTimestamp(Ke(e.id,t.id)));null==n.ackPinTimestamp&&(n.ackPinTimestamp=Ke(e.id,t.id))}}))}(e);!function(e){var t;if(0===(null===(t=e.guild_scheduled_events)||void 0===t?void 0:t.length)&&null==Ve.getIfExists(e.id,te.W.GUILD_EVENT))return;var n=Ve.get(e.id,te.W.GUILD_EVENT);n._guildId=e.id;var r,i=0,o=null,u=null!==(r=n._ackMessageId)&&void 0!==r?r:U.Z.fromTimestamp(n.getAckTimestamp());e.guild_scheduled_events.forEach((function(e){U.Z.compare(e.id,o)>0&&(o=e.id);U.Z.compare(e.id,u)>0&&i++}));n.lastMessageId=o;n._mentionCount=i}(e);!function(e){var t=24;Ve.get(e.id,te.W.GUILD_HOME).lastMessageId=U.Z.fromTimestamp(u()(Date.now()).subtract(t,"h").valueOf())}(e)}function Ye(e){!function(e){var t=q.default.getCurrentUser();if(!(0,b.TW)())return!1;0;if(null==t)return!1
;var n=Ve.get(t.id,te.W.NOTIFICATION_CENTER);e.forEach((function(e){if(null!=e.since&&e.type===X.OGo.PENDING_INCOMING){var t=new Date(e.since).getTime();if(U.Z.extractTimestamp(n.ackMessageId)<t){n._mentionCount++;n.lastMessageId=U.Z.fromTimestamp(t)}}}))}(e)}function Ke(e,t){var n,r,i,o=k.Z.getChannel(t),u=V.Z.getGuild(null!=e?e:null==o?void 0:o.guild_id),a=(null==o?void 0:o.isForumPost())?0:ze(u),l=(null!==(i=null===(n=R.Z.joinTimestamp(t))||void 0===n?void 0:n.getTime())&&void 0!==i?i:0)-5e3,c=null==o||null===(r=o.threadMetadata)||void 0===r?void 0:r.archiveTimestamp,s=null!=c?new Date(c).getTime()-1:0,d=Math.max(l,s);d<=0&&(d=U.Z.extractTimestamp(t)-1);return isNaN(a)?d:Math.max(a,d)}function ze(e){if(null!=e&&null!=e.joinedAt){if(e.joinedAt instanceof Date)return e.joinedAt.getTime();if("string"==typeof e.joinedAt)return new Date(e.joinedAt).getTime();if("number"==typeof e.joinedAt&&!isNaN(e.joinedAt))return e.joinedAt}return Date.now()}function qe(e,t){
return e._mentionCount>0||!(U.Z.compare(e.channelId,t)>0)&&(!(null!=e._ackMessageId&&U.Z.compare(e._ackMessageId,t)>0)&&!(null!=e._lastMessageId&&U.Z.compare(e._lastMessageId,t)>0))}function Qe(e){if(null!=e){var t=Ve.get(e);if(je(t))return t.ack({})}return!1}function Xe(e){var t=e.channelUpdates;if(null!=t){var n=!0,r=!1,i=void 0;try{for(var o,u=t[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){var a=o.value,l=Ve.get(a.id);null!=a.last_message_id&&(l.lastMessageId=a.last_message_id);null!=a.last_pin_timestamp&&(l.lastPinTimestamp=Me(a.last_pin_timestamp))}}catch(e){r=!0;i=e}finally{try{n||null==u.return||u.return()}finally{if(r)throw i}}}}function Je(e){var t=e.channelId;Ve.get(t).rebuildChannelState()}function $e(e){xe(e.threads)}function et(e){var t=q.default.getCurrentUser();return null!=e.creator_id&&null!=t&&e.creator_id===t.id}function tt(e){var t=e.channel;return Ve.clear(t.id)}function nt(){var e=G.ZP.getCurrentSidebarChannelId(ye),t=!1;if(Oe!==e){t=it(Oe);Oe=e}else t=Qe(e)||t
;return t}function rt(e){if(null!=e){Ve.get(e).isManualAck=!1}}function it(e){if(null==e)return!1;var t=Ve.get(e);if(!t.hasUnread()){t.oldestUnreadMessageId=null;return!0}return!1}function ot(e,t){if(null==e)return!1;var n=Ve.get(e);t||n.hasUnread()||(n.oldestUnreadMessageIdStale=!0);return Qe(e)}function ut(e){var t=e.channelId,n=e.messageId,r=e.manual,i=e.newMentionCount,o=Ve.get(t);if(r){o.rebuildChannelState(n,!0,i);return!0}return n!==o._ackMessageId&&o.ack({messageId:n,local:!0})}function at(e){return lt(e.id,e.ackType,e.ackedId,e.local)}function lt(e,t,n,r){var i,o=Ve.get(e,t);if(n===o.ackMessageId||o.lastMessageId===o.ackMessageId)return!1;if(null==o.lastMessageId&&0===o._mentionCount)return!1;n=null!==(i=null!=n?n:o.lastMessageId)&&void 0!==i?i:U.Z.fromTimestamp(o.getAckTimestamp());return o.ack({messageId:n,local:null==r||r})}var ct=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function")
;e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&ce(e,t)}(n,e);var t=_e(n);function n(){oe(this,n);return t.apply(this,arguments)}var r=n.prototype;r.initialize=function(){this.waitFor(H.Z,q.default,V.Z,j.Z,k.Z,K.Z,x.Z,W.Z,_.Z,N.Z,R.Z,G.ZP,v.ZP,F.Z,h.Z,z.Z,Q.Z,S.Z,O.Z,D.Z,m.Z);this.syncWith([G.ZP],nt)};r.getReadStatesByChannel=function(){var e;return null!==(e=Ve._readStates[te.W.CHANNEL])&&void 0!==e?e:{}};r.getForDebugging=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:te.W.CHANNEL;return Ve.getIfExists(e,t)};r.hasUnread=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:te.W.CHANNEL;return Ve.getValue(e,t,(function(e){return e.canBeUnread()&&e.hasUnread()}),!1)};r.hasNotableUnread=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:te.W.CHANNEL;return Ve.getValue(e,t,(function(e){return e.canBeUnread()&&e.hasNotableUnread()}),!1)};r.hasTrackedUnread=function(e){
var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:te.W.CHANNEL;return Ve.getValue(e,t,(function(e){return e.canTrackUnreads()&&e.hasUnread()}),!1)};r.isForumPostUnread=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:te.W.CHANNEL;return Ve.getValue(e,t,(function(e){return e.isForumPostUnread()}),!1)};r.hasRelevantUnread=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:te.W.CHANNEL;return this.hasNotableUnread(e.id,t)&&z.Z.isChannelRelevant(e)};r.getUnreadCount=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:te.W.CHANNEL;return Ve.getValue(e,t,(function(e){return e.canBeUnread()?e.unreadCount:0}),0)};r.getMentionCount=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:te.W.CHANNEL;return Ve.getValue(e,t,(function(e){return e.canHaveMentions()?e.getMentionCount():0}),0)};r.getGuildChannelUnreadState=function(e,t,n,r,i,o){return Ve.getValue(e.id,te.W.CHANNEL,(function(u){
return u.getGuildChannelUnreadState(e,t,n,r,i,o)}),{mentionCount:0,hasNotableUnread:!1})};r.hasRecentlyVisitedAndRead=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:te.W.CHANNEL;return Ve.getValue(e,t,(function(e){return e.hasRecentlyVisitedAndRead()}),!1)};r.ackMessageId=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:te.W.CHANNEL;return Ve.getValue(e,t,(function(e){return e.canBeUnread()?e.ackMessageId:null}),null)};r.getTrackedAckMessageId=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:te.W.CHANNEL;return Ve.getValue(e,t,(function(e){return e.canTrackUnreads()?e._ackMessageId:null}),null)};r.lastMessageId=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:te.W.CHANNEL;return Ve.getValue(e,t,(function(e){return e.lastMessageId}),null)};r.lastPinTimestamp=function(e){return Ve.getValue(e,te.W.CHANNEL,(function(e){return e.lastPinTimestamp}),null)};r.getOldestUnreadMessageId=function(e){
var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:te.W.CHANNEL;return Ve.getValue(e,t,(function(e){return e.canTrackUnreads()?e.oldestUnreadMessageId:null}),null)};r.getOldestUnreadTimestamp=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:te.W.CHANNEL;return Ve.getValue(e,t,(function(e){return e.canTrackUnreads()?e.oldestUnreadTimestamp:0}),0)};r.isEstimated=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:te.W.CHANNEL;return Ve.getValue(e,t,(function(e){return e.estimated}),!1)};r.hasOpenedThread=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:te.W.CHANNEL;return Ve.getValue(e,t,(function(e){return e._persisted}),!1)};r.hasUnreadPins=function(e){return Ve.getValue(e,te.W.CHANNEL,(function(e){return e.canBeUnread()&&e.lastPinTimestamp>e.ackPinTimestamp}),!1)};r.isNewForumThread=function(e,t,n){var r=Ve.get(t)
;if(!0===Ve.get(e)._persisted||null==r.ackMessageIdAtChannelSelect||U.Z.compare(e,r.ackMessageIdAtChannelSelect)<=0)return!1;var i=ze(n);return U.Z.extractTimestamp(e)>i};r.getAllReadStates=function(e){var t=[];Ve.forEach((function(n){switch(n.type){case te.W.GUILD_HOME:case te.W.GUILD_EVENT:null!=V.Z.getGuild(n.channelId)&&t.push(n.serialize(e));break;case te.W.NOTIFICATION_CENTER:var r;(null===(r=q.default.getCurrentUser())||void 0===r?void 0:r.id)===n.channelId&&t.push(n.serialize(e));break;default:t.push(n.serialize(e))}}));return t};r.__getLocalVars=function(){return{logger:ge,READ_STATE_PROTOCOL_VERSION:2,OverlayStore:he,isDrawerOpen:ve,CAN_READ_HISTORY_PERMISSIONS:Ie,BULK_ACK_CHUNK_SIZE:100,BULK_ACK_REQ_PER_SEC:1,currentChannelId:ye,currentSidebarChannelId:Oe,ackToken:Te,hasCache:me,bulkAckQueue:Ae,processingBulkAcks:Se,autoAckableChannelWindowIds:be,mobileAutoAckDisabledChannelIds:Ce,OLD_THREAD_CUTOFF_MS:Ne,decayedReadStateCutoff:Le,channelVisitAndReadCutoff:De,
decayedReadStateTimer:Pe,MAX_RETRIES:3,instance:st}};return n}(l.ZP.Store);ct.displayName="ReadStateStore";var st=new ct(f.Z,{CONNECTION_OPEN:function(e){var t,n=e.guilds,r=e.relationships,i=e.initialPrivateChannels,o=e.readState;we();Te=null;me||o.partial||Ve.clearAll();me=!1;o.entries.forEach((function(e){var t,n=null!==(t=e.read_state_type)&&void 0!==t?t:te.W.CHANNEL;n!==te.W.CHANNEL&&(e=function(e){return{id:e.id,read_state_type:e.read_state_type,mention_count:e.badge_count,last_message_id:e.last_acked_id}}(e));var r,i=Ve.get(e.id,n);i._persisted=!0;i._mentionCount=null!==(r=e.mention_count)&&void 0!==r?r:0;var o=k.Z.getBasicChannel(e.id);null==o||!(0,P.Q5)(o.type)||null!=e.last_message_id&&0!==e.last_message_id?i.ackMessageId=e.last_message_id:i.ackMessageId=U.Z.fromTimestamp(Ke(o.guild_id,o.id));i.ackPinTimestamp=Me(e.last_pin_timestamp)}));var u=null===(t=q.default.getCurrentUser())||void 0===t?void 0:t.id;if(null!=u){
Ve.get(u,te.W.NOTIFICATION_CENTER).lastMessageId=U.Z.fromTimestamp(Date.now())}Ye(r);Be(i);var a=!0,l=!1,c=void 0;try{for(var s,d=n[Symbol.iterator]();!(a=(s=d.next()).done);a=!0){var f=s.value;Be(f.newChannels);Xe(f);We(f)}}catch(e){l=!0;c=e}finally{try{a||null==d.return||d.return()}finally{if(l)throw c}}setTimeout((function(){return function(e){var t=Re(),n=!0,r=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){var a,l=o.value,c=null!==(a=l.read_state_type)&&void 0!==a?a:te.W.CHANNEL,s=Ve.get(l.id,c);s.shouldDeleteReadState(t)&&s.delete()}}catch(e){r=!0;i=e}finally{try{n||null==u.return||u.return()}finally{if(r)throw i}}}(o.entries)}),1e4)},CONNECTION_OPEN_SUPPLEMENTAL:function(e){Be(e.lazyPrivateChannels)},OVERLAY_INITIALIZE:function(e){var t=e.readStates,n=e.selectedChannelId;we();Te=null;ye=n;Oe=G.ZP.getCurrentSidebarChannelId(ye);Ve.clearAll();t.forEach((function(e){var t=Ve.get(e.channelId);t.deserializeForOverlay(e)
;t.type===te.W.CHANNEL&&t.rebuildChannelState()}))},CACHE_LOADED:function(e){var t=e.readStates;me=!0;we();t.forEach((function(e){var t,n=null!==(t=e.type)&&void 0!==t?t:te.W.CHANNEL;e.type=n;null==Ve._readStates[n]&&(Ve._readStates[n]={});Ve._readStates[n][e.channelId]=(0,d.gh)(e,Ve)}))},GUILD_CREATE:function(e){var t=e.guild,n=Re();Ve.forEach((function(e){e.guildId===t.id&&e.shouldDeleteReadState(n)&&e.delete(!1)}));Be(t.channels);Xe(t);We(t)},LOAD_MESSAGES_SUCCESS:function(e){var t=e.channelId,n=e.isAfter,r=e.messages,i=Ve.get(t);i.loadedMessages=!0;var o=x.Z.getMessages(t);if(null!=o)if(r.length>0&&1===U.Z.compare(r[0].id,i.ackMessageId)&&0===i.unreadCount)i.rebuildChannelState();else if(o.hasPresent()||o.jumpTargetId===i.ackMessageId)i.rebuildChannelState();else if(n&&null!=i.ackMessageId&&o.has(i.ackMessageId,!0)){i._unreadCount+=r.length;null==i.oldestUnreadMessageId&&i.rebuildChannelState()}xe(r.map((function(e){return e.thread})).filter(w.lm))},MESSAGE_CREATE:function(e){
var t=e.channelId,n=e.message,r=e.isPushNotification,i=Ve.get(t);i.lastMessageId=n.id;var o,u,a=q.default.getCurrentUser(),l=k.Z.getBasicChannel(t);if(null!=n.author&&null!=a&&n.author.id===a.id){null!=i.outgoingAck&&i.clearOutgoingAck();return ut({channelId:t,messageId:n.id,manual:!1})}var c=(0,y.D)();if(null==c?void 0:c.isReady()){var s=c.getCurrentRoute();"channel"===(null==s?void 0:s.name)&&(o=s.params.channelId)}else if(null==c){o=K.Z.getChannelId();u=G.ZP.getCurrentSidebarChannelId(o)}var d=o===t||u===t;if(d&&je(i)&&!r)return i.ack({messageId:n.id});if(null!=he&&he.isInstanceFocused()&&d&&he.isInstanceUILocked()&&he.isPinned(X.Odu.TEXT))return i.ack({messageId:n.id});(null==i.oldestUnreadMessageId||i.oldestUnreadMessageIdStale)&&(i.oldestUnreadMessageId=n.id);i._unreadCount++;Y.Z.isBlocked(n.author.id)||n.type===X.uaV.RECIPIENT_REMOVE&&(null==l?void 0:l.type)===X.d4z.GROUP_DM||(null!=a&&(0,A.Hl)({rawMessage:n,userId:a.id,suppressEveryone:z.Z.isSuppressEveryoneEnabled(i.guildId),
suppressRoles:z.Z.isSuppressRolesEnabled(i.guildId)})||Ze(k.Z.getChannel(t)))&&i._mentionCount++},MESSAGE_DELETE:Je,MESSAGE_DELETE_BULK:Je,MESSAGE_ACK:ut,CHANNEL_ACK:function(e){var t=e.channelId,n=e.messageId,r=void 0===n?void 0:n,i=e.immediate,o=void 0!==i&&i,u=e.force,a=void 0!==u&&u,l=e.context,c=e.location,s=Ve.get(t),d=s.ack({messageId:r,local:l!==X.e3s,immediate:o,force:a,isExplicitUserAction:!0,location:c});if(null!=r){s.rebuildChannelState();return!0}return d},CHANNEL_LOCAL_ACK:function(e){var t=e.channelId;return Ve.get(t).ack({messageId:void 0,local:!0,immediate:void 0,force:void 0,isExplicitUserAction:!0})},CHANNEL_PINS_ACK:function(e){var t=e.channelId,n=e.timestamp;return Ve.get(t).ackPins(n)},CHANNEL_PINS_UPDATE:function(e){var t=e.channelId,n=e.lastPinTimestamp,r=Ve.get(t),i=Me(n);if(r.lastPinTimestamp===i)return!1;r.lastPinTimestamp=i;return!0},CHANNEL_SELECT:function(e){var t=e.channelId,n=G.ZP.getCurrentSidebarChannelId(t),r=k.Z.getChannel(t);if(null!=r){
var i,o=Ve.get(r.id);o.ackMessageIdAtChannelSelect=null!==(i=o.ackMessageId)&&void 0!==i?i:U.Z.fromTimestamp(o.getAckTimestamp())}rt(ye);rt(Oe);var u=!1;if(ye!==t){u=it(ye)||u;u=it(Oe)||u}ye!==t&&(null==r?void 0:r.type)!==X.d4z.GUILD_FORUM||(u=Qe(t)||u);ye===t&&(u=Qe(n)||u);ye=t;Oe=n;return u},VOICE_CHANNEL_SELECT:function(e){var t=e.channelId;if(null!=t){var n=Ve.get(t);if(!n.hasMentions()){n.oldestUnreadMessageId=null;return n.ack({})}}},CHANNEL_CREATE:function(e){var t=e.channel;if(!(0,P.Em)(t.type))return!1;var n=Ve.get(t.id);n.lastMessageId=t.lastMessageId;n.lastPinTimestamp=Me(t.lastPinTimestamp)},THREAD_CREATE:function(e){var t=e.channel;!function(e){if(!P.AW.has(e.type))return!1;var t=Ve.get(e.id);t.lastMessageId=e.lastMessageId;t.lastPinTimestamp=Me(e.lastPinTimestamp);t.syncThreadSettings();e.ownerId===Z.default.getId()&&(t.loadedMessages=!0)}(t);!function(e){var t=e.parent_id;Ve.get(t).lastMessageId=e.id;var n=q.default.getCurrentUser();if(e.ownerId===(null==n?void 0:n.id)){
Ve.get(e.id)._persisted=!0;ut({channelId:t,messageId:e.id,manual:!1})}}(t)},THREAD_UPDATE:function(e){var t=e.channel;return!!P.AW.has(t.type)&&Ve.get(t.id).syncThreadSettings()},THREAD_LIST_SYNC:function(e){e.threads.forEach((function(e){if(P.AW.has(e.type)){var t=Ve.get(e.id);t.lastMessageId=e.lastMessageId;t.lastPinTimestamp=Me(e.lastPinTimestamp);t._isThread=!0;t._isActiveThread=!0;t._isJoinedThread=R.Z.hasJoined(e.id);if(e.isForumPost()){var n=Ve.get(e.parent_id);U.Z.compare(n.lastMessageId,e.id)<0&&(n.lastMessageId=e.id)}}}))},LOAD_THREADS_SUCCESS:$e,LOAD_ARCHIVED_THREADS_SUCCESS:$e,SEARCH_FINISH:function(e){var t=e.messages,n=e.threads,r=!0,i=!1,o=void 0;try{for(var u,a=t[Symbol.iterator]();!(r=(u=a.next()).done);r=!0){xe(u.value.map((function(e){return e.thread})).filter(w.lm))}}catch(e){i=!0;o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}xe(n)},THREAD_MEMBER_UPDATE:function(e){var t=e.id;return Ve.get(t).syncThreadSettings()},
THREAD_MEMBERS_UPDATE:function(e){return(0,L.s)(e)&&Ve.get(e.id).syncThreadSettings()},CHANNEL_DELETE:tt,THREAD_DELETE:tt,WINDOW_FOCUS:function(e){var t=!1,n=!0,r=!1,i=void 0;try{for(var o,u=Object.entries(be)[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){var a=se(o.value,2),l=a[0];a[1]===e.windowId&&(t=ot(l,e.focused)||t)}}catch(e){r=!0;i=e}finally{try{n||null==u.return||u.return()}finally{if(r)throw i}}return t},UPDATE_CHANNEL_DIMENSIONS:function(e){return Qe(e.channelId)},CURRENT_USER_UPDATE:function(){Te=null},DRAWER_OPEN:function(){if(null!=ye){var e=Ve.get(ye);e.hasUnread()||(e.oldestUnreadMessageIdStale=!0)}return!1},DRAWER_CLOSE:function(){return Qe(ye)},BULK_ACK:function(e){var t,n=e.channels,r=e.context,i=n.filter((function(e){return null!=e.messageId&&st.hasUnread(e.channelId,e.readStateType)}));i.forEach((function(e){var t=e.channelId,n=e.messageId,r=e.readStateType;Ve.get(t,r).ack({messageId:n,local:!0,immediate:void 0,force:void 0,isExplicitUserAction:!0})}))
;if(r===X.e3s){(t=Ae).push.apply(t,de(i.map((function(e){return{channel_id:e.channelId,message_id:e.messageId,read_state_type:e.readStateType}}))));Se||Ge()}},ENABLE_AUTOMATIC_ACK:function(e){var t=e.channelId,n=e.windowId;0;if(be[t]===n)return!1;i()(void 0===be[t],"handleEnableAutomaticAck: channel already visible in another window");be[t]=n;return Qe(t)},DISABLE_AUTOMATIC_ACK:function(e){var t=e.channelId;0;be[t]=void 0;return!1},GUILD_FEATURE_ACK:at,GUILD_SCHEDULED_EVENT_CREATE:function(e){var t=e.guildScheduledEvent,n=t.guild_id,r=Ve.get(t.guild_id,te.W.GUILD_EVENT);r.lastMessageId=t.id;et(t)?at({type:"GUILD_FEATURE_ACK",id:n,ackType:te.W.GUILD_EVENT,ackedId:t.id,local:!1}):z.Z.isMuteScheduledEventsEnabled(n)||r._mentionCount++},GUILD_SCHEDULED_EVENT_UPDATE:function(e){var t=e.guildScheduledEvent,n=t.guild_id;if(et(t))return!1;if(![$.p1.CANCELED,$.p1.COMPLETED].includes(t.status))return!1;Ve.get(n,te.W.GUILD_EVENT).handleGuildEventRemoval(n,t.id)},
GUILD_SCHEDULED_EVENT_DELETE:function(e){var t=e.guildScheduledEvent,n=t.guild_id;if(et(t))return!1;Ve.get(t.guild_id,te.W.GUILD_EVENT).handleGuildEventRemoval(n,t.id)},GUILD_DELETE:function(e){var t=e.guild;return Ve.clear(t.id,te.W.GUILD_EVENT)},RESORT_THREADS:function(e){return Qe(e.channelId)},CHANNEL_RTC_UPDATE_CHAT_OPEN:function(e){e.channelId,e.chatOpen;0},DECAY_READ_STATES:we,NOTIFICATION_CENTER_ITEM_CREATE:function(e){var t,n=e.item;if(!(0,b.TW)())return!1;var r=null===(t=q.default.getCurrentUser())||void 0===t?void 0:t.id;if(null==r)return!1;var i=Ve.get(r,te.W.NOTIFICATION_CENTER);i.lastMessageId=n.id;S.Z.active?lt(r,te.W.NOTIFICATION_CENTER,n.id,!1):i._mentionCount++},RELATIONSHIP_ADD:function(e){var t=q.default.getCurrentUser();if(!(0,b.TW)())return!1;0;if(null==e.relationship.since)return!1;if(e.relationship.type!==X.OGo.PENDING_INCOMING)return!1;if(null==t)return!1;var n=Ve.get(t.id,te.W.NOTIFICATION_CENTER),r=new Date(e.relationship.since).getTime()
;if(U.Z.extractTimestamp(n.ackMessageId)<r)if(S.Z.active)lt(t.id,te.W.NOTIFICATION_CENTER,void 0,!1);else{n._mentionCount++;n.lastMessageId=U.Z.fromTimestamp(r)}},RELATIONSHIP_REMOVE:function(e){var t=q.default.getCurrentUser();if(!(0,b.TW)())return!1;0;if(null==t)return!1;if(null==e.relationship.since)return!1;if(e.relationship.type!==X.OGo.PENDING_INCOMING)return!1;var n=Ve.get(t.id,te.W.NOTIFICATION_CENTER),r=new Date(e.relationship.since).getTime();U.Z.extractTimestamp(n.ackMessageId)<=r&&(n._mentionCount=Math.max(0,n._mentionCount-1))},NOTIFICATION_CENTER_ITEMS_ACK:function(e){var t,n=e.id;if(e.optimistic||!(0,b.TW)()||S.Z.active)return!1;var r=null===(t=q.default.getCurrentUser())||void 0===t?void 0:t.id;if(null==r)return!1;var i=Ve.get(r,te.W.NOTIFICATION_CENTER);null!=n&&U.Z.compare(i.ackMessageId,n)<0&&(i._mentionCount=Math.max(i._mentionCount-1,0))},USER_NON_CHANNEL_ACK:function(e){
var t,n=e.ackType,r=e.ackedId,i=e.local,o=null===(t=q.default.getCurrentUser())||void 0===t?void 0:t.id;return null!=o&&lt(o,n,r,i)},PASSIVE_UPDATE_V1:function(e){var t,n=!1,r=!0,i=!1,o=void 0;try{for(var u,a=(null!==(t=e.channels)&&void 0!==t?t:[])[Symbol.iterator]();!(r=(u=a.next()).done);r=!0){var l=u.value,c=Ve.get(l.id),s=Me(l.lastPinTimestamp);if(c.lastMessageId!==l.lastMessageId||c.lastPinTimestamp!==s){n=!0;c.lastMessageId=l.lastMessageId;c.lastPinTimestamp=s}}}catch(e){i=!0;o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n},CLEAR_OLDEST_UNREAD_MESSAGE:function(e){return it(e.channelId)}});const dt=st},759194:(e,t,n)=>{n.d(t,{Z:()=>U});var r=n(496486),i=n.n(r),o=n(791462),u=n(444450),a=n(173436),l=n(817673),c=n(675860),s=n(832691),d=n(461061);var f=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);this.isCanceled=!1;this.searchId=t;this.searchType=n;this.query=r}
var t=e.prototype;t.fetch=function(e,t,n){var r=this;if(!this.isCanceled){var i=this.searchType===d.aib.GUILD?d.ANM.SEARCH_GUILD:d.ANM.SEARCH_CHANNEL;null!=this.searchId&&""!==this.searchId&&c.Z.get({url:i(this.searchId),query:l.stringify(this.query),oldFormErrors:!0}).then((function(i){if(!r.isCanceled)if(200===i.status)e(i);else if(202===i.status){var o;r.query.attempts=(null!==(o=r.query.attempts)&&void 0!==o?o:0)+1;var u=1e3*i.body.retry_after;r.retryDelay=isNaN(u)||0===u?5e3:u;r.retryLater(e,t,n);t(i)}})).catch((function(e){new s.Z("SearchFetcher").error(e);n(e)}))}};t.cancel=function(){this.isCanceled=!0;null!=this.indexingPollId&&clearTimeout(this.indexingPollId)};t.retryLater=function(e,t,n){null!=this.indexingPollId&&clearTimeout(this.indexingPollId);this.indexingPollId=setTimeout(this.fetch.bind(this,e,t,n),this.retryDelay)};return e}(),E=n(575698),_=n(356004),h=n(653772),p=n(379822);function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")
}function v(e){v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return v(e)}function I(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e,t){y=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return y(e,t)}var O=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var i=v(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return I(this,n)}}var m={},A=!1;function S(e){null==m[e]&&(m[e]={searchId:e,
searchType:b(e),isIndexing:!1,isHistoricalIndexing:!1,isSearching:!1,analyticsId:null,editorState:null,offset:0,query:null,hasError:!1,searchFetcher:null,rawResults:null,totalResults:0,documentsIndexed:0,resultsBlocked:0,showBlockedResults:!1,showNoResultsAlt:!1});return m[e]}function b(e){return null!=h.Z.getGuild(e)?d.aib.GUILD:null!=_.Z.getChannel(e)?d.aib.CHANNEL:null}function C(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null==e)return n;var r=m[e];return null==r?n:t(r)}var N="SearchStore",R="tokenized",L=!1,D={},P=null;function w(e){var t=e.searchId,n=m[t];if(null==n)return!1;null!=n.searchFetcher&&n.searchFetcher.cancel();delete m[t]}var M=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&y(e,t)}(n,e);var t=T(n);function n(){g(this,n);return t.apply(this,arguments)}
var r=n.prototype;r.initialize=function(){this.waitFor(h.Z,_.Z);var e=u.Z.get(N);null!=(null==e?void 0:e.history)&&(D=function(e){Object.keys(e).forEach((function(t){Array.isArray(e[t])&&(e[t]=e[t].filter((function(e){return"string"==typeof e&&e.trim()})));Array.isArray(e[t])&&0!==e[t].length||delete e[t]}));return e}(e.history));L=!!u.Z.get(R)||!1};r.isOpen=function(){return A};r.getCurrentSearchId=function(){return P};r.isActive=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P;return null!=e&&(this.isIndexing(e)||this.isSearching(e)||this.hasResults(e))};r.isTokenized=function(){return L};r.getSearchType=function(e){return C(null!=e?e:P,(function(e){return e.searchType}))};r.getRawResults=function(e){return C(e,(function(e){return e.rawResults}))};r.hasResults=function(e){return null!=C(e,(function(e){return e.rawResults}))};r.isIndexing=function(e){return C(e,(function(e){return e.isIndexing}))||!1};r.isHistoricalIndexing=function(e){return C(e,(function(e){
return e.isHistoricalIndexing}))||!1};r.isSearching=function(e){return C(e,(function(e){return e.isSearching}))||!1};r.getAnalyticsId=function(e){return C(e,(function(e){return e.analyticsId}))};r.getResultsBlocked=function(e){return C(e,(function(e){return e.resultsBlocked}))};r.getDocumentsIndexedCount=function(e){return C(e,(function(e){return e.documentsIndexed}))};r.getSearchFetcher=function(e){return C(e,(function(e){return e.searchFetcher}))};r.getTotalResults=function(e){var t;return null!==(t=C(e,(function(e){return e.totalResults})))&&void 0!==t?t:0};r.getEditorState=function(e){return C(e,(function(e){return e.editorState}))};r.getHistory=function(e){return D[e]};r.getOffset=function(e){var t;return null!==(t=C(e,(function(e){return e.offset})))&&void 0!==t?t:0};r.getQuery=function(e){return C(e,(function(e){return e.query}))};r.hasError=function(e){var t;return null!==(t=C(e,(function(e){return e.hasError})))&&void 0!==t&&t};r.shouldShowBlockedResults=function(e){var t
;return null!==(t=C(e,(function(e){return e.showBlockedResults}),!1))&&void 0!==t&&t};r.shouldShowNoResultsAlt=function(e){var t;return null!==(t=C(e,(function(e){return e.showNoResultsAlt}),!1))&&void 0!==t&&t};r.getResultsState=function(e){return{isSearching:this.isSearching(e),isIndexing:this.isIndexing(e),isHistoricalIndexing:this.isHistoricalIndexing(e),documentsIndexed:this.getDocumentsIndexedCount(e),offset:this.getOffset(e),totalResults:this.getTotalResults(e),hasError:this.hasError(e),showBlockedResults:this.shouldShowBlockedResults(e),showNoResultsAlt:this.shouldShowNoResultsAlt(e)}};r.__getLocalVars=function(){return{NO_RESULTS_ALT_PERCENT:.05,searchStates:m,searchModalOpen:A,STORAGE_KEY:N,TOKENIZED_KEY:R,isTokenized:L,searchHistory:D,selectedSearchId:P}};return n}(o.ZP.Store);M.displayName="SearchStore";const U=new M(a.Z,{SEARCH_START:function(e){var t,n=e.queryString,r=e.searchId,o=e.query,l=S(r);if(null!=l.searchFetcher){l.searchFetcher.cancel();l.searchFetcher=null}
var c=r,s=l.searchType;if(r===d.I_8){var h;c=null!==(h=p.Z.getChannelId())&&void 0!==h?h:r;s=d.aib.CHANNEL}var g,v=new f(c,s,o);l.searchFetcher=v;l.isSearching=!0;l.rawResults=null;l.analyticsId=null;l.query=i().omit(o,"type");l.offset=null!==(g=o.offset)&&void 0!==g?g:0;l.showBlockedResults=!1;!function(e,t){if("string"!=typeof t)return;var n,r=D[e]=null!==(n=D[e])&&void 0!==n?n:[];t=t.trim();var i=r.indexOf(t);if(-1!==i){r.splice(i,1);r.unshift(t)}else null!=r[0]&&""!==r[0]&&t.startsWith(r[0])?r[0]=t:i<0&&r.unshift(t);r.length>5&&r.splice(5,r.length);u.Z.set(N,{history:D})}(r,n);var I=r===d.I_8?null===(t=_.Z.getChannel(c))||void 0===t?void 0:t.guild_id:s===d.aib.GUILD?r:null;v.fetch((function(e){var t,n;a.Z.dispatch({type:"SEARCH_FINISH",searchId:r,guildId:I,analyticsId:e.body.analytics_id,totalResults:e.body.total_results,messages:e.body.messages,threads:null!==(t=e.body.threads)&&void 0!==t?t:[],members:(null!==(n=e.body.members)&&void 0!==n?n:[]).map((function(e){return(0,E.Z)(e)
})),hasError:!1,doingHistoricalIndex:e.body.doing_deep_historical_index,documentsIndexed:e.body.documents_indexed})}),(function(){a.Z.dispatch({type:"SEARCH_INDEXING",searchId:r})}),(function(){a.Z.dispatch({type:"SEARCH_FINISH",searchId:r,guildId:I,messages:[],threads:[],members:[],totalResults:0,analyticsId:null,hasError:!0,doingHistoricalIndex:!1,documentsIndexed:0})}))},SEARCH_INDEXING:function(e){var t=S(e.searchId);t.isIndexing=!0;t.isHistoricalIndexing=!0;t.isSearching=!1},SEARCH_FINISH:function(e){var t=S(e.searchId);t.isSearching=!1;t.isIndexing=!1;t.isHistoricalIndexing=e.doingHistoricalIndex||!1;t.searchFetcher=null;t.totalResults=e.totalResults;t.hasError=e.hasError;t.analyticsId=e.analyticsId;t.documentsIndexed=null!=e.documentsIndexed?e.documentsIndexed:0;t.showNoResultsAlt=Math.random()<.05;t.rawResults=e.messages;null==t.query&&(t.hasError=!0)},SEARCH_EDITOR_STATE_CLEAR:w,SEARCH_ENSURE_SEARCH_STATE:function(e){var t=e.searchId;null!=t&&S(t)},
SEARCH_EDITOR_STATE_CHANGE:function(e){var t=e.searchId,n=e.editorState;S(t).editorState=n},SEARCH_SET_SHOW_BLOCKED_RESULTS:function(e){var t=e.searchId,n=e.showBlocked;S(t).showBlockedResults=n},CHANNEL_SELECT:function(e){var t=e.guildId,n=e.channelId,r=null!=t?t:n;if(r===P)return!1;null!=r&&null==m[r]&&S(r);P=r},CHANNEL_TOGGLE_MEMBERS_SECTION:function(){return null!=P&&w({searchId:P})},SEARCH_CLEAR_HISTORY:function(e){var t=e.searchId;if(null==t){u.Z.remove(N);D={}}else{delete D[t];u.Z.set(N,{history:D})}},LOGOUT:function(){u.Z.remove(N);D={}},CONNECTION_OPEN:function(){Object.keys(m).forEach((function(e){null!=m[e]&&(m[e].searchType=b(e))}))},SEARCH_MODAL_OPEN:function(){A=!0},SEARCH_MODAL_CLOSE:function(){A=!1}})},248604:(e,t,n)=>{n.d(t,{Z:()=>L});var r=n(791462),i=n(173436),o=n(108580),u=n(356004),a=n(934714),l=n(733285),c=n(379822),s=n(461061),d=n(866452);function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function E(e,t){
if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e){_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return _(e)}function h(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e,t){p=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return p(e,t)}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],u=!0,a=!1;try{for(n=n.call(e);!(u=(r=n.next()).done);u=!0){o.push(r.value);if(t&&o.length===t)break}}catch(e){a=!0;i=e}finally{try{u||null==n.return||n.return()}finally{if(a)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1)
;"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var v=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=_(e);if(t){var i=_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h(this,n)}}var y=new Map,O=null,T=null,m=null;function A(e,t){var n=y.get(e);if(null==n)return!1;var r=n.delete(t)
;0===n.size&&y.delete(e);return r}function S(e,t,n){var r,i,o;return((null!==(o=null===(i=null===(r=y.get(e))||void 0===r?void 0:r.get(t))||void 0===i?void 0:i.flags)&&void 0!==o?o:d.Dg.NONE)&n)===n}function b(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=y.get(e);if(null==r)return!1;var i=!0,o=!1,u=void 0;try{for(var a,l=r[Symbol.iterator]();!(i=(a=l.next()).done);i=!0){var c=g(a.value,2),s=c[0],d=c[1].flags;if((!n||s!==O)&&(d&t)===t)return!0}}catch(e){o=!0;u=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw u}}return!1}function C(e,t,n){var r,i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d.Yn.DEFAULT,t=y.get(e);if(null==t){t=new Map;y.set(e,t)}return t}(e),o=i.get(t),u=null!==(r=null==o?void 0:o.flags)&&void 0!==r?r:0;if(0===u&&0===n)return!1;if(0===n){i.delete(t);0===i.size&&y.delete(e)}else{var a,l=null!==(a=null==o?void 0:o.since)&&void 0!==a?a:null,c=(u&d.Dg.VOICE)===d.Dg.VOICE,s=(n&d.Dg.VOICE)===d.Dg.VOICE
;c!==s&&(l=s?Date.now():null);i.set(t,{flags:n,since:l})}return!0}function N(e){var t=e.user,n=e.sessionId;O=t.id;T=n;m=null}var R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&p(e,t)}(n,e);var t=I(n);function n(){E(this,n);return t.apply(this,arguments)}var r=n.prototype;r.initialize=function(){this.mustEmitChanges((function(e){return"CONNECTION_OPEN"!==e.type&&"VOICE_STATE_UPDATES"!==e.type}));this.waitFor(l.Z)};r.getSpeakingDuration=function(e,t){var n,r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d.Yn.DEFAULT,o=null===(r=null===(n=y.get(i))||void 0===n?void 0:n.get(e))||void 0===r?void 0:r.since;return null!=o?t-o:0};r.getSpeakers=function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d.Yn.DEFAULT
;return Array.from(null!==(t=null===(e=y.get(n))||void 0===e?void 0:e.keys())&&void 0!==t?t:[]).filter((function(e){return S(n,e,d.Dg.VOICE)}))};r.isSpeaking=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d.Yn.DEFAULT;return S(t,e,d.Dg.VOICE)};r.isPrioritySpeaker=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d.Yn.DEFAULT;return S(t,e,d.Dg.PRIORITY)};r.isSoundSharing=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d.Yn.DEFAULT;return S(t,e,d.Dg.SOUNDSHARE)};r.isAnyoneElseSpeaking=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d.Yn.DEFAULT;return b(e,d.Dg.VOICE,!0)};r.isCurrentUserSpeaking=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d.Yn.DEFAULT;return null!=O&&this.isSpeaking(O,e)};r.isAnyonePrioritySpeaking=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d.Yn.DEFAULT;return b(e,d.Dg.VOICE|d.Dg.PRIORITY)}
;r.isCurrentUserPrioritySpeaking=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d.Yn.DEFAULT;return null!=O&&this.isPrioritySpeaker(O,e)&&this.isSpeaking(O,e)};r.__getLocalVars=function(){return{speakersByContext:y,currentUserId:O,currentSessionId:T,currentChannelId:m}};return n}(r.ZP.Store);R.displayName="SpeakingStore";const L=new R(i.Z,{CONNECTION_OPEN:N,OVERLAY_INITIALIZE:N,SPEAKING:function(e){var t=e.context,n=e.userId,r=e.speakingFlags;if((r&d.Dg.PRIORITY)===d.Dg.PRIORITY){var i=u.Z.getChannel(c.Z.getVoiceChannelId());if(null!=i&&o.ZP.can({permission:s.Plq.PRIORITY_SPEAKER,user:n,context:i}))a.Z.setCanHavePriority(n,!0);else{a.Z.setCanHavePriority(n,!1);r&=~d.Dg.PRIORITY}}return C(t,n,r)},VOICE_STATE_UPDATES:function(e){return e.voiceStates.reduce((function(e,t){var n=t.userId,r=t.channelId,i=t.sessionId,o=!1,u=m;n===O&&i===T&&(m=null!=r?r:null);u!==m&&(o=y.delete(d.Yn.DEFAULT)||o)
;null==r?o=n===O&&i===T?y.delete(d.Yn.DEFAULT)||o:A(d.Yn.DEFAULT,n)||o:n===O&&i!==T?o=y.delete(d.Yn.DEFAULT)||o:n!==O&&r!==l.Z.getChannelId()&&(o=A(d.Yn.DEFAULT,n)||o);return o||e}),!1)},LOBBY_VOICE_STATE_UPDATE:function(e){}})},893321:(e,t,n)=>{n.d(t,{Z:()=>T});var r=n(791462),i=n(173436),o=n(932847),u=n(631134),a=n(461061);function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1;r.configurable=!0;"value"in r&&(r.writable=!0);Object.defineProperty(e,r.key,r)}}function s(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function d(e){d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return d(e)}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n)
;"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){s(e,t,n[t])}))}return e}function E(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _(e,t){_=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return _(e,t)}var h=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var i=d(this).constructor;n=Reflect.construct(r,arguments,i)
}else n=r.apply(this,arguments);return E(this,n)}}function g(e,t){o.default.track(a.rMx.STREAMER_MODE_TOGGLE,{enabled:e,automatic:t})}var v={enabled:!1,autoToggle:!0,hideInstantInvites:!0,hidePersonalInformation:!0,disableSounds:!0,disableNotifications:!0},I={},y=f({},v);var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&_(e,t)}(n,e);var t=p(n);function n(){l(this,n);return t.apply(this,arguments)}var r=n.prototype;r.initialize=function(e){Object.assign(I,e);this.syncWith([u.default],(function(){var e=u.default.getId();y=null!=e?function(e){var t=I[e];null==t&&(t=I[e]=f({},v));return t}(e):f({},v)}))};r.getState=function(){return I};r.getSettings=function(){return y};r.__getLocalVars=function(){return{defaultSettings:v,state:I,currentUserState:y}};!function(e,t,n){t&&c(e.prototype,t);n&&c(e,n)}(n,[{
key:"enabled",get:function(){return y.enabled}},{key:"autoToggle",get:function(){return y.autoToggle}},{key:"hideInstantInvites",get:function(){return this.enabled&&y.hideInstantInvites}},{key:"hidePersonalInformation",get:function(){return this.enabled&&y.hidePersonalInformation}},{key:"disableSounds",get:function(){return this.enabled&&y.disableSounds}},{key:"disableNotifications",get:function(){return this.enabled&&y.disableNotifications}}]);return n}(r.ZP.PersistedStore);O.displayName="StreamerModeStore";O.persistKey="StreamerModeStore";O.migrations=[function(e){var t=u.default.getId();return null==e||null==t?{}:s({},t,f({},e))}];const T=new O(i.Z,{LOGOUT:function(e){e.isSwitchingAccount||(I={})},MULTI_ACCOUNT_REMOVE_ACCOUNT:function(e){e.userId in I&&delete I[e.userId]},STREAMER_MODE_UPDATE:function(e){y[e.key]=e.value;"enabled"===e.key?g(e.value,!1):o.default.track(a.rMx.UPDATE_STREAMER_MODE_SETTINGS,{enabled:y.enabled,automatic:y.autoToggle,
disable_notifications:y.disableNotifications,disable_sounds:y.disableSounds,hide_instant_invites:y.hideInstantInvites,hide_personal_info:y.hidePersonalInformation});return!0},RUNNING_STREAMER_TOOLS_CHANGE:function(e){if(y.autoToggle){var t=e.count>0;y.enabled=t;g(t,!0);return!0}return!1}})},569395:(e,t,n)=>{n.d(t,{Z:()=>y});var r=n(791462),i=n(173436),o=n(866452);function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function l(e){l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return l(e)}function c(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){
return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function s(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e,t){d=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return d(e,t)}var f=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var i=l(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}
var _=null,h=null,p={};function g(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=null!==(t=p[e])&&void 0!==t?t:{},i=!0,u=!1,a=void 0;try{for(var l,c=Object.values(o.Yn)[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;n!==s&&null!=n||delete r[s]}}catch(e){u=!0;a=e}finally{try{i||null==c.return||c.return()}finally{if(u)throw a}}p[e]=r}function v(e,t,n){var r,i=null!==(r=p[e])&&void 0!==r?r:{};p[e]=c(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){a(e,t,n[t])}))}return e}({},i),a({},n,{streamId:t}))}var I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,
writable:!0,configurable:!0}});t&&d(e,t)}(n,e);var t=E(n);function n(){u(this,n);return t.apply(this,arguments)}var r=n.prototype;r.getStreamId=function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.Yn.DEFAULT;return null===(t=p[e])||void 0===t||null===(n=t[r])||void 0===n?void 0:n.streamId};r.getUserStreamData=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.Yn.DEFAULT;return null===(t=p[e])||void 0===t?void 0:t[n]};r.__getLocalVars=function(){return{currentUserId:_,currentSessionId:h,userStreams:p}};return n}(r.ZP.Store);I.displayName="VideoStreamStore";const y=new I(i.Z,{CONNECTION_OPEN:function(e){var t=e.user,n=e.sessionId;_=t.id;h=n},OVERLAY_INITIALIZE:function(e){var t=e.user,n=e.sessionId;_=t.id;h=n},RTC_CONNECTION_VIDEO:function(e){var t=e.userId,n=e.streamId,r=e.context;null!=n?v(t,n,r):g(t,r)},VOICE_STATE_UPDATES:function(e){return e.voiceStates.reduce((function(e,t){var n=t.userId,r=t.sessionId,i=t.channelId
;if(null==i&&n===_){if(r!==h)return e;p={}}else{if(null!=i||null==p[n])return e;g(n)}return!0}),!1)}})},331792:(e,t,n)=>{n.d(t,{Z:()=>C});var r=n(791462),i=n(173436),o=n(600155),u=n(409271),a=n(537127),l=n(800539);function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1;r.configurable=!0;"value"in r&&(r.writable=!0);Object.defineProperty(e,r.key,r)}}function d(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function f(e){f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return f(e)}function E(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _(e,t){_=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e}
;return _(e,t)}var h=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var i=f(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return E(this,n)}}var g,v,I,y={applicationId:null,originURL:null},O=y,T=new Set,m=!1;function A(){I=null}function S(){g=null;v=null;T=new Set;O.applicationId=null;O.originURL=null;A()}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&_(e,t)}(n,e);var t=p(n);function n(){c(this,n)
;return t.apply(this,arguments)}var r=n.prototype;r.initialize=function(e){O=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){d(e,t,n[t])}))}return e}({},null!=e?e:y);g=O.applicationId;v=O.originURL;this.waitFor(a.Z,o.Z);this.syncWith([a.Z,o.Z],(function(){return!0}));l.Z.whenInitialized((function(){m=!0}))};r.inTestModeForApplication=function(e){return g===e};r.inTestModeForEmbeddedApplication=function(e){return g===e&&null!=v};r.shouldDisplayTestMode=function(e){return u.Sb.getSetting()&&this.inTestModeForApplication(e)};r.getState=function(){return O};r.whenInitialized=function(e){this.addConditionalChangeListener((function(){if(m){setImmediate(e);return!1}}))};r.__getLocalVars=function(){return{initialState:y,state:O,
testModeApplicationId:g,testModeOriginURL:v,fetchingAuthorizations:T,authorizationError:I,initialized:m}};!function(e,t,n){t&&s(e.prototype,t);n&&s(e,n)}(n,[{key:"isTestMode",get:function(){return null!=g}},{key:"isFetchingAuthorization",get:function(){return T.size>0}},{key:"testModeEmbeddedApplicationId",get:function(){return null!=v?g:null}},{key:"testModeApplicationId",get:function(){return g}},{key:"testModeOriginURL",get:function(){return v}},{key:"error",get:function(){return I}}]);return n}(r.ZP.PersistedStore);b.displayName="TestModeStore";b.persistKey="TestModeStore";const C=new b(i.Z,{DEVELOPER_TEST_MODE_AUTHORIZATION_START:function(e){var t=e.applicationId;T.add(t);I=null},DEVELOPER_TEST_MODE_AUTHORIZATION_SUCCESS:function(e){var t=e.applicationId,n=e.originURL;g=t;v=n;T.delete(t);I=null;O.applicationId=t;O.originURL=n},DEVELOPER_TEST_MODE_AUTHORIZATION_FAIL:function(e){var t=e.applicationId,n=e.error;T.delete(t);I=n},OVERLAY_INITIALIZE:function(e){
var t=e.testModeApplicationId;g=t},DEVELOPER_TEST_MODE_RESET_ERROR:A,LOGOUT:S,DEVELOPER_TEST_MODE_RESET:S})},703863:(e,t,n)=>{n.d(t,{Z:()=>D});var r=n(496486),i=n.n(r),o=n(730381),u=n.n(o),a=n(791462),l=n(173436),c=n(35197),s=n(53551),d=n(356004),f=n(653772),E=n(859023),_=n(346529);function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function v(e){v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return v(e)}function I(e,t){return!t||"object"!==T(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e,t){y=Object.setPrototypeOf||function(e,t){e.__proto__=t
;return e};return y(e,t)}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],u=!0,a=!1;try{for(n=n.call(e);!(u=(r=n.next()).done);u=!0){o.push(r.value);if(t&&o.length===t)break}}catch(e){a=!0;i=e}finally{try{u||null==n.return||n.return()}finally{if(a)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var T=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}
;function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var i=v(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return I(this,n)}}var A={},S=[],b=!1;function C(e){var t,n=null!==(t=e.lastMessageId)&&void 0!==t?t:e.id,r=e.isMessageRequestTimestamp;if(null!=r){var i=u()(r).valueOf(),o=_.Z.fromTimestamp(i);return _.Z.compare(n,o)>0?n:o}return n}function N(){b=!1;var e=i()(A).toPairs().filter((function(e){var t=O(e,1)[0],n=d.Z.getChannel(t);return null==n||null==f.Z.getGuild(n.guild_id)})).sort((function(e,t){var n=O(e,2),r=(n[0],n[1]),i=O(t,2),o=(i[0],i[1]);return _.Z.compare(r,o)})).reverse().map((function(e){return O(e,1)[0]})).value(),t=!i().isEqual(S,e);t&&(S=e);return t}function R(){A={}
;Object.values(d.Z.getMutablePrivateChannels()).forEach((function(e){A[e.id]=C(e)}));b=!0}var L=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&y(e,t)}(n,e);var t=m(n);function n(){p(this,n);return t.apply(this,arguments)}var r=n.prototype;r.initialize=function(){this.waitFor(d.Z,f.Z,E.default,c.Z)};r.getPrivateChannelIds=function(){b&&N();return S};r.serializeForOverlay=function(){b&&N();return A};r.__getLocalVars=function(){return{privateChannels:A,privateChannelIds:S,needsResort:b}};return n}(a.ZP.Store);L.displayName="PrivateChannelSortStore";const D=new L(l.Z,{CONNECTION_OPEN:R,CONNECTION_OPEN_SUPPLEMENTAL:R,OVERLAY_INITIALIZE:function(e){var t=e.sortedPrivateChannels;A=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n)
;"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){g(e,t,n[t])}))}return e}({},t);b=!0},CACHE_LOADED_LAZY:function(e){var t=e.privateChannelIds;b=!1;S=t},CHANNEL_UPDATES:function(e){e.updates.forEach((function(e){var t=e.channel;if(!(0,s.hv)(t.type))return!1;A[t.id]=C(t)}));b=!0},CHANNEL_CREATE:function(e){var t=e.channel;if(!(0,s.hv)(t.type))return!1;A[t.id]=C(t);return N()},CHANNEL_DELETE:function(e){var t=e.channel;if(null==A[t.id])return!1;delete A[t.id];return N()},MESSAGE_CREATE:function(e){var t=e.channelId,n=e.message;if(null==A[t])return!1;A[t]=n.id;return N()},GUILD_CREATE:function(e){var t=e.guild.id;null!=A[t]&&delete A[t];return N()},GUILD_DELETE:N})},300327:(e,t,n)=>{n.d(t,{Z:()=>J})
;var r=n(791462),i=n(444450),o=n(173436),u=n(559769),a=n(587156),l=n(368351),c=n(53551),s=n(631134),d=n(356004),f=n(1812),E=n(90354),_=n(971738),h=n(784238),p=n(703863),g=n(742269),v=n(588641),I=n(285183),y=n(426217),O=n(461061),T=n(254274);function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1;r.configurable=!0;"value"in r&&(r.writable=!0);Object.defineProperty(e,r.key,r)}}function S(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function b(e){b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return b(e)}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){
return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){S(e,t,n[t])}))}return e}function N(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function R(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++){n=o[r];t.indexOf(n)>=0||(i[n]=e[n])}return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++){n=o[r];t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}}return i}function L(e,t){
return!t||"object"!==P(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function D(e,t){D=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return D(e,t)}var P=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=b(e);if(t){var i=b(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return L(this,n)}}var M={selectedGuildId:null,selectedChannelId:null,displayUserMode:O.OYC.ALWAYS,displayNameMode:O.wC$.ALWAYS,avatarSizeMode:O.ipw.LARGE,notificationPositionMode:O._vf.TOP_LEFT,textChatNotifications:O.Ypu.ENABLED,
disableExternalLinkAlert:!1,disablePinTutorial:!1,textWidgetOpacity:T.w.LOWER},U=null,Z={},G=null,k=new Set,H=!1,F=null,j=!1,V=!1,B=new Set,x=!1;function W(e){var t=Z[e];null==t&&(t=Z[e]=C({},M));return t}var Y=C({},M);function K(e){"OVERLAY_INITIALIZE"===e.type&&function(e){if(null==e.version&&1===I.Tq)return!0;if(e.version===I.Tq)return!0;o.Z.dispatch({type:"OVERLAY_INCOMPATIBLE_APP"});(0,a.zP)();return!1}(e)&&(V=!0);if(V)switch(e.type){case"CHANNEL_CREATE":case"THREAD_CREATE":case"THREAD_UPDATE":case"CHANNEL_DELETE":case"THREAD_DELETE":var t=(0,c.kt)(e.channel);if(!c.AW.has(t.type))break;o.Z.dispatch({type:e.type,channel:t});break;case"CHANNEL_UPDATES":var n=[],r=!0,i=!1,u=void 0;try{for(var s,d=e.updates[Symbol.iterator]();!(r=(s=d.next()).done);r=!0){var f=s.value;n.push(N(C({},f),{channel:(0,c.kt)(f.channel)}))}}catch(e){i=!0;u=e}finally{try{r||null==d.return||d.return()}finally{if(i)throw u}}o.Z.dispatch({type:e.type,updates:n});break;case"CONNECTION_OPEN_SUPPLEMENTAL":var E
;e.lazyPrivateChannels=(null!==(E=e.lazyPrivateChannels)&&void 0!==E?E:[]).map((function(e){return(0,c.kt)(e)}));o.Z.dispatch(e);break;case"THREAD_LIST_SYNC":o.Z.dispatch(N(C({},e),{threads:e.threads.map((function(e){return(0,c.kt)(e)}))}));break;case"GUILD_CREATE":var _,h=e.guild;h.channels=h.channels.map((function(e){return(0,c.kt)(e)}));h.threads=null===(_=h.threads)||void 0===_?void 0:_.map((function(e){return(0,c.kt)(e)}));o.Z.dispatch({type:"GUILD_CREATE",guild:h});break;case"USER_SETTINGS_PROTO_UPDATE":o.Z.dispatch(N(C({},e),{settings:{proto:(0,l.kI)(e.settings.type,e.settings.proto),type:e.settings.type}}));break;default:o.Z.dispatch(e)}}function z(){if(!__OVERLAY__)return!1;var e=U===(0,I.QF)(),t=k.has((0,I.QF)())||B.size>0;e&&t?(0,u.T_)(window,!0):(0,u.T_)(window,!1)}function q(){if(U!==(0,I.QF)())return!1;B.clear()}function Q(e){var t=(0,I.QF)();if(null==e.pid||e.pid===t)switch(e.type){case O.BmY.STORAGE_SYNC:r.ZP.PersistedStore.initializeAll(e.states);break
;case O.BmY.DISPATCH:if(null!=e.payloads){j=!0;e.payloads.forEach((function(e){return K(e)}));j=!1}}}var X=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&D(e,t)}(n,e);var t=w(n);function n(){m(this,n);return t.apply(this,arguments)}var r=n.prototype;r.initialize=function(e){this.waitFor(s.default);this.syncWith([s.default],(function(){var e=s.default.getId();Y=null!=e?W(e):C({},M)}));if(__OVERLAY__){g.FB&&(F=v.default.requireModule("discord_overlay2"));k.delete((0,I.QF)())}if(null!=e){Z=e;var t=s.default.getId();if(null!=t){null==(Y=W(t)).textChatNotifications&&(Y.textChatNotifications=M.textChatNotifications);null==Y.textWidgetOpacity&&(Y.textWidgetOpacity=M.textWidgetOpacity)}}};r.getState=function(){return Z};r.isUILocked=function(e){return!k.has(e)};r.isInstanceUILocked=function(){
if(!__OVERLAY__)throw new Error("OverlayStore: App instance should never call .isInstanceUILocked()");return!k.has((0,I.QF)())};r.isInstanceFocused=function(){if(!__OVERLAY__)throw new Error("OverlayStore: App instance should never call .isInstanceFocused()");return U===(0,I.QF)()};r.isFocused=function(e){return U===e};r.isPinned=function(e){var t=E.Z.getLayout(I.qU);if(null!=t){return null!=t.widgets.find((function(t){var n=E.Z.getWidget(t);return!(null==n||n.type!==e||!n.pinned)}))}return!1};r.getSelectedGuildId=function(){return Y.selectedGuildId};r.getSelectedChannelId=function(){return Y.selectedChannelId};r.getSelectedCallId=function(){return G};r.getDisplayUserMode=function(){return Y.displayUserMode};r.getDisplayNameMode=function(){return Y.displayNameMode};r.getAvatarSizeMode=function(){return Y.avatarSizeMode};r.getNotificationPositionMode=function(){return Y.notificationPositionMode};r.getTextChatNotificationMode=function(){
return Y.notificationPositionMode===O._vf.DISABLED?O.Ypu.DISABLED:Y.textChatNotifications};r.getDisableExternalLinkAlert=function(){return Y.disableExternalLinkAlert};r.getFocusedPID=function(){return U};r.getActiveRegions=function(){return B};r.getTextWidgetOpacity=function(){return Y.textWidgetOpacity};r.isPreviewingInGame=function(){return x};r.__getLocalVars=function(){return{defaultSettings:M,focusedPID:U,settings:Z,selectedCallId:G,unlockedOverlayPIDs:k,incompatibleApp:H,overlay:F,isDispatching:j,hasReceivedInitialPayload:V,activeRegions:B,isPreviewingInGame:x,currentUserSettings:Y}};!function(e,t,n){t&&A(e.prototype,t);n&&A(e,n)}(n,[{key:"initialized",get:function(){return V}},{key:"incompatibleApp",get:function(){return H}}]);return n}(r.ZP.PersistedStore);X.displayName="OverlayStore";X.persistKey="OverlayStoreV2";X.migrations=[function(){var e=C({},i.Z.get("OverlayStore")),t=(e.pinnedWidgets,e.positions,e.sizes,e.v),n=R(e,["pinnedWidgets","positions","sizes","v"])
;return C({},M,5===t?n:null)},function(e){var t=s.default.getId();return null==e||null==t?{}:S({},t,C({},e))}];const J=new X(o.Z,{LOGOUT:function(e){e.isSwitchingAccount||(Z={})},MULTI_ACCOUNT_REMOVE_ACCOUNT:function(e){e.userId in Z&&delete Z[e.userId]},CONNECTION_CLOSED:function(){k.clear()},OVERLAY_START_SESSION:function(){
e=new Set(["CHANNEL_SELECT","VOICE_CHANNEL_SELECT","CHANNEL_COLLAPSE","CATEGORY_COLLAPSE","CATEGORY_EXPAND","AUDIO_TOGGLE_SELF_MUTE","AUDIO_TOGGLE_SELF_DEAF","AUDIO_TOGGLE_LOCAL_MUTE","AUDIO_SET_LOCAL_VIDEO_DISABLED","AUDIO_SET_LOCAL_VOLUME","AUDIO_SET_INPUT_DEVICE","AUDIO_SET_INPUT_VOLUME","AUDIO_SET_OUTPUT_VOLUME","AUDIO_SET_OUTPUT_DEVICE","AUDIO_SET_MODE","OVERLAY_SELECT_CALL","OVERLAY_SET_NOTIFICATION_POSITION_MODE","OVERLAY_SET_UI_LOCKED","OVERLAY_SET_INPUT_LOCKED","OVERLAY_SET_TEXT_WIDGET_OPACITY","OVERLAY_SET_NOT_IDLE","OVERLAY_CALL_PRIVATE_CHANNEL","OVERLAY_SET_DISPLAY_NAME_MODE","OVERLAY_SET_DISPLAY_USER_MODE","OVERLAY_SET_AVATAR_SIZE_MODE","OVERLAY_SET_NOTIFICATION_POSITION_MODE","OVERLAY_SET_TEXT_CHAT_NOTIFICATION_MODE","OVERLAY_JOIN_GAME","LAYOUT_UPDATE_WIDGET","LAYOUT_SET_TOP_WIDGET","LAYOUT_SET_PINNED","LAYOUT_CREATE","CHANNEL_PRELOAD","CALL_DELETE","CHANNEL_ACK","SKU_PURCHASE_MODAL_OPEN","SKU_PURCHASE_MODAL_CLOSE","SKU_PURCHASE_PREVIEW_FETCH_SUCCESS","SKU_PURCHASE_START","SKU_PURCHASE_SUCCESS","SKU_PURCHASE_FAIL","SKU_PURCHASE_SHOW_CONFIRMATION_STEP","SKU_PURCHASE_CLEAR_ERROR","PURCHASE_CONFIRMATION_MODAL_OPEN","PURCHASE_CONFIRMATION_MODAL_CLOSE","ACTIVITY_INVITE_MODAL_CLOSE","LOAD_MESSAGES_SUCCESS","LOAD_MESSAGES_FAILURE","LOAD_MESSAGES","OVERLAY_ACTIVATE_REGION","OVERLAY_DEACTIVATE_ALL_REGIONS","INVITE_MODAL_CLOSE","LAYOUT_DELETE_WIDGET","LAYOUT_DELETE_ALL_WIDGETS","LAYOUT_CREATE_WIDGETS","GIFT_CODE_REDEEM","GIFT_CODE_REDEEM_SUCCESS","GIFT_CODE_REDEEM_FAILURE","PREMIUM_REQUIRED_MODAL_OPEN","PREMIUM_REQUIRED_MODAL_CLOSE","PREMIUM_PAYMENT_MODAL_OPEN","PREMIUM_PAYMENT_MODAL_CLOSE","PREMIUM_PAYMENT_SUBSCRIBE_FAIL","PREMIUM_PAYMENT_SUBSCRIBE_SUCCESS","PREMIUM_PAYMENT_ERROR_CLEAR","PREMIUM_PAYMENT_UPDATE_FAIL","PREMIUM_PAYMENT_UPDATE_SUCCESS","BILLING_SUBSCRIPTION_UPDATE_SUCCESS","MEDIA_ENGINE_SET_DESKTOP_SOURCE","STREAM_START","STREAM_STOP","STREAM_CLOSE","HOTSPOT_HIDE","AUDIO_SET_NOISE_CANCELLATION","AUDIO_SET_NOISE_SUPPRESSION","GUILD_SOUNDBOARD_SOUND_REQUEST_PLAY"]),
o.Z.addInterceptor((function(t){if(j)return!1;var n=e.has(t.type);if(n)switch(t.type){case"CHANNEL_SELECT":var r=t.guildId,i=t.channelId;n=!1;if(null==i)break;(0,a.lW)({type:O.BmY.DISPATCH,pid:(0,I.QF)(),token:(0,I.Ht)(),payloads:[{type:"CHANNEL_PRELOAD",guildId:r===O.ME?null:r,channelId:i,context:O.e3s},{type:"OVERLAY_SELECT_CHANNEL",guildId:r,channelId:i}]});break;case"OVERLAY_SET_DISPLAY_NAME_MODE":case"OVERLAY_SET_DISPLAY_USER_MODE":case"OVERLAY_SET_AVATAR_SIZE_MODE":case"OVERLAY_SET_NOTIFICATION_POSITION_MODE":case"OVERLAY_SET_TEXT_CHAT_NOTIFICATION_MODE":case"OVERLAY_SET_UI_LOCKED":case"OVERLAY_SET_INPUT_LOCKED":case"OVERLAY_SET_TEXT_WIDGET_OPACITY":case"LAYOUT_UPDATE_WIDGET":case"LAYOUT_SET_PINNED":case"LAYOUT_SET_TOP_WIDGET":case"LAYOUT_CREATE":case"CATEGORY_EXPAND":case"CATEGORY_COLLAPSE":case"VOICE_CHANNEL_SELECT":case"CHANNEL_ACK":case"AUDIO_TOGGLE_SELF_MUTE":case"AUDIO_TOGGLE_SELF_DEAF":case"AUDIO_TOGGLE_LOCAL_MUTE":case"AUDIO_SET_LOCAL_VIDEO_DISABLED":
case"AUDIO_SET_LOCAL_VOLUME":case"AUDIO_SET_INPUT_DEVICE":case"AUDIO_SET_INPUT_VOLUME":case"AUDIO_SET_OUTPUT_VOLUME":case"AUDIO_SET_OUTPUT_DEVICE":case"AUDIO_SET_MODE":case"LOAD_MESSAGES_SUCCESS":case"LOAD_MESSAGES_FAILURE":case"LOAD_MESSAGES":case"CHANNEL_PRELOAD":case"SKU_PURCHASE_MODAL_OPEN":case"SKU_PURCHASE_MODAL_CLOSE":case"SKU_PURCHASE_PREVIEW_FETCH_SUCCESS":case"SKU_PURCHASE_START":case"SKU_PURCHASE_SUCCESS":case"SKU_PURCHASE_FAIL":case"SKU_PURCHASE_SHOW_CONFIRMATION_STEP":case"SKU_PURCHASE_CLEAR_ERROR":case"PURCHASE_CONFIRMATION_MODAL_OPEN":case"PURCHASE_CONFIRMATION_MODAL_CLOSE":case"OVERLAY_ACTIVATE_REGION":case"OVERLAY_DEACTIVATE_ALL_REGIONS":case"INVITE_MODAL_CLOSE":case"LAYOUT_DELETE_WIDGET":case"LAYOUT_DELETE_ALL_WIDGETS":case"LAYOUT_CREATE_WIDGETS":case"GIFT_CODE_REDEEM":case"GIFT_CODE_REDEEM_SUCCESS":case"GIFT_CODE_REDEEM_FAILURE":case"PREMIUM_REQUIRED_MODAL_OPEN":case"PREMIUM_REQUIRED_MODAL_CLOSE":case"PREMIUM_PAYMENT_MODAL_OPEN":case"PREMIUM_PAYMENT_MODAL_CLOSE":
case"PREMIUM_PAYMENT_SUBSCRIBE_FAIL":case"PREMIUM_PAYMENT_SUBSCRIBE_SUCCESS":case"PREMIUM_PAYMENT_SUBSCRIBE_START":case"PREMIUM_PAYMENT_ERROR_CLEAR":case"PREMIUM_PAYMENT_SELECT_PLAN":case"PREMIUM_PAYMENT_UPDATE_FAIL":case"PREMIUM_PAYMENT_UPDATE_SUCCESS":case"BILLING_SUBSCRIPTION_UPDATE_SUCCESS":case"STREAM_START":case"STREAM_CLOSE":case"MEDIA_ENGINE_SET_DESKTOP_SOURCE":case"HOTSPOT_HIDE":case"AUDIO_SET_NOISE_CANCELLATION":case"AUDIO_SET_NOISE_SUPPRESSION":n=!1;default:(0,a.lW)({type:O.BmY.DISPATCH,pid:(0,I.QF)(),token:(0,I.Ht)(),payloads:[t]})}return n}));var e;(0,a.Ty)(Q,(0,I.Ht)());(0,a.$j)();(0,a.lW)({type:O.BmY.CONNECT,pid:(0,I.QF)(),token:(0,I.Ht)()})},OVERLAY_INITIALIZE:function(e){var t=e.focusedPID;U=t},OVERLAY_READY:function(){var e=Y.selectedGuildId,t=Y.selectedChannelId;if(null!=e&&(!f.ZP.hasChannels(e)||null!=t&&!f.ZP.hasSelectableChannel(e,t))){e=null;t=null}if(null!=t&&null==d.Z.getChannel(t)){e=null;t=null}null==e&&null==t&&(e=_.Z.getGuildId());if(null!=e&&null==t){
var n=f.ZP.getDefaultChannel(e);null!=n&&(t=n.id)}if(null==t){var r=p.Z.getPrivateChannelIds();if(r.length>0)t=r[0];else{var i=h.Z.getFlattenedGuilds();if(i.length>0){e=i[0].id;var o=f.ZP.getDefaultChannel(e);null!=o&&(t=o.id)}}}Y.selectedGuildId=e;Y.selectedChannelId=t},OVERLAY_FOCUSED:function(e){var t=e.pid;U=t;z()},OVERLAY_SELECT_CHANNEL:function(e){var t=e.guildId,n=e.channelId;Y.selectedGuildId=t;Y.selectedChannelId=n},OVERLAY_SELECT_CALL:function(e){var t=e.callId;G=t},CALL_DELETE:function(){G=null},LAYOUT_CREATE:function(){if(null==Y.selectedChannelId||null==d.Z.getChannel(Y.selectedChannelId)){var e=p.Z.getPrivateChannelIds();if(e.length>0)Y.selectedChannelId=e[0];else{var t=h.Z.getFlattenedGuilds();if(t.length>0){Y.selectedGuildId=t[0].id;var n=f.ZP.getDefaultChannel(Y.selectedGuildId);null!=n&&(Y.selectedChannelId=n.id)}}}},OVERLAY_SET_DISPLAY_NAME_MODE:function(e){var t=e.mode;Y.displayNameMode=t},OVERLAY_SET_DISPLAY_USER_MODE:function(e){var t=e.mode;Y.displayUserMode=t},
OVERLAY_SET_AVATAR_SIZE_MODE:function(e){var t=e.mode;Y.avatarSizeMode=t},OVERLAY_SET_NOTIFICATION_POSITION_MODE:function(e){var t=e.mode;Y.notificationPositionMode=t},OVERLAY_SET_TEXT_CHAT_NOTIFICATION_MODE:function(e){var t=e.mode;Y.textChatNotifications=t},OVERLAY_SET_TEXT_WIDGET_OPACITY:function(e){var t=e.opacity,n=Y.textWidgetOpacity!==t;Y.textWidgetOpacity=t;return n},OVERLAY_DISABLE_EXTERNAL_LINK_ALERT:function(){Y.disableExternalLinkAlert=!0},OVERLAY_INCOMPATIBLE_APP:function(){H=!0},OVERLAY_SET_UI_LOCKED:function(e){var t=e.locked,n=e.pid;t?k.delete(n):k.add(n);q();z();x=!1},OVERLAY_ACTIVATE_REGION:function(e){var t=e.region;if(U!==(0,I.QF)())return!1;if(B.has(t))return!1;B.add(t)},OVERLAY_DEACTIVATE_ALL_REGIONS:q,OVERLAY_SET_PREVIEW_IN_GAME_MODE:function(e){x=e.isPreviewingInGame},WINDOW_RESIZED:function(){if(__OVERLAY__){var e=y.Z.windowSize();(0,I.Te)(e)||(x=!1)}}})},426217:(e,t,n)=>{n.d(t,{Z:()=>y});var r=n(441143),i=n.n(r),o=n(791462),u=n(173436),a=n(266644)
;function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function s(e){s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return s(e)}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){c(e,t,n[t])}))}return e}function f(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})))
;n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function E(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _(e,t){_=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return _(e,t)}var h=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var i=s(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return E(this,n)}}var g=new Map;function v(e){var t=g.get(e);if(null==t){
console.warn("Window state not initialized",e);return{isElementFullscreen:!1,focused:!1,windowSize:{width:0,height:0}}}return t}var I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&_(e,t)}(n,e);var t=p(n);function n(){l(this,n);return t.apply(this,arguments)}var r=n.prototype;r.isFocused=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.UU)();return v(e).focused};r.isElementFullScreen=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.UU)();return v(e).isElementFullscreen};r.windowSize=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.UU)();return v(e).windowSize};r.__getLocalVars=function(){return{windowStates:g}};return n}(o.ZP.Store);I.displayName="WindowStore";const y=new I(u.Z,{WINDOW_INIT:function(e){
i()(!g.has(e.windowId),"Window initialized multiple times");var t=e.width,n=e.height,r=e.isElementFullscreen,o=e.focused;g.set(e.windowId,{windowSize:{width:t,height:n},isElementFullscreen:r,focused:o});return!0},WINDOW_FULLSCREEN_CHANGE:function(e){var t=v(e.windowId);if(t.isElementFullscreen===e.isElementFullscreen)return!1;g.set(e.windowId,f(d({},t),{isElementFullscreen:e.isElementFullscreen}));return!0},WINDOW_FOCUS:function(e){var t=v(e.windowId);if(t.focused===e.focused)return!1;g.set(e.windowId,f(d({},t),{focused:e.focused}));return!0},WINDOW_RESIZED:function(e){var t=v(e.windowId);if(t.windowSize.width===e.width&&t.windowSize.height===e.height)return!1;g.set(e.windowId,f(d({},t),{windowSize:{width:e.width,height:e.height}}));return!0},WINDOW_UNLOAD:function(e){g.delete(e.windowId);return!0}})},268333:(e,t,n)=>{n.d(t,{a5:()=>P,c4:()=>D,g7:()=>R,wR:()=>U,wl:()=>w,rY:()=>N,rX:()=>b,jZ:()=>S,rt:()=>C,oQ:()=>A,LY:()=>M,Nj:()=>o,af:()=>L});var r=n(368365),i=n(780921);function o(e){
return e.replace(/[\s-~]+/g,"-").replace(/^-+/,"").replace(/[\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").toLowerCase()}var u=n(673221),a=n(53551),l=n(710348),c=n(356004),s=n(1812),d=n(940712),f=n(379822),E=n(645897),_=n(108580),h=n(461061),p=n(298716),g=n(959797),v=h.d4z.GUILD_VOICE,I=h.d4z.GUILD_CATEGORY,y=h.d4z.GUILD_STAGE_VOICE;function O(e,t){return e===t||e===I}function T(e,t,n){var i=_.ZP.NONE;((0,a.r8)(t)||t===I)&&(i=r.Z.add(i,h.Plq.VIEW_CHANNEL));if(O(t,v)){i=r.Z.add(i,h.Plq.VIEW_CHANNEL);i=r.Z.add(i,h.Plq.CONNECT)}return{id:e,type:n,allow:_.ZP.NONE,deny:i}}function m(e,t,n){var i=_.ZP.NONE;((0,a.r8)(t)||t===I)&&(i=r.Z.add(i,h.Plq.VIEW_CHANNEL));if(O(t,v)||O(t,y)){i=r.Z.add(i,h.Plq.VIEW_CHANNEL);i=r.Z.add(i,h.Plq.CONNECT)}return{id:e,type:n,deny:_.ZP.NONE,allow:i}}function A(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=[];(n.length>0||r)&&o.push(T(e,t,i.BN.ROLE));n.forEach((function(e){o.push(m(e,t,i.BN.ROLE))}));return o}function S(e,t){
return m(e,t,i.BN.MEMBER)}function b(e,t){return m(e,t,i.BN.ROLE)}function C(e){return[{id:e,type:i.BN.ROLE,deny:h.Plq.SEND_MESSAGES,allow:_.ZP.NONE}]}function N(e,t,n){var r,i,o=e.getGuildId(),u=n.getGuild(o),a=null!==(r=null==u?void 0:u.maxVideoChannelUsers)&&void 0!==r?r:-1,l=null!==(i=null==u?void 0:u.maxStageVideoChannelUsers)&&void 0!==i?i:-1,c=E.ZP.countVoiceStatesForChannel(e.id),s=d.Z.can(h.Plq.MOVE_MEMBERS,e)&&d.Z.can(h.Plq.CONNECT,e),f=!1;f=e.type===y?null!=o&&t.hasVideo(e.id)&&l>0&&c>=l:null!=o&&t.hasVideo(e.id)&&a>0&&c>=a+(s?1:0);var _=e.userLimit>0&&c>=e.userLimit;return f||_&&!s}function R(e,t){return t.isGuildStageVoice()?h.epw:null==e?h.eWB:Math.max(e.hasFeature(h.oNc.VIP_REGIONS)?p.HO[h.Eu4.TIER_3].limits.bitrate:h.eWB,p.HO[e.premiumTier].limits.bitrate)}function L(e,t,n,r){return null!=e&&0!==t.length&&(!!l.Z.isCollapsed(e)&&t.some((function(e){var t=r[e.id];return e.id!==n&&t&&t.length>0})))}function D(e,t,n){var r=[];e.forEach((function(e){if(e.id!==t){
var i=n[e.id];null!=i&&(e.isGuildStageVoice()?i.forEach((function(e){(0,u.gf)(e.voiceState)===u.xO.ON_STAGE&&r.push(e.user)})):i.forEach((function(e){return r.push(e.user)})))}}));return r}function P(e){switch(e.type){case h.d4z.DM:return g.Z.Messages.DM;case h.d4z.GROUP_DM:return g.Z.Messages.GROUP_DM;case h.d4z.GUILD_TEXT:return g.Z.Messages.TEXT_CHANNEL;case h.d4z.GUILD_FORUM:return g.Z.Messages.FORUM_CHANNEL;case h.d4z.GUILD_VOICE:return g.Z.Messages.VOICE_CHANNEL;case h.d4z.GUILD_STAGE_VOICE:return g.Z.Messages.STAGE_CHANNEL;case h.d4z.GUILD_ANNOUNCEMENT:return g.Z.Messages.NEWS_CHANNEL;case h.d4z.GUILD_STORE:return g.Z.Messages.STORE_CHANNEL;case h.d4z.GUILD_CATEGORY:return g.Z.Messages.CATEGORY;default:return null}}function w(e){
return null==e?"text":e.type===h.d4z.GUILD_VOICE?d.Z.can(h.Plq.CONNECT,e)?"voice":"voice-locked":e.type===h.d4z.GUILD_STAGE_VOICE?d.Z.can(h.Plq.CONNECT,e)?"stage":"stage-locked":a.Ec.has(e.type)?"thread":e.type===h.d4z.GUILD_FORUM?"post":a.sR.has(e.type)?"text":void 0}function M(e){var t,n=c.Z.getChannel(f.Z.getLastSelectedChannelId());if(null!=n&&n.getGuildId()===e&&n.type===h.d4z.GUILD_TEXT)t=n.id;else{var r=s.ZP.getDefaultChannel(e);t=null!=r?r.id:null}return h.Z5c.CHANNEL(e,t)}function U(e,t,n){return"".concat(location.protocol,"//").concat(location.host).concat(h.Z5c.CHANNEL(e,t,n))}},434987:(e,t,n)=>{n.d(t,{KR:()=>i,w_:()=>o,jL:()=>u,Ox:()=>a,PY:()=>l,R:()=>c,ou:()=>s,vS:()=>d,o4:()=>f,uq:()=>E});function r(e){return Math.max(Math.min(e,1),0)}function i(e,t){var n=e.top,i=e.bottom,o=e.left,u=e.right;return{top:null!=n?Math.floor(r(n)*t.height):null,left:null!=o?Math.floor(r(o)*t.width):null,bottom:null!=i?Math.floor(r(i)*t.height):null,right:null!=u?Math.floor(r(u)*t.width):null}
}function o(e,t){var n=e.width,i=e.height;return{width:"auto"===n?n:Math.floor(r(n)*t.width),height:"auto"===i?i:Math.floor(r(i)*t.height)}}function u(e,t){var n=e.top,i=e.bottom,o=e.left,u=e.right;return{top:null!=n?r(n/t.height):null,left:null!=o?r(o/t.width):null,bottom:null!=i?r(i/t.height):null,right:null!=u?r(u/t.width):null}}function a(e,t){var n=e.width,r=e.height;return{width:"auto"===n?n:n/t.width,height:"auto"===r?r:r/t.height}}function l(e,t,n,r,i){var o=e.top,u=e.bottom,a=e.left,l=e.right;if(null==o&&null==u){o=0;u=n-i}else null==o&&null!=u?o=n-(u+i):null!=o&&(u=n-(o+i));if(null==a&&null==l){a=0;l=t-r}else null==a&&null!=l?a=t-(l+r):null==l&&null!=a&&(l=t-(a+r));if(null==o||null==u||null==a||null==l)throw new Error("Logically this can never happen based on our if/else statements");return{top:o,left:a,bottom:u,right:l}}function c(e){var t=e.top,n=e.left,r=e.bottom,i=e.right;0===t||t<=r?r=null:t=null;0===n||n<=i?i=null:n=null;return{top:t,left:n,bottom:r,right:i}}
function s(e){var t=e.top,n=e.left,r=e.bottom,i=e.right;if(r<0){t+=r;r=0}if(t<0){r+=t;t=0}if(i<0){n+=i;i=0}if(n<0){i+=n;n=0}return{top:t,left:n,bottom:r,right:i}}function d(e,t,n){e=i(e,n);var r=o(t,n),u=r.width,a=r.height;u="string"==typeof u?0:u;a="string"==typeof a?0:a;return l(e,n.width,n.height,u,a)}function f(e,t,n){var r=e.top,i=e.left,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{x:0,y:0},d=o.x,f=o.y,E=t.width,_=t.height,h=c(s(l({top:r+f,left:i+d,bottom:null,right:null},n.width,n.height,"number"==typeof E?E:0,"number"==typeof _?_:0)));return[u(h,n),a(t,n)]}function E(e,t,n){var r=e.top,i=e.right,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{x:0,y:0},d=o.x,f=o.y,E=t.width,_=t.height,h=c(s(l({top:r+f,left:null,bottom:null,right:i-d},n.width,n.height,"number"==typeof E?E:0,"number"==typeof _?_:0)));return[u(h,n),a(t,n)]}},570992:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(791462),i=n(356004),o=n(212218),u=n(105405),a=n(959797);function l(e,t,n){
if(null==n)return null;if(null!=e)return o.ZP.getNick(e,n.id);if(null!=t){var r=i.Z.getChannel(t);if(null==r?void 0:r.isPrivate())return u.Z.getNickname(n.id)}return null}function c(e,t,n){return null==n?a.Z.Messages.UNKNOWN_USER:null!==(r=l(e,t,n))&&void 0!==r?r:n.username;var r}const s={getNickname:l,getName:c,useName:function(e,t,n){return(0,r.e7)([o.ZP,i.Z,u.Z],(function(){return c(e,t,n)}))}}},203271:(e,t,n)=>{n.d(t,{$R:()=>d,Wq:()=>f,sK:()=>_,jz:()=>h,GA:()=>p,rU:()=>g,I:()=>v,wK:()=>I});var r,i=n(23816),o=n(356004),u=n(390504),a=n(461061);function l(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){l(e,t,n[t])}))}return e}
function s(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}var d=Object.freeze((l(r={},a.bL.ALL_MESSAGES,"All"),l(r,a.bL.ONLY_MENTIONS,"Mentions"),l(r,a.bL.NO_MESSAGES,"Nothing"),l(r,a.bL.NULL,null),r));function f(e,t,n,r){var o=function(e){var t,n,r,i,o,u,a,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=null!=l.mute_config&&null!=l.mute_config.end_time?new Date(l.mute_config.end_time).getTime():e.guild_muted_until,s=null!=l.message_notifications?d[l.message_notifications]:e.guild_message_notification_settings;return{guild_muted_until:c,
guild_flags:null!==(t=l.flags)&&void 0!==t?t:e.guild_flags,guild_is_muted:null!==(n=l.muted)&&void 0!==n?n:e.guild_is_muted,guild_message_notification_settings:s,guild_suppress_roles:null!==(r=l.suppress_roles)&&void 0!==r?r:e.guild_suppress_roles,guild_receive_mobile_push:null!==(i=l.mobile_push)&&void 0!==i?i:e.guild_receive_mobile_push,guild_notify_highlights:null!==(o=l.notify_highlights)&&void 0!==o?o:e.guild_notify_highlights,guild_suppress_everyone:null!==(u=l.suppress_everyone)&&void 0!==u?u:e.guild_suppress_everyone,guild_scheduled_events_muted:null!==(a=l.mute_scheduled_events)&&void 0!==a?a:e.guild_scheduled_events_muted}},u=o(n),l=o(p(e),t),f=E(u,l,"RETURN_PREVIOUS_WHEN_CHANGED");i.ZP.trackWithMetadata(a.rMx.NOTIFICATION_SETTINGS_UPDATED,s(c({},l),{location:r,guild_id:e,update_type:a.IbT.GUILD,guild_flags_old:f("guild_flags"),guild_is_muted_old:f("guild_is_muted"),guild_suppress_roles_old:f("guild_suppress_roles"),guild_notify_highlights_old:f("guild_notify_highlights"),
guild_suppress_everyone_old:f("guild_suppress_everyone"),guild_receive_mobile_push_old:f("guild_receive_mobile_push"),guild_scheduled_events_muted_old:f("guild_scheduled_events_muted"),guild_message_notification_settings_old:f("guild_message_notification_settings")}))}function E(e,t,n){return function(r){if("RETURN_PREVIOUS_WHEN_CHANGED"===n)return e[r]!==t[r]?e[r]:void 0}}function _(e){return null!=e&&null!=e.end_time?new Date(e.end_time).getTime():null}function h(e,t,n,r,u){var l=function(t){var n,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=null!==(n=i.muted)&&void 0!==n?n:t.channel_is_muted,u=null!=i.message_notifications?d[i.message_notifications]:t.channel_message_notification_settings,a=null==e?null:!0===o||null!=u;return{channel_is_muted:o,channel_is_overridden:a,channel_flags:null!==(r=i.flags)&&void 0!==r?r:t.channel_flags,channel_message_notification_settings:u,channel_muted_until:_(i.mute_config)}
},f=l(r),h=l(v(e,t),n),p=E(f,h,"RETURN_PREVIOUS_WHEN_CHANGED"),g=o.Z.getChannel(t);i.ZP.trackWithMetadata(a.rMx.NOTIFICATION_SETTINGS_UPDATED,s(c({},h),{location:u,guild_id:e,channel_id:t,update_type:a.IbT.CHANNEL,parent_id:null!=g?g.parent_id:null,channel_flags_old:p("channel_flags"),channel_is_muted_old:p("channel_is_muted"),channel_muted_until_old:p("channel_muted_until"),channel_is_overridden_old:p("channel_is_overridden"),channel_message_notification_settings_old:p("channel_message_notification_settings")}))}function p(e){var t=u.Z.isMuted(e),n=u.Z.getMuteConfig(e);return{guild_suppress_everyone:u.Z.isSuppressEveryoneEnabled(e),guild_suppress_roles:u.Z.isSuppressRolesEnabled(e),guild_scheduled_events_muted:u.Z.isMuteScheduledEventsEnabled(e),guild_is_muted:t,guild_muted_until:null!=n&&null!=n.end_time?new Date(n.end_time).getTime():null,guild_receive_mobile_push:u.Z.isMobilePushEnabled(e),guild_message_notification_settings:d[u.Z.getMessageNotifications(e)],
guild_notify_highlights:u.Z.getNotifyHighlights(e),guild_flags:u.Z.getGuildFlags(e)}}function g(e){var t=new Map;e.forEach((function(e){return t.set(e,p(e))}));return t}function v(e,t){var n=u.Z.isChannelMuted(e,t),r=u.Z.getChannelMuteConfig(e,t);return{channel_is_muted:n,channel_muted_until:null!=r&&null!=r.end_time?new Date(r.end_time).getTime():null,channel_message_notification_settings:d[u.Z.getChannelMessageNotifications(e,t)],channel_flags:u.Z.getGuildChannelFlags(e,t)}}function I(e,t){var n=new Map;t.forEach((function(t){return n.set(t,v(e,t))}));return n}},787619:(e,t,n)=>{n.d(t,{fn:()=>i,Dj:()=>u,Pr:()=>a,rB:()=>l,NO:()=>c,uF:()=>s});var r=n(832691);function i(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.find((function(e){return null!=e&&o(e)}))}function o(e){return null!=e.requestFullscreen||null!=e.webkitRequestFullscreen||e.webkitSupportsFullscreen||null!=e.mozRequestFullScreen||null!=e.msRequestFullscreen}function u(e){
"function"==typeof e.requestFullscreen?e.requestFullscreen():"function"==typeof e.webkitRequestFullscreen?e.webkitRequestFullscreen():"function"==typeof e.webkitEnterFullscreen?e.webkitEnterFullscreen():"function"==typeof e.mozRequestFullScreen?e.mozRequestFullScreen():"function"==typeof e.msRequestFullscreen?e.msRequestFullscreen():new r.Z("FullScreenUtils").warn("Fullscreen API is not supported.")}function a(e,t){var n=null!=t?t:document;l(null,n)&&("function"==typeof n.exitFullscreen?n.exitFullscreen():"function"==typeof n.webkitExitFullscreen?n.webkitExitFullscreen():"function"==typeof e.webkitExitFullscreen?e.webkitExitFullscreen():"function"==typeof n.mozCancelFullScreen?n.mozCancelFullScreen():"function"==typeof n.msExitFullscreen?n.msExitFullscreen():new r.Z("FullScreenUtils").warn("Fullscreen API is not supported."))}function l(e,t){var n=null!=t?t:document
;return Boolean(null!=n.fullscreenElement||null!=n.mozFullScreenElement||null!=n.webkitFullscreenElement||null!=n.msFullscreenElement||null!=e&&e.webkitDisplayingFullscreen)}var c=function(){if("undefined"!=typeof document){var e=document.createElement("video");if("function"==typeof e.requestFullscreen)return"fullscreenchange";if("function"==typeof e.webkitRequestFullscreen)return"webkitfullscreenchange";if("function"==typeof e.webkitEnterFullscreen)return"webkitendfullscreen";if("function"==typeof e.mozRequestFullScreen)return"mozfullscreenchange";if("function"==typeof e.msRequestFullscreen)return"msfullscreenchange"}else console.warn("FullScreenUtils has been imported in a non-web environment");return"fullscreenchange"}();function s(e,t){e.addEventListener(c,t);e.addEventListener("webkitfullscreenchange",t);return function(){e.removeEventListener(c,t);e.removeEventListener("webkitfullscreenchange",t)}}},285183:(e,t,n)=>{n.d(t,{Tq:()=>o,Gr:()=>u,FW:()=>a,qU:()=>l,Js:()=>c,QF:()=>s,
Ht:()=>d,Te:()=>f});n(587156);var r,i=n(742269),o=(n(461061),2),u={width:3840,height:2160},a={width:768,height:432},l="overlay_default",c=-2;function s(){if(void 0!==r)return r;var e,t=null!==(e=new URLSearchParams(window.location.search).get("pid"))&&void 0!==e?e:"",n=parseInt(t,10);isNaN(n)&&(n=-1);return r=n}function d(){return new URLSearchParams(window.location.search).get("rpc_auth_token")}function f(e){return!i.FB||e.width>=a.width&&e.height>=a.height}}}]);
//# sourceMappingURL=8cc5da91b5db3b22ae95.js.map