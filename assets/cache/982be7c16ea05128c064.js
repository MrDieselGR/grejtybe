"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[76987],{403348:(e,n,r)=>{r.d(n,{e:()=>l});var t=r(675860),o=r(913416),i=r(33055),a=r(461061);function l(e,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!i.Z.isFullServerPreview(e))return t.Z.patch({url:a.ANM.SET_GUILD_MEMBER(e),body:n,oldFormErrors:!!r||void 0});(0,o.KY)(e,{memberOptions:n})}},656284:(e,n,r)=>{r.d(n,{Z:()=>M});var t=r(496486),o=r.n(t),i=r(675860),a=r(173436),l=r(23816),u=r(403348),c=r(204424),s=r(7046),f=r(33055),d=r(290495),p=r(356004),g=r(212218),b=r(859023),v=r(932847),y=r(418674),h=r(90816),m=r(836670),O=r(17611),_=r(328050),I=r(461061);function E(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function S(e,n,r,t,o,i,a){try{var l=e[i](a),u=l.value}catch(e){r(e);return}l.done?n(u):Promise.resolve(u).then(t,o)}function Z(e,n,r){n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0
}):e[n]=r;return e}function w(e,n){n=null!=n?n:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})));r.push.apply(r,t)}return r}(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}));return e}function A(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var t,o,i=[],a=!0,l=!1;try{for(r=r.call(e);!(a=(t=r.next()).done);a=!0){i.push(t.value);if(n&&i.length===n)break}}catch(e){l=!0;o=e}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}}(e,n)||N(e,n)||function(){
throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e){return function(e){if(Array.isArray(e))return E(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||N(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,n){if(e){if("string"==typeof e)return E(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);return"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?E(e,n):void 0}}var P=function(e,n){var r,t,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},
"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,t&&(o=2&i[0]?t.return:i[0]?t.throw||((o=t.return)&&o.call(t),0):t.next)&&!(o=o.call(t,i[1])).done)return o;(t=0,o)&&(i=[2&i[0],o.value]);switch(i[0]){case 0:case 1:o=i;break;case 4:a.label++;return{value:i[1],done:!1};case 5:a.label++;t=i[1];i=[0];continue;case 7:i=a.ops.pop();a.trys.pop();continue;default:if(!(o=a.trys,o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1];o=i;break}if(o&&a.label<o[2]){a.label=o[2];a.ops.push(i);break}o[2]&&a.ops.pop();a.trys.pop();continue}i=n.call(e,a)}catch(e){i=[6,e];t=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}};function C(e){if(!f.Z.isFullServerPreview(e)){
var n=m.Z.getOnboardingPrompts(e),r=m.Z.getOnboardingResponses(e),t=n.map((function(e){return e.options.filter((function(e){return r.includes(e.id)}))})).flat(),o={},a={};n.forEach((function(e){o[e.id]=Date.now();e.options.forEach((function(e){return a[e.id]=Date.now()}))}));return i.Z.put({url:I.ANM.GUILD_ONBOARDING_RESPONSES(e),body:{onboarding_responses:t.map((function(e){return e.id})),onboarding_prompts_seen:o,onboarding_responses_seen:a}})}}const M={selectOption:function(e,n,r,t){var i=m.Z.getOnboardingPrompt(n);if(null!=i){var l=i.singleSelect?o().without(o().map(i.options,"id"),r):[];a.Z.dispatch({type:"GUILD_ONBOARDING_SELECT_OPTION",guildId:e,promptId:n,optionId:r,selected:t,removedOptionIds:l})}},updateRolesBatch:o().debounce((function(e,n,r){var t,i=b.default.getCurrentUser();if(null!=i){var a,l=null!==(a=null===(t=g.ZP.getSelfMember(e))||void 0===t?void 0:t.roles)&&void 0!==a?a:[];(n.length>0||r.length>0)&&s.Z.updateMemberRoles(e,i.id,o().difference(o().union(l,n),r),n,r)}
}),1e3),updateOnboardingResponses:o().debounce(C,1e3),updateRolesLocal:function(e,n,r){var t,i,l=null!==(i=null===(t=g.ZP.getSelfMember(e))||void 0===t?void 0:t.roles)&&void 0!==i?i:[];(n.length>0||r.length>0)&&a.Z.dispatch({type:"GUILD_MEMBER_UPDATE_LOCAL",guildId:e,roles:o().difference(o().union(l,n),r)})},completeOnboarding:function(e,n){var r=n.length>0?n[n.length-1]:null,t=m.Z.getSelectedOptions(e),i=(0,O.L6)(t),a=(0,O.dX)(t),f=m.Z.getEnableDefaultChannels(e)?m.Z.getDefaultChannelIds(e):[],E=A((0,O.Ee)(e,n,f),2),S=E[0],N=E[1],P=D(a).concat(D(f)),M=P.map((function(e){return p.Z.getChannel(e)})).filter(h.lm),G=(0,_.v)(e,new Set(P),M,!0).length,j=null==r?[]:r.options.map((function(e){return e.id}));v.default.track(I.rMx.GUILD_ONBOARDING_STEP_COMPLETED,w(function(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){
return Object.getOwnPropertyDescriptor(r,e).enumerable}))));t.forEach((function(n){Z(e,n,r[n])}))}return e}({},(0,l.hH)(e)),{step:n.length-1,options_selected:null==r?0:t.filter((function(e){return j.includes(e.id)})).length,skipped:j.length>0,back:!1,in_onboarding:!0,is_final_step:!0,roles_granted:i.size,channels_granted:G,guild_onboarding_covered_channel_ids:S.map((function(e){return e.id})),guild_onboarding_uncovered_channel_ids:N.map((function(e){return e.id}))}));C(e);f.forEach((function(e){return a.add(e)}));a.size>0&&(0,d.Mo)(e,Array.from(a),!0,{page:I.ZY5.GUILD_ONBOARDING});i.size>0&&function(e,n){var r=b.default.getCurrentUser();if(null!=r){var t=g.ZP.getSelfMember(e);if(null==t)return[];var i=o().union(t.roles,n),a=o().difference(n,t.roles);s.Z.updateMemberRoles(e,r.id,i,a,[])}}(e,Array.from(i));var L=b.default.getCurrentUser();if(null!=L){var B,T,U=null!==(T=null===(B=g.ZP.getMember(e,L.id))||void 0===B?void 0:B.flags)&&void 0!==T?T:0;(0,u.e)(e,{flags:(0,
y.mB)(U,c.qQ.COMPLETED_ONBOARDING,!0)})}},onboardExistingMember:function(e,n){var r=new Set(n);(m.Z.getEnableDefaultChannels(e)?m.Z.getDefaultChannelIds(e):[]).forEach((function(e){return r.add(e)}));r.size>0&&(0,d.Mo)(e,Array.from(r),!0,{page:I.ZY5.GUILD_ONBOARDING});var t=b.default.getCurrentUser();if(null!=t){var o,i,a=null!==(i=null===(o=g.ZP.getMember(e,t.id))||void 0===o?void 0:o.flags)&&void 0!==i?i:0;(0,u.e)(e,{flags:(0,y.mB)(a,c.qQ.COMPLETED_ONBOARDING,!0)})}},finishOnboarding:function(e){a.Z.dispatch({type:"GUILD_ONBOARDING_COMPLETE",guildId:e})},setUserOnboardingStep:function(e){a.Z.dispatch({type:"GUILD_ONBOARDING_SET_STEP",step:e})},resetOnboarding:function(e){return(n=function(){var n,r,t,o;return P(this,(function(i){switch(i.label){case 0:if(null==(n=b.default.getCurrentUser()))return[3,2];o=null!==(t=null===(r=g.ZP.getMember(e,n.id))||void 0===r?void 0:r.flags)&&void 0!==t?t:0;return[4,(0,u.e)(e,{flags:(0,y.mB)(o,c.qQ.COMPLETED_ONBOARDING,!1)})];case 1:i.sent()
;i.label=2;case 2:return[2]}}))},function(){var e=this,r=arguments;return new Promise((function(t,o){var i=n.apply(e,r);function a(e){S(i,t,o,a,l,"next",e)}function l(e){S(i,t,o,a,l,"throw",e)}a(void 0)}))})();var n}}},328050:(e,n,r)=>{r.d(n,{v:()=>s,b:()=>f});var t=r(496486),o=r.n(t),i=r(791462),a=r(356004),l=r(90816);function u(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function c(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"==typeof e)return u(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,n)}(e)||function(){
throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,n,r){var t=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=o()(a.Z.getMutableGuildChannelsForGuild(e)).values().groupBy("parent_id").value(),u=o()(r).map((function(e){return e.isCategory()?e.id:e.parent_id})).filter(l.lm).uniq().map((function(e){return a.Z.getChannel(e)})).filter(l.lm).sortBy("position").value(),s=new Set(u.map((function(e){return e.id}))),f=r.filter((function(e){return!(e.isCategory()||null!=e.parent_id&&s.has(e.parent_id))}));f=o().sortBy(f,(function(e){return e.isGuildVocal()?e.position+1e4:e.position}));var d=!0,p=!1,g=void 0;try{for(var b,v=function(){var e,a=b.value;t||f.push(a);var l=n.has(a.id)?i[a.id]:r.filter((function(e){return e.parent_id===a.id}));l=o().sortBy(null!=l?l:[],(function(e){return e.isGuildVocal()?e.position+1e4:e.position}));(e=f).push.apply(e,c(l))
},y=u[Symbol.iterator]();!(d=(b=y.next()).done);d=!0)v()}catch(e){p=!0;g=e}finally{try{d||null==y.return||y.return()}finally{if(p)throw g}}return f}function f(e,n){return(0,i.Wu)([a.Z],(function(){var r=Array.from(n).map((function(e){return a.Z.getChannel(e)})).filter(l.lm);return s(e,n,r)}))}},976987:(e,n,r)=>{r.r(n);r.d(n,{default:()=>f});var t=r(785893),o=(r(667294),r(281081)),i=r(17611),a=r(7046),l=r(769672),u=r(463254),c=r(461061),s=r(959797);function f(e){var n=e.guild,r=e.onSelect,f=(0,u.Z)(n.id),d=(0,i.wC)(n.id);return(0,t.jsx)(l.ZP,{onSelect:r,navId:"guild-browse-channels-context-menu","aria-label":s.Z.Messages.GENERIC_ACTIONS_MENU_LABEL,onClose:o.Zy,children:(0,t.jsxs)(l.kS,{children:[d&&(0,t.jsx)(l.sN,{id:"go-to-settings",label:s.Z.Messages.EDIT_ONBOARDING,action:function(){a.Z.open(n.id,c.pNK.ONBOARDING)}}),f]})})}},218892:(e,n,r)=>{r.d(n,{hi:()=>b,kH:()=>v,rz:()=>y,DQ:()=>h})
;var t=r(820028),o=r(204424),i=r(656284),a=r(537127),l=r(1812),u=r(212218),c=r(390504),s=r(418674),f=r(290495),d=r(513073);function p(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function g(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"==typeof e)return p(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e){var n,r,t=(0,
d.r1)(e),i=null!==(r=null===(n=u.ZP.getSelfMember(e))||void 0===n?void 0:n.flags)&&void 0!==r?r:0,a=(0,s.yE)(i,o.qQ.COMPLETED_ONBOARDING),l=c.Z.getOptedInChannels(e).size>0;return!t&&!a&&!l}function v(e){if(b(e))y(e);else{var n=(0,d.r1)(e);(0,f.QG)(e,!n)}}function y(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.include,t=void 0===r?new Set:r,o=n.exclude,a=void 0===o?new Set:o,u=l.ZP.getChannels(e),c=g(u[l.sH]).concat(g(u[l.Zb])).filter((function(e){var n=e.channel;return!n.isThread()&&!a.has(n.id)})).map((function(e){return e.channel.id}));t.forEach((function(e){return c.push(e)}));i.Z.onboardExistingMember(e,new Set(c))}function h(e){var n,r,o,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.Z;return null!=e&&(0,s.yE)(null!==(o=null===(r=null===(n=i.settings.guilds)||void 0===n?void 0:n.guilds[e])||void 0===r?void 0:r.guildOnboardingProgress)&&void 0!==o?o:0,t.nI.GUILD_NOTICE_CLEARED)}},463254:(e,n,r)=>{r.d(n,{Z:()=>y});var t=r(785893),o=(r(667294),
r(791462)),i=r(769672),a=r(537127),l=r(653772),u=r(859023),c=r(226300),s=r(290495),f=r(218892),d=r(513073),p=r(461061),g=r(959797),b=r(406009),v=r.n(b);function y(e){var n=(0,d.Ks)(e),r=(0,o.e7)([a.Z],(function(){return!(0,f.DQ)(e,a.Z)})),b=(0,d.DM)(e),y=(0,o.e7)([l.Z],(function(){return l.Z.getGuild(e)})),h=(0,o.e7)([u.default],(function(){return u.default.getCurrentUser()}));return null!=h&&null!=y&&n&&(y.hasFeature(p.oNc.COMMUNITY)||h.isStaff())?(0,t.jsx)(i.S8,{id:"opt-in",label:r?(0,t.jsxs)("div",{className:v().channelOptInItem,children:[(0,t.jsx)("span",{children:g.Z.Messages.GUILD_CHANNEL_OPT_IN}),(0,t.jsx)(c.IG,{text:g.Z.Messages.NEW,className:v().newBadge})]}):g.Z.Messages.GUILD_CHANNEL_OPT_IN,checked:!b,action:function(){(0,f.kH)(e);r&&(0,s.Kt)(e)}}):null}}}]);
//# sourceMappingURL=982be7c16ea05128c064.js.map