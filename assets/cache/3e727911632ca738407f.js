"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[8941],{608941:(e,t,n)=>{n.r(t);n.d(t,{default:()=>v});var r=n(785893),s=n(667294),o=n(791462),a=n(489992),c=n(737325),i=n(915004),u=n(191940),l=n(67416),f=n(932847),A=n(56435),p=n(204371),T=n(461061),h=n(959797),C=n(631022),E=n.n(C);function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N(e,t,n,r,s,o,a){try{var c=e[o](a),i=c.value}catch(e){n(e);return}c.done?t(i):Promise.resolve(i).then(r,s)}function S(e){return function(){var t=this,n=arguments;return new Promise((function(r,s){var o=e.apply(t,n);function a(e){N(o,r,s,a,c,"next",e)}function c(e){N(o,r,s,a,c,"throw",e)}a(void 0)}))}}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e){y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return y(e)}function I(e,t){
return!t||"object"!==m(t)&&"function"!=typeof t?d(e):t}function M(e,t){M=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return M(e,t)}var m=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var s=y(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return I(this,n)}}var O,b=function(e,t){var n,r,s,o,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){
if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(s=2&o[0]?r.return:o[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,o[1])).done)return s;(r=0,s)&&(o=[2&o[0],s.value]);switch(o[0]){case 0:case 1:s=o;break;case 4:a.label++;return{value:o[1],done:!1};case 5:a.label++;r=o[1];o=[0];continue;case 7:o=a.ops.pop();a.trys.pop();continue;default:if(!(s=a.trys,s=s.length>0&&s[s.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1];s=o;break}if(s&&a.label<s[2]){a.label=s[2];a.ops.push(o);break}s[2]&&a.ops.pop();a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e];r=0}finally{n=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}};!function(e){e[e.START=0]="START";e[e.FAIL=1]="FAIL";e[e.SUCCESS=2]="SUCCESS";e[e.CANCELED=3]="CANCELED"}(O||(O={}));var g=function(e){!function(e,t){
if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&M(e,t)}(n,e);var t=L(n);function n(){_(this,n);var e;(e=t.apply(this,arguments)).state={step:O.START};var r=d(e);e.close=S((function(){var e,t,n,s;return b(this,(function(o){switch(o.label){case 0:e=r.state.step;t=r.props,n=t.onClose,s=t.pendingPayment;return e!==O.START?[3,2]:[4,(0,c.UY)(s.id)];case 1:o.sent();o.label=2;case 2:n();return[2]}}))}));var s=d(e);e.cancelPayment=S((function(){var e,t;return b(this,(function(n){switch(n.label){case 0:e=s.props.pendingPayment;n.label=1;case 1:n.trys.push([1,3,,4]);return[4,(0,c.UY)(e.id)];case 2:n.sent();return[3,4];case 3:t=n.sent();s.setState({step:O.CANCELED});throw t;case 4:s.setState({step:O.CANCELED});return[2]}}))}));var o=d(e);e.handleAuthenticate=S((function(){var e,t;return b(this,(function(n){switch(n.label){case 0:
e=o.props.pendingPayment;return[4,(0,p.oe)(e.id)];case 1:t=n.sent();null!=t.error?o.setState({step:O.FAIL}):o.setState({step:O.SUCCESS});return[2]}}))}));return e}var o=n.prototype;o.componentDidMount=function(){f.default.track(T.rMx.OPEN_MODAL,{type:T.jXE.PAYMENT_AUTHENTICATION_MODAL})};o.componentWillUnmount=function(){f.default.track(T.rMx.MODAL_DISMISSED,{type:T.jXE.PAYMENT_AUTHENTICATION_MODAL})};o.getTitle=function(){switch(this.state.step){case O.START:return h.Z.Messages.PAYMENT_AUTHENTICATION_MODAL_TITLE;case O.SUCCESS:return h.Z.Messages.PAYMENT_AUTHENTICATION_MODAL_TITLE_SUCCESS;case O.CANCELED:return h.Z.Messages.PAYMENT_AUTHENTICATION_MODAL_TITLE_CANCELED;case O.FAIL:default:return h.Z.Messages.PAYMENT_AUTHENTICATION_MODAL_TITLE_FAIL}};o.getImageStyle=function(){switch(this.state.step){case O.START:return E().authenticationRequiredImage;case O.SUCCESS:return E().authenticationSuccessImage;case O.CANCELED:case O.FAIL:default:return E().authenticationFailImage}}
;o.getMessage=function(){var e=this.state.step,t=this.props.pendingPayment;switch(e){case O.START:return h.Z.Messages.PAYMENT_AUTHENTICATION_MODAL_START.format({price:(0,A.T4)(t.amount,t.currency),item:t.description});case O.SUCCESS:return h.Z.Messages.PAYMENT_AUTHENTICATION_MODAL_SUCCESS;case O.CANCELED:return h.Z.Messages.PAYMENT_AUTHENTICATION_MODAL_CANCELED.format({item:t.description});case O.FAIL:default:return h.Z.Messages.PAYMENT_AUTHENTICATION_MODAL_FAIL}};o.renderButtons=function(){var e=this.state.step,t=this.props.disableAuthentication;switch(e){case O.START:return(0,r.jsxs)(s.Fragment,{children:[(0,r.jsx)(u.Co,{color:u.Tt.BRAND,disabled:t,onClick:this.handleAuthenticate,children:h.Z.Messages.PAYMENT_AUTHENTICATION_MODAL_BUTTON}),(0,r.jsx)(u.Co,{look:u.Co.Looks.LINK,size:u.Co.Sizes.NONE,color:u.Co.Colors.PRIMARY,onClick:this.cancelPayment,className:E().cancelButton,children:h.Z.Messages.PAYMENT_AUTHENTICATION_MODAL_BUTTON_CANCEL_PAYMENT})]});case O.SUCCESS:case O.CANCELED:
case O.FAIL:default:return(0,r.jsx)(u.Co,{color:u.Tt.BRAND,onClick:this.close,children:h.Z.Messages.CLOSE})}};o.render=function(){var e=this.props.transitionState;return(0,r.jsxs)(l.Y0,{transitionState:e,className:E().modal,size:l.Cg.SMALL,"aria-label":this.getTitle(),children:[(0,r.jsxs)(l.xB,{children:[(0,r.jsx)(a.X6,{variant:"heading-lg/semibold",children:(0,r.jsx)("span",{className:E().modalTitle,children:this.getTitle()})}),(0,r.jsx)(l.ol,{className:E().closeIcon,onClick:this.close})]}),(0,r.jsxs)(l.hz,{className:E().content,children:[(0,r.jsx)("div",{className:this.getImageStyle()}),(0,r.jsx)(a.xv,{variant:"text-md/normal",children:this.getMessage()})]}),(0,r.jsx)(l.mz,{className:E().footer,children:this.renderButtons()})]})};return n}(s.Component);const v=o.ZP.connectStores([i.Z],(function(){return{disableAuthentication:i.Z.isAwaitingAuthentication}}))(g)}}]);
//# sourceMappingURL=3e727911632ca738407f.js.map