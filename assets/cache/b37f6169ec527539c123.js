"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[4038,62322,23647,84976,20435],{662322:(e,t,n)=>{n.d(t,{W:()=>s});var r=n(675860),o=n(173436),i=n(630206),a=n(461061);function s(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(i.Z.needsRefresh()){o.Z.dispatch({type:"LOAD_USER_AFFINITIES"});return r.Z.get({url:a.ANM.USER_AFFINITIES,retries:e?3:0,oldFormErrors:!0}).then((function(e){var t=e.body;o.Z.dispatch({type:"LOAD_USER_AFFINITIES_SUCCESS",affinities:t})}),(function(){o.Z.dispatch({type:"LOAD_USER_AFFINITIES_FAILURE"})}))}return Promise.resolve()}},305630:(e,t,n)=>{n.d(t,{Z:()=>ee})
;var r=n(785893),o=n(667294),i=n(441143),a=n.n(i),s=n(496486),l=n.n(s),u=n(791462),c=n(365523),f=n(489992),p=n(642400),d=n(579220),h=n(549425),y=n(735713),b=n(662322),m=n(956345),g=n(565922),S=n(640753),v=n(451620),P=n(356004),O=n(105405),I=n(893321),E=n(630206),R=n(859023),A=n(191940),C=n(513857),T=n(487502),_=n(693518),N=n(82961),j=n(562181),w=n(521495),Z=n(726283),M=n(202036),x=n(590483),B=n(461061),L=n(298716),k=n(959797),D=n(5759),G=n.n(D);function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function U(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1;r.configurable=!0;"value"in r&&(r.writable=!0);Object.defineProperty(e,r.key,r)}}function V(e){V=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return V(e)}function H(e,t){
return!t||"object"!==Q(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function W(e,t){W=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return W(e,t)}function z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0){i.push(r.value);if(t&&i.length===t)break}}catch(e){s=!0;o=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(e,t)||q(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(e){return function(e){if(Array.isArray(e))return F(e)}(e)||function(e){
if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||q(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Q=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function q(e,t){if(e){if("string"==typeof e)return F(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);return"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?F(e,t):void 0}}function X(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=V(e);if(t){
var o=V(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return H(this,n)}}var J=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&W(e,t)}(n,e);var t=X(n);function n(){U(this,n);var e;(e=t.apply(this,arguments)).state={copyMode:C.Z.Modes.DEFAULT};e._copyModeTimeout=new c.V7;e.handleGiftCodeCopy=function(t,n){var r=e.props.sku;null!=r&&(0,M.dM)(new v.Z({code:n,maxUses:1}),r);try{(0,Z.JG)(t);e.setState({copyMode:C.Z.Modes.SUCCESS})}catch(t){e.setState({copyMode:C.Z.Modes.ERROR})}e._copyModeTimeout.start(1500,(function(){e.setState({copyMode:C.Z.Modes.DEFAULT})}))};e.handleInventoryClick=function(){m.Z.open(B.oAB.INVENTORY);e.props.onClose()};return e}var o=n.prototype;o.componentWillUnmount=function(){this._copyModeTimeout.stop()};o.render=function(){
var e,t=this,n=this.props,o=n.obscureGiftCode,i=n.giftCode,a=n.application,s=n.onClose,l=n.selectedGiftStyle,u=this.state.copyMode;switch(u){case C.Z.Modes.SUCCESS:e=k.Z.Messages.BILLING_GIFT_COPIED;break;case C.Z.Modes.ERROR:e=k.Z.Messages.FAILED;break;default:e=k.Z.Messages.COPY}return(0,r.jsxs)(T.Z,{direction:T.Z.Direction.VERTICAL,align:T.Z.Align.CENTER,children:[null!=a?(0,r.jsx)(_.Z,{game:a,className:G().icon,size:_.Z.Sizes.LARGE,skuId:this.iconSKUId}):null,(0,r.jsx)(f.X6,{variant:"heading-lg/semibold",className:null!=l?G().headerSeasonalGifting:G().header,children:k.Z.Messages.APPLICATION_STORE_PURCHASE_GIFT_CONFIRMATION_TITLE}),(0,r.jsx)("div",{className:G().blurb,children:this.headerBlurb}),(0,r.jsx)($,{giftCode:i,onClose:s}),(0,r.jsx)("div",{className:G().divider}),(0,r.jsxs)(T.Z,{direction:T.Z.Direction.VERTICAL,children:[(0,r.jsx)(j.vw,{children:k.Z.Messages.APPLICATION_STORE_GIFT_PURCHASE_PRIVATE_LINK}),null!=i?(0,r.jsx)(C.Z,{
hideMessage:o?k.Z.Messages.GIFT_INVENTORY_HIDDEN:null,value:(0,M.Nz)(i),mode:u,text:e,onCopy:function(e){return t.handleGiftCodeCopy(e,i)},supportsCopy:Z.wS,className:G().copyInput,buttonColor:C.Z.ButtonColors.LINK,buttonLook:C.Z.ButtonLooks.LINK}):null,(0,r.jsx)("div",{className:G().subtext,children:k.Z.Messages.APPLICATION_STORE_GIFT_PURCHASE_CONFIRMATION_SUBTEXT_NO_FORMAT})]})]})};!function(e,t,n){t&&Y(e.prototype,t);n&&Y(e,n)}(n,[{key:"iconSKUId",get:function(){var e=this.props,t=e.subscriptionPlan,n=e.sku;return null!=t?t.skuId:null!=n?n.id:null}},{key:"headerBlurb",get:function(){var e=this.props.subscriptionPlan,t=k.Z.Messages.APPLICATION_STORE_GIFT_PURCHASE_CONFIRMATION_BLURB;if(null!=e){t=(e.interval===L.rV.MONTH?k.Z.Messages.APPLICATION_STORE_GIFT_PURCHASE_CONFIRM_SUBSCRIPTION_MONTHLY:k.Z.Messages.APPLICATION_STORE_GIFT_PURCHASE_CONFIRM_SUBSCRIPTION_YEARLY).format({skuName:(0,x.aq)(e.id),intervalCount:e.intervalCount})}return t}}]);return n}(o.Component),$=function(e){
var t=e.giftCode,n=e.onClose;o.useEffect((function(){y.Z.fetchRelationships();(0,b.W)()}),[]);var i=null!=t&&""!==t?(0,M.Nz)(t):null,s=z(o.useState(),2),c=s[0],f=s[1],m=z(o.useState(!1),2),v=m[0],I=m[1],C=z(o.useState(!1),2),T=C[0],_=C[1],Z=(0,u.cj)([E.Z],(function(){return{userAffinities:E.Z.getUserAffinities(),isLoading:E.Z.getFetching()}})),x=Z.userAffinities,B=Z.isLoading,L=l().map(x,"user_id"),D=(0,u.e7)([O.Z],(function(){return O.Z.getFriendIDs()})),F=l().difference(D,L),U=K(L).concat(K(F)),Y=(0,u.e7)([R.default],(function(){return R.default.filter((function(e){return U.includes(e.id)&&!e.bot}))}),[U]);if(null==Y||0===Y.length)return null;var V=l().sortBy(Y,(function(e){return U.indexOf(e.id)}));return(0,r.jsxs)("div",{className:G().giftRecipientSection,children:[(0,r.jsx)(j.vw,{children:k.Z.Messages.APPLICATION_STORE_GIFT_PURCHASE_GIFT_RECIPIENT_SECTION_LABEL}),(0,r.jsxs)("div",{className:G().giftRecipient,children:[(0,r.jsx)(w.Z,{
placeholder:k.Z.Messages.APPLICATION_STORE_GIFT_PURCHASE_GIFT_RECIPIENT_SELECT_PLACEHOLDER,wrapperClassName:G().giftRecipientInputWrapper,className:v?G().giftRecipientInputError:void 0,renderOptionPrefix:function(e){return null==(null==e?void 0:e.value)?null:(0,r.jsx)(g.Z,{user:e.value,size:g.u.SIZE_20})},renderLeading:function(){return B?(0,r.jsx)(N.Z,{type:N.R.PULSING_ELLIPSIS}):null},value:c,onChange:function(e){f(e);I(!1)},options:V.map((function(e){return{value:e,label:"".concat(e.toString(),"#").concat(e.discriminator)}}))}),(0,r.jsx)(A.Co,{disabled:null==c,submitting:T,className:G().sendToRecipientButton,onClick:function(){_(!0);p.Z.openPrivateChannel(c.id).then((function(e){var t=P.Z.getChannel(e);a()(null!=t,"Ensured PrivateChannel is null");a()(null!=i,"giftCodeURL is null");h.Z.sendMessage(t.id,S.ZP.parse(t,i),void 0,{isGiftLinkSentOnBehalfOfUser:!0}).then((function(){n();(0,d.Ou)()})).catch((function(){I(!0);_(!1)}))}))},
children:k.Z.Messages.APPLICATION_STORE_GIFT_PURCHASE_GIFT_SEND_NOW_BUTTON})]}),(0,r.jsx)("div",{className:v?G().subtextError:G().subtext,children:v?k.Z.Messages.APPLICATION_STORE_GIFT_PURCHASE_GIFT_ERROR_SENDING_LINK:k.Z.Messages.APPLICATION_STORE_GIFT_PURCHASE_GIFT_RECIPIENT_SUBTEXT})]})};const ee=u.ZP.connectStores([I.Z],(function(){return{obscureGiftCode:I.Z.enabled}}))(J)},922150:(e,t,n)=>{n.r(t);n.d(t,{default:()=>Ut});var r=n(785893),o=n(667294),i=n(213192),a=n.n(i),s=n(468811),l=n.n(s),u=n(791462),c=n(173436),f=n(299767),p=n(512172),d=n(737325),h=n(976882),y=n(775584),b=n(915004),m=n(707955),g=n(551511),S=n(886664),v=n(886110),P=n(40188),O=n(893321),I=n(378564),E=n(946849),R=n(191940),A=n(146530),C=n(487502),T=n(326440),_=n(562181),N=n(67416),j=n(725002),w=n(742269),Z=n(912551),M=n(204371),x=n(211862),B=n(150251),L=n(47714),k=n(156978),D=n(831809),G=n(472107),F=n(959797),U=function(e){
var t=e.submitting,n=e.braintreeNonce,o=e.braintreeEmail,i=e.onPaypalContinue,a=e.onReopenPaypal,s=e.renderBackButton,l=0!==o.length&&null!=n;return(0,r.jsxs)(N.mz,{justify:C.Z.Justify.BETWEEN,direction:C.Z.Direction.HORIZONTAL,children:[s(),(0,r.jsx)(R.Co,{submitting:t,color:l?R.Co.Colors.BRAND:R.Co.Colors.PRIMARY,onClick:l?i:a,children:l?F.Z.Messages.NEXT:F.Z.Messages.PAYMENT_SOURCE_CONNECT_TO_PAYPAL})]})},Y=n(879605),V=n(909187),H=n(655868),W=n(889373),z=n(757987),K=n(240243);function Q(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function q(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){
Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function X(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++){n=i[r];t.indexOf(n)>=0||(o[n]=e[n])}return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++){n=i[r];t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}}return o}function J(e){var t=e.width,n=void 0===t?16:t,o=e.height,i=void 0===o?16:o,a=e.color,s=void 0===a?"currentColor":a,l=e.foreground,u=X(e,["width","height","color","foreground"]);return(0,r.jsx)("svg",q(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){Q(e,t,n[t])}))}return e}({},(0,K.Z)(u)),{
width:n,height:i,viewBox:"0 0 18 20",children:(0,r.jsx)("path",{className:l,fill:s,d:"M15,15H3V13H15Zm0-4H3V9H15Zm0-4H3V5H15ZM0,20l1.5-1.5L3,20l1.5-1.5L6,20l1.5-1.5L9,20l1.5-1.5L12,20l1.5-1.5L15,20l1.5-1.5L18,20V0L16.5,1.5,15,0,13.5,1.5,12,0,10.5,1.5,9,0,7.5,1.5,6,0,4.5,1.5,3,0,1.5,1.5,0,0Z"})}))}var $=n(567397),ee=n(56435),te=n(992911),ne=n.n(te);function re(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){re(e,t,n[t])}))}return e}function ie(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){
var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}var ae=function(e){var t=e.legalNotice,n=e.paymentSources,i=e.price,a=e.hidePersonalInformation,s=e.paymentSourceId,l=e.isGiftable,u=e.isGift,c=e.needsToBeGift,f=e.onPaymentSourceChange,p=e.onPaymentSourceAdd,d=e.onPurchaseTermsChange,h=e.onToggleIsGift,y=[],b=null!=s?n[s]:null;null!=b&&b.invalid&&y.push((0,r.jsx)(Y.Z,{icon:$.Z,color:Y.Z.Colors.ERROR,iconSize:Y.Z.Sizes.NONE,iconClassName:ne().invalidIcon,children:F.Z.Messages.BILLING_PAYMENT_SOURCE_INVALID},"source_invalid"));null!=i&&(i.taxInclusive?y.push((0,r.jsx)(Y.Z,{icon:J,color:Y.Z.Colors.PRIMARY,iconSize:Y.Z.Sizes.LARGE,children:F.Z.Messages.BILLING_SALES_TAX_INCLUDED},"tax_included")):i.tax>0&&y.push((0,r.jsx)(Y.Z,{icon:J,color:Y.Z.Colors.PRIMARY,
iconSize:Y.Z.Sizes.LARGE,children:F.Z.Messages.BILLING_SALES_TAX_ADDED.format({tax:(0,ee.T4)(i.tax,i.currency)})},"tax_added")));return(0,r.jsxs)(o.Fragment,{children:[(0,r.jsx)(_.vw,{className:ne().formTitle,children:F.Z.Messages.BILLING_PAY_FOR_IT_WITH}),(0,r.jsx)(V.Z,{paymentSources:Object.values(n),selectedPaymentSourceId:s,hidePersonalInformation:a,onChange:f,onPaymentSourceAdd:p}),y,l&&(0,r.jsx)(A.Z,{disabled:c,className:ne().giftToggle,type:A.Z.Types.INVERTED,value:u,onChange:h,children:(0,r.jsx)("div",{className:ne().checkboxLabel,children:F.Z.Messages.BILLING_IS_GIFT_PURCHASE})}),(0,r.jsx)(H.Z,{onChange:d,forceShow:!0,className:ne().purchaseTerms,finePrint:t})]})},se=function(e){var t=e.canSubmit,n=e.submitButtonText,o=e.useShinySubmitButton,i=e.isPurchasing,a=e.hasAcceptedTerms,s=e.paymentSource,l=e.onPurchase,u=e.tooltipText,c=e.needsToBeGift,f=e.isGift,p=null!=s&&!s.invalid,d=a&&!(c&&!f)&&p&&t,h={submitting:i,color:R.Co.Colors.GREEN,disabled:!d,onClick:l};return(0,
r.jsx)(N.mz,{children:(0,r.jsxs)("div",{className:ne().buyButtonTooltipWrapper,children:[h.disabled&&null!=u?(0,r.jsx)(z.ZP,{text:u,children:function(e){return(0,r.jsx)("div",oe({"aria-hidden":!0,className:ne().buyButtonTooltipTarget},e))}}):null,o?(0,r.jsx)(W.C,ie(oe({},h),{children:n})):(0,r.jsx)(R.Co,ie(oe({type:"submit"},h),{children:n}))]})})},le=function(e){var t=e.submitting,n=e.braintreeNonce,o=e.venmoUsername,i=e.onVenmoContinue,a=e.onReopenVenmo,s=e.renderBackButton,l=0!==o.length&&null!=n;return(0,r.jsxs)(N.mz,{justify:C.Z.Justify.BETWEEN,direction:C.Z.Direction.HORIZONTAL,children:[s(),(0,r.jsx)(R.Co,{submitting:t,color:l?R.Co.Colors.BRAND:R.Co.Colors.PRIMARY,onClick:l?i:a,children:l?F.Z.Messages.NEXT:F.Z.Messages.PAYMENT_SOURCE_CONNECT_TO_VENMO})]})},ue=n(461061),ce=n(910368),fe=n.n(ce);function pe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function de(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){
n(e);return}s.done?t(l):Promise.resolve(l).then(r,o)}function he(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){de(i,r,o,a,s,"next",e)}function s(e){de(i,r,o,a,s,"throw",e)}a(void 0)}))}}function ye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1;r.configurable=!0;"value"in r&&(r.writable=!0);Object.defineProperty(e,r.key,r)}}function me(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function ge(e){ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return ge(e)}function Se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){
return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){me(e,t,n[t])}))}return e}function ve(e,t){return!t||"object"!==Oe(t)&&"function"!=typeof t?pe(e):t}function Pe(e,t){Pe=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return Pe(e,t)}var Oe=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function Ie(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=ge(e);if(t){var o=ge(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ve(this,n)}}var Ee=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},
"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;(r=0,o)&&(i=[2&i[0],o.value]);switch(i[0]){case 0:case 1:o=i;break;case 4:a.label++;return{value:i[1],done:!1};case 5:a.label++;r=i[1];i=[0];continue;case 7:i=a.ops.pop();a.trys.pop();continue;default:if(!(o=a.trys,o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1];o=i;break}if(o&&a.label<o[2]){a.label=o[2];a.ops.push(i);break}o[2]&&a.ops.pop();a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e];r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}
},Re=[g.Rg.PAYMENT_TYPE,g.Rg.CREDIT_CARD_INFORMATION,g.Rg.REVIEW],Ae=[g.Rg.PAYMENT_TYPE,g.Rg.CREDIT_CARD_INFORMATION,g.Rg.REVIEW],Ce=[g.Rg.PAYMENT_TYPE,g.Rg.CREDIT_CARD_INFORMATION,g.Rg.ADDRESS,g.Rg.REVIEW],Te=[g.Rg.PAYMENT_TYPE,g.Rg.PAYPAL,g.Rg.PAYPAL_ADDRESS,g.Rg.REVIEW],_e=[g.Rg.PAYMENT_TYPE,g.Rg.PAYMENT_REQUEST_INFO,g.Rg.REVIEW],Ne=[g.Rg.PAYMENT_TYPE,g.Rg.ADDRESS,g.Rg.REVIEW],je=[g.Rg.PAYMENT_TYPE,g.Rg.ADDRESS,g.Rg.REVIEW],we=[g.Rg.PAYMENT_TYPE,g.Rg.VENMO,g.Rg.VENMO_ADDRESS,g.Rg.REVIEW],Ze=(0,Z.Mg)(fe().innerPadding),Me=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&Pe(e,t)}(n,e);var t=Ie(n);function n(){ye(this,n);var e;(e=t.apply(this,arguments)).state={hasAcceptedNeccessaryTerms:!1,token:null,confirmingCard:!1,stripe:null};e.handleToggleIsGift=function(t,n){var r=e.props.onIsGiftUpdate
;null==r||r(n)};e.handlePurchaseTermsChange=function(t){e.setState({hasAcceptedNeccessaryTerms:t})};e.handleReopenPaypal=function(){v.i0()};e.handleReopenVenmo=function(){v.og()};e.handleCardInfoChange=function(e,t){c.Z.wait((function(){return h.sn(e,t)}))};e.handleBillingAddressChange=function(e,t){c.Z.wait((function(){return h.Ow(e,t)}))};var i=pe(e);e.handleCreditCardAdd=he((function(){var e,t,n,r,o;return Ee(this,(function(a){switch(a.label){case 0:e=i.props.billingAddressInfo;t=i.state,n=t.stripe,r=t.token;a.label=1;case 1:a.trys.push([1,3,,4]);return[4,d.f0(n,r,e)];case 2:o=a.sent();i.props.onPaymentSourceAdd(o.id);return[3,4];case 3:a.sent();return[3,4];case 4:return[2]}}))}));var a,s=pe(e);e.handleStripePaymentRequestAdd=(a=he((function(e){var t;return Ee(this,(function(n){switch(n.label){case 0:h.Xt(e);if(null==e){s.props.onBack();return[2]}n.label=1;case 1:n.trys.push([1,3,,4]);return[4,d.i6(e)];case 2:t=n.sent();s.props.onPaymentSourceAdd(t.id);return[3,4];case 3:n.sent()
;return[3,4];case 4:return[2]}}))})),function(e){return a.apply(this,arguments)});var l=pe(e);e.handlePaypalAdd=he((function(){var e,t,n,r,o;return Ee(this,(function(i){switch(i.label){case 0:e=l.props,t=e.braintreeEmail,n=e.braintreeNonce,r=e.billingAddressInfo;if(0===t.length||null==n)return[2];i.label=1;case 1:i.trys.push([1,3,,4]);return[4,d.lP(n,r)];case 2:o=i.sent();l.props.onPaymentSourceAdd(o.id);return[3,4];case 3:i.sent();return[3,4];case 4:return[2]}}))}));var u,f=pe(e);e.handleVenmoAdd=he((function(){var e,t,n,r,o;return Ee(this,(function(i){switch(i.label){case 0:e=f.props,t=e.venmoUsername,n=e.braintreeNonce,r=e.billingAddressInfo;if(0===t.length||null==n)return[2];i.label=1;case 1:i.trys.push([1,3,,4]);return[4,d.lP(n,r)];case 2:o=i.sent();f.props.onPaymentSourceAdd(o.id);return[3,4];case 3:i.sent();return[3,4];case 4:return[2]}}))}));e.renderBackButton=function(){var t=e.props,n=t.step,o=t.steps,i=t.paymentSources,a=t.onBack,s=(0,g.Yp)(n,o),l=(0,
g.NW)(s,i)?F.Z.Messages.BACK:F.Z.Messages.CANCEL;return(0,r.jsx)(R.Co,{look:R.Co.Looks.LINK,className:ne().backButton,color:ne().backButtonColor,size:ne().backButtonSize,onClick:a,children:l})};e.stepRenderer=Se((me(u={},g.Rg.PAYMENT_TYPE,{renderBody:function(){var t=e.props,n=t.hidePersonalInformation,i=t.onChoosePaymentType,a=t.isGiftable,s=t.needsToBeGift,l=t.isGift;return n?(0,r.jsx)(T.Z,{className:ne().errorBlock,children:F.Z.Messages.BILLING_ERROR_ADD_PAYMENT_SOURCE_STREAMER_MODE}):(0,r.jsxs)(o.Fragment,{children:[(0,r.jsx)(x.Z,{className:ne().choosePaymentSourceType,onChooseType:i,allowStripeRequestPayments:!w.FB,onStripePaymentMethodReceived:e.handleStripePaymentRequestAdd}),a&&(0,r.jsx)(A.Z,{disabled:s,className:ne().giftToggle,type:A.Z.Types.INVERTED,value:l,onChange:e.handleToggleIsGift,children:(0,r.jsx)("div",{className:ne().checkboxLabel,children:F.Z.Messages.BILLING_IS_GIFT_PURCHASE})})]})},renderFooter:function(){return(0,r.jsx)(N.mz,{direction:C.Z.Direction.HORIZONTAL,
children:e.renderBackButton()})}}),me(u,g.Rg.PAYMENT_REQUEST_INFO,{renderBody:function(){return(0,r.jsx)(G.k,{className:ne().formItem,stripePaymentMethod:e.props.stripePaymentMethod,submitting:e.props.submitting})},renderFooter:function(){return(0,r.jsx)(N.mz,{direction:C.Z.Direction.HORIZONTAL,children:e.renderBackButton()})}}),me(u,g.Rg.PAYPAL,{renderBody:function(){return(0,r.jsx)(B.Z,{className:ne().formItem})},renderFooter:function(){var t=e.props,n=t.submitting,o=t.braintreeNonce,i=t.braintreeEmail,a=t.onPaypalContinue,s=t.paypalClient;return(0,r.jsx)(U,{submitting:n||null==s,braintreeNonce:o,braintreeEmail:i,onPaypalContinue:a,onReopenPaypal:e.handleReopenPaypal,renderBackButton:e.renderBackButton})}}),me(u,g.Rg.VENMO,{renderBody:function(){return(0,r.jsx)(L.Z,{className:ne().formItem})},renderFooter:function(){var t=e.props,n=t.submitting,o=t.braintreeNonce,i=t.venmoUsername,a=t.onVenmoContinue,s=t.venmoClient;return(0,r.jsx)(le,{submitting:n||null==s,braintreeNonce:o,
venmoUsername:i,onVenmoContinue:a,onReopenVenmo:e.handleReopenVenmo,renderBackButton:e.renderBackButton})}}),me(u,g.Rg.CREDIT_CARD_INFORMATION,{renderBody:function(){var t=e.props.billingError;return(0,r.jsx)(D.j,{billingError:t,onCardInfoChange:e.handleCardInfoChange})},renderFooter:function(){var t=e.props,n=t.isCardInfoValid,o=t.onCreditCardContinue,i=e.state,a=i.stripe,s=i.confirmingCard,l=pe(e),u=function(){var e=he((function(e){var t;return Ee(this,(function(n){switch(n.label){case 0:l.setState({confirmingCard:!0});n.label=1;case 1:n.trys.push([1,3,4,5]);return[4,d.qv(a,e)];case 2:t=n.sent();l.setState({token:t});h.fw();o();return[3,5];case 3:n.sent();return[3,5];case 4:l.setState({confirmingCard:!1});return[7];case 5:return[2]}}))}));return function(t){return e.apply(this,arguments)}}();return(0,r.jsx)(S.ElementsConsumer,{children:function(t){var o=t.elements;return(0,r.jsx)(D.r,{isCardInfoValid:n,submitting:s,renderBackButton:e.renderBackButton,onCreditCardContinue:function(){
return u(o)}})}})}}),me(u,g.Rg.PAYPAL_ADDRESS,{renderBody:function(){var t=e.props,n=t.billingAddressInfo,o=t.billingError;return(0,r.jsx)(k.P,{billingAddressInfo:n,billingError:o,onBillingAddressChange:e.handleBillingAddressChange,paymentSourceType:ue.HeQ.PAYPAL})},renderFooter:function(){var t=e.props,n=t.isBillingAddressInfoValid,o=t.submitting;return(0,r.jsx)(k.B,{isBillingAddressInfoValid:n,submitting:o,onContinue:e.handlePaypalAdd,renderBackButton:e.renderBackButton})}}),me(u,g.Rg.VENMO_ADDRESS,{renderBody:function(){var t=e.props,n=t.billingAddressInfo,o=t.billingError;return(0,r.jsx)(k.P,{billingAddressInfo:n,billingError:o,onBillingAddressChange:e.handleBillingAddressChange,paymentSourceType:ue.HeQ.VENMO})},renderFooter:function(){var t=e.props,n=t.isBillingAddressInfoValid,o=t.submitting;return(0,r.jsx)(k.B,{isBillingAddressInfoValid:n,submitting:o,onContinue:e.handleVenmoAdd,renderBackButton:e.renderBackButton})}}),me(u,g.Rg.ADDRESS,{renderBody:function(){
var t=e.props,n=t.billingAddressInfo,o=t.billingError,i=t.steps;return(0,r.jsx)(k.P,{billingAddressInfo:n,billingError:o,onBillingAddressChange:e.handleBillingAddressChange,paymentSourceType:i===Ne?ue.HeQ.GIROPAY:ue.HeQ.CARD})},renderFooter:function(){var t=e.props,n=t.isBillingAddressInfoValid,o=t.submitting;return(0,r.jsx)(k.B,{isBillingAddressInfoValid:n,submitting:o,onContinue:e.handleCreditCardAdd,renderBackButton:e.renderBackButton})}}),me(u,g.Rg.REVIEW,{renderBody:function(){var t=e.props,n=t.legalNotice,o=t.paymentSources,i=t.price,a=t.hidePersonalInformation,s=t.paymentSourceId,l=t.onReviewPaymentSourceChange,u=t.onReviewPaymentSourceAdd,c=t.isGiftable,f=t.isGift,p=t.needsToBeGift;return(0,r.jsx)(ae,{legalNotice:n,paymentSources:o,price:i,hidePersonalInformation:a,paymentSourceId:s,onPaymentSourceChange:l,onPaymentSourceAdd:u,onPurchaseTermsChange:e.handlePurchaseTermsChange,onToggleIsGift:e.handleToggleIsGift,isGiftable:c,isGift:f,needsToBeGift:p})},renderFooter:function(){
var t=e.props,n=t.canSubmit,o=t.submitButtonText,i=t.useShinySubmitButton,a=t.isPurchasing,s=t.paymentSourceId,l=t.onPurchase,u=t.needsToBeGift,c=t.isGift,f=t.paymentSources;return(0,r.jsx)(se,{canSubmit:n,submitButtonText:o,useShinySubmitButton:i,isPurchasing:a,hasAcceptedTerms:e.state.hasAcceptedNeccessaryTerms,paymentSource:null!=s?f[s]:null,onPurchase:l,tooltipText:e.disabledTooltip,needsToBeGift:u,isGift:c})}}),me(u,g.Rg.CONFIRM,{renderBody:ue.VqG,renderFooter:ue.VqG}),me(u,g.Rg.AWAITING_AUTHENTICATION,{renderBody:function(){return(0,r.jsx)(_.vw,{className:ne().formTitle,children:F.Z.Messages.PAYMENT_WAITING_FOR_AUTHENTICATION})},renderFooter:ue.VqG}),u),e.props.extraRenderers);return e}var i=n.prototype;i.componentDidMount=function(){var e=this;return he((function(){var t,n,r,o,i,a;return Ee(this,(function(s){switch(s.label){case 0:v.eI();t=e.props,n=t.onPaymentSourceChange,r=t.paymentSources,o=t.defaultPaymentSourceId,i=t.paymentSourceId
;null!=n&&(null!=i&&i!==o&&null!=r[i]?n(r[i]):null!=o&&null!=r[o]?n(r[o]):n(null));return[4,(0,M.d2)()];case 1:a=s.sent();e.setState({stripe:a});return[2]}}))}))()};i.componentDidUpdate=function(e){var t=this.props,n=t.onPaymentSourceChange,r=t.paymentSources,o=t.paymentSourceId;e.paymentSourceId!==o&&null!=o&&null!=r[o]&&(null==n||n(r[o]))};i.componentWillUnmount=function(){v.cx();h.tt();var e=this.props.onClearError;null==e||e();h.fw()};i.preventDefault=function(e){e.preventDefault()};i.renderHeader=function(){var e=this.props,t=e.renderHeader,n=e.billingError;return t(e.step,e.steps.map((function(e){return{id:e,label:(0,g.fO)(e)}})),null==(0,g.ly)(n)?n:null)};i.render=function(){var e=this.props,t=e.size,n=e.step,o=e.steps,i=e.className,a=e.transitionState,s=this.stepRenderer[n],l=s.renderBody();return(0,r.jsx)(S.Elements,{options:ue.OBo,stripe:this.state.stripe,children:(0,r.jsx)(N.Y0,{size:t,className:i,"aria-label":F.Z.Messages.SKU_PAYMENT_STEPS_LABEL,transitionState:a,
children:(0,r.jsx)(j.ZP,{children:(0,r.jsxs)("form",{className:ne().form,onSubmit:this.preventDefault,children:[this.renderHeader(),n!==g.Rg.CONFIRM?(0,r.jsx)("div",{className:ne().divider}):null,null!=l&&(0,r.jsx)(N.hz,{className:ne().modalContent,children:(0,r.jsx)("div",{className:ne().content,children:(0,r.jsx)(P.Z,{step:n,steps:o,sideMargin:Ze,children:l})})}),s.renderFooter()]})})})})};!function(e,t,n){t&&be(e.prototype,t);n&&be(e,n)}(n,[{key:"disabledTooltip",get:function(){var e=this.props,t=e.needsToBeGift,n=e.isGift,r=e.isGiftable;return this.state.hasAcceptedNeccessaryTerms?t&&!n?r?F.Z.Messages.APPLICATION_STORE_PURCHASE_GIFT_ONLY:F.Z.Messages.APPLICATION_STORE_PURCHASE_GIFT_ONLY_UNGIFTABLE:null:F.Z.Messages.BILLING_ACCEPT_TERMS_PAID_SERVICES_TOOLTIP}}]);return n}(o.PureComponent);Me.defaultProps={canSubmit:!0,useShinySubmitButton:!1,size:N.Cg.SMALL,billingError:null,extraRenderers:{},className:ne().modal};const xe=u.ZP.connectStores([m.Z,y.Z,I.Z,O.Z,E.Z],(function(){return{
submitting:I.Z.isBusy,paymentSources:m.Z.paymentSources,defaultPaymentSourceId:m.Z.defaultPaymentSourceId,stripePaymentMethod:y.Z.stripePaymentMethod,creditCardInfo:y.Z.getCreditCardInfo(),isCardInfoValid:y.Z.isCardInfoValid,billingAddressInfo:y.Z.getBillingAddressInfo(),isBillingAddressInfoValid:y.Z.isBillingAddressInfoValid,braintreeEmail:y.Z.braintreeEmail,braintreeNonce:y.Z.braintreeNonce,venmoUsername:y.Z.venmoUsername,billingError:y.Z.error,paypalClient:E.Z.getPayPalClient(),venmoClient:E.Z.getVenmoClient(),hidePersonalInformation:O.Z.hidePersonalInformation}}))(Me);function Be(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Le(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ke(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){n(e);return}s.done?t(l):Promise.resolve(l).then(r,o)}function De(e){return function(){var t=this,n=arguments
;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){ke(i,r,o,a,s,"next",e)}function s(e){ke(i,r,o,a,s,"throw",e)}a(void 0)}))}}function Ge(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1;r.configurable=!0;"value"in r&&(r.writable=!0);Object.defineProperty(e,r.key,r)}}function Fe(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function Ue(e){Ue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return Ue(e)}function Ye(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){
Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function Ve(e,t){return!t||"object"!==Ke(t)&&"function"!=typeof t?Le(e):t}function He(e,t){He=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return He(e,t)}function We(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0){i.push(r.value);if(t&&i.length===t)break}}catch(e){s=!0;o=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(e,t)||Qe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ze(e){return function(e){if(Array.isArray(e))return Be(e)}(e)||function(e){
if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Qe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Ke=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function Qe(e,t){if(e){if("string"==typeof e)return Be(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);return"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Be(e,t):void 0}}function qe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=Ue(e);if(t){
var o=Ue(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ve(this,n)}}var Xe=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;(r=0,o)&&(i=[2&i[0],o.value]);switch(i[0]){case 0:case 1:o=i;break;case 4:a.label++;return{value:i[1],done:!1};case 5:a.label++;r=i[1];i=[0];continue;case 7:i=a.ops.pop();a.trys.pop();continue;default:if(!(o=a.trys,o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1];o=i;break}if(o&&a.label<o[2]){a.label=o[2]
;a.ops.push(i);break}o[2]&&a.ops.pop();a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e];r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Je=[g.Rg.REVIEW,g.Rg.CONFIRM],$e=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&He(e,t)}(n,e);var t=qe(n);function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r;(r=t.call(this,e))._hasChangedSteps=!1;r.handlePaypalContinue=function(){r.setState({step:g.Rg.PAYPAL_ADDRESS})};r.handleVenmoContinue=function(){r.setState({step:g.Rg.VENMO_ADDRESS})};r.handleCreditCardContinue=function(){r.setState({step:g.Rg.ADDRESS})};r.handleReviewPaymentSourceChange=function(e){r.setState({paymentSourceId:null!=e?e.id:null})};r.handleReviewPaymentSourceAdd=function(){r.setState({
step:g.Rg.PAYMENT_TYPE,steps:Ae,paymentSourceId:null});var e=r.props.onClearError;e&&e()};r.handleBack=function(){var e=r.props,t=e.paymentSources,n=e.onClose,o=r.state,i=o.step,a=o.steps,s=r.stepsToRender,l=(0,g.Yp)(i,s);if(l>0){var u=s[l-1],c=u===g.Rg.PAYMENT_TYPE;c&&h.fw();r.setState({step:u,steps:c?Ae:a})}else if((0,g.NW)(l,t)){var f=r.props.defaultPaymentSourceId;r.setState({step:g.Rg.REVIEW,steps:Re,paymentSourceId:f})}else n()};r.handleChoosePaymentType=function(e){switch(e){case ue.HeQ.PAYPAL:r.setState({step:g.Rg.PAYPAL,steps:Te});break;case ue.HeQ.CARD:r.setState({step:g.Rg.CREDIT_CARD_INFORMATION,steps:Ce});break;case ue.HeQ.PAYMENT_REQUEST:r.setState({step:g.Rg.PAYMENT_REQUEST_INFO,steps:_e});break;case ue.HeQ.GIROPAY:r.setState({step:g.Rg.ADDRESS,steps:Ne});break;case ue.HeQ.PAYSAFE_CARD:r.setState({step:g.Rg.ADDRESS,steps:je});break;case ue.HeQ.VENMO:r.setState({step:g.Rg.VENMO,steps:we})}};r.handlePaymentSourceAdd=function(e){r.setState({step:g.Rg.REVIEW,
paymentSourceId:e})};var o=Le(r);r.handlePurchase=De((function(){var e,t,n,r,i;return Xe(this,(function(a){switch(a.label){case 0:e=o.props,t=e.paymentSources,n=e.onPurchase,r=e.isGift;if(null==(i=o.state.paymentSourceId))return[2];a.label=1;case 1:a.trys.push([1,3,,4]);return[4,n(t[i],r)];case 2:a.sent();o.setState({steps:Je,step:g.Rg.CONFIRM});return[3,4];case 3:a.sent();return[3,4];case 4:return[2]}}))}));r.handleSelectPlan=function(){var e=r.props.paymentSources,t=Object.values(e).length>0;r.setState({step:t?g.Rg.REVIEW:g.Rg.PAYMENT_TYPE})};var i=e.defaultPaymentSourceId,a=e.paymentSources,s=e.initialStep,l=Object.values(a).length>0,u=s;null==u&&(u=l?g.Rg.REVIEW:g.Rg.PAYMENT_TYPE);r.state={paymentSourceId:i,steps:l?Re:Ae,step:u,errorStep:null};return r}var o=n.prototype;o.componentDidMount=function(){m.Z.hasFetchedPaymentSources||d.tZ()};o.componentDidUpdate=function(e,t){var n=this.props.onStepChange,r=this.state.step;if(r!==t.step){this._hasChangedSteps=!0;null!=n&&n(t.step,r)}}
;o.render=function(){var e,t=this,n=this.props,o=n.isPurchasing,i=n.canSubmit,a=n.submitButtonText,s=n.useShinySubmitButton,l=n.legalNotice,u=n.renderHeader,c=n.onPaymentSourceChange,f=n.price,p=n.onClearError,d=n.size,h=n.renderConfirmationBody,y=n.renderConfirmationFooter,b=n.className,m=n.isGift,S=n.isGiftable,v=n.needsToBeGift,P=n.onIsGiftUpdate,O=n.transitionState,I=(Fe(e={},g.Rg.CONFIRM,{renderBody:h,renderFooter:y}),Fe(e,g.Rg.SELECT_PLAN,{renderBody:function(){return t.props.renderSelectPlanBody(t.handleSelectPlan)},renderFooter:function(){return t.props.renderSelectPlanFooter()}}),e),E=this.state,R=E.step,A=E.paymentSourceId,C=this.stepsToRender;return(0,r.jsx)(xe,{transitionState:O,className:b,isPurchasing:o,canSubmit:i,submitButtonText:a,useShinySubmitButton:s,legalNotice:l,renderHeader:u,onPaymentSourceChange:c,price:f,onClearError:p,size:d,extraRenderers:I,step:R,steps:C,paymentSourceId:A,isGiftable:S,isGift:m,needsToBeGift:v,onIsGiftUpdate:P,onBack:this.handleBack,
onChoosePaymentType:this.handleChoosePaymentType,onCreditCardContinue:this.handleCreditCardContinue,onPaymentSourceAdd:this.handlePaymentSourceAdd,onPurchase:this.handlePurchase,onPaypalContinue:this.handlePaypalContinue,onVenmoContinue:this.handleVenmoContinue,onReviewPaymentSourceChange:this.handleReviewPaymentSourceChange,onReviewPaymentSourceAdd:this.handleReviewPaymentSourceAdd})};n.getDerivedStateFromProps=function(e,t){var n=e.billingError,r=e.isAwaitingAuthentication,o=t.errorStep,i={};if(null==n)null!=o&&(i.errorStep=null);else{var a=(0,g.ly)(n);if(null!=a&&a!==t.errorStep){i.step=a;i.errorStep=a}}null==t.paymentSourceId&&null!=e.defaultPaymentSourceId&&(i.paymentSourceId=e.defaultPaymentSourceId);r?i.step=g.Rg.AWAITING_AUTHENTICATION:t.step===g.Rg.AWAITING_AUTHENTICATION&&(i.step=null!=n?g.Rg.REVIEW:g.Rg.CONFIRM);return i};!function(e,t,n){t&&Ge(e.prototype,t);n&&Ge(e,n)}(n,[{key:"stepsToRender",get:function(){var e=this.props.prependSteps,t=this.state.steps
;return null!=e?ze(e).concat(ze(t)):t}},{key:"closable",get:function(){var e=this.state.step;return 0===(0,g.Yp)(e,this.stepsToRender)||!this._hasChangedSteps}}]);return n}(o.Component);$e.defaultProps={useShinySubmitButton:!1,needsToBeGift:!1,isGiftable:!1,isGift:!1,renderConfirmationBody:ue.VqG,renderConfirmationFooter:ue.VqG,renderSelectPlanBody:ue.VqG,renderSelectPlanFooter:ue.VqG};const et=o.forwardRef((function(e,t){var n=We((0,u.Wu)([m.Z],(function(){return[m.Z.paymentSources,m.Z.defaultPaymentSourceId]})),2),o=n[0],i=n[1],a=(0,u.e7)([y.Z],(function(){return y.Z.error})),s=We((0,u.Wu)([b.Z],(function(){return[b.Z.error,b.Z.isAwaitingAuthentication]})),2),l=s[0],c=s[1];return(0,r.jsx)($e,Ye(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))))
;r.forEach((function(t){Fe(e,t,n[t])}))}return e}({},e),{ref:t,billingError:null!=l?l:a,paymentSources:o,defaultPaymentSourceId:i,isAwaitingAuthentication:c}))}));var tt=n(657390),nt=n(674500),rt=n(367124),ot=n(859023),it=n(922877),at=n(808018),st=n(512238),lt=n(331792),ut=n(842256),ct=n(693518),ft=n(82961),pt=n(932847),dt=n(770040),ht=n(935406),yt=n(305630),bt=n(479091),mt=n(654721),gt=n(6369),St=n.n(gt);function vt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Pt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ot(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){n(e);return}s.done?t(l):Promise.resolve(l).then(r,o)}function It(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Ot(i,r,o,a,s,"next",e)}function s(e){Ot(i,r,o,a,s,"throw",e)}a(void 0)}))}}function Et(e,t){
if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Rt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1;r.configurable=!0;"value"in r&&(r.writable=!0);Object.defineProperty(e,r.key,r)}}function At(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function Ct(e){Ct=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return Ct(e)}function Tt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&Zt(e,t)}function _t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){
return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){At(e,t,n[t])}))}return e}function Nt(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function jt(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++){n=i[r];t.indexOf(n)>=0||(o[n]=e[n])}return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++){n=i[r];t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}}return o}function wt(e,t){
return!t||"object"!==xt(t)&&"function"!=typeof t?Pt(e):t}function Zt(e,t){Zt=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return Zt(e,t)}function Mt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0){i.push(r.value);if(t&&i.length===t)break}}catch(e){s=!0;o=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return vt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vt(e,t)}(e,t)||function(){
throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var xt=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function Bt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=Ct(e);if(t){var o=Ct(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return wt(this,n)}}var Lt=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){
if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;(r=0,o)&&(i=[2&i[0],o.value]);switch(i[0]){case 0:case 1:o=i;break;case 4:a.label++;return{value:i[1],done:!1};case 5:a.label++;r=i[1];i=[0];continue;case 7:i=a.ops.pop();a.trys.pop();continue;default:if(!(o=a.trys,o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1];o=i;break}if(o&&a.label<o[2]){a.label=o[2];a.ops.push(i);break}o[2]&&a.ops.pop();a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e];r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},kt=a()({UNSUPPORTED_OS:null,TEST_MODE:null,GIFT_ONLY:null,PREORDER:null}),Dt=function(e){Tt(n,e);var t=Bt(n);function n(){Et(this,n);var e;(e=t.apply(this,arguments)).state={paymentSourceId:null}
;e._loadId=l().v4();e._stepStartTime=Date.now();e._flowStartTime=Date.now();e._paymentModalRef=o.createRef();e.handlePaymentSourceChange=function(t){var n=e.props,r=n.applicationId,o=n.skuId;if(null!=t){p.x2(r,o,t.id);e.setState({paymentSourceId:t.id})}else{p.x2(r,o,null);e.setState({paymentSourceId:null})}};var i,a=Pt(e);e.handlePurchase=(i=It((function(e){var t,n,r,o,i,s,l;return Lt(this,(function(u){switch(u.label){case 0:t=a.props,n=t.applicationId,r=t.sku;o=a.getPrice();i=null!=o?o.amount:0;s=null!=o?o.currency:ue.pKx.USD;if(null==r)throw new Error("SKU is null during purchase");if(at.Z.isPurchasingSKU)return[2];u.label=1;case 1:u.trys.push([1,3,,4]);pt.default.track(ue.rMx.PAYMENT_FLOW_COMPLETED,Nt(_t({},a.getBaseAnalyticsData()),{duration_ms:Date.now()-a._flowStartTime}));return[4,p.ZZ(n,r.id,{expectedAmount:i,expectedCurrency:s,paymentSource:e,analyticsLoadId:a._loadId,isGift:a.isGift})];case 2:u.sent();(0,f.Bv)();return[3,4];case 3:l=u.sent()
;pt.default.track(ue.rMx.PAYMENT_FLOW_FAILED,Nt(_t({},a.getBaseAnalyticsData()),{payment_gateway:e.type===ue.HeQ.CARD?ue.gg$.STRIPE:ue.gg$.BRAINTREE,payment_source_id:e.id,duration_ms:Date.now()-a._flowStartTime,payment_error_code:l.code}));throw l;case 4:return[2]}}))})),function(e){return i.apply(this,arguments)});e.handleClose=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=e.props.onClose;n(t)};e.handleStepChange=function(t,n){var r=Date.now();pt.default.track(ue.rMx.PAYMENT_FLOW_STEP,Nt(_t({},e.getBaseAnalyticsData()),{from_step:t,to_step:n,step_duration_ms:r-e._stepStartTime,flow_duration_ms:r-e._flowStartTime}));e._stepStartTime=r;n===g.Rg.CONFIRM&&p.WD()};e.renderHeader=function(t,n,o){var i=e.props.application;return t===g.Rg.CONFIRM?null!=i?(0,r.jsx)(tt.Z,{application:i,splashSize:880}):null:e.renderDefaultHeader(t,n,o)};e.renderConfirmation=function(){var t=e.props,n=t.application,o=t.sku,i=t.isIAP,a=t.giftCode
;if(null==o||null==n)throw new Error("No SKU for confirmation step!");return(0,r.jsx)("div",{className:St().confirmContent,children:(0,r.jsxs)(C.Z,{direction:C.Z.Direction.VERTICAL,children:[(0,r.jsx)(N.ol,{onClick:function(){return e.handleClose()},className:St().confirmCloseButton}),null!=a?(0,r.jsx)(yt.Z,{giftCode:a,application:n,sku:o,onClose:function(){return e.handleClose()}}):(0,r.jsx)(bt.Z,{application:n,sku:o,isIAP:i,onClose:function(){return e.handleClose()}})]})})};return e}var i=n.prototype;i.getSkuPrice=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state,n=e.prices,r=t.paymentSourceId;return null==n?null:n[null!=r?r:at.c]};i.componentDidMount=function(){var e=this,t=this.props,n=t.sku,r=t.skuId,o=t.applicationId;null==n?p.jU(o,r).catch((function(t){return e.handleClose(t.message)})):pt.default.track(ue.rMx.PAYMENT_FLOW_STARTED,this.getBaseAnalyticsData())}
;i.componentDidUpdate=function(e,t){null==e.sku&&null!=this.props.sku&&pt.default.track(ue.rMx.PAYMENT_FLOW_STARTED,this.getBaseAnalyticsData());this.checkPriceChange(this.getSkuPrice(e,t),this.getSkuPrice())};i.checkPriceChange=function(e,t){var n=this.props,r=n.sku,o=n.onClose;null!=e&&null!=t&&e.discount_percent_off!==t.discount_percent_off&&c.Z.wait((function(){if(null==r)throw new Error("Unexpected null SKU");o(ue.G5l)}))};i.getPrice=function(){var e=this.props,t=e.sku,n=e.isFetchingSKU;if(null==t||n)return null;var r=this.getSkuPrice();if(null!=r)return{amount:r.amount,tax:r.tax,taxInclusive:r.tax_inclusive,currency:r.currency};if(null==this.state.paymentSourceId){var o=t.getPrice();if(null==o)throw new Error("Sku Price cannot be null");return{amount:o.amount,tax:0,taxInclusive:!1,currency:o.currency}}return null};i.getBaseAnalyticsData=function(){var e=this.props,t=e.sku,n=e.analyticsLocation,r=e.appContext,o=e.promotionId;if(null==t)return{};var i=this.getPrice()
;return Nt(_t({},(0,nt.Z)(t)),{load_id:this._loadId,payment_type:"sku",is_gift:this.isGift,client_event_source:r===ue.IlC.OVERLAY?ue.IlC.OVERLAY:null,location:n,price:null!=i?i.amount:null,currency:null!=i?i.currency:null,location_promotion_id:o})};i.renderPurchaseWarning=function(){var e=this.props,t=e.sku,n=e.isInTestMode,i=e.isIAP,a=e.isUserEntitledToSku;if(null==t)return null;var s=(0,ht.hX)((0,w.Xf)()),l=[];null!=s&&t.supportedOperatingSystems.includes(s)||i||l.push((0,r.jsx)(Y.Z,{icon:$.Z,iconSize:Y.Z.Sizes.SMALL,color:Y.Z.Colors.WARNING,className:St().errorBlock,children:F.Z.Messages.APPLICATION_STORE_PURCHASE_GAME_CURRENT_OS_UNSUPPORTED},kt.UNSUPPORTED_OS));n&&l.push((0,r.jsx)(Y.Z,{icon:$.Z,iconSize:Y.Z.Sizes.SMALL,color:Y.Z.Colors.WARNING,className:St().errorBlock,children:F.Z.Messages.APPLICATION_STORE_PURCHASE_TEST_MODE},kt.TEST_MODE));!0===a&&this.isGiftable&&l.push((0,r.jsx)(Y.Z,{icon:$.Z,iconSize:Y.Z.Sizes.SMALL,color:Y.Z.Colors.PRIMARY,className:St().errorBlock,
children:F.Z.Messages.APPLICATION_STORE_PURCHASE_GIFT_ONLY},kt.GIFT_ONLY));t.isPreorder()&&l.push((0,r.jsx)(Y.Z,{icon:$.Z,iconSize:Y.Z.Sizes.SMALL,color:Y.Z.Colors.PRIMARY,className:St().errorBlock,children:F.Z.Messages.APPLICATION_STORE_PURCHASE_WARNING_PREORDER.format({date:(0,dt.en)(t)})},kt.PREORDER));return(0,r.jsx)(o.Fragment,{children:l})};i.renderGenericError=function(e,t){return null==e&&null==t?null:(0,r.jsx)(T.Z,{className:St().errorBlock,children:null!=e?e.message:null!=t?t.message:null})};i.renderDefaultHeader=function(e,t,n){var o=this,i=this.props,a=i.isIAP,s=i.application,l=i.sku,u=i.purchaseError;if(null==l||null==s)return null;var c=this.getPrice();return(0,r.jsxs)(N.xB,{direction:C.Z.Direction.VERTICAL,align:C.Z.Align.START,separator:!1,children:[(0,r.jsx)(tt.Z,{application:s,splashSize:880}),(0,r.jsxs)(C.Z,{align:C.Z.Align.CENTER,className:St().headerHeader,children:[(0,r.jsx)(_.vw,{tag:_.RB.H4,children:(0,mt.Y)(a,l.type)}),(0,r.jsx)(N.ol,{onClick:function(){
return o.handleClose()}})]}),(0,r.jsxs)(C.Z,{align:C.Z.Align.CENTER,className:St().headerContent,children:[(0,r.jsxs)(C.Z,{align:C.Z.Align.CENTER,children:[(0,r.jsx)(ct.Z,{game:s}),(0,r.jsx)("div",{className:St().applicationName,children:l.name})]}),(0,r.jsx)("div",{className:St().price,children:null!=c?(0,ee.T4)(c.amount,c.currency):(0,r.jsx)(ft.Z,{type:ft.Z.Type.PULSING_ELLIPSIS,className:St().priceSpinner})})]}),this.renderPurchaseWarning(),this.renderGenericError(u,n),t.length>1?(0,r.jsx)(ut.Z,{activeId:e,breadcrumbs:t,className:St().breadcrumbs}):null]})};i.render=function(){var e=this,t=this.props,n=t.sku,o=t.isFetchingSKU,i=t.isPurchasing,a=t.purchaseError,s=t.isUserEntitledToSku,l=t.forceConfirmationStepOnMount,u=t.transitionState;return null==n||o?(0,r.jsx)(ft.Z,{}):(0,r.jsx)(et,{ref:this._paymentModalRef,transitionState:u,canSubmit:null!=this.getSkuPrice(),needsToBeGift:n.type===ue.epS.DURABLE_PRIMARY&&!0===s,isGiftable:this.isGiftable,isPurchasing:i,purchaseError:a,
price:this.getPrice(),size:N.Cg.SMALL,onPurchase:this.handlePurchase,onIsGiftUpdate:p.x9,onPaymentSourceChange:this.handlePaymentSourceChange,onClose:function(){return e.handleClose()},onClearError:p.pB,renderHeader:this.renderHeader,renderConfirmationBody:this.renderConfirmation,submitButtonText:this.isGift?F.Z.Messages.APPLICATION_STORE_BUY_GIFT:F.Z.Messages.APPLICATION_STORE_BUY,initialStep:l?g.Rg.CONFIRM:null,onStepChange:this.handleStepChange,isGift:this.isGift})};!function(e,t,n){t&&Rt(e.prototype,t);n&&Rt(e,n)}(n,[{key:"closable",get:function(){var e=this._paymentModalRef.current;return null!=e&&e.closable}},{key:"isGiftable",get:function(){var e=this.props.sku;return null!=e&&e.isGiftable(this.getPrice())}},{key:"isGift",get:function(){return this.props.isGift&&this.isGiftable}}]);return n}(o.PureComponent),Gt=o.forwardRef((function(e,t){var n=e.applicationId,o=e.skuId,i=jt(e,["applicationId","skuId"]),a=(0,u.e7)([rt.Z],(function(){return rt.Z.getGame(n)})),s=Mt((0,
u.Wu)([at.Z],(function(){return[at.Z.getPricesForSku(o),at.Z.isPurchasingSKU,at.Z.error,at.Z.analyticsLocation,at.Z.promotionId,at.Z.giftCode,at.Z.isGift,at.Z.isIAP,at.Z.forceConfirmationStepOnMount]})),9),l=s[0],c=s[1],f=s[2],p=s[3],d=s[4],h=s[5],y=s[6],m=s[7],g=s[8],S=Mt((0,u.Wu)([st.Z],(function(){return[st.Z.get(o),st.Z.isFetching(o)]})),2),v=S[0],P=S[1],O=(0,u.e7)([lt.Z],(function(){return lt.Z.inTestModeForApplication(n)})),I=(0,u.e7)([it.Z,ot.default],(function(){return it.Z.isEntitledToSku(ot.default.getCurrentUser(),o,n)})),E=(0,u.e7)([b.Z],(function(){return b.Z.error}));return(0,r.jsx)(Dt,Nt(_t({},i),{application:a,applicationId:n,skuId:o,prices:l,isPurchasing:c,purchaseError:null!=E?E:f,analyticsLocation:p,promotionId:d,isIAP:m,giftCode:h,isGift:y,forceConfirmationStepOnMount:g,sku:v,isFetchingSKU:P,isInTestMode:O,isUserEntitledToSku:I,ref:t}))})),Ft=function(e){Tt(n,e);var t=Bt(n);function n(){Et(this,n);var e;(e=t.apply(this,arguments))._skuPaymentModalRef=o.createRef()
;return e}var i=n.prototype;i.close=function(){null!=this._skuPaymentModalRef.current&&this._skuPaymentModalRef.current.closable&&this.handleClose()};i.handleClose=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.props.onClose(e)};i.render=function(){var e=this;return(0,r.jsx)(Gt,Nt(_t({},this.props),{ref:this._skuPaymentModalRef,onClose:function(){return e.handleClose()}}))};return n}(o.PureComponent);const Ut=Ft},630206:(e,t,n)=>{n.d(t,{Z:()=>S});var r=n(791462),o=n(173436);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function s(e){s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return s(e)}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n)
;"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){a(e,t,n[t])}))}return e}function u(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e,t){c=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return c(e,t)}var f=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var o=s(this).constructor;n=Reflect.construct(r,arguments,o)
}else n=r.apply(this,arguments);return u(this,n)}}var d=864e5,h=!1,y=Object.freeze({userAffinties:[],inverseUserAffinties:[],lastFetched:0}),b=l({},y),m=function(){b=l({},y)};m();var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&c(e,t)}(n,e);var t=p(n);function n(){i(this,n);return t.apply(this,arguments)}var r=n.prototype;r.initialize=function(e){null!=e&&(b=e)};r.needsRefresh=function(){return Date.now()-b.lastFetched>d};r.getFetching=function(){return h};r.getState=function(){return b};r.getUserAffinities=function(){return b.userAffinties};r.getUserAffinitiesUserIds=function(){var e,t=new Set;null===(e=b.userAffinties)||void 0===e||e.forEach((function(e){t.add(e.user_id)}));return t};r.getInverseUserAffinities=function(){return b.inverseUserAffinties};r.getInverseUserAffinitiesUserIds=function(){
var e,t=new Set;null===(e=b.inverseUserAffinties)||void 0===e||e.forEach((function(e){t.add(e.user_id)}));return t};r.__getLocalVars=function(){return{USER_AFFINITY_TTL:d,fetching:h,DEFAULT_AFINITY_STORE_STATE:y,state:b,setDefaultState:m}};return n}(r.ZP.PersistedStore);g.displayName="UserAffinitiesStore";g.persistKey="UserAffinitiesStore";const S=new g(o.Z,{LOAD_USER_AFFINITIES_SUCCESS:function(e){var t,n,r=e.affinities;b.userAffinties=null!==(t=r.user_affinities)&&void 0!==t?t:[];b.inverseUserAffinties=null!==(n=r.inverse_user_affinities)&&void 0!==n?n:[];b.lastFetched=Date.now();h=!1},LOAD_USER_AFFINITIES:function(){h=!0},LOAD_USER_AFFINITIES_FAILURE:function(){h=!1},LOGOUT:function(){m()}})},513857:(e,t,n)=>{n.d(t,{u:()=>O,Z:()=>E});var r=n(785893),o=n(667294),i=n(294184),a=n.n(i),s=n(647446),l=n(511716),u=n(191940),c=n(487502),f=n(881186),p=n(959797),d=n(716523),h=n.n(d);function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}
function b(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function m(e){m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return m(e)}function g(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function S(e,t){S=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return S(e,t)}var v=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=m(e);if(t){var o=m(this).constructor
;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g(this,n)}}var O={DEFAULT:"default",SUCCESS:"success",ERROR:"error"},I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&S(e,t)}(n,e);var t=P(n);function n(){y(this,n);var e;(e=t.apply(this,arguments)).inputRef=o.createRef();e.containerRef=o.createRef();e.handleButtonClick=function(){e.select();var t=e.props;(0,t.onCopy)(t.value)};e.handleInputClick=function(){e.select()};return e}var i=n.prototype;i.select=function(){var e;null===(e=this.inputRef.current)||void 0===e||e.select()};i.renderInput=function(e){var t,n=this.props,o=n.value,i=n.mode,s=null===(t=this.context)||void 0===t?void 0:t.titleId;return(0,r.jsx)("input",{className:a()((0,l.l)(h(),"input",i),b({},h().inputHidden,e)),ref:this.inputRef,type:"text",value:o,
onClick:this.handleInputClick,readOnly:!0,"aria-labelledby":s})};i.render=function(){var e,t=this.props,n=t.text,o=void 0===n?p.Z.Messages.COPY:n,i=t.mode,f=t.hideMessage,d=t.className,y=t.buttonLook,b=null!=f;switch(i){case O.SUCCESS:e=u.Tt.GREEN;break;case O.ERROR:e=u.Tt.RED;break;default:e=this.props.buttonColor}return(0,r.jsx)(s.tE,{focusTarget:this.inputRef,ringTarget:this.containerRef,children:(0,r.jsx)("div",{className:a()((0,l.l)(h(),"copyInput",i),d),ref:this.containerRef,children:(0,r.jsxs)(c.Z,{className:h().layout,children:[(0,r.jsxs)(c.Z,{className:h().inputWrapper,children:[this.renderInput(b),b?(0,r.jsx)("div",{className:h().hiddenMessage,children:f}):null]}),(0,r.jsx)(c.Z,{shrink:1,grow:0,style:{margin:0},children:(0,r.jsx)(u.Co,{className:h().button,onClick:this.handleButtonClick,size:u.Ph.MIN,color:e,look:y,children:o})})]})})})};return n}(o.PureComponent);I.contextType=f.q3;I.defaultProps={supportsCopy:!0,buttonColor:u.Tt.PRIMARY,buttonLook:u.iL.FILLED,mode:O.DEFAULT
};I.Modes=O;I.ButtonColors=u.Tt;I.ButtonLooks=u.iL;const E=I},567397:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(785893),o=(n(667294),n(240243));function i(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function a(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function s(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++){n=i[r];t.indexOf(n)>=0||(o[n]=e[n])}return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++){n=i[r]
;t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}}return o}function l(e){var t=e.width,n=void 0===t?14:t,l=e.height,u=void 0===l?14:l,c=e.color,f=void 0===c?"currentColor":c,p=e.foreground,d=s(e,["width","height","color","foreground"]);return(0,r.jsx)("svg",a(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){i(e,t,n[t])}))}return e}({},(0,o.Z)(d)),{width:n,height:u,viewBox:"0 0 14 14",children:(0,r.jsx)("path",{className:p,fill:f,d:"M12,0 C12.8284271,0 14,1.17157288 14,2 L14,12 C14,12.8284271 12.8284271,14 12,14 L2,14 C1.17157288,14 0,12.8284271 0,12 L0,2 C0,1.17157288 1.17157288,0 2,0 L12,0 Z M8,3 L6,3 L6,8 L8,8 L8,3 Z M8,11 L8,9 L6,9 L6,11 L8,11 Z"})}))}},672561:(e,t,n)=>{n.d(t,{Z:()=>r});const r=[{
label:"Alberta",value:"AB"},{label:"British Columbia",value:"BC"},{label:"Manitoba",value:"MB"},{label:"New Brunswick",value:"NB"},{label:"Newfoundland and Labrador",value:"NL"},{label:"Nova Scotia",value:"NS"},{label:"Ontario",value:"ON"},{label:"Prince Edward Island",value:"PE"},{label:"Quebec",value:"QC"},{label:"Saskatchewan",value:"SK"},{label:"Northwest Territories",value:"NT"},{label:"Nunavut",value:"NU"},{label:"Yukon",value:"YT"}]},188068:(e,t,n)=>{n.d(t,{Z:()=>r});const r=[{label:"Alabama",value:"AL"},{label:"Alaska",value:"AK"},{label:"American Samoa",value:"AS"},{label:"Arizona",value:"AZ"},{label:"Arkansas",value:"AR"},{label:"Armed Forces: Americas",value:"AA"},{label:"Armed Forces: Europe",value:"AE"},{label:"Armed Forces: Pacific",value:"AP"},{label:"California",value:"CA"},{label:"Colorado",value:"CO"},{label:"Connecticut",value:"CT"},{label:"Delaware",value:"DE"},{label:"District Of Columbia",value:"DC"},{label:"Federated States Of Micronesia",value:"FM"},{
label:"Florida",value:"FL"},{label:"Georgia",value:"GA"},{label:"Guam",value:"GU"},{label:"Hawaii",value:"HI"},{label:"Idaho",value:"ID"},{label:"Illinois",value:"IL"},{label:"Indiana",value:"IN"},{label:"Iowa",value:"IA"},{label:"Kansas",value:"KS"},{label:"Kentucky",value:"KY"},{label:"Louisiana",value:"LA"},{label:"Maine",value:"ME"},{label:"Marshall Islands",value:"MH"},{label:"Maryland",value:"MD"},{label:"Massachusetts",value:"MA"},{label:"Michigan",value:"MI"},{label:"Minnesota",value:"MN"},{label:"Mississippi",value:"MS"},{label:"Missouri",value:"MO"},{label:"Montana",value:"MT"},{label:"Nebraska",value:"NE"},{label:"Nevada",value:"NV"},{label:"New Hampshire",value:"NH"},{label:"New Jersey",value:"NJ"},{label:"New Mexico",value:"NM"},{label:"New York",value:"NY"},{label:"North Carolina",value:"NC"},{label:"North Dakota",value:"ND"},{label:"Northern Mariana Islands",value:"MP"},{label:"Ohio",value:"OH"},{label:"Oklahoma",value:"OK"},{label:"Oregon",value:"OR"},{label:"Palau",
value:"PW"},{label:"Pennsylvania",value:"PA"},{label:"Puerto Rico",value:"PR"},{label:"Rhode Island",value:"RI"},{label:"South Carolina",value:"SC"},{label:"South Dakota",value:"SD"},{label:"Tennessee",value:"TN"},{label:"Texas",value:"TX"},{label:"Utah",value:"UT"},{label:"Vermont",value:"VT"},{label:"Virgin Islands",value:"VI"},{label:"Virginia",value:"VA"},{label:"Washington",value:"WA"},{label:"West Virginia",value:"WV"},{label:"Wisconsin",value:"WI"},{label:"Wyoming",value:"WY"}]}}]);
//# sourceMappingURL=b37f6169ec527539c123.js.map