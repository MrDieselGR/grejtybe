(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[87562],{429547:(e,n,t)=>{e.exports=t.p+"750214196f39660492a313dbe5c84fe4.svg"},834005:(e,n,t)=>{e.exports=t.p+"68458539d5672f6045fff5d505dd566a.svg"},799880:(e,n,t)=>{"use strict";t.d(n,{Z:()=>f});var r=t(785893),s=t(667294),l=t(294184),i=t.n(l),a=t(678081),o=t(191940),u=t(393369),c=t.n(u);function f(e){var n=e.filename,t=e.className,l=e.filters,u=e.buttonText,f=e.placeholder,d=e.onFileSelect,m=s.useRef(null);return(0,r.jsxs)("div",{className:i()(t,c().fileUpload),children:[(0,r.jsx)("input",{className:c().fileUploadInput,tabIndex:-1,readOnly:!0,placeholder:f,type:"text",value:n}),(0,r.jsxs)(o.Co,{size:o.Co.Sizes.MIN,className:c().fileUploadButton,children:[u,(0,r.jsx)(a.Z,{ref:m,tabIndex:-1,onChange:function(e){var n=e.currentTarget.files[0];d(n)},multiple:!1,filters:l})]})]})}},687562:(e,n,t)=>{"use strict";t.r(n);t.d(n,{default:()=>fe})
;var r=t(785893),s=t(667294),l=t(294184),i=t.n(l),a=t(468811),o=t.n(a),u=t(791462),c=t(489992),f=t(152163),d=t(877414),m=t(725616),p=t(536989),I=t(799880),_=t(204660),E=t(80635),v=t(859023),g=t(191940),h=t(629858),L=t(487502),T=t(761434),D=t(309494),b=t(801593),y=t(757987),O=t(562181),S=t(983319),j=t(436035),x=t(67416),C=t(932847),P=t(371452),R=t(95467),U=t(894827),Z=t(942604),N=t(70804),A=t(893264),M=t(673973),w=t(493266),k=t(796165),K=t(461061),G=t(959797),z=t(679900),B=t.n(z),F=t(429547),H=t.n(F),V=t(834005),q=t.n(V);function W(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Y(e,n,t,r,s,l,i){try{var a=e[l](i),o=a.value}catch(e){t(e);return}a.done?n(o):Promise.resolve(o).then(r,s)}function J(e){return function(){var n=this,t=arguments;return new Promise((function(r,s){var l=e.apply(n,t);function i(e){Y(l,r,s,i,a,"next",e)}function a(e){Y(l,r,s,i,a,"throw",e)}i(void 0)}))}}function X(e,n,t){n in e?Object.defineProperty(e,n,{
value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t;return e}function $(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))));r.forEach((function(n){X(e,n,t[n])}))}return e}function Q(e,n){n=null!=n?n:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})));t.push.apply(t,r)}return t}(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}));return e}function ee(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){
var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,s,l=[],i=!0,a=!1;try{for(t=t.call(e);!(i=(r=t.next()).done);i=!0){l.push(r.value);if(n&&l.length===n)break}}catch(e){a=!0;s=e}finally{try{i||null==t.return||t.return()}finally{if(a)throw s}}return l}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return W(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return W(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ne=function(e,n){var t,r,s,l,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return l={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){
return this}),l;function a(l){return function(a){return function(l){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,r&&(s=2&l[0]?r.return:l[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,l[1])).done)return s;(r=0,s)&&(l=[2&l[0],s.value]);switch(l[0]){case 0:case 1:s=l;break;case 4:i.label++;return{value:l[1],done:!1};case 5:i.label++;r=l[1];l=[0];continue;case 7:l=i.ops.pop();i.trys.pop();continue;default:if(!(s=i.trys,s=s.length>0&&s[s.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!s||l[1]>s[0]&&l[1]<s[3])){i.label=l[1];break}if(6===l[0]&&i.label<s[1]){i.label=s[1];s=l;break}if(s&&i.label<s[2]){i.label=s[2];i.ops.push(l);break}s[2]&&i.ops.pop();i.trys.pop();continue}l=n.call(e,i)}catch(e){l=[6,e];r=0}finally{t=s=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,a])}}},te=320,re=new Set(["application/json","image/png","image/apng"]),se=[{extensions:["json","png","apng"]}];function le(e,n){
C.default.track(K.rMx.STICKER_UPLOAD_COMPLETED,{successful:e,error:null!=n?n:""})}var ie=function(e){var n=e.stickerPreview;return(0,r.jsxs)("div",{className:B().preview,children:[(0,r.jsx)("div",{className:B().previewDark,children:null!=n?n:(0,r.jsx)("img",{src:H(),alt:G.Z.Messages.GUILD_STICKER_PREVIEW_IMG_ALT_DARK})}),(0,r.jsx)("div",{className:B().previewLight,children:null!=n?n:(0,r.jsx)("img",{src:q(),alt:G.Z.Messages.GUILD_STICKER_PREVIEW_IMG_ALT_LIGHT})})]})};function ae(e){if(null==e)return null;var n={className:B().emoji,emojiName:e.optionallyDiverseSequence,autoplay:!0};return function(){return(0,r.jsx)(f.Z,$({},n))}}var oe=function(e){var n=e.emoji,t=e.onSelectEmoji;return(0,r.jsx)(T.ZP,{animation:T.ZP.Animation.NONE,position:T.ZP.Positions.TOP,renderPopout:function(e){var n=e.closePopout;return(0,r.jsx)(p.Z,{closePopout:n,pickerIntention:K.HzX.GUILD_STICKER_RELATED_EMOJI,onNavigateAway:n,onSelectEmoji:function(e,r){t(e);r&&n()}})},children:function(e,t){var s=t.isShown
;return(0,r.jsxs)("div",Q($({className:B().emojiInputContainer},e),{children:[(0,r.jsx)(h.Z,{className:B().emojiButton,active:s,tabIndex:0,renderButtonContents:ae(n)}),(0,r.jsx)(b.ZP,{inputClassName:B().emojiText,placeholder:G.Z.Messages.GUILD_STICKER_UPLOAD_RELATED_EMOJI_PLACEHOLDER,value:null!=n?":".concat(n.uniqueName,":"):"",readOnly:!0})]}))}})};function ue(e){return ce.apply(this,arguments)}function ce(){return(ce=J((function(e){var n,t,r;return ne(this,(function(s){switch(s.label){case 0:return[4,(0,U.fD)(e)];case 1:n=s.sent();(t=new Image).src=n;return[4,t.decode()];case 2:s.sent();r=(0,_.Ae)(t,te,te);return[2,(0,U.Bo)(r,e.name,e.type)]}}))}))).apply(this,arguments)}function fe(e){var n,t,l,a,f,p,_,h,T,z=e.transitionState,F=e.onClose,H=e.guildId,V=e.sticker,q=(0,u.e7)([E.Z],(function(){return E.Z.theme
})),W=null!==(t=null===(n=v.default.getCurrentUser())||void 0===n?void 0:n.isStaff())&&void 0!==t&&t?k.OC:k.Ht,Y=ee(s.useState(null),2),X=Y[0],Q=Y[1],te=ee(s.useState(null!==(l=null==V?void 0:V.name)&&void 0!==l?l:""),2),ae=te[0],ce=te[1],fe=ee(s.useState({file:null,filename:null!==(a=(0,M._V)(V))&&void 0!==a?a:""}),2),de=fe[0],me=fe[1],pe=ee(s.useState(null!=(null==V?void 0:V.tags)&&null!==(f=m.Z.getByName(V.tags))&&void 0!==f?f:null),2),Ie=pe[0],_e=pe[1],Ee=ee(s.useState(null!==(p=null==V?void 0:V.description)&&void 0!==p?p:""),2),ve=Ee[0],ge=Ee[1],he=ee(s.useState(!1),2),Le=he[0],Te=he[1],De=ee(s.useState(null),2),be=De[0],ye=De[1],Oe=d.Z.useExperiment({}).enabled,Se=null!=V,je=Se||null!=(null==de?void 0:de.file),xe=0===ve.length||ve.length>=2&&ve.length<=100,Ce=!Le&&!0!==(null==be?void 0:be.isBlocking)&&ae.length>=2&&(null!=Ie||null!=(null==V?void 0:V.tags)&&""!==(null==V?void 0:V.tags))&&je&&xe,Pe=N.h.getCurrentConfig({guildId:H}).enabled,Re=(_=J((function(e){var n,t,r,s,l,i,a
;return ne(this,(function(u){switch(u.label){case 0:t=null==e||null===(n=e.type)||void 0===n?void 0:n.split(";")[0];if(!re.has(t)){ye({message:G.Z.Messages.GUILD_STICKER_UNKNOWN_MIME_TYPE,isBlocking:!0});return[2]}r=e;return Oe&&"image/png"===t&&e.size>W?[4,ue(e)]:[3,2];case 1:r=u.sent();s=r.size>W;C.default.track(K.rMx.STICKER_FILE_RESIZED,{original_file_size_bytes:e.size,resized_file_size_bytes:r.size,resized_file_too_big:s});u.label=2;case 2:if(r.size>W){ye({message:G.Z.Messages.GUILD_STICKER_FILE_TOO_BIG.format({maxSize:(0,P.IC)(W,{useKibibytes:!0})}),isBlocking:null==de.file});C.default.track(K.rMx.STICKER_UPLOAD_FILE_SIZE_LIMIT_EXCEEDED,{size:r.size,filetype:t});return[2]}if((l=(0,M.Zv)(r.type))!==A.u3.LOTTIE)return[3,3];if(!Pe){ye({message:G.Z.Messages.GUILD_STICKER_UNSUPPORTED_MIME_TYPE.format({articleURL:R.Z.getArticleURL(K.BhN.STICKERS_UPLOAD)}),isBlocking:!0});return[2]}(i=new FileReader).addEventListener("load",(function(){Q({id:o().v4(),formatType:l,content:i.result})
;ye(null)}));i.readAsText(r);return[3,5];case 3:return[4,(0,U.fD)(r)];case 4:a=u.sent();Q({id:o().v4(),formatType:l,content:a});ye(null);u.label=5;case 5:me({file:r,filename:r.name});return[2]}}))})),function(e){return _.apply(this,arguments)}),Ue=function(){var e=J((function(e){var n,t,r,s,l,i,a,o;return ne(this,(function(u){switch(u.label){case 0:e.preventDefault();r=null!==(t=null!==(n=null==Ie?void 0:Ie.uniqueName)&&void 0!==n?n:null==V?void 0:V.tags)&&void 0!==t?t:"";u.label=1;case 1:u.trys.push([1,6,7,8]);Te(!0);return Se?[4,(0,Z.Jf)(H,null!==(s=null==V?void 0:V.id)&&void 0!==s?s:"",{name:ae,tags:r,description:ve})]:[3,3];case 2:u.sent();return[3,5];case 3:(i=new FormData).append("name",ae);i.append("tags",r);i.append("description",ve);null!=(null==de?void 0:de.file)&&i.append("file",de.file);c=null!==(a=null===(l=de.file)||void 0===l?void 0:l.type)&&void 0!==a?a:"",C.default.track(K.rMx.STICKER_UPLOAD_STARTED,{filetype:c});return[4,(0,Z.lY)(H,i)];case 4:u.sent();le(!0);u.label=5
;case 5:F();return[3,8];case 6:o=u.sent();ye({message:o.body.message,isBlocking:!1});le(!1,o.body.message);return[3,8];case 7:Te(!1);return[7];case 8:return[2]}var c}))}));return function(n){return e.apply(this,arguments)}}(),Ze=s.useCallback((function(){ye({message:G.Z.Messages.GUILD_STICKER_INVALID_STICKER,isBlocking:!0})}),[]),Ne=function(e){var n=e.sticker,t=e.previewData,s=e.onStickerError;if(null!=n)return(0,r.jsx)(w.ZP,{size:160,sticker:n});if(null==t)return null;var l=t.id,i=t.formatType,a=t.content;return(0,r.jsx)(w.ZP,{assetData:a,fileUri:a,size:160,sticker:{name:l,description:"",id:l,pack_id:"",format_type:i},onError:s},l)}({sticker:V,previewData:X,onStickerError:Ze}),Ae=Pe?G.Z.Messages.GUILD_STICKER_UPLOAD_DESCRIPTION:G.Z.Messages.GUILD_STICKER_UPLOAD_DESCRIPTION_NO_LOTTIE;return(0,r.jsxs)(x.Y0,{transitionState:z,"aria-labelledby":"STICKER_UPLOAD_MODAL",className:B().modal,children:[(0,r.jsx)(x.ol,{onClick:F,className:B().modalClose}),(0,r.jsxs)("form",{onSubmit:Ue,
className:B().form,children:[(0,r.jsxs)(x.hz,{className:B().modalContent,children:[(0,r.jsxs)(x.xB,{direction:L.Z.Direction.VERTICAL,separator:!1,className:B().modalHeader,children:[(0,r.jsx)(c.X6,{variant:"heading-xl/semibold",className:B().modalHeaderTitle,children:G.Z.Messages.GUILD_STICKER_UPLOAD_TITLE}),(0,r.jsx)(c.xv,{variant:"text-md/normal",children:Ae.format({fileSize:(0,P.IC)(k.Ht,{useKibibytes:!0})})})]}),(0,r.jsx)(O.hj,{title:G.Z.Messages.GUILD_STICKER_UPLOAD_PREVIEW_TITLE,className:B().formItem,children:(0,r.jsx)(ie,{stickerPreview:Ne})}),(0,r.jsxs)(O.hj,{className:i()(B().formItem,B().formItemRow),children:[(0,r.jsx)(S.Z,{title:Se?G.Z.Messages.GUILD_STICKER_UPLOAD_FILE_TITLE_BLOCKED:G.Z.Messages.GUILD_STICKER_UPLOAD_FILE_TITLE,required:!0,className:B().formItemRowChild,children:Se?(0,r.jsx)(b.ZP,{disabled:!0,value:null!==(h=null==de?void 0:de.filename)&&void 0!==h?h:""}):(0,r.jsx)(I.Z,{buttonText:G.Z.Messages.GUILD_STICKER_UPLOAD_FILE_BUTTON,filters:se,
filename:null!==(T=null==de?void 0:de.filename)&&void 0!==T?T:"",placeholder:G.Z.Messages.GUILD_STICKER_UPLOAD_FILE_PLACEHOLDER,onFileSelect:Re})}),(0,r.jsx)(S.Z,{title:G.Z.Messages.GUILD_STICKER_UPLOAD_RELATED_EMOJI_TITLE,required:!0,className:B().formItemRowChild,children:(0,r.jsx)(oe,{emoji:Ie,onSelectEmoji:_e})})]}),(0,r.jsx)(S.Z,{title:G.Z.Messages.GUILD_STICKER_UPLOAD_NAME_TITLE,required:!0,className:B().formItem,children:(0,r.jsx)(b.ZP,{value:ae,onChange:ce,placeholder:G.Z.Messages.GUILD_STICKER_UPLOAD_NAME_PLACEHOLDER,maxLength:30})}),(0,r.jsxs)("div",{className:B().formItem,children:[(0,r.jsxs)(O.vw,{children:[G.Z.Messages.GUILD_STICKER_UPLOAD_DESCRIPTION_TITLE,(0,r.jsx)(y.ZP,{text:G.Z.Messages.GUILD_STICKER_UPLOAD_DESCRIPTION_TOOLTIP,children:function(e){return(0,r.jsx)(j.Z,$({className:B().infoIcon},e))}})]}),(0,r.jsx)(D.Z,{value:ve,onChange:ge,placeholder:G.Z.Messages.GUILD_STICKER_UPLOAD_DESCRIPTION_PLACEHOLDER,maxLength:100})]}),null!=be&&(0,r.jsx)(c.xv,{
className:B().formItem,variant:"text-sm/normal",color:"text-danger",children:be.message})]}),(0,r.jsxs)(x.mz,{className:B().modalFooter,children:[(0,r.jsx)(g.Co,{type:"submit",disabled:!Ce,children:Se?G.Z.Messages.GUILD_STICKERS_UPDATE:G.Z.Messages.UPLOAD}),(0,r.jsx)(g.Co,{look:g.Co.Looks.LINK,color:q===K.BRd.LIGHT?g.Co.Colors.PRIMARY:g.Co.Colors.WHITE,onClick:F,children:G.Z.Messages.NEVERMIND})]})]})]})}}}]);
//# sourceMappingURL=67993d04ec8444a21610.js.map