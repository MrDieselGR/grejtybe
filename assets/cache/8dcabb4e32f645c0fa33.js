"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[74581],{560891:(e,t,r)=>{r.d(t,{X5:()=>u,a8:()=>l,h8:()=>i,xQ:()=>o});var n=r(213192);var i,o,u=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);this.id=t;this.text=t},l=r.n(n)()({UP:null,DOWN:null});!function(e){e.GUILD="GUILD";e.TEXT_CHANNEL="TEXT_CHANNEL";e.GROUP_DM="GROUP_DM";e.VOICE_CHANNEL="VOICE_CHANNEL";e.USER="USER";e.HEADER="HEADER";e.APPLICATION="APPLICATION";e.SKU="SKU";e.LINK="LINK"}(i||(i={}));!function(e){e.USER="@";e.TEXT_CHANNEL="#";e.VOICE_CHANNEL="!";e.GUILD="*";e.APPLICATION="$"}(o||(o={}))},839146:(e,t,r)=>{r.d(t,{Z:()=>n});function n(e,t){if(e.score===t.score){
var r,n,i,o,u,l,a=null!==(o=null!==(i=e.sortable)&&void 0!==i?i:null===(r=e.comparator)||void 0===r?void 0:r.toLocaleLowerCase())&&void 0!==o?o:"",c=null!==(l=null!==(u=e.sortable)&&void 0!==u?u:null===(n=t.comparator)||void 0===n?void 0:n.toLocaleLowerCase())&&void 0!==l?l:"";if(a<c)return-1;if(a>c)return 1}return t.score-e.score}},661311:(e,t,r)=>{r.d(t,{eb:()=>n,cO:()=>a,kl:()=>c});var n,i=r(108580),o=r(590483),u=r(673973),l=r(461061);!function(e){e[e.SENDABLE=0]="SENDABLE";e[e.SENDABLE_WITH_PREMIUM=1]="SENDABLE_WITH_PREMIUM";e[e.NONSENDABLE=2]="NONSENDABLE";e[e.SENDABLE_WITH_BOOSTED_GUILD=3]="SENDABLE_WITH_BOOSTED_GUILD"}(n||(n={}));var a=function(e,t,r){if(null==t)return n.NONSENDABLE;var a=o.ZP.canUseStickersEverywhere(t);return(0,u.jl)(e)?a?n.SENDABLE:n.SENDABLE_WITH_PREMIUM:(0,u.J8)(e)&&null!=r?e.available?null!=r.guild_id&&""!==r.guild_id&&r.guild_id===e.guild_id?n.SENDABLE:null==r.guild_id||i.ZP.can({permission:l.Plq.USE_EXTERNAL_STICKERS,user:t,context:r
})?a?n.SENDABLE:n.SENDABLE_WITH_PREMIUM:n.NONSENDABLE:n.SENDABLE_WITH_BOOSTED_GUILD:n.NONSENDABLE},c=function(e,t,r){return a(e,t,r)===n.SENDABLE}},464216:(e,t,r)=>{r.d(t,{Z:()=>_});var n=r(496486),i=r.n(n),o=r(791462),u=r(173436),l=r(528275),a=r(537127),c=r(876679),s=r(461061),f=r(228031);function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(e,n.key,n)}}function y(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r;return e}function v(e){v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return v(e)}function h(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){
var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}));return e}function g(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e,t){b=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return b(e,t)}var m=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var r,n=v(e);if(t){var i=v(this).constructor
;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return g(this,r)}}var O={pendingUsages:[]},A=(s.UF9.DAY,new l.Z({computeBonus:function(){return 100},computeWeight:function(e){var t=0;e<=3?t=100:e<=15?t=70:e<=30?t=50:e<=45?t=30:e<=80&&(t=10);return t},lookupKey:function(e){return c.Z.getStickerById(e)},afterCompute:function(){},numFrequentlyItems:20})),L=function(e){var t=e.stickerIds;null==t||t.forEach((function(e){A.track(e);O.pendingUsages.push({key:e,timestamp:Date.now()})}));A.compute()},w=function(){A.compute()};function S(){var e,t=null===(e=a.Z.frecencyWithoutFetchingLatest.stickerFrecency)||void 0===e?void 0:e.stickers;if(null==t)return!1;A.overwriteHistory(i().mapValues(t,(function(e){return h(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){
return Object.getOwnPropertyDescriptor(r,e).enumerable}))));n.forEach((function(t){y(e,t,r[t])}))}return e}({},e),{recentUses:e.recentUses.map(Number).filter((function(e){return e>0}))})})),O.pendingUsages)}var I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&b(e,t)}(r,e);var t=E(r);function r(){p(this,r);return t.apply(this,arguments)}var n=r.prototype;n.initialize=function(e){this.waitFor(c.Z);null!=e&&(O=e);this.syncWith([c.Z],w);this.syncWith([a.Z],S)};n.getState=function(){return O};n.hasPendingUsage=function(){return O.pendingUsages.length>0};n.__getLocalVars=function(){return{state:O,NUM_FREQUENTLY_USED_STICKERS:20,stickerFrecency:A,handleStickersUsage:L,handleStickersStoreUpdate:w}};!function(e,t,r){t&&d(e.prototype,t);r&&d(e,r)}(r,[{key:"stickerFrecencyWithoutFetchingLatest",get:function(){
return A}}]);return r}(o.ZP.PersistedStore);I.displayName="StickersPersistedStore";I.persistKey="StickersPersistedStoreV2";const _=new I(u.Z,{STICKER_TRACK_USAGE:L,USER_SETTINGS_PROTO_UPDATE:function(e){var t=e.settings.type,r=e.wasSaved;if(t!==f.yP.FRECENCY_AND_FAVORITES_SETTINGS||!r)return!1;O.pendingUsages=[]}})},218786:(e,t,r)=>{r.d(t,{Z:()=>re});var n=r(824390),i=r.n(n),o=r(496486),u=r.n(o),l=r(730381),a=r.n(l),c=r(791462),s=r(173436),f=r(109247),p=r(817513),d=r(258698),y=r(367124),v=r(800539),h=r(73462),g=r(893321),b=r(277499),m=r(977449),E=r(134734),O=r(937689),A=r(604860),L=r(90816),w=r(57203),S=r(742269),I=r(588641),_=r(564379),Z=r(286283),N=r(461061);function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function C(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0)
;Object.defineProperty(e,n.key,n)}}function T(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r;return e}function U(e){U=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return U(e)}function D(e,t){return!t||"object"!==k(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function M(e,t){M=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return M(e,t)}function q(e){return function(e){if(Array.isArray(e))return P(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return P(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r)
;if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return P(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var k=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var r,n=U(e);if(t){var i=U(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return D(this,r)}}var G,x=a()().subtract(1,"week"),B=[],F="",H=!1;function V(e,t){return e.application.name.localeCompare(t.application.name,p.default.locale,{sensitivity:"base"})}function K(e,t){
return null!=e&&(a()(e.createdAt).isAfter(x)&&0===t)}var Q=(T(G={},N.iEv.NAME,V),T(G,N.iEv.PLATFORM,(function(e,t,r){var n=e.libraryApplication.getDistributor(),i=t.libraryApplication.getDistributor();return n===i?(r===N.sHY.DESCENDING?-1:1)*V(e,t):null==n?1:null==i?-1:n.localeCompare(i)})),T(G,N.iEv.LAST_PLAYED,(function(e,t){return e.isNew&&!t.isNew?-1:!e.isNew&&t.isNew?1:e.lastPlayed===t.lastPlayed?0:e.lastPlayed>t.lastPlayed?-1:1})),T(G,N.iEv.ACTIONS,null),G),z=(0,A.oH)((function(e){return e.filter((function(e){return null!=e.libraryApplication&&e.shouldShowInLibrary}))})),W=(0,A.oH)((function(e){return e.filter((function(e){return null!=e.libraryApplication&&E.Z.isLaunchable(e.libraryApplication.id,e.libraryApplication.branchId)}))})),Y=(0,A.oH)((function(e,t){return e.filter((function(e){return i()(t.toLowerCase(),e.application.name.toLowerCase())}))})),X=(0,A.oH)((function(e,t,r,n){var i=Q[t];if(null==i)return e;var o=q(e).sort(i);return r===N.sHY.DESCENDING?o.reverse():o
})),J=(0,A.oH)((function(e){return e.filter((function(e){return null!=e.libraryApplication&&e.libraryApplication.isHidden()}))}));function $(e,t){var r=b.Z.getCurrentUserStatisticsForApplication(e.id);if(null!=r)return new Date(r.last_played_at).getTime();var n=t[e.id];return null!=n?n:0}function ee(){var e=new Set(h.Z.getRunningVerifiedApplicationIds()),t={},r=new Set,n=h.Z.getGamesSeen(!1,!1).map((function(e){var r=y.Z.getGameBySettingGame(e);if(null!=r){t[r.id]=1e3*e.lastFocused;return r.id}return null})),i=Object.values(v.Z.getAllLibraryApplications()).map((function(n){return function(e,t,r,n,i){if(!i&&t.has(e.id))return null;var o=y.Z.getGame(e.id);if(null==o)return null;var u=$(o,r);t.add(e.id);return(0,w.Je)(e)||E.Z.isInstalled(e.id,e.branchId)?{key:"".concat(e.id,"-").concat(e.branchId),application:o,libraryApplication:e,lastPlayed:u,supportsCloudSync:null!=e&&E.Z.supportsCloudSync(e.id,e.branchId),isNew:K(e,u),isLaunching:f.Z.launchingGames.has(e.id),isRunning:n.has(e.id),
isLaunchable:(0,_.t)({LibraryApplicationStore:v.Z,LaunchableGameStore:f.Z,DispatchApplicationStore:E.Z,ConnectedAppsStore:d.Z,applicationId:e.id,branchId:e.branchId}),isUpdatingFlags:v.Z.isUpdatingFlags(e.id,e.branchId),shouldShowInLibrary:(0,w.d0)(o,e,g.Z),defaultAction:(0,Z.i)(e,E.Z,O.Z)}:null}(n,r,t,e,!0)})).filter(L.lm),o=n.map((function(n){return function(e,t,r,n){var i=null!=e?y.Z.getGame(e):null;if(null==i||null==e||t.has(e))return null;var o=$(i,r);t.add(e);return{key:e,application:i,lastPlayed:o,supportsCloudSync:!1,isNew:!1,isLaunching:f.Z.launchingGames.has(e),isRunning:n.has(e),isLaunchable:(0,_.t)({LibraryApplicationStore:v.Z,LaunchableGameStore:f.Z,DispatchApplicationStore:E.Z,ConnectedAppsStore:d.Z,applicationId:e,branchId:null}),isUpdatingFlags:!1,shouldShowInLibrary:!1,libraryApplication:null,defaultAction:null}}(n,r,t,e)})).filter(L.lm),l=q(o).concat(q(i)).sort((function(e,t){return e.lastPlayed===t.lastPlayed?0:e.lastPlayed>t.lastPlayed?-1:1}))
;H=null!=y.Z.lastFetched&&v.Z.fetched;if(u().isEqual(l,B))return!1;B=l;S.FB&&I.default.setSystemTrayApplications(W(B).map((function(e){return e.application})).slice(0,5));return!0}var te=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&M(e,t)}(r,e);var t=j(r);function r(){C(this,r);return t.apply(this,arguments)}var n=r.prototype;n.initialize=function(){this.syncWith([y.Z,f.Z,h.Z,E.Z,O.Z,v.Z,b.Z,g.Z,d.Z],ee,200);this.syncWith([m.Z,p.default],(function(){return!0}))};n.__getLocalVars=function(){return{MAX_SYSTEM_TRAY_ITEMS:5,NEW_GAME_THRESHOLD:x,applicationViewItems:B,applicationFilterQuery:F,hasFetchedApplications:H,SORT_FUNCTIONS:Q,getLibraryApplicationViewItems:z,getLaunchableApplicationViewItems:W,getFilteredLibraryApplicationViewItems:Y,getSortedFilteredLibraryApplicationViewItems:X,
getHiddenLibraryApplicationViewItems:J}};!function(e,t,r){t&&R(e.prototype,t);r&&R(e,r)}(r,[{key:"applicationFilterQuery",get:function(){return F}},{key:"applicationViewItems",get:function(){return B}},{key:"launchableApplicationViewItems",get:function(){return W(B)}},{key:"libraryApplicationViewItems",get:function(){return z(B)}},{key:"filteredLibraryApplicationViewItems",get:function(){return Y(this.libraryApplicationViewItems,F)}},{key:"sortedFilteredLibraryApplicationViewItems",get:function(){return X(this.filteredLibraryApplicationViewItems,m.Z.sortKey,m.Z.sortDirection,p.default.locale)}},{key:"hiddenLibraryApplicationViewItems",get:function(){return J(B)}},{key:"hasFetchedApplications",get:function(){return H}}]);return r}(c.ZP.Store);te.displayName="ApplicationViewStore";const re=new te(s.Z,{LIBRARY_APPLICATION_FILTER_UPDATE:function(e){var t=e.query;F=t}})},286283:(e,t,r)=>{r.d(t,{i:()=>o});var n=r(564379),i=r(461061);function o(e,t,r){
var o=t.getState(e.id,e.branchId),u=r.getQueuePosition(e.id,e.branchId),l=r.paused;if(null!=o){if(null==u||-1===u)switch(o.type){case i.vxO.INSTALLING:return i.apO.INSTALL;case i.vxO.UPDATING:case i.vxO.UPDATE_REQUIRED:return i.apO.UPDATE}switch(o.type){case i.vxO.INSTALLING:case i.vxO.UPDATING:case i.vxO.UPDATE_REQUIRED:case i.vxO.REPAIRING:return u>0?i.apO.MOVE_UP:l?i.apO.RESUME:i.apO.PAUSE;case i.vxO.UP_TO_DATE:return i.apO.PLAY;case i.vxO.UNINSTALLING:return null}}return null!=u&&u>0?i.apO.MOVE_UP:(0,n.Q)()?i.apO.INSTALL:null}},977449:(e,t,r)=>{r.d(t,{Z:()=>w});var n=r(496486),i=r.n(n),o=r(791462),u=r(444450),l=r(173436),a=r(461061);function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(e,n.key,n)}}function f(e){f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){
return e.__proto__||Object.getPrototypeOf(e)};return f(e)}function p(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e,t){d=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return d(e,t)}var y=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return p(this,r)}}var h,g="GameLibraryViewStore",b=a.sHY.ASCENDING,m=a.iEv.LAST_PLAYED,E=!1,O=i().debounce((function(){E=!1;L.emitChange()}),200)
;var A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&d(e,t)}(r,e);var t=v(r);function r(){c(this,r);return t.apply(this,arguments)}var n=r.prototype;n.initialize=function(){var e,t=null!==(e=u.Z.get(g))&&void 0!==e?e:{};if(null!=t.sortDirection&&null!=t.sortKey){b=t.sortDirection;m=t.sortKey}};n.__getLocalVars=function(){return{STORAGE_KEY:g,DISABLE_MOUSE_TIMEOUT:200,sortDirection:b,sortKey:m,activeRowKey:h,isNavigatingByKeyboard:E,disableKeyboardMode:O,storeInstance:L}};!function(e,t,r){t&&s(e.prototype,t);r&&s(e,r)}(r,[{key:"sortDirection",get:function(){return b}},{key:"sortKey",get:function(){return m}},{key:"activeRowKey",get:function(){return h}},{key:"isNavigatingByKeyboard",get:function(){return E}}]);return r}(o.ZP.Store);A.displayName="GameLibraryViewStore";var L=new A(l.Z,{
LIBRARY_TABLE_SORT_UPDATE:function(e){var t=e.direction,r=e.key;b=t;m=r;u.Z.set(g,{sortDirection:b,sortKey:m})},LIBRARY_TABLE_ACTIVE_ROW_ID_UPDATE:function(e){var t=e.key;if(e.isKeyboardEvent){E=!0;O()}h=t}});const w=L},774581:(e,t,r)=>{r.d(t,{ZP:()=>fe});var n=r(824390),i=r.n(n),o=r(496486),u=r.n(o),l=r(839146),a=r(53211),c=r(356004),s=r(461061);function f(e){if(null==e.parent_id)return e.type===s.d4z.GUILD_CATEGORY?1e3*(e.position+1):e.position;var t,r,n=1e3*((null!==(r=null===(t=c.Z.getChannel(e.parent_id))||void 0===t?void 0:t.position)&&void 0!==r?r:0)+1);return e.isGuildVocal()?n+e.position+500:n+e.position}function p(e,t){var r,n;if(e.score!==t.score)return t.score-e.score;var i,o,u=f(e.record),l=f(t.record);if(u!==l)return u-l
;var a,c,s=null!==(o=null!==(i=e.sortable)&&void 0!==i?i:null===(r=e.comparator)||void 0===r?void 0:r.toLocaleLowerCase())&&void 0!==o?o:"",p=null!==(c=null!==(a=e.sortable)&&void 0!==a?a:null===(n=t.comparator)||void 0===n?void 0:n.toLocaleLowerCase())&&void 0!==c?c:"";return s<p?-1:s>p?1:0}var d=r(832691),y=r(661311),v=r(464216),h=r(876679),g=r(893264),b=r(577028),m=r(180918),E=r(53551),O=r(948571),A=r(392115),L=r(1812),w=r(212218),S=r(653772),I=r(171447),_=r(940712),Z=r(962564),N=r(105405),P=r(379822),C=r(971738),R=r(859023),T=r(512238),U=r(90816),D=r(462020),M=r(108580),q=r(763611),k=r(912551),j=r(560891);function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function x(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r;return e}function B(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){
var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}));return e}function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o=[],u=!0,l=!1;try{for(r=r.call(e);!(u=(n=r.next()).done);u=!0){o.push(n.value);if(t&&o.length===t)break}}catch(e){l=!0;i=e}finally{try{u||null==r.return||r.return()}finally{if(l)throw i}}return o}}(e,t)||V(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e){return function(e){if(Array.isArray(e))return G(e)}(e)||function(e){
if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||V(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){if(e){if("string"==typeof e)return G(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);return"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?G(e,t):void 0}}var K,Q=new d.Z("AutocompleteUtils"),z=10,W=function(){return!0},Y=/(\t|\s)/,X=[],J=(K=r(300629).Z).MENTION_EVERYONE,$=K.MENTION_HERE,ee=K.LAUNCHABLE_APPLICATIONS;function te(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return 1e3*e*(null!=t?t:1)}var re=[L.sH,L.Zb,s.d4z.GUILD_CATEGORY];function ne(e,t){
var r=t.exactQuery,n=t.containQuery,o=t.queryLower,u=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];try{if(r.test(e))return e.toLocaleLowerCase()===o?z:7;if(n.test(e))return 5;if(u&&i()(o,e))return 1}catch(e){Q.error(e)}return 0}function ie(e){return null!=(null==e?void 0:e.joinedAt)&&!e.isPending}function oe(e){for(var t=e.query,r=e.members,n=e.limit,o=e.filter,u=R.default.getUsers(),a=C.Z.getGuildId(),c=t.toLocaleLowerCase(),s=(0,k.Fv)(c),f=[],p=[],d=r.length,y=0,v=0;y<d;){var h=r[y],g=void 0,b=void 0;if(h instanceof O.Z){var m;b=h;g=null===(m=w.ZP.getNick(a,b.id))||void 0===m?void 0:m.toLocaleLowerCase()}else{var E;g=null===(E=h.nick)||void 0===E?void 0:E.toLocaleLowerCase();b=u[h.userId]}if(null==o||o(b)){var A=b.username.toLocaleLowerCase(),L=(0,k._I)(A),S=(0,k.Fv)(L),I=null!=g?(0,k._I)(g):null,_=null!=I?(0,k.Fv)(I):null
;if(A.substring(0,c.length)===c||L.substring(0,c.length)===c||(null==g?void 0:g.substring(0,c.length))===c||(null==I?void 0:I.substring(0,c.length))===c)f.push({type:j.h8.USER,record:b,comparator:null!=g?g:A,score:z,sortable:null!=I?I:L});else if(S.substring(0,s.length)===s||(null==_?void 0:_.substring(0,s.length))===s)f.push({type:j.h8.USER,record:b,comparator:null!=g?g:A,score:1,sortable:null!=I?I:L});else if(v<50&&(i()(c,L)||i()(s,S)||null!=I&&i()(c,I)||null!=_&&i()(s,_))){p.push({type:j.h8.USER,record:b,score:1,comparator:null!=g?g:A,sortable:null!=I?I:L});v+=1}}y+=1}f.sort(l.Z);if(f.length<n){p.sort(l.Z);f=f.concat(p.slice(0,Math.max(0,n-f.length)))}f.length>n&&(f.length=n);return f}function ue(e){switch(e){case g.MO.STICKER_NAME:return 11;case g.MO.CORRELATED_EMOJI:return 6;case g.MO.TAG:return 1;case g.MO.GUILD_NAME:case g.MO.PACK_NAME:return 8;default:return 1}}function le(e,t,r){var n=0,i=null,o=!0,u=!1,l=void 0;try{
for(var a,c=t[Symbol.iterator]();!(o=(a=c.next()).done);o=!0){var s=a.value,f=ne(e,s,r);if(f>n){n=f;i=s}}}catch(e){u=!0;l=e}finally{try{o||null==c.return||c.return()}finally{if(u)throw l}}null!=i&&(i.isFullMatch?t.length=0:t.splice(t.indexOf(i),1));return n}function ae(e,t){if(null!=e.guild_id){var r=t[e.guild_id];if(null==r){var n;r=t[e.guild_id]=null===(n=S.Z.getGuild(e.guild_id))||void 0===n?void 0:n.toString().toLocaleLowerCase()}return r}}function ce(e,t){if(null!=e.parent_id){var r=t[e.parent_id];if(null==r){var n;r=t[e.parent_id]=null===(n=c.Z.getChannel(e.parent_id))||void 0===n?void 0:n.name.toLocaleLowerCase()}return r}}function se(e,t){var r=c.Z.getChannel(e);return null==e||null==r?[]:u()(I.Z.getMessages(e).toArray()).reverse().map((function(e){return e.author})).reject((function(e){return e.isNonUserBot()})).uniqBy((function(e){return e.id})).filter((function(e){var t=r.getGuildId();return null==t||ie(w.ZP.getMember(t,e.id))})).map((function(e){
var t,n=r.getGuildId(),i=null!=n?w.ZP.getMember(n,e.id):null;return{type:j.h8.USER,record:e,score:0,comparator:null!==(t=null==i?void 0:i.nick)&&void 0!==t?t:e.username}})).take(t).value()}const fe={queryFriends:function(e){var t=e.query,r=e.limit,n=void 0===r?10:r,i=(e._fuzzy,e.filter);return oe({query:t,members:N.Z.getFriendIDs().map((function(e){return R.default.getUser(e)})).filter(U.lm),limit:n,filter:i})},queryDMUsers:function(e){var t=e.query,r=e.limit,n=void 0===r?10:r,i=e.filter;return oe({query:t,members:c.Z.getDMUserIds().map((function(e){return R.default.getUser(e)})).filter(U.lm),limit:n,filter:i})},queryChannelUsers:function(e){var t=e.channelId,r=e.query,n=e.limit,i=void 0===n?10:n,o=e.request,u=void 0===o||o,l=e.checkRecentlyTalkedOnEmptyQuery,a=void 0===l||l,f=c.Z.getChannel(t);if(null==f)return[];var p,d=f.isThread()?c.Z.getChannel(f.parent_id):null,y=null!=d?d:f;if(null==y)return[];if(y.isPrivate()){var v;p=y.recipients.map((function(e){return{userId:e,
nick:null!==(v=N.Z.getNickname(e))&&void 0!==v?v:null}}));var h=R.default.getCurrentUser();null!=h&&p.push({userId:h.id,nick:null})}else{if(0===r.length&&a){var g=se(f.id,i);if(g.length>0)return g}p=w.ZP.getMembers(y.guild_id).filter(ie);u&&D.Z.requestMembers(y.guild_id,r,i)}return oe({query:r,members:p,limit:i,filter:function(e){return y.isPrivate()||M.ZP.can({permission:s.Plq.VIEW_CHANNEL,user:e,context:y})}})},queryGuildUsers:function(e){var t=e.guildId,r=e.query,n=e.limit,i=void 0===n?10:n,o=e.request,u=void 0===o||o,l=e.checkRecentlyTalkedOnEmptyQuery,a=void 0===l||l,c=e.filter;if(null==S.Z.getGuild(t))return[];if(0===r.length&&a){var s=se(P.Z.getChannelId(t),i);if(s.length>0)return s}var f=w.ZP.getMembers(t).filter(ie);u&&r.length>0&&D.Z.requestMembers(t,r,i);return oe({query:r,members:f,limit:i,filter:c})},queryUsers:function(e){
var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],n=arguments.length>4?arguments[4]:void 0;r&&e.length>0&&D.Z.requestMembers(null,e,t);return oe({query:e,members:u()(R.default.getUsers()).values().value(),limit:t,filter:n})},queryChannels:function(e){var t,r=e.query,n=e.guildId,i=e.limit,o=void 0===i?s.rnv:i,f=e.fuzzy,p=void 0===f||f,d=e.filter,y=void 0===d?W:d,v=e.type,h=void 0===v?L.sH:v,g=e.allowEmptyQueries,m=void 0!==g&&g,O=e.requireVocalConnectAccess,A=void 0===O||O,w=e.boosters,S=void 0===w?{}:w,I=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e.split(" ").filter((function(e){return""!==e||t})).map((function(e){var t=e.toLocaleLowerCase();return{queryLower:t,exactQuery:new RegExp("^".concat(q.Z.escape(t)),"i"),containQuery:new RegExp(q.Z.escape(t),"i"),isFullMatch:!1}}));if(e.includes(" ")){var n=e.toLocaleLowerCase();r.unshift({queryLower:n,
exactQuery:new RegExp("^".concat(q.Z.escape(n).replace(" ","( |-)")),"i"),containQuery:new RegExp(q.Z.escape(n).replace(" ","( |-)"),"i"),isFullMatch:!0})}return r}(r,m);t=null!=n?u()(L.ZP.getChannels(n)[h]).map((function(e){return e.channel})).concat(b.Z.computeAllActiveJoinedThreads(n)).value():u()(c.Z.loadAllGuildAndPrivateChannelsFromDisk()).values().concat(b.Z.computeAllActiveJoinedThreads()).value();var Z,P,C,T={},U=[],D=!0,M=!1,k=void 0;try{for(var G,x=t[Symbol.iterator]();!(D=(G=x.next()).done);D=!0){var B=G.value;if((Z=h,P=B.type,C=null!=n,Z===P||(C||(0,E.Km)(P))&&(Z===L.sH?(0,E.r8)(P):Z===L.Zb&&(0,E.bw)(P)))&&(!(0,E.Km)(B.type)||_.Z.can(A?B.accessPermissions:s.Plq.VIEW_CHANNEL,B))&&y(B)){var F=H(I),V=B.name.toLocaleLowerCase(),K=le(V,F,p);if(0!==K){if(F.length>0){for(var Q=0,z=[ae(B,T),ce(B,T)];Q<z.length;Q++){var Y=z[Q];if(null!=Y&&""!==Y){var X=le(Y,F,!1);0!==X&&(K+=.5*X)}}K=Math.min(9,K)}0===K||F.length>1||1===F.length&&!F[0].isFullMatch||U.push({type:(0,
E.bw)(B.type)?j.h8.VOICE_CHANNEL:j.h8.TEXT_CHANNEL,record:B,score:te(K,S[B.id]),comparator:(0,a.F)(B,R.default,N.Z),sortable:V})}}}}catch(e){M=!0;k=e}finally{try{D||null==x.return||x.return()}finally{if(M)throw k}}U.sort(l.Z);U.length>o&&(U.length=o);return U},queryGuilds:function(e){var t=e.query,r=e.limit,n=void 0===r?10:r,i=e.fuzzy,o=void 0===i||i,a=e.filter,c=void 0===a?W:a,s=e.boosters,f=void 0===s?{}:s,p=""===t?"":t.toLocaleLowerCase(),d={exactQuery:new RegExp("^".concat(q.Z.escape(p)),"i"),containQuery:new RegExp(q.Z.escape(p),"i"),queryLower:p},y=[],v=u()(S.Z.getGuilds()).values().value(),h=!0,g=!1,b=void 0;try{for(var m,E=v[Symbol.iterator]();!(h=(m=E.next()).done);h=!0){var O=m.value;if(c(O)){var A=O.name.toLocaleLowerCase(),L=ne(A,d,o);L>0&&y.push({type:j.h8.GUILD,record:O,score:te(L,f[O.id]),comparator:O.toString(),sortable:A})}}}catch(e){g=!0;b=e}finally{try{h||null==E.return||E.return()}finally{if(g)throw b}}y.sort(l.Z);y.length>n&&(y.length=n);return y},
queryGroupDMs:function(e){var t=e.query,r=e.limit,n=void 0===r?10:r,i=e.fuzzy,o=void 0===i||i,s=e.filter,f=void 0===s?W:s,p=e.boosters,d=void 0===p?{}:p,y=t.toLocaleLowerCase(),v={exactQuery:new RegExp("^".concat(q.Z.escape(y)),"i"),containQuery:new RegExp(q.Z.escape(y),"i"),queryLower:y},h=u()(c.Z.getMutablePrivateChannels()).values().value(),g=[],b=!0,m=!1,E=void 0;try{for(var O,A=h[Symbol.iterator]();!(b=(O=A.next()).done);b=!0){var L=O.value;if(L.isMultiUserDM()&&f(L)){var w=(0,a.F)(L,R.default,N.Z).toLocaleLowerCase(),S=ne(w,v,o);S>0&&g.push({type:j.h8.GROUP_DM,record:L,score:te(S,d[L.id]),comparator:(0,a.F)(L,R.default,N.Z),sortable:w})}}}catch(e){m=!0;E=e}finally{try{b||null==A.return||A.return()}finally{if(m)throw E}}g.sort(l.Z);g.length>n&&(g.length=n);return g},queryApplications:function(e){var t=e.query,r=e.limit,n=void 0===r?10:r,i=e.fuzzy,o=void 0===i||i,u=e.filter,a=void 0===u?W:u,c=t.toLocaleLowerCase(),s={exactQuery:new RegExp("^".concat(q.Z.escape(c)),"i"),
containQuery:new RegExp(q.Z.escape(c),"i"),queryLower:c},f=ee(),p=[],d=!0,y=!1,v=void 0;try{for(var h,g=f[Symbol.iterator]();!(d=(h=g.next()).done);d=!0){var b=h.value.application;if(a(b)){var m=b.name.toLocaleLowerCase(),E=ne(m,s,o);E>0&&p.push({type:j.h8.APPLICATION,record:b,score:E,comparator:b.name,sortable:m})}}}catch(e){y=!0;v=e}finally{try{d||null==g.return||g.return()}finally{if(y)throw v}}p.sort(l.Z);p.length>n&&(p.length=n);return p},querySKUs:function(e){var t=e.query,r=e.limit,n=void 0===r?10:r,i=e.fuzzy,o=void 0===i||i,a=e.filter,c=void 0===a?W:a,f=t.toLocaleLowerCase(),p={exactQuery:new RegExp("^".concat(q.Z.escape(f)),"i"),containQuery:new RegExp(q.Z.escape(f),"i"),queryLower:f},d=u()(T.Z.getSKUs()).values().value(),y=[],v=!0,h=!1,g=void 0;try{for(var b,m=d[Symbol.iterator]();!(v=(b=m.next()).done);v=!0){var E=b.value;if(E.type===s.epS.DURABLE_PRIMARY&&c(E)){var O=E.name.toLocaleLowerCase(),A=ne(O,p,o);A>0&&y.push({type:j.h8.SKU,record:E,score:A,comparator:E.name,
sortable:O})}}}catch(e){h=!0;g=e}finally{try{v||null==m.return||m.return()}finally{if(h)throw g}}y.sort(l.Z);y.length>n&&(y.length=n);return y},getRecentlyTalked:se,queryMentionResults:function(e){var t=e.query,r=e.channel,n=e.canMentionEveryone,o=void 0!==n&&n,l=e.canMentionHere,a=void 0===l||l,c=e.canMentionUsers,f=void 0===c||c,p=e.canMentionRoles,d=void 0===p||p,y=e.includeAllGuildUsers,v=void 0!==y&&y,h=e.includeNonMentionableRoles,g=void 0!==h&&h,b=e.checkRecentlyTalkedOnEmptyQuery,m=void 0===b||b,E=e.limit,O=void 0===E?s.rnv:E,A=f?(v&&null!=r.guild_id?this.queryGuildUsers({guildId:r.guild_id,query:t,limit:O,checkRecentlyTalkedOnEmptyQuery:m}):this.queryChannelUsers({channelId:r.id,query:t,limit:O,checkRecentlyTalkedOnEmptyQuery:m})).map((function(e){var t=e.record;return{user:t,score:e.score,comparator:e.comparator,nick:w.ZP.getNick(r.guild_id,t.id),status:Z.Z.getStatus(t.id)}})):[],L=A.length,I=t.toLowerCase(),_=[];if(L<O&&d){var N=r.getGuildId(),P=S.Z.getGuild(N);if(null!=P){
u()(P.roles).filter((function(e){var t=e.mentionable,r=e.name,n=e.id;return(t||o||g)&&i()(I,r.toLowerCase())&&n!==N})).take(O-L).forEach((function(e){_.push(e)}));L+=_.length}}var C=[];if(!r.isPrivate()&&o&&d){if(L<O&&i()(I,J().test)){C.push(J());L+=1}a&&L<O&&i()(I,$().test)&&C.push($())}return{users:A,globals:C,roles:_}},queryGuildMentionResults:function(e){var t=e.query,r=e.guildId,n=e.canMentionEveryone,o=void 0!==n&&n,l=e.canMentionUsers,a=void 0===l||l,c=e.canMentionRoles,f=void 0===c||c,p=e.canMentionNonMentionableRoles,d=void 0!==p&&p,y=a?this.queryGuildUsers({guildId:r,query:t}).map((function(e){return B(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))));n.forEach((function(t){x(e,t,r[t])}))}return e}({},e),{status:Z.Z.getStatus(e.record.id)})
})):[],v=y.length,h=t.toLowerCase(),g=[];if(v<s.rnv&&f){var b=S.Z.getGuild(r);if(null!=b){u()(b.roles).filter((function(e){var t=e.mentionable,n=e.name,u=e.id;return(t||o||d)&&i()(h,n.toLowerCase())&&u!==r})).take(s.rnv-v).forEach((function(e){g.push(e)}));v+=g.length}}var m=[];if(o&&f){if(v<s.rnv&&i()(h,J().test)){m.push(J());v+=1}v<s.rnv&&i()(h,$().test)&&m.push($())}return{users:y,globals:m,roles:g}},queryChoice:function(e){var t=e.query,r=e.choices,n=e.limit,i=void 0===n?10:n,o=e.fuzzy,l=void 0===o||o,a=t.toLocaleLowerCase(),c=new RegExp("^".concat(q.Z.escape(a)),"i"),s=new RegExp(q.Z.escape(a),"i"),f=u()(r).map((function(e){var t=ne(e.displayName.toLocaleLowerCase(),{exactQuery:c,containQuery:s,queryLower:a},l);return t>0?{choice:e,score:t}:null})).filter(U.lm).sortBy((function(e){return-1*e.score}));null!==i&&(f=f.take(i));return f.value()},queryChannelResults:function(e){var t=e.query,r=e.channel,n=e.type,i=void 0===n?L.sH:n,o=e.channelTypes;return{channels:this.queryChannels({
query:t,guildId:r.getGuildId(),limit:void 0,fuzzy:void 0,filter:function(e){return null==o||o.includes(e.type)},type:i,allowEmptyQueries:!0}).map((function(e){return e.record}))}},queryApplicationCommandChannelResults:function(e){var t=e.query,r=e.channel,n=e.channelTypes,i=e.limit,o=void 0===i?s.rnv:i;if(null==r.guild_id){var u=[];(null==n||n.includes(r.type))&&u.push(r);return{channels:u}}var l=[],a=!0,c=!1,f=void 0;try{for(var d,y=re[Symbol.iterator]();!(a=(d=y.next()).done);a=!0){var v=d.value;l=l.concat(this.queryChannels({query:t,guildId:r.guild_id,limit:o,fuzzy:!0,filter:function(e){return null==n||n.includes(e.type)},type:v,allowEmptyQueries:!0,requireVocalConnectAccess:!1}))}}catch(e){c=!0;f=e}finally{try{a||null==y.return||y.return()}finally{if(c)throw f}}l=l.filter((function(e){return"null"!==e.record.id})).sort(p);l.length>o&&(l=l.slice(0,o));return{channels:l.map((function(e){return e.record}))}},queryChoiceResults:function(e){var t=e.query,r=e.choices;return{
choices:this.queryChoice({query:t,choices:r,limit:null}).map((function(e){return e.choice}))}},queryEmojiResults:function(e){var t=e.query,r=e.channel,n=e.intention,i=e.matchComparator;m.DZ.loadIfNecessary();return{emojis:A.Z.searchWithoutFetchingLatest(r,t,s.rnv,n,i)}},queryStickers:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=F(arguments.length>2&&void 0!==arguments[2]?arguments[2]:[null,W],2),n=r[0],i=r[1],o=h.Z.stickerMetadata,l=R.default.getCurrentUser(),a=new Set,c=[];m.DZ.loadIfNecessary();var s=!0,f=!1,p=void 0;try{for(var d,b=function(){var e=d.value;if(""===e)return"continue";var r=e.toLocaleLowerCase(),u=(0,k._I)(r),s=new RegExp("^".concat(q.Z.escape(u)),"i"),f=new RegExp("".concat(q.Z.escape(u)),"i");o.forEach((function(e,o){var u=0,p=null,d=h.Z.getStickerById(o);if(null!=d&&i(d,(0,y.cO)(d,l,n))){var b=!0,m=!1,E=void 0;try{for(var O,A=e[Symbol.iterator]();!(b=(O=A.next()).done);b=!0){var L=O.value,w=L.type,S=L.value,I=ue(w),_=0
;if(t)S===r?_=z*I:s.test(S)?_=7*I:w!==g.MO.GUILD_NAME&&w!==g.MO.PACK_NAME&&w!==g.MO.STICKER_NAME||!f.test(S)||(_=5*I);else if(S===r){_=z*I;p=S}if(_>u){u=_;p=S}}}catch(e){m=!0;E=e}finally{try{b||null==A.return||A.return()}finally{if(m)throw E}}var Z=v.Z.stickerFrecencyWithoutFetchingLatest.getScore(o);null!=Z&&(u*=Z/100);if(u>0&&null!=p&&!a.has(d.id)){a.add(d.id);c.push({sticker:d,comparator:p,score:u})}}}))},E=e[Symbol.iterator]();!(s=(d=E.next()).done);s=!0)b()}catch(e){f=!0;p=e}finally{try{s||null==E.return||E.return()}finally{if(f)throw p}}0===(c=u()(c).sortBy((function(e){return-1*e.score})).value()).length&&(c=X);return c},matchSentinel:function(e,t,r){return!Y.test(t)&&e===r}}},462020:(e,t,r)=>{r.d(t,{Z:()=>p});var n,i=r(496486),o=r.n(i),u=r(5387),l=r.n(u),a=r(354290),c=r(653772),s=new(l())({maxAge:6e4});function f(e,t,r){null!=n&&clearTimeout(n);n=setTimeout((function(){var n=[],i=function(e){n.push(e.id)};if(null==e)o().forEach(c.Z.getGuilds(),i);else{var u=c.Z.getGuild(e)
;null!=u&&i(u)}n.length>0&&a.Z.requestMembers(n,t.toLocaleLowerCase(),r)}),200)}const p={requestMembers:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,n="".concat(null!=e?e:"",":").concat(t);if(null==s.get(n)){s.set(n,!0);f(e,t,r)}}}},300629:(e,t,r)=>{r.d(t,{Z:()=>o});var n=r(218786),i=r(959797);const o={MENTION_EVERYONE:function(){return{test:"everyone",text:"@everyone",description:i.Z.Messages.MENTION_EVERYONE_AUTOCOMPLETE_DESCRIPTION}},MENTION_HERE:function(){return{test:"here",text:"@here",description:i.Z.Messages.MENTION_HERE_AUTOCOMPLETE_DESCRIPTION}},LAUNCHABLE_APPLICATIONS:function(){return n.Z.launchableApplicationViewItems}}}}]);
//# sourceMappingURL=8dcabb4e32f645c0fa33.js.map