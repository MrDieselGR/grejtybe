"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[97118],{797118:(e,n,r)=>{r.r(n);r.d(n,{default:()=>G});var t=r(785893),a=r(667294),o=r(294184),s=r.n(o),i=r(441143),l=r.n(i),u=r(23279),c=r.n(u),f=r(791462),d=r(489992),m=r(395951),h=r(956345),p=r(493925),E=r(859023),v=r(191940),S=r(629590),M=r(801593),N=r(757987),C=r(562181),_=r(930615),I=r(462428),b=r(67416),R=r(932847),T=r(590483),x=r(461061),y=r(86030),A=r(959797),g=r(784341),O=r.n(g),P=r(641501),Z=r.n(P);function j(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function U(e,n,r,t,a,o,s){try{var i=e[o](s),l=i.value}catch(e){r(e);return}i.done?n(l):Promise.resolve(l).then(t,a)}function w(e){return function(){var n=this,r=arguments;return new Promise((function(t,a){var o=e.apply(n,r);function s(e){U(o,t,a,s,i,"next",e)}function i(e){U(o,t,a,s,i,"throw",e)}s(void 0)}))}}function L(e,n,r){n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,
configurable:!0,writable:!0}):e[n]=r;return e}function k(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var t,a,o=[],s=!0,i=!1;try{for(r=r.call(e);!(s=(t=r.next()).done);s=!0){o.push(t.value);if(n&&o.length===n)break}}catch(e){i=!0;a=e}finally{try{s||null==r.return||r.return()}finally{if(i)throw a}}return o}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return j(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return j(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var D=function(e,n){var r,t,a,o,s={label:0,sent:function(){if(1&a[0])throw a[1]
;return a[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,t&&(a=2&o[0]?t.return:o[0]?t.throw||((a=t.return)&&a.call(t),0):t.next)&&!(a=a.call(t,o[1])).done)return a;(t=0,a)&&(o=[2&o[0],a.value]);switch(o[0]){case 0:case 1:a=o;break;case 4:s.label++;return{value:o[1],done:!1};case 5:s.label++;t=o[1];o=[0];continue;case 7:o=s.ops.pop();s.trys.pop();continue;default:if(!(a=s.trys,a=a.length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){s.label=o[1];break}if(6===o[0]&&s.label<a[1]){s.label=a[1];a=o;break}if(a&&s.label<a[2]){s.label=a[2];s.ops.push(o);break}a[2]&&s.ops.pop();s.trys.pop();continue}o=n.call(e,s)}catch(e){o=[6,e];t=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}}
;function G(e){var n,r,o=e.transitionState,i=e.onClose,u=(0,f.e7)([E.default],(function(){var e=E.default.getCurrentUser();l()(null!=e,"ChangeUsernameModal: currentUser cannot be undefined");return e})),g=a.useMemo((function(){return T.ZP.canEditDiscriminator(u)}),[u]),P=k(a.useState(!1),2),j=P[0],U=P[1],G=k(a.useState(u.username),2),B=G[0],z=G[1],F=k(a.useState(u.discriminator),2),H=F[0],Y=F[1],K=k(a.useState(""),2),W=K[0],q=K[1],J=k(a.useState(!1),2),$=J[0],X=J[1],Q=(0,f.e7)([p.Z],(function(){return p.Z.getErrors()})),V=a.useRef(null),ee=a.useMemo((function(){var e,n;return null!==(r=null==Q||null===(e=Q.username)||void 0===e?void 0:e[0])&&void 0!==r?r:null==Q||null===(n=Q.discriminator)||void 0===n?void 0:n[0]}),[Q]);a.useEffect((function(){if(o===y.Dv.ENTERED){var e;null===(e=V.current)||void 0===e||e.focus()}}),[o]);var ne=H!==u.discriminator;function re(){return(re=w((function(e){var n;return D(this,(function(r){switch(r.label){case 0:e.preventDefault();X(!0);return[4,(0,m.Mn)({
username:B,discriminator:g?H:void 0,password:W})];case 1:n=r.sent();X(!1);(null==n?void 0:n.ok)&&i();return[2]}}))}))).apply(this,arguments)}var te,ae=a.useMemo((function(){return c()(U,50)}),[]),oe=a.useCallback((function(){R.default.track(x.rMx.PREMIUM_PROMOTION_OPENED,{location_page:x.ZY5.USER_SETTINGS,location_section:x.jXE.SETTINGS_ACCOUNT,location_object:x.qAy.TOOLTIP});h.Z.setSection(x.oAB.PREMIUM);i()}),[i]);return(0,t.jsxs)(b.Y0,{transitionState:o,children:[(0,t.jsxs)(b.xB,{separator:!1,className:O().header,children:[(0,t.jsx)(I.Z,{color:I.Z.Colors.HEADER_PRIMARY,size:I.Z.Sizes.SIZE_24,className:O().title,children:A.Z.Messages.USER_SETTINGS_ACCOUNT_CHANGE_USERNAME_TITLE_DESKTOP}),(0,t.jsx)(d.xv,{color:"header-secondary",variant:"text-md/normal",className:O().subtitle,children:A.Z.Messages.USER_SETTINGS_ACCOUNT_CHANGE_USERNAME_PROMPT_DESKTOP}),(0,t.jsx)(b.ol,{onClick:i,className:O().modalCloseButton})]}),(0,t.jsxs)("form",{onSubmit:function(e){return re.apply(this,arguments)},
children:[(0,t.jsxs)(b.hz,{className:O().content,children:[(0,t.jsx)(C.xJ,{title:A.Z.Messages.FORM_LABEL_USERNAME,error:ee,children:(0,t.jsxs)("div",{className:s()(Z().input,O().multiInput,(te={},L(te,Z().error,null!=ee),L(te,Z().focused,j),te)),children:[(0,t.jsx)(M.ZP,{name:"username","aria-label":A.Z.Messages.USER_SETTINGS_LABEL_USERNAME,value:B,maxLength:x.l$U,onChange:z,onFocus:function(){return ae(!0)},onBlur:function(){return ae(!1)},inputRef:V,className:O().multiInputFirst,inputClassName:O().multiInputField}),(0,t.jsx)(M.ZP,{name:"discriminator","aria-label":A.Z.Messages.USER_SETTINGS_LABEL_DISCRIMINATOR,maxLength:4,value:H,onChange:Y,onFocus:function(){return ae(!0)},onBlur:function(){return ae(!1)},inputPrefix:"#",disabled:!g,className:O().multiInputLast,inputClassName:O().multiInputField}),g?null:(0,t.jsx)(N.ZP,{text:A.Z.Messages.PREMIUM_CHANGE_DISCRIMINATOR_TOOLTIP,position:N.ZP.Positions.BOTTOM,children:function(e){var n=e.onMouseEnter,r=e.onMouseLeave;return(0,
t.jsx)(S.Z,{"aria-label":A.Z.Messages.PREMIUM_CHANGE_DISCRIMINATOR_TOOLTIP,tag:"span",className:O().questionMark,onClick:oe,onMouseEnter:n,onMouseLeave:r,children:(0,t.jsx)(_.Z,{className:O().icon,"aria-hidden":!0})})}})]})}),ne?(0,t.jsx)(d.xv,{variant:"text-xs/normal",color:"header-secondary",className:O().discriminatorChangeWarning,children:A.Z.Messages.PREMIUM_CHANGE_DISCRIMINATOR_WARNING}):null,(0,t.jsx)(C.xJ,{className:O().password,title:A.Z.Messages.USER_SETTINGS_LABEL_CURRENT_PASSWORD,error:null==Q||null===(n=Q.password)||void 0===n?void 0:n[0],children:(0,t.jsx)(M.ZP,{type:"password",value:W,onChange:q})})]}),(0,t.jsxs)(b.mz,{children:[(0,t.jsx)(v.Co,{type:"submit",color:v.Co.Colors.BRAND,size:v.Co.Sizes.MEDIUM,submitting:$,children:A.Z.Messages.DONE}),(0,t.jsx)(v.Co,{className:O().cancel,look:v.Co.Looks.LINK,color:v.Co.Colors.PRIMARY,onClick:i,children:A.Z.Messages.CANCEL})]})]})]})}}}]);
//# sourceMappingURL=76eba369de669ada7c38.js.map