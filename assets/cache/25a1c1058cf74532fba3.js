"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[72097],{266738:(e,t,n)=>{n.d(t,{iq:()=>i,Cl:()=>o,$D:()=>E,Pq:()=>s,Jh:()=>u,gq:()=>l});function r(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}var s,u,a,i="guild_feed_feedback_last_seen",o=6048e5,E=450;!function(e){e.TERRIBLE="terrible";e.BAD="bad";e.OKAY="okay";e.GOOD="good";e.EXCELLENT="excellent"}(s||(s={}));!function(e){e[e.ALREADY_SAW=0]="ALREADY_SAW";e[e.IRRELEVANT=1]="IRRELEVANT";e[e.TOO_OLD=2]="TOO_OLD";e[e.CONFUSING_OR_RANDOM=3]="CONFUSING_OR_RANDOM";e[e.INAPPROPRIATE=4]="INAPPROPRIATE";e[e.UNINTERESTING=5]="UNINTERESTING";e[e.ENTERTAINING=6]="ENTERTAINING";e[e.INFORMATIVE=7]="INFORMATIVE";e[e.USEFUL=8]="USEFUL";e[e.OTHER=9]="OTHER";e[e.FUNNY=10]="FUNNY"}(u||(u={}));var l=(r(a={},s.TERRIBLE,[u.ALREADY_SAW,u.IRRELEVANT,u.TOO_OLD,u.CONFUSING_OR_RANDOM,u.INAPPROPRIATE,u.OTHER]),
r(a,s.BAD,[u.ALREADY_SAW,u.IRRELEVANT,u.TOO_OLD,u.CONFUSING_OR_RANDOM,u.INAPPROPRIATE,u.OTHER]),r(a,s.OKAY,[u.IRRELEVANT,u.TOO_OLD,u.UNINTERESTING,u.ALREADY_SAW,u.OTHER]),r(a,s.GOOD,[u.FUNNY,u.ENTERTAINING,u.INFORMATIVE,u.USEFUL,u.OTHER]),r(a,s.EXCELLENT,[u.FUNNY,u.ENTERTAINING,u.INFORMATIVE,u.USEFUL,u.OTHER]),a)},725608:(e,t,n)=>{n.d(t,{Cd:()=>R,vL:()=>A,i1:()=>f,IT:()=>T});var r=n(667294),s=n(791462),u=n(444450),a=n(730189),i=n(897193),o=n(202552),E=n(932847),l=n(449024),c=n(407723),d=n(266738),N=n(461061),_=n(959797);function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,s,u=[],a=!0,i=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0){u.push(r.value);if(t&&u.length===t)break}}catch(e){i=!0;s=e}finally{try{a||null==n.return||n.return()}finally{
if(i)throw s}}return u}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(){u.Z.set(d.iq,null)}function A(){var e=r.useMemo((function(){return o.Z.getExperimentBucket(l.Xp.definition.id)}),[]),t=O(r.useState(!1),2),n=t[0],s=t[1],a=r.useMemo((function(){return u.Z.get(d.iq)}),[n]);return{showFeedback:r.useMemo((function(){return 100*Math.random()<e&&(null==a||Date.now()-a>d.Cl)}),[e,a]),setOnDismissedFeedback:s}}function f(e){switch(e){case d.Jh.ALREADY_SAW:return _.Z.Messages.GUILD_FEED_FEEDBACK_OPTION_ALREADY_SAW;case d.Jh.IRRELEVANT:
return _.Z.Messages.GUILD_FEED_FEEDBACK_OPTION_IRRELEVANT;case d.Jh.TOO_OLD:return _.Z.Messages.GUILD_FEED_FEEDBACK_OPTION_TOO_OLD;case d.Jh.CONFUSING_OR_RANDOM:return _.Z.Messages.GUILD_FEED_FEEDBACK_OPTION_CONFUSING;case d.Jh.INAPPROPRIATE:return _.Z.Messages.GUILD_FEED_FEEDBACK_OPTION_INAPPROPRIATE;case d.Jh.UNINTERESTING:return _.Z.Messages.GUILD_FEED_FEEDBACK_OPTION_UNINTERESTING;case d.Jh.ENTERTAINING:return _.Z.Messages.GUILD_FEED_FEEDBACK_OPTION_ENTERTAINING;case d.Jh.INFORMATIVE:return _.Z.Messages.GUILD_FEED_FEEDBACK_OPTION_INFORMATIVE;case d.Jh.USEFUL:return _.Z.Messages.GUILD_FEED_FEEDBACK_OPTION_USEFUL;case d.Jh.OTHER:return _.Z.Messages.GUILD_FEED_FEEDBACK_OTHER_REASON;case d.Jh.FUNNY:return _.Z.Messages.GUILD_FEED_FEEDBACK_OPTION_FUNNY;default:return null}}function T(e){
var t=e.guildId,n=e.guildFeedItem,o=e.setOnDismissFeedback,l=O(r.useState(),2),_=l[0],I=l[1],R=O(r.useState(new Set),2),A=R[0],T=R[1],D=O(r.useState(),2),F=D[0],L=D[1],S=O(r.useState(!1),2),g=S[0],m=S[1],b=O(r.useState(!1),2),U=b[0],h=b[1],C=O(r.useState(!1),2),M=C[0],v=C[1],P=r.useCallback((function(e){I(e);v(!0);m(!1);setTimeout((function(){v(!1)}),d.$D+150)}),[I,m,v]),k=r.useCallback((function(e){e===d.Jh.OTHER&&A.has(d.Jh.OTHER)&&L(null);var t=new Set(A);t.has(e)?t.delete(e):t.add(e);T(t)}),[A,L,T]),Z=r.useCallback((function(){m(!0);T(new Set)}),[m,T]),G=r.useCallback((function(e){!function(e){var t,n=e.guildId,r=e.guildFeedItem,s=e.dismissed,u=e.selectedRating,a=void 0===u?null:u,o=e.selectedReasons,l=void 0===o?null:o,d=e.userFeedback,_=void 0===d?null:d,I=Array.from(null!=l?l:[]);E.default.track(N.rMx.HOME_FEEDBACK_SUBMITTED,{guild_id:n,home_session_id:c.Z.getHomeSessionId(n),feed_item_id:r.id,feed_item_position:0,dismissed:s,report_name:"feed_item_feedback",
load_id:i.ZP.getLoadId(n),rating:a,reason_codes:I,reason_descriptions:I.map((function(e){return null!==(t=f(e))&&void 0!==t?t:""})),user_feedback:_})}({guildId:t,guildFeedItem:n,dismissed:e,selectedRating:_,selectedReasons:A,userFeedback:F})}),[t,n,_,A,F]),p=r.useCallback((function(){u.Z.set(d.iq,Date.now());null==o||o(!0);U||G(!0)}),[G,o,U]),y=r.useCallback((function(){G(!1);h(!0);u.Z.set(d.iq,Date.now())}),[G]),B=r.useMemo((function(){return A.size>0&&(!A.has(d.Jh.OTHER)||null!=F&&""!==F)}),[A,F]),w=(0,s.e7)([a.Z],(function(){return a.Z.useReducedMotion})),H=r.useRef(!1);r.useEffect((function(){return function(){H.current=!0}}),[]);r.useEffect((function(){return function(){H.current&&null!=_&&p()}}),[_,p]);return{selectedRating:_,setSelectedRating:P,selectedReasons:A,setSelectedReasons:k,setUserFeedback:L,backPressed:g,onBackPressed:Z,onSubmitPressed:y,onClosePressed:p,showSubmitted:U,isAnimating:M,canSubmit:B,useReducedMotion:w}}},148818:(e,t,n)=>{n.d(t,{E:()=>i,f:()=>o})
;var r=n(791462),s=n(653772),u=n(223173),a=n(461061);function i(e,t){var n=s.Z.getGuild(t),r=null!=n?encodeURIComponent(n.name):"unknown";return"https://survey.alchemer.com/s3/6852193/Home-Beta-Test-Feature-Feedback?user_id=".concat(e,"&guild_id=").concat(t,"&guild_name=").concat(r)}function o(e){var t,n=(0,r.e7)([u.Z],(function(){return null!==(t=u.Z.getSubmittedFeedback(e))&&void 0!==t?t:null})),i=(0,r.e7)([u.Z],(function(){return u.Z.getNumCleanLoads(e)>10&&u.Z.getNumCleanLoads(e)<=20&&!u.Z.isGuildFeedbackFinished(e)})),o=(0,r.e7)([s.Z],(function(){var t;return null===(t=s.Z.getGuild(e))||void 0===t?void 0:t.hasFeature(a.oNc.INTERNAL_EMPLOYEE_ONLY)}));return{shouldPrompt:i&&!o,submittedRating:n}}},772097:(e,t,n)=>{n.r(t);n.d(t,{default:()=>O});var r=n(785893),s=n(667294),u=n(281081),a=n(239396),i=n(769672),o=n(791462),E=n(631134),l=n(859023),c=n(895917),d=n(725608),N=n(148818),_=n(959797);var I=n(461061);function O(e){var t=e.guildId,n=e.analyticsContext,O=e.onSelect,R=function(e){
var t,n=(0,o.e7)([l.default],(function(){var e;return null!==(t=null===(e=l.default.getCurrentUser())||void 0===e?void 0:e.isStaff())&&void 0!==t&&t})),u=s.useCallback((function(){return(0,d.Cd)()}),[]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.sN,{id:"home-feedback",label:_.Z.Messages.GUILD_HOME_FEEDBACK_MENU_ITEM_LABEL,action:function(){var t=E.default.getId(),n=(0,N.E)(t,e);window.open(n,"_blank")},icon:c.Z}),n?(0,r.jsx)(i.sN,{id:"staff-home-feedback-reset-cooldown",label:"[STAFF] Reset cooldown for feedback",action:u}):null]})}(t);return(0,r.jsx)(a.Z,{context:n,object:I.qAy.CONTEXT_MENU,children:(0,r.jsx)(i.ZP,{navId:"user-context",onClose:u.Zy,"aria-label":_.Z.Messages.HOME_ACTIONS_MENU_LABEL,onSelect:O,children:(0,r.jsx)(i.kS,{children:R})})})}}}]);
//# sourceMappingURL=25a1c1058cf74532fba3.js.map