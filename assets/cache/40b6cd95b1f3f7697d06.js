"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[58342],{662912:(e,n,t)=>{t.d(n,{Z:()=>E});var r=t(791462),l=t(173436),o=t(742269),i=t(588641),a=new Set(["nvidia"]);var u=t(236625),s=t.n(u);var c=function(e,n,t){n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t;return e}({},o.AB.WINDOWS,{nvidia:">=397.93.0"});function f(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function d(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1;r.configurable=!0;"value"in r&&(r.writable=!0);Object.defineProperty(e,r.key,r)}}function p(e){p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return p(e)}function h(e,n){return!n||"object"!==v(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function m(e,n){
m=Object.setPrototypeOf||function(e,n){e.__proto__=n;return e};return m(e,n)}var v=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function g(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var t,r=p(e);if(n){var l=p(this).constructor;t=Reflect.construct(r,arguments,l)}else t=r.apply(this,arguments);return h(this,t)}}var S=!1,y=!0;var b=function(e){!function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}});n&&m(e,n)}(t,e);var n=g(t);function t(){f(this,t);return n.apply(this,arguments)}var r=t.prototype;r.initialize=function(){var e=this
;o.FB&&!__OVERLAY__&&i.default.getGPUDriverVersions().then((function(n){S=function(e){var n=c[(0,o.Xf)()];if(null==n)return!1;var t,r,l,i=!0,a=!1,u=void 0;try{for(var f,d=Object.keys(e)[Symbol.iterator]();!(i=(f=d.next()).done);i=!0){var p=f.value,h=e[p],m=n[p];if(null!=h&&null!=m&&null==h.error){var v=(r=void 0,l=void 0,"".concat(null!==(r=(t=h).major)&&void 0!==r?r:0,".").concat(null!==(l=t.minor)&&void 0!==l?l:0,".0"));if(!s().satisfies(v,m))return!0}}}catch(e){a=!0;u=e}finally{try{i||null==d.return||d.return()}finally{if(a)throw u}}return!1}(n);y=function(e){var n=!0,t=!1,r=void 0;try{for(var l,o=Object.keys(e)[Symbol.iterator]();!(n=(l=o.next()).done);n=!0){var i=l.value,u=e[i];if(null!=u&&null==u.error&&a.has(i))return!0}}catch(e){t=!0;r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return!1}(n);e.emitChange()}))};r.getState=function(){return{GPUDriversOutdated:S,canUseHardwareAcceleration:y}};r.__getLocalVars=function(){return{GPUDriversOutdated:S,
canUseHardwareAcceleration:y}};!function(e,n,t){n&&d(e.prototype,n);t&&d(e,t)}(t,[{key:"GPUDriversOutdated",get:function(){return S}},{key:"canUseHardwareAcceleration",get:function(){return y}}]);return t}(r.ZP.Store);b.displayName="StreamingCapabilitiesStore";const E=new b(l.Z,{OVERLAY_INITIALIZE:function(e){var n=e.streamingCapabilitiesStoreState;S=n.GPUDriversOutdated;y=n.canUseHardwareAcceleration}})},58342:(e,n,t)=>{t.r(n);t.d(n,{default:()=>Tt});var r=t(785893),l=t(667294),o=t(441143),i=t.n(o),a=t(248088),u=t(791462),s=t(489992),c=t(992497),f=t(804626),d=t(370442),p=t(239396),h=t(242651),m=t(497802),v=t(356004),g=t(367124),S=t(653772),y=t(934714),b=t(73462),E=t(379822),O=t(859023),C=t(343435),j=t(191940),x=t(487502),N=t(954766),_=t(272729),Z=t(30741),R=t(67416),I=t(897576),T=t(932847),P=t(742269),w=t(588641),M=t(59770),A=t(664637);function L(e,n,t){var r=A.no[e],l=!0,o=!1,i=void 0;try{for(var a,u=r[Symbol.iterator]();!(l=(a=u.next()).done);l=!0){var s=a.value;if((0,
M.Z)(e,s.resolution,s.fps,n,t))return[s.resolution,s.fps]}}catch(e){o=!0;i=e}finally{try{l||null==u.return||u.return()}finally{if(o)throw i}}return null}var D=t(127949),U=t(294184),k=t.n(U),G=t(956345),V=t(304856),F=t(409271),B=t(95350),W=t(146530),H=t(693518),z=t(969225),Y=t(562181),J=t(71284),K=t(81951),X=t(240243);function q(e,n,t){n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t;return e}function Q(e,n){n=null!=n?n:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})));t.push.apply(t,r)}return t}(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}));return e}function $(e,n){if(null==e)return{};var t,r,l=function(e,n){if(null==e)return{}
;var t,r,l={},o=Object.keys(e);for(r=0;r<o.length;r++){t=o[r];n.indexOf(t)>=0||(l[t]=e[t])}return l}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++){t=o[r];n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(l[t]=e[t])}}return l}function ee(e){var n=e.width,t=void 0===n?24:n,l=e.height,o=void 0===l?24:l,i=e.color,a=void 0===i?"currentColor":i,u=e.foreground,s=$(e,["width","height","color","foreground"]);return(0,r.jsxs)("svg",Q(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))));r.forEach((function(n){q(e,n,t[n])}))}return e}({},(0,X.Z)(s)),{width:t,height:o,viewBox:"0 0 24 24",children:[(0,r.jsx)("path",{className:u,fill:a,
d:"M22 7.002V5C22 3.898 21.104 3 20 3H4C2.897 3 2 3.898 2 5V7.002H22ZM8 4C8.553 4 9 4.448 9 5C9 5.553 8.553 6 8 6C7.447 6 7 5.553 7 5C7 4.448 7.447 4 8 4ZM5 4C5.553 4 6 4.448 6 5C6 5.553 5.553 6 5 6C4.447 6 4 5.553 4 5C4 4.448 4.447 4 5 4Z"}),(0,r.jsx)("path",{fill:a,d:"M2 8.00201V19C2 20.103 2.897 21 4 21H20C21.104 21 22 20.103 22 19V8.00201H2Z"})]}))}var ne=t(90816),te=t(662912),re=t(236625),le=t.n(re),oe=t(901991),ie=t(891153),ae=t(855846),ue=t(866452),se=t(959797);var ce=t(1812),fe=t(940712),de=t(645897),pe=t(138402),he=t(337160),me=t(53211),ve=t(987928),ge=t(757987),Se=t(436053),ye=t(570992),be=t(366873),Ee=t.n(be);function Oe(e,n,t){n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t;return e}function Ce(e){var n=e.channel,t=e.users,l=e.selected,o=void 0!==l&&l,i=(0,me.Z)(n),a=null;if(null!=t&&t.length>0){a=(0,r.jsx)(Se.Z,{guildId:n.guild_id,className:Ee().voiceUserList,users:t,renderUser:function(e){if(null==e)return null
;var t=ye.Z.getName(n.guild_id,n.id,e),l=e.getAvatarURL(n.guild_id,24);return(0,r.jsx)(ge.DY,{text:t,children:(0,r.jsx)("img",{src:null!=l?l:void 0,"aria-label":e.username,alt:"",className:Ee().avatar})})},renderMoreUsers:function(e){var l=function(e,n){var t=n.id,r=n.guild_id;return e.length<=1?null:2===e.length?se.Z.Messages.GO_LIVE_MODAL_OVERFLOW_TWO_USERS.format({nickname0:ye.Z.getName(r,t,e[0]),nickname1:ye.Z.getName(r,t,e[1])}):3===e.length?se.Z.Messages.GO_LIVE_MODAL_OVERFLOW_THREE_USERS.format({nickname0:ye.Z.getName(r,t,e[0]),nickname1:ye.Z.getName(r,t,e[1]),nickname2:ye.Z.getName(r,t,e[2])}):se.Z.Messages.GO_LIVE_MODAL_OVERFLOW_FOUR_OR_MORE_USERS.format({nickname0:ye.Z.getName(r,t,e[0]),nickname1:ye.Z.getName(r,t,e[1]),remainingCount:e.length-2})}(t.slice(4),n);return(0,r.jsx)("div",{children:(0,r.jsx)(ge.DY,{text:l,children:(0,r.jsx)("div",{className:Ee().userListOverflow,children:e})})})},max:5,showUserPopout:!1})}var u=(0,ve.Z)(n);return(0,r.jsxs)("div",{
className:k()(Ee().channelInfo,Oe({},Ee().selected,o)),children:[(0,r.jsx)(u,{className:Ee().channelIcon}),(0,r.jsx)("div",{className:Ee().channelName,children:i}),a]})}var je=t(318937),xe=t(227993),Ne=t.n(xe);function _e(e,n,t){n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t;return e}function Ze(e){var n=e.separator,t=void 0!==n&&n;return(0,r.jsx)("div",{className:k()(Ne().divider,_e({},Ne().separator,t))})}var Re=t(903803),Ie=t.n(Re),Te=t(559221),Pe=t.n(Te);function we(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Me(e,n,t){n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t;return e}function Ae(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,l,o=[],i=!0,a=!1;try{for(t=t.call(e);!(i=(r=t.next()).done);i=!0){
o.push(r.value);if(n&&o.length===n)break}}catch(e){a=!0;l=e}finally{try{i||null==t.return||t.return()}finally{if(a)throw l}}return o}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return we(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return we(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Le(e){var n=e.title,t=e.scrollerClassName,o=e.scrollerInnerClassName,i=e.children,a=l.useRef(null),u=Ae(l.useState(!1),2),s=u[0],c=u[1],f=Ae(l.useState(!1),2),d=f[0],p=f[1],h=l.useCallback((function(){var e=a.current;if(null!=e){c(!e.isScrolledToTop());p(!e.isScrolledToBottom())}}),[]);l.useLayoutEffect((function(){return h()}),[]);return(0,r.jsxs)(r.Fragment,{
children:[(0,r.jsxs)("div",{className:k()(Pe().title,Pe().scrollWrapper),children:[(0,r.jsx)(Y.vw,{className:Ie().formItemTitle,children:n}),(0,r.jsx)(Ze,{separator:s})]}),(0,r.jsx)("div",{className:t,children:(0,r.jsx)(je.ZP,{ref:a,className:k()(Pe().scrollerInner,o,Me({},Pe().bottomSeparator,d)),onScroll:h,children:i})})]})}var De=t(426314),Ue=t.n(De);function ke(e){var n=e.selectedChannelId,t=e.guildId,l=e.onChangeSelectedChannelId,o=(0,u.e7)([O.default],(function(){return O.default.getCurrentUser()})),i=(0,u.e7)([S.Z,ce.ZP,fe.Z],(function(){return(0,he.h_)(ce.ZP.getChannels(t),S.Z,fe.Z)})),a=(0,u.e7)([de.ZP],(function(){return de.ZP.getVoiceStates(t)})),s=i.map((function(e){var t;return{name:(0,r.jsx)(Ce,{channel:e,users:null===(t=a[e.id])||void 0===t?void 0:t.filter((function(e){return e.user.id!==(null==o?void 0:o.id)})).map((function(e){return e.user})),selected:e.id===n}),value:e.id}}));return(0,r.jsx)(Le,{title:se.Z.Messages.GO_LIVE_MODAL_SELECT_CHANNEL_FORM_TITLE,
scrollerInnerClassName:Ue().channelSelectScrollerInner,children:(0,r.jsx)(pe.ZP,{options:s,value:n,itemInfoClassName:Ue().channelInfoWrapper,itemTitleClassName:Ue().channelTitleWrapper,onChange:function(e){var n=e.value;return l(n)}})})}var Ge=t(631134),Ve=t(815208),Fe=t.n(Ve);function Be(e){var n=e.children;return(0,r.jsx)("div",{className:Fe().card,children:n})}function We(e){var n=e.channel,t=(0,u.e7)([Ge.default],(function(){return Ge.default.getId()})),l=(0,u.e7)([de.ZP],(function(){return de.ZP.getVoiceStatesForChannel(n)}),[n]);return(0,r.jsx)(Y.xJ,{title:se.Z.Messages.GO_LIVE_MODAL_CURRENT_CHANNEL_FORM_TITLE,className:Ie().modalContent,titleClassName:Ie().formItemTitle,children:(0,r.jsx)(Be,{children:(0,r.jsx)(Ce,{channel:n,users:l.filter((function(e){return e.user.id!==t})).map((function(e){return e.user}))})})})}var He=t(842592),ze=t(617781),Ye=t(732031),Je=t(632895),Ke=t(590483),Xe=t(64833),qe=t(224292),Qe=t(629590);const $e=(0,t(553494).B)({kind:"user",
id:"2022-06_inline_streaming_premium_upsell_behavior",label:"Inline Streaming Premium Upsell Behavior",defaultConfig:{enabled:!1},treatments:[{id:1,label:"Enabled",config:{enabled:!0}}]});var en=t(461061),nn=t(298716),tn=t(207511),rn=t.n(tn);function ln(e){var n=e.message,t=e.onClose,l=e.openStreamUpsellModal,o=$e.useExperiment({}),i=(0,Xe.Z)().analyticsLocations,a={section:en.jXE.STREAM_SETTINGS,object:en.qAy.PREMIUM_UPSELL_BANNER,objectType:en.Qqv.BUY};return(0,r.jsxs)(Qe.Z,{onClick:function(){!function(){$e.trackExposure({});o.enabled?(0,qe.Z)({initialPlanId:null,subscriptionTier:nn.Si.TIER_2,analyticsLocations:i,analyticsObject:a}):l({analyticsLocation:a,onClose:t})}()},className:k()(rn().upsellBanner,rn().gradientBackground),children:[(0,r.jsxs)("div",{className:rn().iconTextContainer,children:[(0,r.jsx)(Ye.Z,{className:rn().iconColor}),(0,r.jsx)(s.xv,{variant:"text-sm/medium",className:rn().upsellText,children:null!=n?n:se.Z.Messages.STREAM_PREMIUM_UPSELL_BANNER})]}),(0,
r.jsx)(s.xv,{variant:"text-sm/medium",className:rn().textLink,children:se.Z.Messages.STREAM_PREMIUM_UPSELL_BANNER_CTA})]})}var on=t(324407),an=t.n(on),un=t(380203),sn=t.n(un);function cn(e,n,t,r,l,o,i){try{var a=e[o](i),u=a.value}catch(e){t(e);return}a.done?n(u):Promise.resolve(u).then(r,l)}function fn(e){return function(){var n=this,t=arguments;return new Promise((function(r,l){var o=e.apply(n,t);function i(e){cn(o,r,l,i,a,"next",e)}function a(e){cn(o,r,l,i,a,"throw",e)}i(void 0)}))}}function dn(e,n,t){n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t;return e}function pn(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))));r.forEach((function(n){dn(e,n,t[n])}))}return e}function hn(e,n){n=null!=n?n:{}
;Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})));t.push.apply(t,r)}return t}(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}));return e}var mn=function(e,n){var t,r,l,o,i={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,r&&(l=2&o[0]?r.return:o[0]?r.throw||((l=r.return)&&l.call(r),0):r.next)&&!(l=l.call(r,o[1])).done)return l;(r=0,l)&&(o=[2&o[0],l.value]);switch(o[0]){case 0:case 1:l=o;break;case 4:i.label++;return{value:o[1],
done:!1};case 5:i.label++;r=o[1];o=[0];continue;case 7:o=i.ops.pop();i.trys.pop();continue;default:if(!(l=i.trys,l=l.length>0&&l[l.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!l||o[1]>l[0]&&o[1]<l[3])){i.label=o[1];break}if(6===o[0]&&i.label<l[1]){i.label=l[1];l=o;break}if(l&&i.label<l[2]){i.label=l[2];i.ops.push(o);break}l[2]&&i.ops.pop();i.trys.pop();continue}o=n.call(e,i)}catch(e){o=[6,e];r=0}finally{t=l=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};function vn(e){var n=e.analyticsLocation,l=e.onClose;(0,I.ZD)(fn((function(){var e,o;return mn(this,(function(i){switch(i.label){case 0:return[4,t.e(69224).then(t.bind(t,69224))];case 1:e=i.sent(),o=e.default;return[2,function(e){return(0,r.jsx)(o,hn(pn({},e),{onCloseParent:l,analyticsSource:n}))}]}}))})))}function gn(){return(0,r.jsxs)("div",{className:an().toolTipTextContainer,children:[(0,r.jsx)(Ye.Z,{className:k()(an().premiumIcon,an().premiumIconColor)}),(0,r.jsx)(s.xv,{
className:an().upsellText,variant:"text-sm/medium",children:se.Z.Messages.STREAM_QUALITY_DISCORD_NITRO_UNLOCK})]})}function Sn(e){var n,t,l=e.type,o=e.selected,i=e.needsPremium,a=e.analyticsLocation,u=e.onClick,c=e.onClose,f=l.value,d=l.label;if(i){n=(0,r.jsx)(ge.DY,{tooltipClassName:an().tooltip,spacing:12,"aria-label":se.Z.Messages.STREAM_QUALITY_DISCORD_NITRO_UNLOCK,text:(0,r.jsx)(gn,{}),children:(0,r.jsx)(x.Z,{align:x.Z.Align.CENTER,children:(0,r.jsx)(s.xv,{variant:"text-xs/bold",className:an().selectorNitroText,children:d})})});t=function(){return vn({analyticsLocation:a,onClose:c})}}else{n=(0,r.jsx)(s.xv,{variant:"text-xs/normal",className:o?an().selectorTextSelected:an().selectorText,children:d});t=function(){return u(f)}}return{content:n,className:k()(o?an().selectorButtonSelected:an().selectorButton,dn({},an().selectorButtonPremiumRequired,i)),onClick:t}}function yn(e){
var n=e.onClose,t=e.selectedPreset,l=e.selectedResolution,o=e.selectedFPS,a=e.onResolutionChange,c=e.onFPSChange,f=e.onPresetChange,d=e.guildId,h=(0,u.e7)([O.default],(function(){var e=O.default.getCurrentUser();i()(null!=e,"StreamSettings: user cannot be undefined");return e})),m=(0,Ke.I5)(h),v=(0,u.e7)([S.Z],(function(){var e;return null===(e=S.Z.getGuild(d))||void 0===e?void 0:e.premiumTier})),g=hn(pn({},(0,He.O)().location),{section:en.jXE.STREAM_SETTINGS}),y=(0,r.jsx)(ze.Z,{buttons:A.WC.map((function(e){return Sn({type:e,selected:e.value===l,needsPremium:!(0,M.Z)(t,e.value,o,h,v),analyticsLocation:g,onClick:function(){return a(e.value)},onClose:n})}))}),b=(0,r.jsx)(ze.Z,{buttons:A.k0.map((function(e){return Sn({type:e,selected:e.value===o,needsPremium:!(0,M.Z)(t,l,e.value,h,v),analyticsLocation:g,onClick:function(){return c(e.value)},onClose:n})}))}),E=[{value:A.tI.PRESET_VIDEO,label:se.Z.Messages.STREAM_PRESET_VIDEO},{value:A.tI.PRESET_DOCUMENTS,
label:se.Z.Messages.STREAM_PRESET_DOCUMENTS},{value:A.tI.PRESET_CUSTOM,label:se.Z.Messages.STREAM_PRESET_CUSTOM}],C=t===A.tI.PRESET_DOCUMENTS?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x.Z,{children:(0,r.jsx)(Y.xJ,{title:se.Z.Messages.STREAM_RESOLUTION,titleClassName:Ie().formItemTitleSlim,className:an().documentModeGroup,children:(0,r.jsx)(s.xv,{variant:"text-xs/normal",children:se.Z.Messages.STREAM_PRESET_DOCUMENTS_DESCRIPTION_NITRO.format({fps:o})})})}),m?null:(0,r.jsx)(ln,{message:se.Z.Messages.STREAM_PREMIUM_UPSELL_BANNER_PRESET_DOCUMENTS,onClose:n,openStreamUpsellModal:vn})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(x.Z,{children:[(0,r.jsx)(Y.xJ,{title:se.Z.Messages.STREAM_RESOLUTION,className:an().settingsGroup,titleClassName:Ie().formItemTitleSlim,children:y}),(0,r.jsx)(Y.xJ,{title:se.Z.Messages.SCREENSHARE_FRAME_RATE,className:an().settingsGroup,titleClassName:Ie().formItemTitleSlim,children:b})]}),m?null:(0,r.jsx)(ln,{onClose:n,openStreamUpsellModal:vn})]});return(0,
r.jsx)(p.Z,hn(pn({},g),{children:(0,r.jsx)(Y.xJ,{title:se.Z.Messages.STREAM_QUALITY,titleClassName:Ie().formItemTitle,className:Ie().modalContent,children:(0,r.jsxs)("div",{className:an().qualitySettingsContainer,children:[(0,r.jsx)(Je.q4,{value:t,className:sn().marginTop8,options:E,onChange:function(e){return f(e)}}),C]})})}))}var bn=t(231835);function En(e,n,t){return null==n?e:t.find((function(e){return(0,bn.Z)(n.id,e.windowHandle)}))}var On=t(190564),Cn=t.n(On);function jn(e){var n=e.selectedSource,t=e.selectSource,l=e.sourceChanged,o=e.onChangeSource,i=(0,u.e7)([b.Z,C.Z],(function(){return(0,P.ED)()?(0,D.Z)(b.Z,C.Z):null})),a=(0,u.e7)([g.Z],(function(){return null!=(null==i?void 0:i.id)?g.Z.getGame(i.id):null})),s=(0,u.e7)([b.Z],(function(){return b.Z.getRunningGames()})),c=(0,u.e7)([g.Z],(function(){return s.map((function(e){return null!=e.id?g.Z.getGame(e.id):null})).filter(ne.lm)}),[s]),f=null;null!=n?f=n.name:null!=i&&(f=i.name);if(null==f)return null
;var d=En(i,n,s),p=l?c.find((function(e){return e.id===(null==d?void 0:d.id)})):a,h=null!=n&&n.id.startsWith("screen")?J.Z:ee;return(0,r.jsx)(Y.xJ,{title:se.Z.Messages.GO_LIVE_MODAL_APPLICATION_FORM_TITLE,className:Ie().modalContent,titleClassName:Ie().formItemTitleVerySlim,children:(0,r.jsxs)(Be,{children:[null!=p?(0,r.jsx)(H.Z,{game:p,size:H.Z.Sizes.XSMALL,className:Cn().selectedIcon}):(0,r.jsx)(h,{className:Cn().selectedIcon}),(0,r.jsx)("span",{className:Cn().ellipsisText,children:f}),t?(0,r.jsx)(j.Co,{className:Cn().changeButton,color:j.Co.Colors.PRIMARY,size:j.Co.Sizes.SMALL,onClick:o,children:se.Z.Messages.CHANGE}):null]})})}function xn(e){var n=e.onChange,t=e.guildId,l=(0,u.e7)([S.Z],(function(){return S.Z.getGuild(t)}));if(null==l){n();return null}return(0,r.jsx)(Y.xJ,{title:se.Z.Messages.GO_LIVE_MODAL_GUILD_FORM_TITLE,className:Ie().modalContent,titleClassName:Ie().formItemTitle,children:(0,r.jsxs)(Be,{children:[(0,r.jsx)(z.Z,{guild:l,size:z.Z.Sizes.SMALLER,
className:Cn().selectedIcon}),(0,r.jsx)("span",{className:Cn().ellipsisText,children:l.toString()}),(0,r.jsx)(j.Co,{className:Cn().changeButton,color:j.Co.Colors.PRIMARY,size:j.Co.Sizes.SMALL,onClick:n,children:se.Z.Messages.CHANGE})]})})}function Nn(e){var n=e.text;return(0,r.jsxs)(x.Z,{align:x.Z.Align.CENTER,className:Cn().warning,children:[(0,r.jsx)(K.Z,{className:Cn().warningIcon}),(0,r.jsx)(s.xv,{color:"none",variant:"text-xs/normal",children:n})]})}function _n(e){var n,t=e.guildId,o=(0,u.e7)([B.Z],(function(){return null!==(n=B.Z.getMemberCount(t))&&void 0!==n?n:0})),i=F.eo.useSetting(),a=l.useCallback((function(e,n){F.eo.updateSetting(n);T.default.track(en.rMx.NOTIFY_STREAM_SETTING_UPDATE,{value:n})}),[]);return o>=2&&o<=ae.tB?(0,r.jsx)(Y.xJ,{className:k()(Ie().modalContent,Cn().checkboxRow),children:(0,r.jsx)(W.Z,{value:!!i,type:W.Z.Types.INVERTED,onChange:a,children:(0,r.jsx)(s.xv,{variant:"text-sm/normal",children:se.Z.Messages.GO_LIVE_MODAL_NOTIFY_FRIENDS_CHECKBOX_LABEL})})
}):null}function Zn(e){var n=e.selectedSource,t=e.selectedFPS,o=e.selectedChannelId,i=e.selectedPreset,a=e.selectedResolution,s=e.sourceChanged,c=e.guildId,f=e.selectSource,d=e.selectGuild,p=e.onClose,h=e.onChangeSelectedFPS,m=e.onChangeSelectedResolution,g=e.onChangeSelectedPreset,S=e.onChangeSelectedChannelId,b=e.onChangeSource,C=e.onChangeGuild,j=(0,u.e7)([E.Z,v.Z],(function(){return v.Z.getChannel(E.Z.getVoiceChannelId())})),x=(0,u.e7)([te.Z],(function(){return te.Z.GPUDriversOutdated})),N=(0,u.e7)([y.Z],(function(){return y.Z.getSoundshareEnabled()})),_=(0,u.e7)([O.default],(function(){return O.default.getCurrentUser()})),Z=y.Z.supports(ue.AN.SOUNDSHARE)?(0,P.ED)()&&!le().satisfies(null===ie.Z||void 0===ie.Z?void 0:ie.Z.os.release,ae.I9)?se.Z.Messages.GO_LIVE_SCREENSHARE_UPDATE_WINDOWS_FOR_SOUNDSHARE:(0,P.id)()&&!le().satisfies(null===ie.Z||void 0===ie.Z?void 0:ie.Z.os.release,ae.Ec)?se.Z.Messages.GO_LIVE_SCREENSHARE_UPDATE_MACOS_FOR_SOUNDSHARE:null:oe.GO_LIVE_SCREENSHARE_NO_SOUND
;null!=n&&n.id.startsWith("screen")?Z=se.Z.Messages.GO_LIVE_SCREENSHARE_NO_SOUND:null==Z&&y.Z.supportsEnableSoundshare()&&N!==en.rtk.ENABLED&&(Z=se.Z.Messages.GO_LIVE_SCREENSHARE_ENABLE_FOR_SOUNDSHARE.format({onVoiceSettingsClick:function(){p();G.Z.open(en.oAB.VOICE)}}));var R=null!=_&&_.verified&&!_.bot,I=null!=j&&!(0,V.Yk)(j),T=R&&I;return(0,r.jsxs)(l.Fragment,{children:[(0,r.jsx)(jn,{selectSource:f,sourceChanged:s,onChangeSource:b,selectedSource:n}),null!=Z?(0,r.jsx)(Nn,{text:Z}):null,d&&null!=c?(0,r.jsx)(xn,{guildId:c,onChange:C}):null,null!=j?(0,r.jsx)(We,{channel:j}):(0,r.jsx)(ke,{guildId:c,selectedChannelId:o,onChangeSelectedChannelId:S}),null!=c&&T?(0,r.jsx)(_n,{guildId:c}):null,x?(0,r.jsx)(Nn,{text:se.Z.Messages.GO_LIVE_VIDEO_DRIVERS_OUTDATED}):null,(0,r.jsx)(yn,{selectedPreset:i,selectedFPS:t,selectedResolution:a,guildId:c,onClose:p,onFPSChange:h,onResolutionChange:m,onPresetChange:g})]})}var Rn=t(496486),In=t.n(Rn),Tn=t(784238),Pn=t(414597),wn=t(540837),Mn=t.n(wn)
;function An(e){var n=e.guildId,t=e.onClick,l=(0,u.e7)([S.Z],(function(){return S.Z.getGuild(n)})),o=(0,u.e7)([ce.ZP,S.Z,fe.Z],(function(){return ce.ZP.getChannels(n)[ce.Zb].some((function(e){var n=e.channel;return(0,he.JL)(n,S.Z,fe.Z)}))}));return null!=l&&o?(0,r.jsxs)(Qe.Z,{onClick:function(){return t(n)},className:Mn().guildRow,children:[(0,r.jsx)(z.Z,{guild:l,size:z.Z.Sizes.SMALL,className:Mn().guildIcon}),(0,r.jsx)(s.xv,{variant:"text-md/normal",className:Mn().guildName,children:l.toString()}),(0,r.jsx)(Pn.Z,{direction:Pn.Z.Directions.RIGHT,className:Mn().guildArrow})]}):null}function Ln(e){var n=e.onSelectGuild,t=(0,u.e7)([Tn.Z],(function(){return Tn.Z.guildFolders}));return(0,r.jsx)(Le,{title:se.Z.Messages.GO_LIVE_MODAL_SELECT_GUILD_FORM_TITLE,scrollerClassName:k()(Mn().guildScroller,Ie().marginBottom),children:In().flatMap(t,(function(e){return e.guildIds.map((function(e){return(0,r.jsx)(An,{guildId:e,onClick:n},e)}))}))})}var Dn=t(137680),Un=t(365523),kn=t(883518),Gn=t.n(kn)
;function Vn(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function Fn(e){Fn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return Fn(e)}function Bn(e,n){return!n||"object"!==zn(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function Wn(e,n){Wn=Object.setPrototypeOf||function(e,n){e.__proto__=n;return e};return Wn(e,n)}var Hn,zn=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function Yn(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var t,r=Fn(e);if(n){var l=Fn(this).constructor;t=Reflect.construct(r,arguments,l)
}else t=r.apply(this,arguments);return Bn(this,t)}}!function(e){e.WRAP="wrap";e.STACK="stack"}(Hn||(Hn={}));var Jn=function(e){!function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}});n&&Wn(e,n)}(t,e);var n=Yn(t);function t(){Vn(this,t);return n.apply(this,arguments)}var l=t.prototype;l.renderChildren=function(){var e,n=this.props,t=n.children,l=n.layout,o=n.columns;switch(l){case Hn.STACK:e="100%";break;case Hn.WRAP:e="".concat(1/o*100,"%")}return t.map((function(n,t){return(0,r.jsx)(x.Z.Child,{className:Gn().tile,basis:e,grow:0,children:n},t)}))};l.render=function(){var e=this.props.className;return(0,r.jsx)(x.Z,{className:k()(e,Gn().grid),wrap:x.Z.Wrap.WRAP,children:this.renderChildren()})};return t}(l.PureComponent);Jn.Layout=Hn;Jn.defaultProps={children:[],layout:Hn.WRAP,columns:4};const Kn=Jn;var Xn=t(944053),qn=t.n(Xn)
;function Qn(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function $n(e){$n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return $n(e)}function et(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}});n&&tt(e,n)}function nt(e,n){return!n||"object"!==rt(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function tt(e,n){tt=Object.setPrototypeOf||function(e,n){e.__proto__=n;return e};return tt(e,n)}var rt=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function lt(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1
;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var t,r=$n(e);if(n){var l=$n(this).constructor;t=Reflect.construct(r,arguments,l)}else t=r.apply(this,arguments);return nt(this,t)}}var ot=function(e){et(t,e);var n=lt(t);function t(){Qn(this,t);var e;(e=n.apply(this,arguments)).handleClick=function(n){var t=e.props.onClick;return null==t?void 0:t(e.props.option,n)};return e}t.prototype.render=function(){var e=this.props,n=e.selected,t=e.className,l=e.selectedClassName,o=this.props.option.name,i=function(e,n,t){n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t;return e}({},qn().selected,n);null!=l&&(i[l]=n);return(0,r.jsx)(Qe.Z,{className:k()(qn().item,t,i),onClick:this.handleClick,children:o})};return t}(l.PureComponent),it=function(e){et(t,e);var n=lt(t);function t(){Qn(this,t);return n.apply(this,arguments)}var l=t.prototype
;l.renderItem=function(e){var n=this.props,t=n.value,l=n.optionClassName,o=n.selectedOptionClassName,i=t===e.value;return(0,r.jsx)(ot,{selected:i,option:e,onClick:this.props.onChange,className:l,selectedClassName:o},e.value)};l.render=function(){var e=this.props.className;return(0,r.jsx)(x.Z,{className:k()(qn().container,e),shrink:0,children:this.props.options.map(this.renderItem,this)})};return t}(l.PureComponent);it.defaultProps={options:[],onChange:en.dG4,value:null};const at=it;var ut=t(82961),st=t(583711),ct=t.n(st);function ft(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function dt(e,n,t,r,l,o,i){try{var a=e[o](i),u=a.value}catch(e){t(e);return}a.done?n(u):Promise.resolve(u).then(r,l)}function pt(e){return function(){var n=this,t=arguments;return new Promise((function(r,l){var o=e.apply(n,t);function i(e){dt(o,r,l,i,a,"next",e)}function a(e){dt(o,r,l,i,a,"throw",e)}i(void 0)}))}}function ht(e,n,t){
n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t;return e}function mt(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,l,o=[],i=!0,a=!1;try{for(t=t.call(e);!(i=(r=t.next()).done);i=!0){o.push(r.value);if(n&&o.length===n)break}}catch(e){a=!0;l=e}finally{try{i||null==t.return||t.return()}finally{if(a)throw l}}return o}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return ft(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ft(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var vt=function(e,n){
var t,r,l,o,i={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,r&&(l=2&o[0]?r.return:o[0]?r.throw||((l=r.return)&&l.call(r),0):r.next)&&!(l=l.call(r,o[1])).done)return l;(r=0,l)&&(o=[2&o[0],l.value]);switch(o[0]){case 0:case 1:l=o;break;case 4:i.label++;return{value:o[1],done:!1};case 5:i.label++;r=o[1];o=[0];continue;case 7:o=i.ops.pop();i.trys.pop();continue;default:if(!(l=i.trys,l=l.length>0&&l[l.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!l||o[1]>l[0]&&o[1]<l[3])){i.label=o[1];break}if(6===o[0]&&i.label<l[1]){i.label=l[1];l=o;break}if(l&&i.label<l[2]){i.label=l[2];i.ops.push(o);break}l[2]&&i.ops.pop();i.trys.pop();continue}o=n.call(e,i)}catch(e){o=[6,e];r=0}finally{t=l=0}if(5&o[0])throw o[1]
;return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};function gt(){return(0,Dn.Z)(y.Z.getMediaEngine(),[Dn.v.WINDOW,Dn.v.SCREEN],{width:176,height:99}).then((function(e){var n=e.filter((function(e){return e.id.startsWith(Dn.v.SCREEN)}));return{windowSources:e.filter((function(e){return e.id.startsWith(Dn.v.WINDOW)})).sort((function(e,n){return St(n)-St(e)})),screenSources:n}}))}function St(e){var n=(0,P.ED)()?(0,D.Z)(b.Z,C.Z):null,t=b.Z.getRunningGames();return null!=n&&(0,bn.Z)(e.id,n.windowHandle)?2:null!=t.find((function(n){return(0,bn.Z)(e.id,n.windowHandle)}))?1:0}function yt(e){var n=e.selectedSource,t=e.onChangeSelectedSource,o=mt(l.useState(null),2),i=o[0],a=o[1],u=mt(l.useState(null),2),c=u[0],f=u[1],d=mt(l.useState(Dn.v.WINDOW),2),p=d[0],h=d[1],m=mt(l.useState(!1),2),v=m[0],g=m[1],S=l.useRef(null),y=l.useRef(new Un.Xp);l.useEffect((function(){var e=y.current;gt().then((function(n){var t=n.screenSources,r=n.windowSources;a(t);f(r);e.start(1e3,pt((function(){var e,n,t
;return vt(this,(function(r){switch(r.label){case 0:return[4,gt()];case 1:e=r.sent(),n=e.screenSources,t=e.windowSources;a(n);f(t);return[2]}}))})))}));return function(){e.stop()}}),[]);var b=l.useCallback((function(e){if(null!==e){S.current=e;var n;g(null!==(n=!e.isScrolledToTop())&&void 0!==n&&n)}}),[]),E=p===Dn.v.WINDOW?c:i;if(null==E)return(0,r.jsx)(x.Z,{className:ct().spinner,justify:x.Z.Justify.CENTER,align:x.Z.Align.CENTER,children:(0,r.jsx)(ut.Z,{})});var O=E.map((function(e){var l=e.id,o=e.name,i=e.url,a=(null==n?void 0:n.id)===l;return(0,r.jsx)(Qe.Z,{className:k()(ct().tile,ht({},ct().selected,a)),onClick:function(){return t(e)},children:(0,r.jsxs)(x.Z,{direction:x.Z.Direction.VERTICAL,justify:x.Z.Justify.CENTER,align:x.Z.Align.CENTER,children:[(0,r.jsx)(x.Z,{justify:x.Z.Justify.CENTER,align:x.Z.Align.CENTER,children:(0,r.jsx)("div",{style:{backgroundImage:"url(".concat(i,")")},className:k()(ct().sourceThumbnail,ht({},ct().selected,a))})}),(0,r.jsx)(s.xv,{
className:k()(ct().sourceName,ht({},ct().selected,a)),variant:"text-sm/normal",children:o})]})},l)}));return(0,r.jsxs)(l.Fragment,{children:[(0,r.jsxs)("div",{className:ct().segmentContainer,children:[(0,r.jsx)(Ze,{separator:v}),(0,r.jsx)(at,{options:[{name:se.Z.Messages.GO_LIVE_MODAL_APPLICATIONS,value:Dn.v.WINDOW},{name:se.Z.Messages.GO_LIVE_MODAL_SCREENS,value:Dn.v.SCREEN}],value:p,onChange:function(e){var n=e.value;return h(n)},className:ct().segmentControl,optionClassName:ct().segmentControlOption})]}),(0,r.jsx)(je.ZP,{ref:b,className:ct().sourceScroller,onScroll:function(){var e=S.current;null!=e&&g(!e.isScrolledToTop())},children:(0,r.jsx)(Kn,{layout:Kn.Layout.WRAP,columns:2,className:ct().sourceContainer,children:O})})]})}var bt=t(754804);function Et(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Ot(e,n,t,r,l,o,i){try{var a=e[o](i),u=a.value}catch(e){t(e);return}a.done?n(u):Promise.resolve(u).then(r,l)}function Ct(e){
return function(){var n=this,t=arguments;return new Promise((function(r,l){var o=e.apply(n,t);function i(e){Ot(o,r,l,i,a,"next",e)}function a(e){Ot(o,r,l,i,a,"throw",e)}i(void 0)}))}}function jt(e,n,t){n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t;return e}function xt(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))));r.forEach((function(n){jt(e,n,t[n])}))}return e}function Nt(e,n){n=null!=n?n:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})));t.push.apply(t,r)}return t
}(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}));return e}function _t(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,l,o=[],i=!0,a=!1;try{for(t=t.call(e);!(i=(r=t.next()).done);i=!0){o.push(r.value);if(n&&o.length===n)break}}catch(e){a=!0;l=e}finally{try{i||null==t.return||t.return()}finally{if(a)throw l}}return o}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return Et(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Et(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}
var Zt,Rt=function(e,n){var t,r,l,o,i={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,r&&(l=2&o[0]?r.return:o[0]?r.throw||((l=r.return)&&l.call(r),0):r.next)&&!(l=l.call(r,o[1])).done)return l;(r=0,l)&&(o=[2&o[0],l.value]);switch(o[0]){case 0:case 1:l=o;break;case 4:i.label++;return{value:o[1],done:!1};case 5:i.label++;r=o[1];o=[0];continue;case 7:o=i.ops.pop();i.trys.pop();continue;default:if(!(l=i.trys,l=l.length>0&&l[l.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!l||o[1]>l[0]&&o[1]<l[3])){i.label=o[1];break}if(6===o[0]&&i.label<l[1]){i.label=l[1];l=o;break}if(l&&i.label<l[2]){i.label=l[2];i.ops.push(o);break}l[2]&&i.ops.pop();i.trys.pop();continue}o=n.call(e,i)}catch(e){o=[6,e];r=0}finally{t=l=0
}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};!function(e){e[e.GUILD=0]="GUILD";e[e.SOURCE=1]="SOURCE";e[e.CONFIRM=2]="CONFIRM"}(Zt||(Zt={}));function It(e,n){T.default.track(en.rMx.SCREENSHARE_FAILED,{source_id:e,screens:n.length})}function Tt(e){var n,o=e.selectGuild,U=void 0!==o&&o,k=e.selectSource,G=void 0===k||k,V=e.guildId,F=e.analyticsLocation,B=e.onClose,W=e.transitionState,H=function(){!function(){i()(null!=Q||null!=ge,"got nothing to stream");var e,n=null!==(e=null==q?void 0:q.id)&&void 0!==e?e:he;i()(null!=n,"Received null target channel ID");var t,r=v.Z.getChannel(n),l=null!==(t=null==r?void 0:r.getGuildId())&&void 0!==t?t:V;null==q&&f.default.selectVoiceChannel(n);var o=be,a=Ce,u=Ne;if(!(0,M.Z)(o,a,u,$,ee)){o=A.tI.PRESET_VIDEO;a=A.LY.RESOLUTION_720;u=A.ws.FPS_30}(0,d.Rc)({preset:o,resolution:a,frameRate:u});var s=En(Q,ge,b.Z.getRunningGames()),p=(0,P.ED)()&&null!=s&&null!=s?s.pid:null;(0,d.WH)(l,n,{pid:p,sourceId:null==p&&null!=ge?ge.id:null,
sourceName:null==p&&null!=ge?ge.name:null});Ct((function(){return Rt(this,(function(e){switch(e.label){case 0:return[4,h.Z.hasPermission(bt.Eu.SCREEN_RECORDING,{showAuthorizationError:!1})];case 1:e.sent()||c.Z.show({title:se.Z.Messages.WARNING_SCREEN_RECORDING_PERMISSION_TITLE,body:se.Z.Messages.WARNING_SCREEN_RECORDING_PERMISSION_BODY});return[2]}}))}))()}();B()},z=function(){var e,n=null!==(e=null==Q?void 0:Q.pid)&&void 0!==e?e:null;(0,I.ZD)(Ct((function(){var e,l;return Rt(this,(function(o){switch(o.label){case 0:return[4,t.e(74918).then(t.bind(t,474918))];case 1:e=o.sent(),l=e.default;return[2,function(e){return(0,r.jsx)(l,Nt(xt({},e),{handleStream:H,pid:n}))}]}}))})))},Y=(0,u.e7)([m.Z],(function(){return m.Z.getState()})),J=Y.preset,K=Y.resolution,X=Y.fps,q=(0,u.e7)([E.Z,v.Z],(function(){return v.Z.getChannel(E.Z.getVoiceChannelId())})),Q=(0,u.e7)([b.Z,C.Z],(function(){return(0,P.ED)()?(0,D.Z)(b.Z,C.Z):null})),$=(0,u.e7)([O.default],(function(){var e=O.default.getCurrentUser()
;i()(null!=e,"GoLiveModal: user cannot be undefined");return e})),ee=(0,u.e7)([S.Z],(function(){var e;return null===(e=S.Z.getGuild(V))||void 0===e?void 0:e.premiumTier})),ne=_t(null!==(n=L(J,$,ee))&&void 0!==n?n:[A.LY.RESOLUTION_720,A.ws.FPS_30],2),te=ne[0],re=ne[1];if(J!==A.tI.PRESET_CUSTOM){K=te;X=re}var le,oe=(0,_.Dt)(),ie=_t(l.useState(function(e,n){return e?Zt.GUILD:n?Zt.SOURCE:Zt.CONFIRM}(U,G)),2),ae=ie[0],ue=ie[1],ce=_t(l.useState(!1),2),fe=ce[0],de=ce[1],pe=_t(l.useState(null),2),he=pe[0],me=pe[1],ve=_t(l.useState(null),2),ge=ve[0],Se=ve[1],ye=_t(l.useState(J),2),be=ye[0],Ee=ye[1],Oe=_t(l.useState(K),2),Ce=Oe[0],je=Oe[1],xe=_t(l.useState(X),2),Ne=xe[0],_e=xe[1],Ze=_t(l.useState(null!=V?V:null),2),Re=Ze[0],Te=Ze[1],Pe=null!==(le=null==q?void 0:q.id)&&void 0!==le?le:he;l.useEffect((function(){var e=(0,P.ED)()?(0,D.Z)(b.Z,C.Z):null,n=null!=(null==e?void 0:e.id)?g.Z.getGame(e.id):null;T.default.track(en.rMx.OPEN_MODAL,{type:"Go Live Modal",application_id:null==n?void 0:n.id,
application_name:null==e?void 0:e.name,game_id:null==n?void 0:n.id,location_section:F})}),[F]);var we=l.useCallback((function(e,n,t){var r=L(e,$,ee),l=_t(null!=r?r:[n,t],2),o=l[0],i=l[1];if(e!==be){n=o;t=i}if(!(0,M.Z)(e,n,t,$,ee)){var a=_t(L(A.tI.PRESET_VIDEO,$,ee),2);n=a[0];t=a[1]}t!==Ne&&_e(t);n!==Ce&&je(n);o!==n||i!==t?Ee(A.tI.PRESET_CUSTOM):e!==be&&Ee(e)}),[$,ee,Ne,Ce,be]);function Me(){return(Me=Ct((function(e){var n,t,l,o;return Rt(this,(function(i){switch(i.label){case 0:e.preventDefault();if(ae===Zt.SOURCE)return[2,ue(Zt.CONFIRM)];n=En(Q,ge,b.Z.getRunningGames());t=w.default.supportsFeature(en.eRX.ELEVATED_HOOK)&&(null==n?void 0:n.elevated);return(0,P.id)()&&null!=ge?[4,y.Z.getMediaEngine().getDesktopSources()]:[3,2];case 1:l=i.sent();if((o=ge.id).startsWith("screen")&&l.length>0&&!l.some((function(e){return e.includes(o)}))){It(o,l);(0,I.h7)((function(e){return(0,r.jsx)(Z.default,Nt(xt({header:se.Z.Messages.SCREENSHARE_RELAUNCH,confirmText:se.Z.Messages.OKAY,
cancelText:se.Z.Messages.CANCEL,onConfirm:function(){return w.default.relaunch()}},e),{children:(0,r.jsx)(s.xv,{variant:"text-md/normal",children:se.Z.Messages.SCREENSHARE_RELAUNCH_BODY})}))}));return[2]}i.label=2;case 2:t?z():H();return[2]}}))}))).apply(this,arguments)}var Ae=l.useCallback((function(e){Se(e);if(null!=e){ue(Zt.CONFIRM);de(!0)}}),[]),Le=l.useCallback((function(e){Te(e);ue(G?Zt.SOURCE:Zt.CONFIRM)}),[G]),De=function(e){switch(e){case Zt.SOURCE:return se.Z.Messages.GO_LIVE_MODAL_DESCRIPTION_SELECT_SOURCE;case Zt.CONFIRM:return null;case Zt.GUILD:default:return se.Z.Messages.GO_LIVE_MODAL_DESCRIPTION_GENERIC}}(ae),Ue=(0,r.jsx)(R.xB,{className:Ie().modalHeader,separator:!1,children:(0,r.jsxs)(x.Z,{direction:x.Z.Direction.VERTICAL,align:x.Z.Align.CENTER,className:Ie().header,children:[(0,r.jsx)(s.X6,{variant:"heading-xl/semibold",id:oe,className:Ie().headerText,children:se.Z.Messages.GO_LIVE_MODAL_TITLE}),null!=De?(0,r.jsx)(s.xv,{className:Ie().headerDescription,
variant:"text-md/normal",color:"text-normal",children:De}):null]})}),ke=(0,r.jsxs)(N.My,{springConfig:Nt(xt({},a.config.stiff),{clamp:!0}),activeSlide:ae,width:400,children:[(0,r.jsx)(N.Mi,{id:Zt.GUILD,children:(0,r.jsx)("div",{className:Ie().modalSize,children:(0,r.jsx)(Ln,{onSelectGuild:Le})})}),(0,r.jsx)(N.Mi,{id:Zt.SOURCE,children:(0,r.jsx)("div",{className:Ie().modalSize,children:(0,r.jsx)(yt,{selectedSource:ge,onChangeSelectedSource:Ae})})}),(0,r.jsx)(N.Mi,{id:Zt.CONFIRM,children:(0,r.jsx)("div",{className:Ie().modalSize,children:(0,r.jsx)(Zn,{selectedChannelId:he,selectedPreset:be,selectedResolution:Ce,selectedSource:ge,selectedFPS:Ne,sourceChanged:fe,selectSource:G,onChangeSelectedFPS:function(e){return we(be,Ce,e)},onChangeSelectedResolution:function(e){return we(be,e,Ne)},onChangeSelectedPreset:function(e){return we(e,Ce,Ne)},onChangeSelectedChannelId:me,onChangeSource:function(){return ue(Zt.SOURCE)},onChangeGuild:function(){return ue(Zt.GUILD)},onClose:B,guildId:Re,
selectGuild:U})})})]}),Ge=function(e,n,t,r){switch(e){case Zt.SOURCE:return n?Zt.GUILD:null;case Zt.CONFIRM:return r?Zt.SOURCE:!t&&n?Zt.GUILD:null;case Zt.GUILD:default:return null}}(ae,U,G,fe),Ve=ae!==Zt.CONFIRM||null==ge&&null==Q||null==Pe,Fe=(0,r.jsxs)(R.mz,{justify:null==Ge?x.Z.Justify.START:x.Z.Justify.BETWEEN,children:[(0,r.jsx)(j.Co,{type:"submit",size:j.Co.Sizes.SMALL,disabled:Ve,autoFocus:!0,children:se.Z.Messages.GO_LIVE_MODAL_CTA}),null==Ge?(0,r.jsx)(j.Co,{className:Ie().cancelButton,look:j.Co.Looks.LINK,size:j.Co.Sizes.SMALL,color:j.Tt.PRIMARY,onClick:B,children:se.Z.Messages.CANCEL}):(0,r.jsx)(j.Co,{size:j.Co.Sizes.SMALL,color:j.Tt.PRIMARY,onClick:function(){return ue(Ge)},children:se.Z.Messages.BACK})]});return(0,r.jsx)(p.Z,{page:en.ZY5.GO_LIVE_MODAL,children:(0,r.jsxs)(R.Y0,{"aria-labelledby":oe,transitionState:W,size:R.Cg.DYNAMIC,className:Ie().modalSize,children:[(0,r.jsx)(R.ol,{onClick:B,className:Ie().modalCloseButton}),(0,r.jsx)("div",{className:Ie().art}),(0,
r.jsxs)("form",{onSubmit:function(e){return Me.apply(this,arguments)},children:[Ue,ke,Fe]})]})})}},617781:(e,n,t)=>{t.d(n,{Z:()=>c});var r=t(785893),l=(t(667294),t(294184)),o=t.n(l),i=t(647446),a=t(237702),u=t.n(a),s=function(e){var n=e.data,t=e.disabled,l=n.content,a=n.className,s=n.onClick,c=n.disabled;return(0,r.jsx)(i.tE,{children:(0,r.jsx)("button",{type:"button",className:o()(u().item,a),onClick:s,disabled:t||c,children:l})})};const c=function(e){var n=e.buttons,t=e.disabled,l=e.className;return(0,r.jsx)("div",{role:"group",className:o()(u().group,l),children:n.map((function(e,n){return(0,r.jsx)(s,{data:e,disabled:t},n)}))})}}}]);
//# sourceMappingURL=40b6cd95b1f3f7697d06.js.map