"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[52643,37959],{678081:(t,e,n)=>{n.d(e,{Z:()=>g});var r=n(785893),o=n(667294),i=n(193197),a=n(891153),u=n(337823),c=n(742269),l=n(561388);function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n;return t}function p(t){p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)};return p(t)}function h(t,e){return!e||"object"!==b(e)&&"function"!=typeof e?s(t):e}function d(t,e){d=Object.setPrototypeOf||function(t,e){t.__proto__=e;return t};return d(t,e)}var b=function(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1
;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function(){var n,r=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h(this,n)}}function v(t){var e=["openFile"];t.multiple&&e.push("multiSelections");var n=t.filters;a.Z.fileManager.openFiles({properties:e,filters:n},l.zz).then((function(e){var n=e.map((function(t){return u.qF(t)}));null!=n&&t.onChange({stopPropagation:function(){return null},preventDefault:function(){return null},currentTarget:{files:n}})})).catch((function(e){t.onChange({stopPropagation:function(){return null},preventDefault:function(){return null},currentTarget:{files:null,err:e}})}))}const g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,
configurable:!0}});e&&d(t,e)}(n,t);var e=y(n);function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var r;(r=e.call(this,t))._ref=o.createRef();r.setRef=r.setRef.bind(s(r));return r}var a=n.prototype;a.activateUploadDialogue=function(){if(null!=this._ref)return this._ref.activateUploadDialogue()};a.setRef=function(t){this._ref=t};a.render=function(){return(0,r.jsx)(i.Z,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))));r.forEach((function(e){f(t,e,n[e])}))}return t}({ref:this.setRef,handleNativeClick:v,embedded:(0,c.nI)()},this.props))};return n}(o.Component)},877414:(t,e,n)=>{n.d(e,{Z:()=>r});const r=(0,n(553494).B)({kind:"user",id:"2022-09_sticker_upload_resize",label:"Sticker Upload Resize",
defaultConfig:{enabled:!1},treatments:[{id:1,label:"Automatic resize PNG on sticker upload flow",config:{enabled:!0}}]})},204660:(t,e,n)=>{n.d(e,{$p:()=>s,PT:()=>p,U$:()=>h,Es:()=>b,kH:()=>y,AK:()=>v,Ae:()=>g});var r=n(496486),o=n(476154);function i(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){n(t);return}u.done?e(c):Promise.resolve(c).then(r,o)}function a(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function u(t){i(a,r,o,u,c,"next",t)}function c(t){i(a,r,o,u,c,"throw",t)}u(void 0)}))}}var u=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),
0):r.next)&&!(o=o.call(r,i[1])).done)return o;(r=0,o)&&(i=[2&i[0],o.value]);switch(i[0]){case 0:case 1:o=i;break;case 4:a.label++;return{value:i[1],done:!1};case 5:a.label++;r=i[1];i=[0];continue;case 7:i=a.ops.pop();a.trys.pop();continue;default:if(!(o=a.trys,o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1];o=i;break}if(o&&a.label<o[2]){a.label=o[2];a.ops.push(i);break}o[2]&&a.ops.pop();a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t];r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}};function c(t){return new Promise((function(e){var n=new FileReader;n.onload=function(t){var n,r=null===(n=t.target)||void 0===n?void 0:n.result;e("string"==typeof r?r:"")};n.readAsDataURL(t)}))}function l(t,e,n,r){var o=t.naturalWidth/t.width,i=e.width/2,a=e.height/2,u=(t.width/2-i-n.x)*o,c=(t.height/2-a-n.y)*o,l=e.width*o,s=e.height*o;return{x:u,
y:c,scaledCropWidth:l,scaledCropHeight:s,canvasWidth:Math.min(l,r.width),canvasHeight:Math.min(s,r.height)}}function s(t,e,n,r,o){return f.apply(this,arguments)}function f(){return(f=a((function(t,e,r,i,a){var s,f,p,h,d,b,y,v;return u(this,(function(u){switch(u.label){case 0:s=l(e,r,i,a),f=s.x,p=s.y,h=s.scaledCropWidth,d=s.scaledCropHeight;return[4,t.arrayBuffer()];case 1:b=u.sent();y=new Worker(new URL(n.p+n.u(44499),n.b));v=new Promise((function(t,e){y.onmessage=function(n){var r=n.data;if(r.type===o.u.CROP_GIF_COMPLETE){t(c(new Blob([r.result])));y.terminate()}else if(r.type===o.u.CROP_GIF_ERROR){e(new Error("Error cropping GIF"));y.terminate()}}}));y.postMessage({type:o.u.CROP_GIF_START,gif:new Uint8Array(b),x:0|f,y:0|p,width:0|h,height:0|d});return[2,{result:v,cancelFn:function(){return y.terminate()}}]}}))}))).apply(this,arguments)}function p(t,e,n,r){
var o=l(t,e,n,r),i=o.x,a=o.y,u=o.scaledCropWidth,c=o.scaledCropHeight,s=o.canvasWidth,f=o.canvasHeight,p=document.createElement("canvas");p.width=s;p.height=f;var h=p.getContext("2d");null!=h&&h.drawImage(t,i,a,u,c,0,0,p.width,p.height);return p.toDataURL("image/png")}function h(t,e,n){return{x:(0,r.clamp)(t,n.left,n.right),y:(0,r.clamp)(e,n.bottom,n.top)}}function d(t,e,n,r){var i=n,a=r;if(n>o.vJ){i=o.vJ;a=r*(o.vJ/n)}return n/r<t?{width:i,height:a}:{width:i*(e/a),height:e}}function b(t,e,n){switch(t){case o.pC.AVATAR:return{width:e,height:n};case o.pC.BANNER:return d(o.MY,o.qj,e,n);case o.pC.BANNER_V2:return d(o.U9,o.qj,e,n);case o.pC.GUILD_BANNER:return d(o.Ij,o.C5,e,n);case o.pC.VIDEO_BACKGROUND:return d(o.Ff,o.PB,e,n);case o.pC.SCHEDULED_EVENT_IMAGE:return d(o.ut,o.WV,e,n);case o.pC.HOME_HEADER:return d(o.sX,o.SW,e,n)}}function y(t,e,n){var r={top:0,bottom:0,left:0,right:0},o=t-n.width,i=e-n.height;if(0!==o){r.left=-Math.abs(o/2);r.right=o/2}if(0!==i){r.bottom=-Math.abs(i/2)
;r.top=i/2}return r}function v(t,e,n,r){switch(t){case o.pC.AVATAR:var i=Math.min(e,n);return{width:i,height:i};case o.pC.BANNER:var a=Math.min(e,o.vJ);return{width:a,height:a*(1/o.MY)};case o.pC.BANNER_V2:var u=Math.min(e,o.vJ);return{width:u,height:u*(1/o.U9)};case o.pC.GUILD_BANNER:var c=Math.min(e,o.vJ);return{width:c,height:Math.min(c*(9/16),r)};case o.pC.VIDEO_BACKGROUND:var l=Math.min(e,o.vJ);return{width:l,height:l*(9/16)};case o.pC.SCHEDULED_EVENT_IMAGE:var s=Math.min(e,o.vJ);return{width:s,height:.4*s};case o.pC.HOME_HEADER:var f=Math.min(e,o.vJ);return{width:f,height:f*(1/o.sX)}}}function g(t,e,n){var r=t.naturalWidth/t.naturalHeight,o=e,i=n;t.naturalWidth>t.naturalHeight?o/=r:i*=r;var a={height:o,width:i};return p(t,{width:t.width,height:t.height},{x:0,y:0},a)}},70804:(t,e,n)=>{n.d(e,{h:()=>r});var r=(0,n(553494).B)({kind:"guild",id:"2021-07_stickers_lottie_upload",label:"Lottie Sticker Uploads",defaultConfig:{enabled:!1},treatments:[{id:1,
label:"Allow Lottie sticker uploads",config:{enabled:!0}}]})},629858:(t,e,n)=>{n.d(e,{u:()=>C,Z:()=>P});var r=n(785893),o=n(667294),i=n(294184),a=n.n(i),u=n(248088),c=n(791462),l=n(182634),s=n(971738),f=n(511716),p=n(191940),h=n(461061),d=n(959797),b=n(307174),y=n.n(b);function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function g(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n;return t}function w(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))));r.forEach((function(e){g(t,e,n[e])}))}return t}function m(t,e){e=null!=e?e:{};Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):function(t,e){var n=Object.keys(t)
;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})));n.push.apply(n,r)}return n}(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}));return t}function O(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(t);!(a=(r=n.next()).done);a=!0){i.push(r.value);if(e&&i.length===e)break}}catch(t){u=!0;o=t}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return v(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(t,e)
}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var C={tension:800,friction:24};const P=function(t){var e=t.tabIndex,n=t.className,i=t.renderButtonContents,b=t.active,v=t.onClick,g=t["aria-controls"],P=t.focusProps,_=O(o.useState(!1),2),k=_[0],E=_[1],j=O(o.useState(0),2),R=j[0],N=j[1],D=(0,c.e7)([s.Z],(function(){return s.Z.getGuildId()})),x=k||b,M=(0,f.l)(y(),"emojiButton",x?"Hovered":"Normal"),S=function(t){var e=-t%h.DCN.PickerPerRow*22,n=22*-Math.floor(t/h.DCN.PickerPerRow);return{backgroundPosition:"".concat(e,"px ").concat(n,"px"),backgroundSize:"".concat(22*h.DCN.PickerPerRow,"px ").concat(22*Math.ceil(h.DCN.PickerCount/h.DCN.PickerPerRow),"px")}}(R),A=o.useCallback((function(){if(!x){var t=Math.floor(Math.random()*h.DCN.PickerCount);E(!0);N(t);(0,l.O)(D)}}),[x,E,N,D]),I=o.useCallback((function(){E(!1)}),[E]),B=o.useCallback((function(){(0,
l.O)(D)}),[D]);return(0,r.jsx)(p.Co,{look:p.Co.Looks.BLANK,size:p.Co.Sizes.NONE,tabIndex:e,className:a()(M,n),onMouseEnter:A,onMouseOver:A,onMouseLeave:I,onFocus:B,onClick:v,"aria-label":d.Z.Messages.SELECT_EMOJI,"aria-controls":g,"aria-expanded":b,"aria-selected":b,"aria-haspopup":"dialog",focusProps:P,children:null!=i?i():(0,r.jsx)(u.Spring,{config:C,to:{value:x?1:0},children:function(t){var e=t.value;return(0,r.jsx)(u.animated.div,{className:y().sprite,style:m(w({},S),{transform:e.to([0,1],[1,1.14]).to((function(t){return"scale(".concat(t,")")})),filter:e.to((function(t){return"grayscale(".concat(100-100*t,"%)")}))})})}})})}},193197:(t,e,n)=>{n.d(e,{Z:()=>d});var r=n(785893),o=n(667294);function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t){a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)};return a(t)}function u(t,e){return!e||"object"!==l(e)&&"function"!=typeof e?function(t){
if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t,e){c=Object.setPrototypeOf||function(t,e){t.__proto__=e;return t};return c(t,e)}var l=function(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function(){var n,r=a(t);if(e){var o=a(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}var f="file-input",p=function(t){return{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0,cursor:t?"not-allowed":"pointer",fontSize:0}},h=function(t){!function(t,e){
if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});e&&c(t,e)}(n,t);var e=s(n);function n(){i(this,n);var t;(t=e.apply(this,arguments))._input=null;t.activateUploadDialogue=function(){t.props.embedded?t.handleNativeClick():t._input&&t._input.click()};t.handleNativeClick=function(){t.props.handleNativeClick&&t.props.handleNativeClick(t.props)};t.handleNativeKeyDown=function(e){" "!==e.key&&"Enter"!==e.key||t.handleNativeClick()};t.handleBrowserInputMouseDown=function(t){t.currentTarget.value=null};return t}n.prototype.render=function(){var t=this,e=this.props,n=e.disabled,o=e.tabIndex,i=e.className,a=e.name,u=e["aria-label"],c=e["aria-hidden"];if(this.props.embedded)return(0,r.jsx)("div",{role:"button",style:p(n),className:i||f,tabIndex:o,onKeyDown:n?void 0:this.handleNativeKeyDown,onClick:n?void 0:this.handleNativeClick,"aria-disabled":n,
"aria-label":u,"aria-hidden":c||void 0});var l="";this.props.filters&&(l=this.props.filters.map((function(t){return t.extensions.map((function(t){return".".concat(t)})).join(",")})).join(","));return(0,r.jsx)("input",{style:p(n),className:i||f,disabled:n,type:"file",tabIndex:o,onMouseDown:this.handleBrowserInputMouseDown,onChange:this.props.onChange,multiple:this.props.multiple,accept:l,name:a,"aria-label":u,"aria-hidden":c||void 0,ref:function(e){return t._input=e}})};return n}(o.Component);h.defaultProps={multiple:!1,disabled:!1,tabIndex:0};const d=h}}]);
//# sourceMappingURL=a4e2bce8c61f9ef665e5.js.map