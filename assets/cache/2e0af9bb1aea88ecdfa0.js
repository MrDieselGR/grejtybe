(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[15793],{457890:(e,n,t)=>{e.exports=t.p+"cf3e2e7f108d20c8d804a13c9067f5a6.svg"},715793:(e,n,t)=>{"use strict";t.r(n);t.d(n,{InviteCopyInputConnected:()=>xn,InviteRow:()=>Sn,default:()=>Rn});var r=t(785893),s=t(667294),i=t(294184),o=t.n(i),a=t(441143),l=t.n(a),u=t(496486),c=t.n(u),d=t(506884),h=t(791462),f=t(365523),g=t(489992),v=t(141301),p=t(173436),I=t(662322);var _=t(642400),E=t(549425),m=t(832691),y=t(356004),S=t(897268);function N(e){N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return N(e)}function T(e,n){return!n||"object"!==C(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function x(e,n){x=Object.setPrototypeOf||function(e,n){e.__proto__=n;return e};return x(e,n)}var C=function(e){
return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function R(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var t,r=N(e);if(n){var s=N(this).constructor;t=Reflect.construct(r,arguments,s)}else t=r.apply(this,arguments);return T(this,t)}}var A;!function(e){e[e.GROUP_DM=0]="GROUP_DM";e[e.USER=1]="USER"}(A||(A={}));var M=function(e){!function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}});n&&x(e,n)}(t,e);var n=R(t);function t(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t)
;return n.call(this,new m.Z("InviteQueue"),1010)}var r=t.prototype;r._sendInvite=function(e,n,t,r,s){E.Z.sendInvite(e.id,n,t,r).then((function(){return s(null,!0)}),(function(){return s(null,!1)}))};r.drain=function(e,n){var t=this,r=e.location,s=e.suggested;switch(e.type){case A.GROUP_DM:this._sendInvite(e.channel,e.inviteKey,r,s,n);break;case A.USER:_.Z.ensurePrivateChannel(e.user.id).then((function(i){var o=y.Z.getChannel(i);null!=o&&t._sendInvite(o,e.inviteKey,r,s,n)}),(function(){return n(null,!1)}))}};return t}(S.Z);const O=new M;var Z=t(859169),L=t(64833),w=t(125628),j=t(485923),b=t(53211),V=t(394803),U=t(832010),D=t(573643),P=t(190422),B=t(714523),F=t(46323),G=t(272889);const k=(0,t(553494).B)({kind:"guild",id:"2022-05_vanity_url_target",label:"Vanity URL Targeting",defaultConfig:{enabled:!1},treatments:[{id:1,label:"Enabled",config:{enabled:!0}}]});var H=t(108268),K=t(756328),q=t(80635),W=t(18416),z=t(992141),Y=t(1812),X=t(287452),J=t(142348),Q=t(105405),$=t(630206)
;function ee(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function ne(e){ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return ne(e)}function te(e,n){return!n||"object"!==se(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function re(e,n){re=Object.setPrototypeOf||function(e,n){e.__proto__=n;return e};return re(e,n)}var se=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function ie(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var t,r=ne(e);if(n){var s=ne(this).constructor;t=Reflect.construct(r,arguments,s)
}else t=r.apply(this,arguments);return te(this,t)}}var oe,ae,le,ue,ce=new Set,de=[],he=new Map;function fe(e){var n=new Set,t=null==ue?void 0:ue.id,r=(0,J.rh)(ce,t);null==r||Q.Z.isBlocked(r.id)||n.add(r.id);var s=!0,i=!1,o=void 0;try{for(var a,l=$.Z.getUserAffinities()[Symbol.iterator]();!(s=(a=l.next()).done);s=!0){var u=a.value.user_id;Q.Z.isBlocked(u)||n.add(u)}}catch(e){i=!0;o=e}finally{try{s||null==l.return||l.return()}finally{if(i)throw o}}return(0,J.an)(e,ce,n,100,t)}function ge(e){de=e;he=new Map;e.forEach((function(e,n){he.set(e,{index:n})}))}var ve=function(e){!function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}});n&&re(e,n)}(t,e);var n=ie(t);function t(){ee(this,t);return n.apply(this,arguments)}var r=t.prototype;r.getInviteSuggestionRows=function(){return de};r.getTotalSuggestionsCount=function(){return ae}
;r.getInitialCounts=function(){return oe};r.getSelectedInviteMetadata=function(e){var n=he.get(e),t=$.Z.getUserAffinitiesUserIds();return null!=n?{rowNum:n.index,isAffinitySuggestion:e.isSuggested,numTotal:de.length,numAffinityConnections:t.size,isFiltered:le}:null};r.__getLocalVars=function(){return{MAX_INVITE_SUGGESTION_COUNT:100,userIdsToOmit:ce,inviteSuggestions:de,inviteSuggestionsMap:he,initialCounts:oe,totalCount:ae,isFiltered:le,currentGuild:ue}};return t}(h.ZP.Store);ve.displayName="InviteSuggestionsStore";const pe=new ve(p.Z,{LOAD_INVITE_SUGGESTIONS:function(e){var n=e.omitUserIds,t=e.guild,r=e.channel;ue=null!=r?t:null;ce=n;le=!1;var s=fe(""),i=s.rows,o=s.counts;ge(i);oe=o;ae=de.length},INVITE_SUGGESTIONS_SEARCH:function(e){var n=e.query;le=""!==n;ge(fe(n).rows)}})
;var Ie=t(940712),_e=t(962564),Ee=t(379822),me=t(971738),ye=t(893321),Se=t(859023),Ne=t(645897),Te=t(892472),xe=t(191940),Ce=t(146530),Re=t(629590),Ae=t(246887),Me=t(487502),Oe=t(31165),Ze=t(736488),Le=t(801593),we=t(757987),je=t(562181),be=t(73393),Ve=t(106027),Ue=t(81951),De=t(67416),Pe=t(766936),Be=t(632895),Fe=t(932847),Ge=t(726283),ke=t(461061),He=t(35236),Ke=t(830504),qe=t(848545),We=t(959797),ze=t(12977),Ye=t.n(ze),Xe=t(3066),Je=t.n(Xe),Qe=t(380203),$e=t.n(Qe),en=t(234532),nn=t.n(en),tn=t(641501),rn=t.n(tn),sn=t(457890),on=t.n(sn);function an(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function ln(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function un(e,n,t){n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t;return e}function cn(e){cn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return cn(e)}
function dn(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}});n&&fn(e,n)}function hn(e,n){return!n||"object"!==vn(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function fn(e,n){fn=Object.setPrototypeOf||function(e,n){e.__proto__=n;return e};return fn(e,n)}function gn(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,s,i=[],o=!0,a=!1;try{for(t=t.call(e);!(o=(r=t.next()).done);o=!0){i.push(r.value);if(n&&i.length===n)break}}catch(e){a=!0;s=e}finally{try{o||null==t.return||t.return()}finally{if(a)throw s}}return i}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return an(e,n)
;var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return an(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var vn=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function pn(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var t,r=cn(e);if(n){var s=cn(this).constructor;t=Reflect.construct(r,arguments,s)}else t=r.apply(this,arguments);return hn(this,t)}}
var In=J.ZP.getMaxAgeOptions,_n=J.ZP.getMaxUsesOptions,En=J.ZP.INVITE_OPTIONS_FOREVER,mn=J.ZP.INVITE_OPTIONS_7_DAYS,yn=J.ZP.INVITE_OPTIONS_UNLIMITED,Sn=function(e){dn(t,e);var n=pn(t);function t(){ln(this,t);var e;(e=n.apply(this,arguments)).state={sending:!1,invited:!1,hovered:!1};e.handleMouseEnter=function(){e.setState({hovered:!0})};e.handleMouseLeave=function(){e.setState({hovered:!1})};e.getSuggestedProps=function(){var n,t=e.props.row;return null!==(n=null!=t?pe.getSelectedInviteMetadata(t):null)&&void 0!==n?n:null};e.handleClickInvite=function(){var n=e.props,t=n.user,r=n.channel,s=n.inviteKey,i=n.location;if(null!=s)if(null!=r){e.setState({sending:!0});O.enqueue({type:A.GROUP_DM,channel:r,inviteKey:s,location:i,suggested:e.getSuggestedProps()},(function(n){e.setState({sending:!1,invited:n})}))}else if(null!=t){e.setState({sending:!0});O.enqueue({type:A.USER,user:t,inviteKey:s,location:i,suggested:e.getSuggestedProps()},(function(n){e.setState({sending:!1,invited:n})}))}}
;return e}var s=t.prototype;s.shouldComponentUpdate=function(e,n){return this.state.sending!==n.sending||this.state.invited!==n.invited||this.state.hovered!==n.hovered||this.props.user!==e.user||this.props.channel!==e.channel};s.renderUserOrChannel=function(){var e,n,t=this.props,s=t.user,i=t.channel;if(null!=s){e=s.getAvatarURL(null==i?void 0:i.guild_id,32);n=s.username}else if(null!=i){e=(0,w.x)(i);n=(0,b.F)(i,Se.default,Q.Z)}return null==e||null==n?null:(0,r.jsx)(Pe.ZP,{src:e,"aria-label":n,size:Pe.u8.SIZE_32,className:Ye().inviteRowAvatar})};s.render=function(){var e,n=this.props,t=n.user,s=n.channel,i=this.state,o=i.sending,a=i.invited,l=i.hovered;e=a?(0,r.jsx)(xe.Co,{look:xe.Co.Looks.LINK,size:xe.Co.Sizes.SMALL,disabled:!0,color:q.Z.theme===ke.BRd.DARK?xe.Co.Colors.WHITE:xe.Co.Colors.BLACK,children:We.Z.Messages.INVITE_FRIEND_MODAL_SENT}):(0,r.jsx)(xe.Co,{color:xe.Co.Colors.GREEN,look:l?xe.Co.Looks.FILLED:xe.Co.Looks.OUTLINED,className:Ye().inviteRowButton,size:xe.Co.Sizes.SMALL,
submitting:o,onClick:this.handleClickInvite,children:We.Z.Messages.INVITE_FRIEND_MODAL_INVITE});return(0,r.jsxs)("div",{className:Ye().inviteRow,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,children:[(0,r.jsxs)("div",{className:Ye().inviteRowInfo,children:[this.renderUserOrChannel(),(0,r.jsxs)("div",{className:Ye().inviteRowName,children:[null!=t?t.toString():null,null!=s?(0,b.F)(s,Se.default,Q.Z):null]})]}),e]})};return t}(s.Component),Nn=function(e){dn(t,e);var n=pn(t);function t(){ln(this,t);var e;(e=n.apply(this,arguments)).state={focused:!1,copied:!1};e._unsetCopiedState=new f.sW(1e3,(function(){return e.setState({copied:!1})}));e.handleCopy=function(){var n=e.props,t=n.value,r=n.onCopy;e.setState({copied:!0});e._unsetCopiedState.delay();r(t)};return e}var s=t.prototype;s.componentWillUnmount=function(){this._unsetCopiedState.cancel()};s.render=function(){var e,n=this,t=this.props,s=t.value,i=t.autoFocus,a=t.hideValue,l=this.state,u=l.focused,c=l.copied
;return(0,r.jsxs)("div",{className:o()(rn().input,Je().flexJustifyBetween,Je().flexCenter,(e={},un(e,rn().success,c),un(e,rn().focused,u),e)),children:[(0,r.jsx)(Le.ZP,{className:Ye().copyInput,name:"invite",value:a?We.Z.Messages.INSTANT_INVITE_HIDDEN:s,editable:!1,inputClassName:Ye().noBorder,autoFocus:i,onFocus:function(){return i?n.setState({focused:!0}):null},onBlur:function(){return i?n.setState({focused:!1}):null},spellCheck:"false",onClick:function(e){return e.currentTarget.select()},"aria-label":We.Z.Messages.FORM_LABEL_INVITE_LINK}),Ge.wS?(0,r.jsx)(xe.Co,{size:xe.Co.Sizes.SMALL,color:c?xe.Co.Colors.GREEN:xe.Co.Colors.BRAND,className:Ye().copyButton,onClick:this.handleCopy,children:c?We.Z.Messages.INVITE_COPIED:We.Z.Messages.COPY}):null]})};return t}(s.PureComponent);function Tn(e){var n=e.error;return(0,r.jsx)(g.xv,{className:Ye().errorMessage,variant:"text-xs/normal",color:"text-danger",children:n.getAnyErrorMessage()})}var xn=h.ZP.connectStores([ye.Z],(function(){return{
hideValue:ye.Z.hideInstantInvites}}))(Nn),Cn=function(e){dn(t,e);var n=pn(t);function t(e){ln(this,t);var s;(s=n.call(this,e))._scroller=null;s._headerId=c().uniqueId();s.handleGenerateNewLink=function(){var e=s.props,n=e.inviteChannel,t=e.source,r=e.canShowVanityURL,i=s.state,o=i.maxAge,a=i.maxUses,l=i.temporary,u=i.savedMaxAge,c=null==n?void 0:n.id;if(0===a&&0===o&&!l&&r)s.setState({networkError:void 0,showVanityURL:!0});else if(null!=c){s.setState({networkError:void 0,showVanityURL:!1});v.Z.createInvite(c,{max_age:o,max_uses:a,temporary:l},t).catch((function(e){return s.setState({networkError:e,showVanityURL:r})}))}o===En.value||u===En.value?s.setState({settingsOpen:!1}):s.setState({settingsOpen:!1,savedMaxAge:En.value})};s.handleCopy=function(e){var n=s.props,t=n.inviteChannel,r=n.source,i=n.code,o=n.guildScheduledEvent;(0,Ge.JG)(e);Fe.default.track(ke.rMx.COPY_INSTANT_INVITE,{server:me.Z.getGuildId(),channel:null==t?void 0:t.id,channel_type:null==t?void 0:t.type,location:r,code:i,
guild_scheduled_event_id:null==o?void 0:o.id})};s.openSettings=function(){s.setState({settingsOpen:!0})};s.handleSelectMaxAge=function(e){s.setState({maxAge:e,savedMaxAge:s.state.maxAge})};s.handleSelectMaxUses=function(e){s.setState({maxUses:e})};s.handleToggleTemporary=function(e){s.setState({temporary:e})};s.handleQueryChange=function(e){var n;null===(n=s._scroller)||void 0===n||n.scrollTo({to:0});!function(e){p.Z.dispatch({type:"INVITE_SUGGESTIONS_SEARCH",query:e})}(e);s.setState({query:e})};s.handleClearSearch=function(){s.handleQueryChange("")};s.handleToggleMaxAge=function(){s.setState({maxAge:s.state.savedMaxAge,savedMaxAge:s.state.maxAge},s.handleGenerateNewLink)};s.handleDone=function(){var e=s.props,n=e.onDone,t=e.onClose;s.state.settingsOpen?s.setState({settingsOpen:!1}):t();null==n||n()};s.getRowHeight=function(e,n){if(e>0)return 0;switch(s.props.rows[n].type){case J.bm.GROUP_DM:case J.bm.DM:case J.bm.FRIEND:return 44;default:return 0}};s.renderRow=function(e){
var n=e.section,t=e.row;if(n>0)return null;var i=s.props.analyticsLocation,o=s.getInviteKey(),a=s.props.rows[t],l="".concat(a.type,"-").concat(a.item.id);switch(a.type){case J.bm.GROUP_DM:return(0,r.jsx)(Sn,{row:a,channel:a.item,inviteKey:o,location:i},l);case J.bm.DM:case J.bm.FRIEND:return(0,r.jsx)(Sn,{row:a,user:a.item,inviteKey:o,location:i},l);default:return null}};var i=e.maxAge,o=e.maxUses,a=e.temporary,l=e.forceSettings,u=e.guild,d=e.canShowVanityURL,h=u.hasFeature(ke.oNc.HUB)?En:mn;s.state={query:"",settingsOpen:!0===l,maxAge:null!=i?i:h.value,savedMaxAge:i===En.value?h.value:En.value,maxUses:null!=o&&0!==o?o:yn.value,temporary:null!=a&&a,networkError:void 0,showVanityURL:d};return s}var i=t.prototype;i.componentDidMount=function(){
var e=this,n=this.props,t=n.inviteChannel,r=n.code,s=n.guild,i=n.source,o=n.canCreateInvites,a=n.analyticsLocation,l=n.streamUserId,u=n.targetType,c=n.targetUserId,d=n.applicationId,h=n.initialCounts,f=n.rows,g=n.showFriends,p=this.state,I=p.maxAge,_=p.maxUses,E=p.temporary;if(o){var m=null==t?void 0:t.id;if(null==m)return;this.setState({networkError:void 0});v.Z.createInvite(m,{validate:null!=r?r:null,max_age:I,max_uses:_,target_user_id:c,target_type:u,target_application_id:d,temporary:E},i).catch((function(n){return e.setState({networkError:n})}))}g&&Fe.default.track(ke.rMx.INVITE_SUGGESTION_OPENED,{location:i,num_suggestions:f.length,num_friends:h.numFriends,num_dms:h.numDms,num_group_dms:h.numGroupDms,guild_id:s.id});k.trackExposure({guildId:null==s?void 0:s.id});if(null!=l){var y=W.Z.getStreamForUser(l),S=(0,D.L2)(y,_e.Z);Fe.default.track(ke.rMx.OPEN_MODAL,{type:"Send Stream Invite",source:i,location:a,other_user_id:l,application_id:null!=S?S.id:null,
application_name:null!=S?S.name:null,game_id:null!=S?S.id:null})}else null!=d||Fe.default.track(ke.rMx.OPEN_MODAL,{type:"Instant Invite Modal",source:i,location:a})};i.getInviteKey=function(){var e=this.props,n=e.code,t=e.vanityURLCode,r=e.guildScheduledEvent,s=this.state.showVanityURL?t:null!=n?n:t;return null==s?s:(0,F.tV)({baseCode:s,guildScheduledEventId:null==r?void 0:r.id})};i.renderChannelWarning=function(){var e=this.props.inviteChannel;return(0,j.Z)(e)?(0,r.jsxs)("div",{className:Ye().warningContainer,children:[(0,r.jsx)(Ue.Z,{className:Ye().warningIcon,color:(0,U.Lq)(ke.Ilk.STATUS_YELLOW_500),width:12}),(0,r.jsx)(g.xv,{variant:"text-xs/normal",color:"header-secondary",children:We.Z.Messages.INVITE_PRIVATE_CHANNEL_WARNING})]}):null};i.renderCopyInput=function(){var e,n=this.props,t=n.noInvitesAvailable,i=n.showFriends,a=this.state,l=a.maxAge,u=a.maxUses,c=a.networkError,d=a.showVanityURL,h=(0,H.Z)(null!==(e=this.getInviteKey())&&void 0!==e?e:"");return(0,r.jsxs)(s.Fragment,{
children:[(0,r.jsx)(xn,{value:h,autoFocus:i,onCopy:this.handleCopy}),t||d?null:(0,r.jsxs)(g.xv,{variant:"text-xs/normal",className:o()($e().marginTop8,Ye().footerText),children:[(0,J.Vg)(l,u)," ",i?(0,r.jsx)(Te.Z,{onClick:this.openSettings,children:We.Z.Messages.INVITE_EDIT_LINK}):null]}),!t&&i&&d?(0,r.jsxs)(g.xv,{variant:"text-xs/normal",className:o()($e().marginTop8,Ye().footerText),children:[We.Z.Messages.INVITE_VANITY_USED,(0,r.jsx)(Te.Z,{onClick:this.openSettings,children:We.Z.Messages.INVITE_EDIT_LINK})]}):null,null!=c?(0,r.jsx)(Tn,{error:c}):null]})};i.renderHeader=function(){var e,n=this.props,t=n.guild,s=n.showFriends,i=n.guildScheduledEvent,a=n.streamUserId,l=n.applicationId,u=n.welcomeToServer,c=n.inviteChannel,d=this.state,h=d.query,f=d.settingsOpen,v=null,p=null
;e=u?null:null!=a?We.Z.Messages.INVITE_STREAM_HEADER:null!=l?We.Z.Messages.EMBEDDED_ACTIVITIES_INVITE_TO_ACTIVITY:null!=i?We.Z.Messages.GUILD_EVENT_INVITE_MODAL_TITLE:(null==c?void 0:c.isGuildStageVoice())?We.Z.Messages.STAGE_CHANNEL_INVITE_TO_STAGE_MODAL_HEADER:We.Z.Messages.INVITE_TO_SERVER_NAME.format({name:t.toString()});if(null!=c){var I=(0,V.KS)(c,t);null!=I&&(p=(0,r.jsxs)("div",{className:Ye().headerChannelContainer,children:[(0,r.jsx)(I,{className:Ye().channelIcon}),(0,r.jsx)(g.xv,{color:"interactive-normal",variant:"text-md/normal",children:c.name})]}))}v=f?(0,r.jsx)(je.vw,{id:this._headerId,tag:"h2",className:o()($e().marginReset,Ye().headerCloseButtonSpacing,Ye().headerText),children:We.Z.Messages.INVITE_SETTINGS_TITLE}):t.hasFeature(ke.oNc.HUB)?(0,r.jsxs)("div",{className:Ye().hubHeader,children:[(0,r.jsx)(g.X6,{className:o()(Ye().hubInviteTitle,Ye().headerCloseButtonSpacing),id:this._headerId,variant:"heading-xl/semibold",color:"header-primary",
children:We.Z.Messages.HUB_INVITE_HEADER}),(0,r.jsx)(g.xv,{color:"header-secondary",variant:"text-md/normal",children:We.Z.Messages.HUB_INVITE_SUBHEADER}),s&&(0,r.jsx)(Oe.Z,{query:h,className:Ye().hubFriendSearch,onChange:this.handleQueryChange,placeholder:We.Z.Messages.INVITE_SEARCH_FOR_FRIENDS,"aria-label":We.Z.Messages.INVITE_SEARCH_FOR_FRIENDS,autoFocus:!0,onClear:this.handleClearSearch})]}):s?(0,r.jsxs)("div",{className:Ye().header,children:[(0,r.jsx)(je.vw,{id:this._headerId,tag:"h2",className:o()($e().marginBottom4,Ye().headerCloseButtonSpacing,Ye().headerText),children:e}),p,(0,r.jsx)(Oe.Z,{query:h,className:Ye().searchBar,onChange:this.handleQueryChange,placeholder:We.Z.Messages.INVITE_SEARCH_FOR_FRIENDS,autoFocus:!0,onClear:this.handleClearSearch}),(0,r.jsx)("div",{className:$e().marginTop8,children:this.renderChannelWarning()})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(je.vw,{id:this._headerId,tag:"h2",
className:o()($e().marginReset,Ye().headerCloseButtonSpacing,Ye().headerText),children:e}),p,this.renderChannelWarning()]});return(0,r.jsxs)(De.xB,{separator:s&&!f,children:[(0,r.jsx)(De.ol,{className:Ye().closeButton,onClick:this.handleDone}),(0,r.jsxs)("div",{className:Ye().headerContainer,children:[u&&!f&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("img",{className:Ye().welcomeImage,src:on(),alt:""}),(0,r.jsx)(g.H,{className:Ye().welcomeHeading,children:We.Z.Messages.INVITE_WELCOME_HEADING}),(0,r.jsx)("p",{className:Ye().welcomeSubheading,children:We.Z.Messages.INVITE_WELCOME_SUBHEADING})]}),null!=a?(0,r.jsx)(P.Z,{}):null,v]})]})};i.renderSettingsBody=function(){var e=this.state,n=e.maxAge,t=e.maxUses,s=e.temporary,i=In.find((function(e){return e.value===n})),a=_n.find((function(e){return e.value===t}));return(0,r.jsx)(De.hz,{className:Ye().settingsContent,children:(0,r.jsxs)("form",{onSubmit:this.handleGenerateNewLink,children:[(0,r.jsx)(je.xJ,{title:We.Z.Messages.EXPIRE_AFTER,
className:$e().marginTop20,children:(0,r.jsx)(Be.q4,{value:null==i?void 0:i.value,options:In,onChange:this.handleSelectMaxAge})}),(0,r.jsx)(je.xJ,{title:We.Z.Messages.MAX_NUMBER_OF_USES,className:o()($e().marginTop20,$e().marginBottom4),children:(0,r.jsx)(Be.q4,{value:null==a?void 0:a.value,options:_n,onChange:this.handleSelectMaxUses})}),(0,r.jsx)(je.xJ,{className:o()($e().marginTop20,Ye().switch),children:(0,r.jsx)(Ze.Z,{value:s,onChange:this.handleToggleTemporary,note:We.Z.Messages.TEMPORARY_MEMBERSHIP_EXPLANATION,hideBorder:!0,children:(0,r.jsx)(g.xv,{variant:"text-sm/normal",children:We.Z.Messages.GRANT_TEMPORARY_MEMBERSHIP})})})]})})};i.renderFriendsBody=function(){var e=this.props.rows,n=this.getInviteKey();return 0===e.length?(0,r.jsx)(De.hz,{className:o()($e().marginBottom20,$e().marginTop20),children:(0,r.jsx)(Ae.OZ,{children:We.Z.Messages.INVITE_FRIEND_MODAL_NO_RESULTS})}):null==n?(0,r.jsx)(De.hz,{className:o()($e().marginBottom20,$e().marginTop20),children:(0,r.jsx)(Ae.OZ,{
children:We.Z.Messages.INVITE_FRIEND_MODAL_LOADING})}):(0,r.jsx)(De.YA,{className:Ye().scroller,sections:[e.length],renderSection:this.renderSection,sectionHeight:0,renderRow:this.renderRow,rowHeight:this.getRowHeight,paddingBottom:16})};i.renderSection=function(){return null};i.renderBody=function(){var e=this.props,n=e.guild,t=e.showFriends,s=e.streamUserId,i=e.applicationId;if(this.state.settingsOpen)return this.renderSettingsBody();if(t)return this.renderFriendsBody();var o=Se.default.getCurrentUser();l()(null!=o,"InstantInviteModal: user cannot be undefined");var a=n.isOwner(o)?We.Z.Messages.INVITE_SHARE_LINK_OWN_SERVER:We.Z.Messages.SHARE_INVITE_LINK_FOR_ACCESS;null!=s?a=We.Z.Messages.INVITE_SHARE_LINK_TO_STREAM:null!=i&&(a=We.Z.Messages.EMBEDDED_ACTIVITIES_SHARE_LINK_TO_ACTIVITY);return(0,r.jsx)(De.hz,{className:Ye().noScroll,children:(0,r.jsxs)(Me.Z,{direction:Me.Z.Direction.VERTICAL,className:$e().marginBottom20,children:[(0,r.jsx)(g.xv,{className:Ye().subText,
variant:"text-sm/normal",children:a}),this.renderCopyInput()]})})};i.renderFooter=function(){var e,n=this,t=this.props,i=t.noInvitesAvailable,a=t.showFriends,l=t.guildScheduledEvent,u=t.streamUserId,c=t.applicationId,d=t.inviteChannel,h=this.state,f=h.settingsOpen,v=h.maxAge,p=q.Z.theme,I=null,_=this.renderBannerUpsell();if(f)I=(0,r.jsxs)(s.Fragment,{children:[(0,r.jsx)(xe.Co,{onClick:this.handleGenerateNewLink,children:We.Z.Messages.GENERATE_A_NEW_LINK}),(0,r.jsx)(xe.Co,{look:xe.Co.Looks.LINK,color:p===ke.BRd.LIGHT?xe.Co.Colors.PRIMARY:xe.Co.Colors.WHITE,onClick:this.handleDone,children:We.Z.Messages.CANCEL})]});else if(a){var E=We.Z.Messages.INVITE_FOOTER_LINK_HEADER;null!=u?E=We.Z.Messages.INVITE_STREAM_FOOTER_LINK_HEADER:null!=c?E=We.Z.Messages.EMBEDDED_ACTIVITIES_INVITE_ACTIVITY_FOOTER_LINK_HEADER:null!=l?E=We.Z.Messages.GUILD_EVENT_INVITE_MODAL_FOOTER:(null==d?void 0:d.isGuildStageVoice())&&(E=We.Z.Messages.STAGE_CHANNEL_INVITE_TO_STAGE_MODAL_FOOTER);I=(0,r.jsxs)(Me.Z,{
direction:Me.Z.Direction.VERTICAL,className:Ye().content,children:[(0,r.jsx)(je.vw,{tag:"h5",className:$e().marginBottom8,children:E}),this.renderCopyInput(),_]})}else i||(I=(0,r.jsxs)(Me.Z,{justify:Me.Z.Justify.BETWEEN,className:$e().marginTop20,children:[(0,r.jsx)(Ce.Z,{size:18,type:Ce.Z.Types.INVERTED,value:v===En.value,onChange:this.handleToggleMaxAge,children:(0,r.jsx)(g.xv,{className:Ye().checkBoxLabel,variant:"text-sm/normal",children:We.Z.Messages.SET_INVITE_LINK_NEVER_EXPIRE})}),(0,r.jsx)(we.ZP,{text:We.Z.Messages.LINK_SETTINGS,children:function(e){var t=e.onMouseEnter,s=e.onMouseLeave;return(0,r.jsx)(Re.Z,{onClick:n.openSettings,onMouseEnter:t,onMouseLeave:s,className:nn().cursorPointer,children:(0,r.jsx)(be.Z,{width:18,height:18,color:(0,U.Lq)(ke.Ilk.PRIMARY_DARK_400)})})}})]}));return null!=I?(0,r.jsx)(De.mz,{className:f?Ye().settingsFooter:o()((e={},un(e,Ye().noPadding,!a),un(e,Ye().footer,a),e)),children:I}):null};i.renderBannerUpsell=function(){
var e=this.props,n=e.guild,t=e.analyticsLocations;return(null==n?void 0:n.hasFeature(ke.oNc.INVITE_SPLASH))?null:(0,r.jsxs)(Me.Z,{align:Me.Z.Align.CENTER,className:Ye().inviteBannerUpsell,children:[(0,r.jsx)(Ve.Z,{className:Ye().premiumIcon}),(0,r.jsx)(g.xv,{variant:"text-sm/normal",children:We.Z.Messages.INVITE_FRIEND_MODAL_BOOSTING_UPSELL}),(0,r.jsx)(Te.Z,{className:Ye().inviteLink,onClick:function(){return(0,B.Z)({analyticsLocations:t,analyticsSourceLocation:{section:ke.jXE.INVITE_LINK,object:ke.qAy.LEARN_MORE},guild:n,perks:(0,Ke.il)(),upsellType:Ke.Cg.GUILD_BANNER_INVITE})},children:We.Z.Messages.LEARN_MORE})]})};i.render=function(){var e=this.props,n=e.transitionState,t=e.inviteChannel,s=e.guild;return(0,r.jsx)("div",{className:this.props.showFriends?Ye().wrapper:void 0,children:(0,r.jsxs)(De.Y0,{impressionName:d.zs.GUILD_INVITE,impressionProperties:{invite_channel_id:null==t?void 0:t.id,invite_guild_id:s.id},"aria-labelledby":this._headerId,transitionState:n,
className:Ye().modal,children:[this.renderHeader(),this.renderBody(),this.renderFooter()]})})};return t}(s.PureComponent);Cn.defaultProps={analyticsLocation:ke.Sbl.GUILD_CREATE_INVITE_SUGGESTION};const Rn=s.forwardRef((function(e,n){var t=e.channel,i=e.guild,o=e.source,a=e.guildScheduledEvent,l=e.streamUserId,u=e.applicationId,c=e.transitionState,d=e.onClose,f=e.welcomeToServer,g=e.forceSettings,v=e.analyticsLocation,_=(0,L.Z)(Z.Z.INSTANT_INVITE_MODAL),E=_.AnalyticsLocationProvider,m=_.analyticsLocations,S=(0,h.e7)([Ee.Z,y.Z,Y.ZP],(function(){if(null!=t)return t;var e=Ee.Z.getChannelId(),n=null==e||(0,He.AB)(e)?void 0:y.Z.getChannel(e);(null==n?void 0:n.isThread())&&(n=y.Z.getChannel(n.parent_id));return null!=n?n:Y.ZP.getDefaultChannel(i.id)}),[t,i.id]),N=null;null!=l?N=qe.Iq.STREAM:null!=u&&(N=qe.Iq.EMBEDDED_APPLICATION);var T=l,x=u,C=null!=t?t.getGuildId():null!=i?i.id:null,R=(0,h.e7)([X.Z],(function(){var e=null!=S?S.id:null;return null==e?null:X.Z.getInvite(e,{targetType:N,
targetUserId:T,targetApplicationId:x})}),[S,N,T,x]),A=gn((0,h.Wu)([pe,Ne.ZP,z.ZP],(function(){var e=null!=S?S.id:null;return[pe.getInviteSuggestionRows(),pe.getTotalSuggestionsCount()>=1,pe.getInitialCounts(),null!=t&&null!=S?Ne.ZP.getVoiceStatesForChannel(S):null,null!=C?z.ZP.getProps(C,e):null]}),[S,N,T,C]),5),M=A[0],O=A[1],w=A[2],j=A[3],b=A[4],V=(0,h.e7)([Ie.Z],(function(){return null!=S&&Ie.Z.can(ke.Plq.CREATE_INSTANT_INVITE,S)}),[S]),U=null===R||!V,D=gn(s.useState((function(){var e=new Set;null!=l&&null!=j?j.forEach((function(n){var t=n.user;e.add(t.id)})):null!=C&&null!=b&&b.rows.forEach((function(n){n.type===z.so.MEMBER&&e.add(n.userId)}));return e})),1),P=D[0],B=null==t?void 0:t.id,F=(0,h.e7)([K.Z],(function(){return K.Z.getStageInstanceByChannel(B)}),[B]);s.useEffect((function(){(function(e,n,t){return(0,I.W)().then((function(){p.Z.dispatch({type:"LOAD_INVITE_SUGGESTIONS",omitUserIds:null!=e?e:new Set,guild:n,channel:t})}))})(P,i,t).catch(ke.VqG)}),[P,t,i])
;var k,H,q,W=null!=R?R.code:void 0,J=null!=R?R.maxAge:void 0,Q=null!=R?R.maxUses:void 0,$=null!=R?R.temporary:void 0,ee=i.vanityURLCode,ne=null!=ee&&ee.length>0,te=G.Z.useExperiment({guildId:null!==(q=null!==(H=null!==(k=i.id)&&void 0!==k?k:null==R?void 0:R.guild.id)&&void 0!==H?H:C)&&void 0!==q?q:""},{autoTrackExposure:ne}).enabled&&!(null==S?void 0:S.isGuildVocal())&&ne;V||null==(null==F?void 0:F.invite_code)||(W=F.invite_code);return(0,r.jsx)(E,{children:(0,r.jsx)(Cn,{ref:n,canCreateInvites:V,noInvitesAvailable:U,inviteChannel:S,guild:i,guildScheduledEvent:a,streamUserId:l,vanityURLCode:ee,targetType:N,targetUserId:T,applicationId:u,rows:M,showFriends:O,initialCounts:w,code:W,maxAge:J,maxUses:Q,temporary:$,source:o,welcomeToServer:f,forceSettings:g,analyticsLocations:m,analyticsLocation:v,transitionState:c,onClose:d,canShowVanityURL:te})})}))},190422:(e,n,t)=>{"use strict";t.d(n,{Z:()=>a});var r=t(667294),s=t(953143),i=t(742269),o=t(959797);function a(){r.useEffect((function(){
i.FB||(0,s.EM)({messages:[o.Z.Messages.GO_LIVE_HEY,o.Z.Messages.GO_LIVE_LOOK,o.Z.Messages.GO_LIVE_LISTEN],interval:600,count:20,onlyWhenBlurred:!0})}),[]);return null}},272889:(e,n,t)=>{"use strict";t.d(n,{Z:()=>r});const r=(0,t(553494).B)({kind:"guild",id:"2022-11_default_to_server_vanity_v2",label:"Default To Guild Vanity v2",defaultConfig:{enabled:!1},treatments:[{id:1,label:"Enabled",config:{enabled:!0}}]})}}]);
//# sourceMappingURL=2e0af9bb1aea88ecdfa0.js.map