"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[24462],{524462:(e,n,t)=>{t.r(n);t.d(n,{default:()=>F});var r=t(785893),i=t(667294),u=t(441143),l=t.n(u),o=t(489992),a=t(670529),s=t(7046),c=t(653772),d=t(191940),f=t(276842),p=t(272729),b=t(67416),h=t(521495),v=t(791462),y=t(814709),g=t(458822),m=t(202552),G=t(997030),S=t(26080),C=t(959797);const I={title:function(){return C.Z.Messages.GUILD_ROLE_SUBSCRIPTIONS_ONBOARDING_TITLE},description:function(){return C.Z.Messages.GUILD_ROLE_SUBSCRIPTIONS_ONBOARDING_DESCRIPTION},canCreateGuild:!1,useIsGuildSupported:function(){return(0,v.e7)([m.Z],(function(){return function(e,n){return e.isOwner(n)&&(0,S.X$)({guild:e,isOwner:!0,canManageGuild:!0,isMonetizationWaitlistEnabledForGuild:(0,y.mG)(e.id),isGuildEligibleForRoleSubscriptions:(0,G.kT)(e.id),isExpeditedMonetizationOnboardingGuild:(0,y.Rw)(e),isUserInCreatorMonetizationEligibleCountry:(0,y.DB)(),shouldRestrictUpdatingRoleSubscriptionSettings:(0,g.n9)(e.id)})
}}),[],v.pF)}};var E=t(940712);function T(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function w(e,n,t){n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t;return e}function x(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,u=[],l=!0,o=!1;try{for(t=t.call(e);!(l=(r=t.next()).done);l=!0){u.push(r.value);if(n&&u.length===n)break}}catch(e){o=!0;i=e}finally{try{l||null==t.return||t.return()}finally{if(o)throw i}}return u}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return T(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return T(e,n)}(e,n)||function(){
throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var j={"server-subscriptions-onboarding":I},_={title:function(){return C.Z.Messages.GUILD_SETTINGS_PICKER_DEFAULT_TITLE},description:function(){return C.Z.Messages.GUILD_SETTINGS_PICKER_DEFAULT_DESCRIPTION},selectGuildCta:function(){return C.Z.Messages.GET_STARTED},createGuildDescription:function(){return C.Z.Messages.GUILD_SETTINGS_PICKER_DEFAULT_CREATE_DESCRIPTION},createGuildCta:function(){return C.Z.Messages.CREATE_SERVER_BUTTON_CTA},canCreateGuild:!0,useIsGuildSupported:function(){return(0,v.e7)([E.Z],(function(){return function(e){return E.Z.canAccessGuildSettings(e)}}),[],v.pF)}};function O(e){var n,t=x(i.useState(null==e?void 0:j[e]),1)[0],r=_.useIsGuildSupported(),u=null==t||null===(n=t.useIsGuildSupported)||void 0===n?void 0:n.call(t),l=function(e){for(var n=1;n<arguments.length;n++){
var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))));r.forEach((function(n){w(e,n,t[n])}))}return e}({},_,null!=t?t:{});return{title:l.title(),description:l.description(),selectGuildCta:l.selectGuildCta(),createGuildDescription:l.createGuildDescription(),createGuildCta:l.createGuildCta(),canCreateGuild:l.canCreateGuild,isGuildSupported:function(e,n){return r(e,n)&&!1!==(null==u?void 0:u(e,n))}}}var Z=t(784238),D=t(859023);var A=t(637676),R=t.n(A);function N(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function U(e,n,t,r,i,u,l){try{var o=e[u](l),a=o.value}catch(e){t(e);return}o.done?n(a):Promise.resolve(a).then(r,i)}function k(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){
var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,u=[],l=!0,o=!1;try{for(t=t.call(e);!(l=(r=t.next()).done);l=!0){u.push(r.value);if(n&&u.length===n)break}}catch(e){o=!0;i=e}finally{try{l||null==t.return||t.return()}finally{if(o)throw i}}return u}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return N(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return N(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var L=function(e,n){var t,r,i,u,l={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return u={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){
return this}),u;function o(u){return function(o){return function(u){if(t)throw new TypeError("Generator is already executing.");for(;l;)try{if(t=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;(r=0,i)&&(u=[2&u[0],i.value]);switch(u[0]){case 0:case 1:i=u;break;case 4:l.label++;return{value:u[1],done:!1};case 5:l.label++;r=u[1];u=[0];continue;case 7:u=l.ops.pop();l.trys.pop();continue;default:if(!(i=l.trys,i=i.length>0&&i[i.length-1])&&(6===u[0]||2===u[0])){l=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){l.label=u[1];break}if(6===u[0]&&l.label<i[1]){l.label=i[1];i=u;break}if(i&&l.label<i[2]){l.label=i[2];l.ops.push(u);break}i[2]&&l.ops.pop();l.trys.pop();continue}u=n.call(e,l)}catch(e){u=[6,e];r=0}finally{t=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,o])}}};function M(e){var n=e.className,t=e.guildId,u=e.onChange,o=function(e){var n=e.isGuildIncluded,t=e.selectedGuildId,r=(0,
v.e7)([Z.Z],(function(){return Z.Z.getFlattenedGuildIds()})),u=(0,v.e7)([c.Z],(function(){return c.Z.getGuilds()})),o=(0,v.e7)([D.default],(function(){return D.default.getCurrentUser()}));return{options:i.useMemo((function(){return null==o?[]:(null==n?r:r.filter((function(e){var t=u[e];l()(null!=t,"guild should not be null");return n(t,o)}))).map((function(e){var n=u[e];l()(null!=n,"guild should not be null");return{label:n.name,value:n.id}}))}),[r,u,o,n]),selectedGuild:null==t?void 0:u[t]}}({isGuildIncluded:e.isGuildIncluded}).options;return(0,r.jsx)(h.Z,{className:n,onChange:u,value:t,options:o,placeholder:C.Z.Messages.GUILD_SELECT})}function P(e){return new Promise((function(n){c.Z.addChangeListener((function t(){if(null!=c.Z.getGuild(e)){c.Z.removeChangeListener(t);n()}}))}))}function F(e){var n,t,u=e.transitionState,c=e.onClose,h=e.feature,v=e.section,y=e.subsection,g=(0,
p.Dt)(),m=O(h),G=m.canCreateGuild,S=m.createGuildCta,C=m.createGuildDescription,I=m.selectGuildCta,E=m.title,T=m.description,w=m.isGuildSupported,x=k(i.useState(),2),j=x[0],_=x[1],Z=k(i.useState(!1),2),D=Z[0],A=Z[1],N=(t=(n=function(){var e;return L(this,(function(n){switch(n.label){case 0:A(!0);return[4,new Promise((function(e){a.Z.openCreateGuildModal({onSuccess:e})}))];case 1:return[4,P(e=n.sent())];case 2:n.sent();s.Z.open(e,v,void 0,y);null==c||c();return[2]}}))},function(){var e=this,t=arguments;return new Promise((function(r,i){var u=n.apply(e,t);function l(e){U(u,r,i,l,o,"next",e)}function o(e){U(u,r,i,l,o,"throw",e)}l(void 0)}))}),function(){return t.apply(this,arguments)});return(0,r.jsxs)(b.Y0,{transitionState:u,"aria-labelledby":g,children:[(0,r.jsxs)(b.xB,{className:R().modalHeader,separator:!1,children:[(0,r.jsx)(o.X6,{id:g,variant:"heading-lg/medium",children:E}),(0,r.jsx)(b.ol,{onClick:c})]}),(0,r.jsxs)(b.hz,{className:R().modalContent,children:[(0,r.jsx)(o.xv,{
variant:"text-md/medium",children:T}),(0,r.jsx)(f.Z,{size:16}),(0,r.jsxs)("div",{className:R().guildSelection,children:[(0,r.jsx)("div",{className:R().guildSelectorContainer,children:(0,r.jsx)(M,{guildId:j,onChange:_,isGuildIncluded:w})}),(0,r.jsx)(d.Co,{onClick:function(){l()(null!=j,"Guild ID must not be null on click");s.Z.open(j,v,void 0,y);null==c||c()},disabled:null==j,children:I})]}),G&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f.Z,{size:32}),(0,r.jsx)(o.xv,{variant:"text-md/medium",children:C}),(0,r.jsx)(f.Z,{size:8}),(0,r.jsx)(d.Co,{onClick:N,submitting:D,children:S})]})]})]})}}}]);
//# sourceMappingURL=ca581d54f26e60244c6c.js.map