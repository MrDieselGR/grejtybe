"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[17810,30241],{173572:(e,n,t)=>{t.d(n,{Z:()=>h});var r=t(506884),a=t(856864),o=t(173436),s=t(218276),i=t(390504),l=t(666492),c=t(688417),u=t(461061),d=t(228031);const h={createChannel:function(e){var n=e.guildId,t=e.type,h=e.name,p=e.permissionOverwrites,f=void 0===p?[]:p,E=e.bitrate,C=e.userLimit,N=e.parentId,y=e.skuId,m=e.branchId;o.Z.dispatch({type:"CREATE_CHANNEL_MODAL_SUBMIT"});var _={type:t,name:h,permission_overwrites:f};null!=E&&E!==u.epw&&(_.bitrate=E);null!=C&&C>0&&(_.user_limit=C);null!=N&&(_.parent_id=N);if(t===u.d4z.GUILD_STORE){if(null==y)throw new Error("Unexpected missing SKU");_.sku_id=y;_.branch_id=m}return l.Z.post({url:u.ANM.GUILD_CHANNELS(n),body:_,oldFormErrors:!0,trackedActionData:{event:r.a9.CHANNEL_CREATE,properties:function(e){var n,t;return(0,a.iG)({is_private:f.length>0,channel_id:null==e||null===(n=e.body)||void 0===n?void 0:n.id,
channel_type:null==e||null===(t=e.body)||void 0===t?void 0:t.type})}}}).then((function(e){i.Z.isOptInEnabled(n)&&c.Z.updateChannelOverrideSettings(n,e.body.id,{flags:d.ic.OPT_IN_ENABLED});s.Z.checkGuildTemplateDirty(n);return e}),(function(e){o.Z.dispatch({type:"CREATE_CHANNEL_MODAL_SUBMIT_FAILURE",errors:e.body});throw e}))}}},217810:(e,n,t)=>{t.r(n);t.d(n,{AddMembers:()=>ln,default:()=>dn});var r=t(785893),a=t(667294),o=t(294184),s=t.n(o),i=t(441143),l=t.n(i),c=t(496486),u=t.n(c),d=t(506884),h=t(87913),p=t(791462),f=t(489992),E=t(173572),C=t(354290),N=t(266142),y=t(173436);function m(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _(e){_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return _(e)}function v(e,n){return!n||"object"!==b(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}
function g(e,n){g=Object.setPrototypeOf||function(e,n){e.__proto__=n;return e};return g(e,n)}var b=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function O(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var t,r=_(e);if(n){var a=_(this).constructor;t=Reflect.construct(r,arguments,a)}else t=r.apply(this,arguments);return v(this,t)}}var A={};var I=function(e){!function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}});n&&g(e,n)}(t,e);var n=O(t);function t(){m(this,t);return n.apply(this,arguments)}var r=t.prototype;r.getBranches=function(e){var n
;return null!==(n=A[e])&&void 0!==n?n:[]};r.__getLocalVars=function(){return{applicationBranches:A}};return t}(p.ZP.Store);I.displayName="ApplicationBranchStore";const T=new I(y.Z,{OWNED_APPLICATION_BRANCHES_FETCH_SUCCESS:function(e){var n=e.applicationId,t=e.branches;A[n]=t},LOGOUT:function(){A={}}});var S=t(632895),R=t(959797);function M(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function L(e){L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return L(e)}function Z(e,n){return!n||"object"!==j(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function P(e,n){P=Object.setPrototypeOf||function(e,n){e.__proto__=n;return e};return P(e,n)}var j=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function x(e){var n=function(){
if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var t,r=L(e);if(n){var a=L(this).constructor;t=Reflect.construct(r,arguments,a)}else t=r.apply(this,arguments);return Z(this,t)}}var w=function(e){!function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}});n&&P(e,n)}(t,e);var n=x(t);function t(){M(this,t);var e;(e=n.apply(this,arguments)).handleChange=function(n){e.props.onChange(n)};return e}var a=t.prototype;a.componentDidMount=function(){var e=this.props,n=e.applicationId,t=e.branches,r=e.onHasBranchesChange;(0,N.Z)(n);null==r||r(t.length>0)};a.componentDidUpdate=function(e){
var n=this.props,t=n.onHasBranchesChange,r=n.branches.length>0;null!=t&&r!==e.branches.length>0&&t(r)};a.render=function(){var e=this.props,n=e.branches,t=e.selectedBranchId,a=e.applicationId,o=e.includeMaster,s=e.hide,i=e.className;if(0===n.length||s)return null;var l=o?n:n.filter((function(e){return e.id!==a}));return(0,r.jsx)(S.q4,{options:l.map((function(e){return{label:e.getName(a),value:e.id}})),placeholder:R.Z.Messages.CREATE_STORE_CHANNEL_SELECT_BRANCH,value:t,onChange:this.handleChange,className:i})};return t}(a.Component);w.defaultProps={includeMaster:!1};const D=p.ZP.connectStores([T],(function(e){var n=e.applicationId;return{branches:T.getBranches(n)}}))(w);var G=t(512172),U=t(512238);function H(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function B(e){B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return B(e)}function k(e,n){
return!n||"object"!==F(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function z(e,n){z=Object.setPrototypeOf||function(e,n){e.__proto__=n;return e};return z(e,n)}var F=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function Y(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var t,r=B(e);if(n){var a=B(this).constructor;t=Reflect.construct(r,arguments,a)}else t=r.apply(this,arguments);return k(this,t)}}var V=function(e){!function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,
writable:!0,configurable:!0}});n&&z(e,n)}(t,e);var n=Y(t);function t(){H(this,t);var e;(e=n.apply(this,arguments)).handleChange=function(n){e.props.onChange(n)};return e}var a=t.prototype;a.componentDidMount=function(){var e=this.props,n=e.applicationId,t=e.skus,r=e.selectedSkuId,a=e.onChange;null==t?(0,G.Kr)(n,!1):1===t.length&&null==r&&a(t[0].id)};a.componentDidUpdate=function(){var e=this.props,n=e.skus,t=e.selectedSkuId,r=e.onChange;null!=n&&1===n.length&&null==t&&r(n[0].id)};a.render=function(){var e=this.props,n=e.skus,t=e.selectedSkuId,a=e.className,o=null!=n&&0===n.length;return(0,r.jsx)(S.q4,{options:null!=n?n.map((function(e){return{label:e.name,value:e.id}})):[],placeholder:o?R.Z.Messages.CREATE_STORE_CHANNEL_NO_SKUS:R.Z.Messages.CREATE_STORE_CHANNEL_SELECT_SKU,value:t,onChange:this.handleChange,className:a,isDisabled:o})};return t}(a.Component);const K=p.ZP.connectStores([U.Z],(function(e){var n=e.applicationId;return{skus:U.Z.getForApplication(n)}}))(V)
;var W=t(780921),X=t(23816),q=t(53211),Q=t(304856),$=t(87310),J=t(526061),ee=t(655695),ne=t(531648),te=t(20157),re=t(830241),ae=t(53551),oe=t(356004),se=t(367124),ie=t(212218),le=t(653772),ce=t(940712),ue=t(105405),de=t(859023),he=t(892472),pe=t(191940),fe=t(554062),Ee=t(138402),Ce=t(954766),Ne=t(736488),ye=t(801593),me=t(272729),_e=t(983319),ve=t(604175),ge=t(962271),be=t(976703),Oe=t(733399),Ae=t(932291),Ie=t(301818),Te=t(220578),Se=t(519073),Re=t(555784),Me=t(915306),Le=t(806499),Ze=t(806008),Pe=t(875389),je=t(67416),xe=t(897576),we=t(226300),De=t(268333),Ge=t(95467),Ue=t(461061),He=t(862045),Be=t(809633),ke=t(609993),ze=t(740998),Fe=t.n(ze);function Ye(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Ve(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ke(e,n,t,r,a,o,s){try{var i=e[o](s),l=i.value}catch(e){t(e);return}i.done?n(l):Promise.resolve(l).then(r,a)
}function We(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var o=e.apply(n,t);function s(e){Ke(o,r,a,s,i,"next",e)}function i(e){Ke(o,r,a,s,i,"throw",e)}s(void 0)}))}}function Xe(e,n,t){n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t;return e}function qe(e){qe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return qe(e)}function Qe(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))));r.forEach((function(n){Xe(e,n,t[n])}))}return e}function $e(e,n){n=null!=n?n:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){
var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})));t.push.apply(t,r)}return t}(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}));return e}function Je(e,n){return!n||"object"!==tn(n)&&"function"!=typeof n?Ve(e):n}function en(e,n){en=Object.setPrototypeOf||function(e,n){e.__proto__=n;return e};return en(e,n)}function nn(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,o=[],s=!0,i=!1;try{for(t=t.call(e);!(s=(r=t.next()).done);s=!0){o.push(r.value);if(n&&o.length===n)break}}catch(e){i=!0;a=e}finally{try{s||null==t.return||t.return()}finally{if(i)throw a}}return o}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return Ye(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name)
;if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Ye(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var tn=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function rn(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var t,r=qe(e);if(n){var a=qe(this).constructor;t=Reflect.construct(r,arguments,a)}else t=r.apply(this,arguments);return Je(this,t)}}var an,on=function(e,n){var t,r,a,o,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},
"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;s;)try{if(t=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;(r=0,a)&&(o=[2&o[0],a.value]);switch(o[0]){case 0:case 1:a=o;break;case 4:s.label++;return{value:o[1],done:!1};case 5:s.label++;r=o[1];o=[0];continue;case 7:o=s.ops.pop();s.trys.pop();continue;default:if(!(a=s.trys,a=a.length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){s.label=o[1];break}if(6===o[0]&&s.label<a[1]){s.label=a[1];a=o;break}if(a&&s.label<a[2]){s.label=a[2];s.ops.push(o);break}a[2]&&s.ops.pop();s.trys.pop();continue}o=n.call(e,s)}catch(e){o=[6,e];r=0}finally{t=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}};function sn(e){
var n=e.isPrivate,t=e.showStoreChannelOption,a=e.showAnnouncementChannelOption,o=e.canCreateStageChannel,s=e.canCreateForumChannel,i=[{icon:n?Oe.Z:be.Z,label:R.Z.Messages.TEXT_CHANNEL_TYPE,value:Ue.d4z.GUILD_TEXT,description:R.Z.Messages.CREATE_TEXT_CHANNEL_DESCRIPTION}];i.push({icon:n?Le.Z:Me.Z,label:R.Z.Messages.VOICE_CHANNEL_TYPE,value:Ue.d4z.GUILD_VOICE,description:R.Z.Messages.CREATE_VOICE_CHANNEL_DESCRIPTION});if(s){i.push({icon:n?Ie.Z:Ae.Z,label:R.Z.Messages.FORUM_CHANNEL_TYPE,value:Ue.d4z.GUILD_FORUM,description:(0,r.jsxs)(f.xv,{variant:"text-sm/normal",color:"header-secondary",className:Fe().radioLabelDescription,children:[R.Z.Messages.FORUM_CHANNEL_DESCRIPTION,(0,r.jsx)("br",{}),R.Z.Messages.LEARN_MORE_CLICK.format({onClick:function(){open(Be.V8)}})]})})}a&&i.push({icon:Re.Z,iconSize:24,label:R.Z.Messages.NEWS_CHANNEL_TYPE,value:Ue.d4z.GUILD_ANNOUNCEMENT,description:R.Z.Messages.CREATE_NEWS_CHANNEL_DESCRIPTION});t&&i.push({icon:Pe.Z,iconSize:24,
label:R.Z.Messages.STORE_CHANNEL_TYPE,value:Ue.d4z.GUILD_STORE,description:R.Z.Messages.CREATE_STORE_CHANNEL_DESCRIPTION});o&&i.push({icon:Ze.Z,iconSize:24,label:R.Z.Messages.STAGE_VOICE_CHANNEL_TYPE,value:Ue.d4z.GUILD_STAGE_VOICE,description:R.Z.Messages.CREATE_STAGE_CHANNEL_DESCRIPTION});return i.map((function(e){var n=e.icon,t=e.iconSize,a=e.label,o=e.value,s=e.description,i=e.isNew;return{name:(0,r.jsxs)("div",{className:Fe().radioItemName,children:[(0,r.jsx)(n,$e(Qe({},null!=t?{width:t,height:t}:null),{className:Fe().icon,background:Fe().background,foreground:Fe().foreground})),(0,r.jsxs)("div",{children:[(0,r.jsxs)(f.xv,{variant:"text-md/medium",className:Fe().radioLabelName,children:[a,i?(0,r.jsx)(we.IG,{text:R.Z.Messages.CHANNEL_TYPE_NEW,className:Fe().newBadge,color:h.Z.BUTTON_OUTLINE_BRAND_BACKGROUND_HOVER}):null]}),"string"==typeof s?(0,r.jsx)(f.xv,{variant:"text-sm/normal",color:"header-secondary",className:Fe().radioLabelDescription,children:s}):s]})]}),value:o,
radioBarClassName:Fe().radioBar,radioItemIconClassName:Fe().radioBarIcon}}))}!function(e){e.CHANNEL_INFO="CHANNEL_INFO";e.ADD_MEMBERS="ADD_MEMBERS"}(an||(an={}));function ln(e){var n=e.onChange,t=e.guildId,o=e.channelType,s=e.description,i=nn(a.useState({}),2),l=i[0],c=i[1],u=(0,p.e7)([le.Z],(function(){return le.Z.getGuild(t)})),d=o===Ue.d4z.GUILD_STAGE_VOICE;a.useEffect((function(){n(l)}),[l,n]);return null==u?null:(0,r.jsx)(je.hz,{className:Fe().addMembersContainer,children:(0,r.jsx)($.AddMembersBody,{guild:u,channel:null,permission:d?ne.yP:(0,ae.CG)(o),pendingAdditions:l,setPendingAdditions:c,isStageChannel:d,description:s})})}function cn(e){switch(e){case Ue.d4z.GUILD_CATEGORY:return R.Z.Messages.CATEGORY_NAME_PLACEHOLDER;case Ue.d4z.GUILD_FORUM:return R.Z.Messages.FORUM_CHANNEL_NAME_PLACEHOLDER;default:return R.Z.Messages.CHANNEL_NAME_PLACEHOLDER}}var un=function(e){!function(e,n){
if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}});n&&en(e,n)}(o,e);var n=rn(o);function o(e){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,o);var t;(t=n.call(this,e)).headerId=(0,me.hQ)();t.setInputRef=function(e){t._input=e};t.handleNameChange=function(e){var n=t.state.channelType;ae.N1.has(n)&&(e=(0,De.Nj)(e));t.setState({name:e})};t.handleTypeChange=function(e){var n=e.value,r=t.state.name;ae.N1.has(n)&&(r=(0,De.Nj)(r));n===Ue.d4z.GUILD_STAGE_VOICE&&t.setState({isPrivate:!1});t.setState({channelType:n,name:r})};t.handlePrivacyChange=function(e){t.setState({isPrivate:e})};t.handleApplicationChange=function(e){t.setState({applicationId:e})};t.handleSKUChange=function(e){t.setState({skuId:e})};t.handleShowBranchesToggle=function(e){t.setState({showBranches:e,branchId:null})}
;t.handleBranchChange=function(e){t.setState({branchId:e})};t.handleHasBranchesChange=function(e){t.setState({hasBranches:e})};var r,a=Ve(t);t.handleSubmit=(r=We((function(e){var n,t,r,o,s,i,l,c,d,h,p,f,C,N,y,m,_,v,g,b,O,A,I,T;return on(this,(function(S){switch(S.label){case 0:e.preventDefault();n=a.props,t=n.cloneChannel,r=n.categoryId,o=n.user,s=n.memberRoleIds,i=n.isAdmin,l=n.onClose,c=n.owner;d=a.state,h=d.name,p=d.pendingPermissionOverwrites,f=d.channelType,C=d.skuId,N=d.branchId,y=d.isPrivate;if(null==(m=a.getGuildId()))return[2];if(null!=t){_=u().values(t.permissionOverwrites);v=t.bitrate;g=t.userLimit}else if(f===Ue.d4z.GUILD_ANNOUNCEMENT)_=(0,De.rt)(m);else{if(y){_=(0,De.oQ)(m,f,[],!0);(b=(0,Q.Tj)(p,f)).length>0&&(_=_.concat(b));O=null!=c&&o.id===c.id;_.some((function(e){return s.has(e.id)}))||i||O||_.push((0,De.jZ)(o.id,f))}if(f===Ue.d4z.GUILD_STAGE_VOICE){_=[];Object.values(p).forEach((function(e){var n=e.row;null!=n.id&&""!==n.id&&(n.rowType===He.aC.ROLE?_.push((0,
re.createModeratorOverwrite)(n.id,W.BN.ROLE)):n.rowType===He.aC.MEMBER&&_.push((0,re.createModeratorOverwrite)(n.id,W.BN.MEMBER)))}))}}a.setState({errors:{}});S.label=1;case 1:S.trys.push([1,3,,4]);return[4,E.Z.createChannel({guildId:m,type:f,name:h,permissionOverwrites:_,bitrate:v,userLimit:g,parentId:f!==Ue.d4z.GUILD_CATEGORY?r:null,skuId:C,branchId:N})];case 2:if(null==(A=S.sent())||201!==A.status)return[2];I=A.body;ae.N1.has(f)&&(0,ee.XU)(I.guild_id,I.id);l();return[3,4];case 3:null!=(T=S.sent()).body&&"object"==typeof T.body?a.setState({errors:T.body}):a.setState({errors:{message:R.Z.Messages.ERROR_OCCURRED_TRY_AGAIN}});return[3,4];case 4:return[2]}}))})),function(e){return r.apply(this,arguments)});var s=e.channelType,i=e.cloneChannel,l=e.prefillChannelName;t.state={channelType:null!=s?s:Ue.d4z.GUILD_TEXT,name:null!=i?(0,q.F)(i,de.default,ue.Z):null!=l?l:"",pendingPermissionOverwrites:{},isPrivate:!1,prevGuildId:e.guildId,applicationId:null,skuId:null,branchId:null,
showBranches:!1,hasBranches:!1,slide:an.CHANNEL_INFO,errors:{}};t.handlePermissionOverwriteChange=t.handlePermissionOverwriteChange.bind(Ve(t));return t}var i=o.prototype;i.componentDidMount=function(){var e=this._input;null!=e&&e.select();var n=this.props,t=n.guildId,r=n.applications;n.canCreateStoreChannel&&null==r&&C.Z.fetchApplications(t);X.ZP.trackWithMetadata(Ue.rMx.OPEN_MODAL,{type:"Create Channel"});J.O2.trackExposure({guildId:t})};i.componentDidUpdate=function(e,n){!n.isPrivate&&this.state.isPrivate&&this.state.channelType===Ue.d4z.GUILD_ANNOUNCEMENT&&this.setState({channelType:Ue.d4z.GUILD_TEXT});!n.isPrivate&&this.state.isPrivate&&X.ZP.trackWithMetadata(Ue.rMx.OPEN_MODAL,{type:"Create Private Channel"})};i.getGuildId=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;return e.guildId};i.canSubmit=function(){var e=this.props,n=e.canViewChannels,t=e.canConnect,r=this.state,a=r.isPrivate,o=r.channelType,s=r.skuId;return""!==r.name&&(!(a&&!(0,
Q.nT)(o,n,t))&&(o!==Ue.d4z.GUILD_STORE||null!=s))};i.getIconComponent=function(){var e=this.state,n=e.isPrivate,t=e.channelType;switch(t){case Ue.d4z.GUILD_TEXT:return n?Oe.Z:be.Z;case Ue.d4z.GUILD_FORUM:return Ae.Z;case Ue.d4z.GUILD_VOICE:return n?Le.Z:Me.Z;case Ue.d4z.GUILD_STORE:return Pe.Z;case Ue.d4z.GUILD_ANNOUNCEMENT:return Re.Z;case Ue.d4z.GUILD_STAGE_VOICE:return Ze.Z;default:return(0,ae.zi)(t)?be.Z:ke.Vq}};i.renderHeader=function(){var e,n=this.props,t=n.cloneChannel,a=n.categoryId,o=n.onClose,s=function(e,n){return null!=e?R.Z.Messages.CLONE_CHANNEL:n===Ue.d4z.GUILD_CATEGORY?R.Z.Messages.CREATE_CATEGORY:R.Z.Messages.CREATE_CHANNEL}(t,this.state.channelType);if(null!=a){var i,l=oe.Z.getChannel(a);e=(0,r.jsx)(f.xv,{variant:"text-xs/normal",color:"header-secondary",className:Fe().subtitle,children:R.Z.Messages.IN_CATEGORY.format({categoryName:null!==(i=null==l?void 0:l.name)&&void 0!==i?i:""})})}return(0,r.jsxs)(je.xB,{separator:!1,children:[(0,r.jsxs)("div",{
className:Fe().header,children:[(0,r.jsx)(f.X6,{id:this.headerId,variant:"heading-lg/semibold",className:Fe().title,children:s}),e]}),(0,r.jsx)(je.ol,{onClick:o,className:Fe().closeButton})]})};i.renderName=function(){var e,n=this,a=this.props,o=a.cloneChannel,s=a.guildId,i=this.state,l=i.errors,c=i.channelType;null!=(null==l?void 0:l.name)&&(e=(0,r.jsx)(f.xv,{variant:"text-xs/normal",color:"text-danger",className:Fe().error,children:l.name}));var u=c===Ue.d4z.GUILD_CATEGORY,d=u?R.Z.Messages.CATEGORY_NAME:R.Z.Messages.FORM_LABEL_CHANNEL_NAME,h=null!=o?(0,r.jsx)(ve.Z,{className:Fe().channelNameNote,type:ve.Z.Types.DESCRIPTION,children:R.Z.Messages.CLONE_CHANNEL_HELP.format({name:(0,q.F)(o,de.default,ue.Z,!0)})}):c===Ue.d4z.GUILD_FORUM?(0,r.jsx)(ve.Z,{className:Fe().channelNameNote,type:ve.Z.Types.DESCRIPTION,children:R.Z.Messages.FORUM_CHANNEL_NAME_NOTE.format({forumUpsellHook:function(e,n){return(0,r.jsx)(he.Z,{onClick:function(){return(0,xe.ZD)(We((function(){var e,n
;return on(this,(function(a){switch(a.label){case 0:return[4,Promise.all([t.e(40532),t.e(26466),t.e(50959)]).then(t.bind(t,750959))];case 1:e=a.sent(),n=e.default;return[2,function(e){return(0,r.jsx)(n,$e(Qe({},e),{guildId:s}))}]}}))})))},children:e},n)}})}):null,p=this.getIconComponent();return(0,r.jsx)(me.FG,{children:function(t){return(0,r.jsxs)(_e.Z,{title:d,tag:"label",htmlFor:t,titleClassName:Fe().sectionTitle,className:Fe().name,children:[(0,r.jsx)(ye.ZP,{value:n.state.name,onChange:n.handleNameChange,id:t,inputRef:n.setInputRef,maxLength:100,placeholder:cn(c),className:Fe().inputWrapper,inputClassName:u?null:Fe().inputInner,prefixElement:u?null:(0,r.jsx)(p,{className:Fe().inputPrefix,width:16,height:16}),autoFocus:!0}),e,h]})}})};i.renderType=function(){var e=this.props,n=e.cloneChannel,t=e.applications,a=e.canCreateStoreChannel,o=e.canCreateAnnouncementChannel,s=e.canCreateStageChannel,i=e.canCreateForumChannel,l=this.state,c=l.channelType,u=l.isPrivate
;if(null==n&&c!==Ue.d4z.GUILD_CATEGORY){var d=null!=t&&t.length>0;return(0,r.jsx)(_e.Z,{className:Fe().type,title:R.Z.Messages.CHANNEL_TYPE,children:(0,r.jsx)(Ee.ZP,{options:sn({isPrivate:u,showStoreChannelOption:a&&d,showAnnouncementChannelOption:o,canCreateStageChannel:s,canCreateForumChannel:i}),value:c,size:Ee.ZP.Sizes.NOT_SET,onChange:this.handleTypeChange,itemInfoClassName:Fe().radioBarLabel})})}};i.renderChannelTypeDescription=function(e){var n;e===Ue.d4z.GUILD_ANNOUNCEMENT&&(n=R.Z.Messages.FORM_HELP_NEWS.format({documentationLink:Ge.Z.getArticleURL(Ue.BhN.ANNOUNCEMENT_CHANNELS)}));return null==n?null:(0,r.jsx)(ve.Z,{className:Fe().channelTypeDescription,type:ve.Z.Types.DESCRIPTION,children:n})};i.renderStoreOptions=function(){var e=this.props.applications,n=this.state,t=n.applicationId,o=n.skuId,s=n.branchId,i=n.showBranches,l=n.hasBranches;if(null==e||0===e.length)throw new Error("Unexpected empty applications");return(0,r.jsxs)("div",{children:[(0,r.jsx)(ge.Z,{tag:"h5",
children:R.Z.Messages.CREATE_STORE_CHANNEL_APPLICATION}),(0,r.jsx)(S.q4,{options:e.map((function(e){return{label:e.name,value:e.id}})),placeholder:R.Z.Messages.CREATE_STORE_CHANNEL_SELECT_APPLICATION,value:t,onChange:this.handleApplicationChange,className:Fe().storeChannelOptionSelector}),null!=t?(0,r.jsxs)(a.Fragment,{children:[(0,r.jsx)(ge.Z,{tag:"h5",children:R.Z.Messages.CREATE_STORE_CHANNEL_SKU}),(0,r.jsx)(K,{applicationId:t,onChange:this.handleSKUChange,selectedSkuId:o,className:Fe().storeChannelOptionSelector},t)]}):null,null!=t&&l?(0,r.jsxs)(Ne.Z,{hideBorder:!0,onChange:this.handleShowBranchesToggle,value:i,note:R.Z.Messages.CREATE_STORE_CHANNEL_BETA_NOTE.format({devPortalUrl:Ue.EYA.API_DOCS_GAME_AND_SERVER_MANAGEMENT}),children:[(0,r.jsx)(Te.Z,{className:Fe().switchIcon}),R.Z.Messages.CREATE_STORE_CHANNEL_BETA_TITLE]}):null,null!=t?(0,r.jsxs)(a.Fragment,{children:[i?(0,r.jsx)(ge.Z,{tag:"h5",children:R.Z.Messages.CREATE_STORE_CHANNEL_BRANCH}):null,(0,r.jsx)(D,{applicationId:t,
onChange:this.handleBranchChange,selectedBranchId:s,hide:!i,onHasBranchesChange:this.handleHasBranchesChange,className:Fe().storeChannelOptionSelector},t)]}):null]})};i.renderPrivacyOptions=function(){var e=this.props.cloneChannel,n=this.state,t=n.channelType,a=n.isPrivate;if(null!=e||t===Ue.d4z.GUILD_ANNOUNCEMENT)return null;var o=t===Ue.d4z.GUILD_CATEGORY?R.Z.Messages.PRIVATE_CATEGORY:R.Z.Messages.PRIVATE_CHANNEL,s=t===Ue.d4z.GUILD_CATEGORY?R.Z.Messages.CHANNEL_PERMISSIONS_PRIVATE_CATEGORY_DESCRIPTION:R.Z.Messages.CHANNEL_PERMISSIONS_PRIVATE_CHANNEL_DESCRIPTION_NEW;return(0,r.jsx)(_e.Z,{children:(0,r.jsxs)(Ne.Z,{hideBorder:!0,onChange:this.handlePrivacyChange,value:a,note:s,children:[(0,r.jsx)(Se.Z,{className:Fe().switchIcon}),o]})},"privacy-switch")};i.renderError=function(e){var n,t=this.state,a=t.channelType,o=t.isPrivate,i=t.errors,l=this.props,c=l.canConnect,u=l.canViewChannels;if(Object.values(i).length>0){if(null!=i.message&&""!==i.message)n=i.message;else if(e||null==i.name){
var d=Object.values(i)[0];d.length>0&&(n=d)}}else o&&!(0,Q.nT)(a,u,c)&&(n=(0,Q.$7)(a));if(null!=n)return(0,r.jsx)("div",{className:s()(Fe().createError,Xe({},Fe().addMemberError,e)),children:(0,r.jsx)(fe.Z,{messageType:fe.Q.ERROR,children:n})})};i.renderFooter=function(){var e,n=this,t=this.props,a=t.channelType,o=t.onClose,s=this.state.channelType,i=this.state.isPrivate;e=a===Ue.d4z.GUILD_CATEGORY?R.Z.Messages.CREATE_CATEGORY:R.Z.Messages.CREATE_CHANNEL;var l=i||s===Ue.d4z.GUILD_STAGE_VOICE;return(0,r.jsxs)(je.mz,{className:Fe().modalFooter,children:[l?(0,r.jsx)(pe.Co,{type:"button",onClick:function(){n.setState({slide:an.ADD_MEMBERS})},disabled:!this.canSubmit(),children:R.Z.Messages.NEXT}):(0,r.jsx)(pe.Co,{type:"submit",disabled:!this.canSubmit(),children:e}),(0,r.jsx)(pe.Co,{onClick:o,look:pe.Co.Looks.LINK,color:pe.Co.Colors.PRIMARY,children:R.Z.Messages.CANCEL})]})};i.renderAddMemberFooter=function(){var e,n=this,t=this.props.channelType,a=this.state.pendingPermissionOverwrites
;e=0===Object.keys(a).length?R.Z.Messages.SKIP:t===Ue.d4z.GUILD_CATEGORY?R.Z.Messages.CREATE_CATEGORY:R.Z.Messages.CREATE_CHANNEL;return(0,r.jsxs)(je.mz,{children:[(0,r.jsx)(pe.Co,{type:"submit",disabled:!this.canSubmit(),children:e}),(0,r.jsx)(pe.Co,{onClick:function(){n.setState({slide:an.CHANNEL_INFO})},look:pe.Co.Looks.LINK,color:pe.Co.Colors.PRIMARY,children:R.Z.Messages.BACK})]})};i.handlePermissionOverwriteChange=function(e){this.setState({pendingPermissionOverwrites:e})};i.renderCreateChannelContent=function(){var e=this.state.channelType;return(0,r.jsxs)(r.Fragment,{children:[this.renderHeader(),(0,r.jsxs)(je.hz,{className:Fe().modalContent,children:[this.renderType(),this.renderName(),e===Ue.d4z.GUILD_STORE?this.renderStoreOptions():null,this.renderChannelTypeDescription(e),e===Ue.d4z.GUILD_STAGE_VOICE?null:this.renderPrivacyOptions()]}),this.renderError(),this.renderFooter()]})};i.renderAddMemberSlideContent=function(){
var e=this.state,n=e.name,t=e.channelType,a=this.props,o=a.guildId,s=a.onClose,i=this.getIconComponent(),l=t===Ue.d4z.GUILD_STAGE_VOICE;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(je.xB,{separator:!1,children:[(0,r.jsxs)("div",{className:Fe().header,children:[(0,r.jsx)(f.X6,{variant:"heading-lg/semibold",className:Fe().title,children:l?R.Z.Messages.CHANNEL_PERMISSIONS_ADD_MODERATOR_TITLE:R.Z.Messages.CHANNEL_PERMISSIONS_ADD_MEMBERS_TITLE}),(0,r.jsxs)(f.xv,{variant:"text-xs/normal",color:"header-secondary",className:Fe().subtitle,children:[(0,r.jsx)(i,{height:16,width:16,className:Fe().subtitleIcon}),n]})]}),(0,r.jsx)(je.ol,{onClick:s,className:Fe().closeButton})]}),this.renderError(!0),(0,r.jsx)(ln,{onChange:this.handlePermissionOverwriteChange,guildId:o,channelType:t}),this.renderAddMemberFooter()]})};i.renderSlides=function(){var e=this.state.slide,n={impression_group:d.AG.CHANNEL_ADD_FLOW};return(0,r.jsx)("div",{children:(0,r.jsxs)(Ce.My,{activeSlide:e,width:460,children:[(0,
r.jsx)(Ce.Mi,{id:an.CHANNEL_INFO,impressionName:d.zs.CHANNEL_ADD_INFO,impressionProperties:n,children:this.renderCreateChannelContent()}),(0,r.jsx)(Ce.Mi,{id:an.ADD_MEMBERS,impressionName:d.zs.CHANNEL_ADD_MEMBERS,impressionProperties:n,children:this.renderAddMemberSlideContent()})]})})};i.render=function(){var e=this.props.transitionState;return(0,r.jsx)("form",{onSubmit:this.handleSubmit,children:(0,r.jsx)(je.Y0,{transitionState:e,className:Fe().modal,"aria-labelledby":this.headerId,children:this.renderSlides()})})};return o}(a.PureComponent);const dn=a.forwardRef((function(e,n){var t=e.channelType,a=e.guildId,o=e.cloneChannelId,s=(0,p.cj)([le.Z,de.default,ce.Z,oe.Z,se.Z,ie.ZP],(function(){var e,n=le.Z.getGuild(a),r=de.default.getCurrentUser();l()(null!=r,"CreateChannel: user cannot be undefined")
;var s,i,c=null!=n&&null!=n.ownerId?de.default.getUser(n.ownerId):null,u=new Set(null!==(s=null===(e=ie.ZP.getMember(a,r.id))||void 0===e?void 0:e.roles)&&void 0!==s?s:[]),d=ce.Z.can(Ue.Plq.ADMINISTRATOR,n),h=oe.Z.getChannel(o);return{applications:se.Z.getApplicationsForGuild(a),canCreateStoreChannel:null!=n&&n.hasFeature(Ue.oNc.COMMERCE),canCreateAnnouncementChannel:null!=n&&n.hasFeature(Ue.oNc.NEWS),user:r,owner:c,memberRoleIds:u,canViewChannels:ce.Z.can(Ue.Plq.VIEW_CHANNEL,n),canConnect:ce.Z.can(Ue.Plq.CONNECT,n),isAdmin:d,cloneChannel:h,channelType:null!==(i=null==h?void 0:h.type)&&void 0!==i?i:t,canManageRoles:ce.Z.can(Ue.Plq.MANAGE_ROLES,n),canManageChannels:ce.Z.can(Ue.Plq.MANAGE_CHANNELS,n)}})),i=s.canManageRoles,c=s.canManageChannels,u=(0,te.m)(a)&&i&&c,d=(0,J.W3)(a);return(0,r.jsx)(un,$e(Qe({},e,s),{canCreateStageChannel:u,canCreateForumChannel:d,ref:n}))}))},830241:(e,n,t)=>{t.r(n);t.d(n,{createModeratorOverwrite:()=>S,default:()=>M})
;var r=t(785893),a=t(667294),o=t(791462),s=t(489992),i=t(289965),l=t(323657),c=t(780921),u=t(87310),d=t(356004),h=t(653772),p=t(191940),f=t(487502),E=t(272729),C=t(806008),N=t(67416),y=t(108580),m=t(531648),_=t(862045),v=t(959797),g=t(102437),b=t.n(g);function O(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function A(e,n,t,r,a,o,s){try{var i=e[o](s),l=i.value}catch(e){t(e);return}i.done?n(l):Promise.resolve(l).then(r,a)}function I(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,o=[],s=!0,i=!1;try{for(t=t.call(e);!(s=(r=t.next()).done);s=!0){o.push(r.value);if(n&&o.length===n)break}}catch(e){i=!0;a=e}finally{try{s||null==t.return||t.return()}finally{if(i)throw a}}return o}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return O(e,n);var t=Object.prototype.toString.call(e).slice(8,-1)
;"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return O(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var T=function(e,n){var t,r,a,o,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;s;)try{if(t=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;(r=0,a)&&(o=[2&o[0],a.value]);switch(o[0]){case 0:case 1:a=o;break;case 4:s.label++;return{value:o[1],done:!1};case 5:s.label++;r=o[1];o=[0];continue;case 7:
o=s.ops.pop();s.trys.pop();continue;default:if(!(a=s.trys,a=a.length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){s.label=o[1];break}if(6===o[0]&&s.label<a[1]){s.label=a[1];a=o;break}if(a&&s.label<a[2]){s.label=a[2];s.ops.push(o);break}a[2]&&s.ops.pop();s.trys.pop();continue}o=n.call(e,s)}catch(e){o=[6,e];r=0}finally{t=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}};function S(e,n){return{id:e,type:n,deny:y.ZP.NONE,allow:m.yP}}function R(e,n){var t=Object.values(n).filter((function(e){return null!=e.row.id})).map((function(e){var n=e.row;return n.rowType===_.aC.ROLE?S(n.id,c.BN.ROLE):S(n.id,c.BN.MEMBER)}));return(0,i.hw)(e.id,t,!0)}function M(e){var n=e.transitionState,t=e.onClose,i=e.channelId,c=(0,E.Dt)(),y=(0,o.e7)([d.Z],(function(){return d.Z.getChannel(i)})),_=(0,o.e7)([h.Z],(function(){return h.Z.getGuild(null==y?void 0:y.getGuildId())
})),g=I(a.useState({}),2),O=g[0],S=g[1],M=I(a.useState(!1),2),L=M[0],Z=M[1],P=I(a.useState(null),2),j=P[0],x=P[1];if(null==y||null==_)return null;var w,D,G=(D=(w=function(){var e,n;return T(this,(function(r){switch(r.label){case 0:Z(!0);r.label=1;case 1:r.trys.push([1,3,,4]);return[4,R(y,O)];case 2:r.sent();t();return[3,4];case 3:e=r.sent();n=new l.Hx(e);Z(!1);x(n);return[3,4];case 4:return[2]}}))},function(){var e=this,n=arguments;return new Promise((function(t,r){var a=w.apply(e,n);function o(e){A(a,t,r,o,s,"next",e)}function s(e){A(a,t,r,o,s,"throw",e)}o(void 0)}))}),function(){return D.apply(this,arguments)});return(0,r.jsxs)(N.Y0,{transitionState:n,"aria-labelledby":c,size:N.Cg.SMALL,className:b().modalRoot,children:[(0,r.jsxs)(N.xB,{separator:!1,direction:f.Z.Direction.VERTICAL,align:f.Z.Align.CENTER,className:b().header,children:[(0,r.jsx)(s.X6,{variant:"heading-xl/semibold",children:v.Z.Messages.CHANNEL_PERMISSIONS_ADD_MEMBERS_TITLE}),(0,r.jsxs)(s.xv,{variant:"text-md/normal",
color:"header-secondary",className:b().headerSubtitle,children:[(0,r.jsx)(C.Z,{height:16,width:16,className:b().headerSubtitleIcon}),y.name]})]}),(0,r.jsx)(u.AddMembersBody,{guild:_,channel:y,permission:m.yP,pendingAdditions:O,setPendingAdditions:S}),null!=j?(0,r.jsx)(s.xv,{className:b().error,variant:"text-xs/normal",color:"text-danger",children:j.getAnyErrorMessage()}):null,(0,r.jsxs)(N.mz,{children:[(0,r.jsx)(p.Co,{onClick:G,submitting:L,children:v.Z.Messages.ADD}),(0,r.jsx)(p.Co,{look:p.Co.Looks.LINK,color:p.Co.Colors.PRIMARY,onClick:t,children:v.Z.Messages.CANCEL})]})]})}}}]);
//# sourceMappingURL=e880001bb0de300d7834.js.map