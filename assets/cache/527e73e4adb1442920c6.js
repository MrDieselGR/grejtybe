"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[31488],{759731:(e,t,r)=>{r.r(t);r.d(t,{default:()=>Z});var n=r(785893),o=r(667294),s=r(730381),i=r.n(s),a=r(517563),c=r(675860),l=r(365523),u=r(489992),d=r(823911),f=r(487502),p=r(173879),h=r(462428),m=r(932847),g=r(461061),O=r(959797),b=r(955438),y=r.n(b),v=r(511742),_=r.n(v),N=r(482311),E=r.n(N),S=r(803551),j=r.n(S);function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T(e){T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return T(e)}function I(e,t){return!t||"object"!==A(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function P(e,t){P=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return P(e,t)}var A=function(e){
return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var r,n=T(e);if(t){var o=T(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return I(this,r)}}var C=function(e){var t=e.step,r=e.children;return(0,n.jsxs)(o.Fragment,{children:[(0,n.jsx)(u.X6,{className:y().sectionSubheader,variant:"heading-sm/semibold",children:O.Z.Messages.STEP_NUMBER.format({number:t})}),(0,n.jsx)(h.Z,{className:y().sectionSubtitle,size:h.Z.Sizes.SIZE_24,children:r})]})},w=function(e){var t=e.pin,r=e.timeRemaining;return(0,n.jsxs)(o.Fragment,{children:[(0,n.jsx)(u.xv,{className:y().pinNumber,variant:"text-sm/normal",children:t}),(0,n.jsx)(u.xv,{
className:y().pinExpiresText,tag:"strong",variant:"text-sm/normal",children:r})]})};const Z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&P(e,t)}(r,e);var t=R(r);function r(){x(this,r);var e;(e=t.apply(this,arguments)).state={pin:"",currentTime:i()(),endTime:null,loading:!0,errorMessage:null};e.tick=function(){var t=e.state.endTime;e.setState({currentTime:i()()});if(null!=t&&i()().isAfter(t)){var r;null===(r=e.interval)||void 0===r||r.stop()}};e.getMinutesLeftText=function(){var t=e.state.endTime;return e.state.loading?O.Z.Messages.LOADING_YOUR_PIN:null!=t&&i()().isAfter(t)?O.Z.Messages.YOUR_PIN_IS_EXPIRED:null!=t?O.Z.Messages.YOUR_PIN_EXPIRES.format({time:t.fromNow()}):void 0};return e}var o=r.prototype;o.componentDidMount=function(){var e=this,t=a.parse(this.props.location.search),r=t.code,n=t.state
;m.default.track(g.rMx.ACCOUNT_LINK_STEP,{previous_step:"microsoft auth",current_step:"PIN code display",session_id:n,platform_type:g.ABu.XBOX});i().locale(window.navigator.userLanguage||window.navigator.language);c.Z.post({url:g.ANM.CONNECTIONS_CALLBACK_CONTINUATION("xbox"),body:{code:r,state:n},oldFormErrors:!0}).then((function(t){e.setState({pin:t.body.short_code,currentTime:i()(),endTime:i()(t.body.expires_at),loading:!1});e.interval=new l.Xp;e.interval.start(1e3,e.tick)})).catch((function(t){var r;try{r=t.body.message}catch(e){r=String(t)}m.default.track(g.rMx.ACCOUNT_LINK_FAILED,{error_message:r,status_code:t.status,link_method:"pin",current_step:"PIN code display",platform_type:g.ABu.XBOX});e.setState({errorMessage:r})}))};o.componentWillUnmount=function(){null!=this.interval&&this.interval.stop()};o.handleDone=function(){window.location=g.Z5c.CONNECTIONS(g.ABu.XBOX)};o.goBack=function(){window.history.back()};o.renderXboxButtons=function(){return(0,n.jsxs)("div",{
className:_().xboxButtonContainer,children:[(0,n.jsx)(d.Z.Button,{type:d.Z.Button.A,text:O.Z.Messages.CLOSE,style:_().gamepadButton,onClick:this.handleDone}),this.renderErrorMessage()]})};o.renderErrorMessage=function(){var e=this.state.errorMessage;return null==e?null:(0,n.jsxs)("div",{className:_().errorMessageContainer,children:[(0,n.jsx)(p.Z,{className:_().errorMessageIcon}),(0,n.jsx)("div",{className:_().errorMessage,children:e})]})};o.renderContent=function(){var e=this.state.pin,t=null==e?null:(0,n.jsx)(w,{pin:e,timeRemaining:this.getMinutesLeftText()});return(0,n.jsxs)("div",{className:_().pageWrapper,children:[(0,n.jsx)("img",{alt:"Discord",className:_().logo,src:E()}),(0,n.jsxs)(f.Z,{className:_().container,justify:f.Z.Justify.CENTER,align:f.Z.Align.CENTER,children:[(0,n.jsxs)(f.Z.Child,{className:y().leftPanel,children:[t,(0,n.jsx)(u.X6,{className:y().sectionTitle,variant:"heading-sm/semibold",children:O.Z.Messages.LINK_YOUR_DISCORD_ACCOUNT}),(0,n.jsx)(C,{step:1,
children:O.Z.Messages.XBOX_PIN_STEP1}),(0,n.jsx)(C,{step:2,children:O.Z.Messages.XBOX_PIN_STEP2}),(0,n.jsx)(C,{step:3,children:O.Z.Messages.XBOX_PIN_STEP3}),this.renderXboxButtons()]}),(0,n.jsx)(f.Z.Child,{className:_().rightPanel,children:(0,n.jsx)("img",{alt:"",className:_().image,src:j()})})]})]})};o.render=function(){return(0,n.jsx)(d.Z,{onAPressed:this.handleDone,onBPressed:this.goBack,children:this.renderContent()})};return r}(o.PureComponent)},462428:(e,t,r)=>{r.d(t,{Z:()=>g});var n=r(785893),o=(r(667294),r(294184)),s=r.n(o),i=r(588772),a=r.n(i),c=r(932629),l=r.n(c);function u(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r;return e}function d(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){
return Object.getOwnPropertyDescriptor(e,t).enumerable})));r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}));return e}function f(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},s=Object.keys(e);for(n=0;n<s.length;n++){r=s[n];t.indexOf(r)>=0||(o[r]=e[r])}return o}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++){r=s[n];t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}}return o}var p=Object.freeze({STANDARD:a().colorStandard,MUTED:a().colorMuted,ERROR:a().colorError,BRAND:a().colorBrand,LINK:a().colorLink,HEADER_PRIMARY:a().colorHeaderPrimary,HEADER_SECONDARY:a().colorHeaderSecondary,STATUS_YELLOW:a().colorStatusYellow,STATUS_GREEN:a().colorStatusGreen,STATUS_RED:a().colorStatusRed,INTERACTIVE_ACTIVE:a().colorInteractiveActive,INTERACTIVE_NORMAL:a().colorInteractiveNormal,ALWAYS_WHITE:a().colorWhite,
CUSTOM:null}),h=Object.freeze({SIZE_10:l().size10,SIZE_12:l().size12,SIZE_14:l().size14,SIZE_16:l().size16,SIZE_20:l().size20,SIZE_24:l().size24,SIZE_32:l().size32}),m=function(e){var t,r=e.className,o=e.color,i=void 0===o?p.STANDARD:o,c=e.size,l=void 0===c?h.SIZE_14:c,m=e.tag,g=void 0===m?"div":m,O=e.selectable,b=void 0!==O&&O,y=e.strong,v=void 0!==y&&y,_=e.children,N=e.style,E=e["aria-label"],S=f(e,["className","color","size","tag","selectable","strong","children","style","aria-label"]);return(0,n.jsx)(g,d(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))));n.forEach((function(t){u(e,t,r[t])}))}return e}({"aria-label":E,className:s()(i,l,r,(t={},u(t,a().selectable,b),u(t,a().strong,v),t)),style:N},S),{children:_}))};m.Colors=p;m.Sizes=h;const g=m}}]);
//# sourceMappingURL=527e73e4adb1442920c6.js.map