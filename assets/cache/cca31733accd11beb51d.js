"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[41661],{841661:(n,e,r)=>{r.r(e);r.d(e,{default:()=>K});var t=r(785893),i=r(667294),o=r(496486),a=r.n(o),l=r(791462),s=r(737325),u=r(361417),c=r(859169),f=r(64833),d=r(124966),p=r(212658),m=r(582421),I=r(852097),y=r(794057),S=r(939042),h=r(125313),v=r(112508),C=r(814071),b=r(916957),N=r(720897),E=r(191940),g=r(487502),A=r(82961),_=r(562181),x=r(67416),R=r(590483),j=r(56435),M=r(447172),P=r(298716),Z=r(609993),T=r(959797),L=r(67793),w=r.n(L);function U(n,e){(null==e||e>n.length)&&(e=n.length);for(var r=0,t=new Array(e);r<e;r++)t[r]=n[r];return t}function O(n,e,r,t,i,o,a){try{var l=n[o](a),s=l.value}catch(n){r(n);return}l.done?e(s):Promise.resolve(s).then(t,i)}function B(n){return function(){var e=this,r=arguments;return new Promise((function(t,i){var o=n.apply(e,r);function a(n){O(o,t,i,a,l,"next",n)}function l(n){O(o,t,i,a,l,"throw",n)}a(void 0)}))}}function G(n,e){return function(n){
if(Array.isArray(n))return n}(n)||function(n,e){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var t,i,o=[],a=!0,l=!1;try{for(r=r.call(n);!(a=(t=r.next()).done);a=!0){o.push(t.value);if(e&&o.length===e)break}}catch(n){l=!0;i=n}finally{try{a||null==r.return||r.return()}finally{if(l)throw i}}return o}}(n,e)||function(n,e){if(!n)return;if("string"==typeof n)return U(n,e);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return U(n,e)}(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var k,D=function(n,e){var r,t,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},
"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,t&&(i=2&o[0]?t.return:o[0]?t.throw||((i=t.return)&&i.call(t),0):t.next)&&!(i=i.call(t,o[1])).done)return i;(t=0,i)&&(o=[2&o[0],i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:a.label++;return{value:o[1],done:!1};case 5:a.label++;t=o[1];o=[0];continue;case 7:o=a.ops.pop();a.trys.pop();continue;default:if(!(i=a.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1];i=o;break}if(i&&a.label<i[2]){a.label=i[2];a.ops.push(o);break}i[2]&&a.ops.pop();a.trys.pop();continue}o=e.call(n,a)}catch(n){o=[6,n];t=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}};!function(n){n[n.START=1]="START";n[n.PREVIEW=2]="PREVIEW";n[n.CONFIRM=3]="CONFIRM"
}(k||(k={}));function F(n){var e=n.premiumSubscription,r=n.isInventory,i=n.onNext,o=n.onClose,a=d.Z.getCurrentConfig({}).enabled,l=(0,I.Z)(),s=a&&"PL"==l;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(x.xB,{separator:!1,children:[(0,t.jsx)(_.vw,{tag:_.RB.H4,children:r?T.Z.Messages.PREMIUM_GUILD_SUBSCRIPTION_CANCEL_TITLE_INVENTORY:T.Z.Messages.PREMIUM_GUILD_SUBSCRIPTION_CANCEL_TITLE_GUILD}),(0,t.jsx)(x.ol,{onClick:o})]}),(0,t.jsxs)(x.hz,{className:w().body,children:[(0,t.jsx)("div",{className:w().cancelImage}),(0,t.jsx)("div",{children:e.isPurchasedExternally&&null!=e.paymentGateway?T.Z.Messages.PREMIUM_GUILD_SUBSCRIPTION_CANCEL_BODY_EXTERNAL.format({paymentGatewayName:Z.Vz[e.paymentGateway],subscriptionManagementLink:(0,R.JE)(e.paymentGateway,"SUBSCRIPTION_MANAGEMENT")}):r?T.Z.Messages.PREMIUM_GUILD_SUBSCRIPTION_CANCEL_BODY_INVENTORY.format({endDate:e.currentPeriodEnd}):T.Z.Messages.PREMIUM_GUILD_SUBSCRIPTION_CANCEL_BODY_GUILD.format({endDate:e.currentPeriodEnd})}),s&&(0,
t.jsx)(y.Z,{fromBoostCancelModal:!0})]}),e.isPurchasedExternally?null:(0,t.jsxs)(x.mz,{justify:g.Z.Justify.START,children:[(0,t.jsx)(E.Co,{onClick:i,children:T.Z.Messages.NEXT}),(0,t.jsx)(E.Co,{look:E.Co.Looks.LINK,onClick:o,children:T.Z.Messages.CANCEL})]})]})}function z(){var n=Object.values(C.Z.boostSlots),e=a().sortBy(n.filter((function(n){return!n.canceled})),(function(n){return[null!=n.premiumGuildSubscription,null!=n.cooldownEndsAt?new Date(n.cooldownEndsAt):null]}))[0];return null!=e?e.id:null}function Y(n,e,r,t){return V.apply(this,arguments)}function V(){return(V=B((function(n,e,r,t){var i;return D(this,(function(o){switch(o.label){case 0:if(null==(i=null!=t?t:z()))throw new Error("No slot to cancel");return[4,(0,u.pD)(i)];case 1:o.sent();return[4,(0,s.Mg)(n,{items:(0,R.MY)(n,e)},r)];case 2:o.sent();return[2]}}))}))).apply(this,arguments)}function W(n){
var e,r,o=n.premiumSubscription,a=n.guildBoostSlotId,s=n.onBack,u=n.onNext,c=n.onClose,d=G(i.useState(!1),2),I=d[0],y=d[1],C=G(i.useMemo((function(){try{return[(0,m.g)(o,-1),!1]}catch(n){return[[],!0]}}),[o]),2),N=C[0],_=C[1];i.useEffect((function(){_&&c()}),[_]);var Z,L=(0,l.cj)([b.Z],(function(){var n=b.Z.get(o.planId);return{premiumSubscriptionPlan:n,premiumGuildPlan:null!=n?b.Z.getForSkuAndInterval(P.Si.GUILD,n.interval,n.intervalCount):null}})),U=L.premiumSubscriptionPlan,O=L.premiumGuildPlan,k=G((0,p.ED)({subscriptionId:o.id,renewal:!0,currency:o.currency,paymentSourceId:o.paymentSourceId}),1)[0],F=G((0,p.ED)({subscriptionId:o.id,items:null!=O?(0,R.Zx)(o,null!==(Z=null===(e=N[0])||void 0===e?void 0:e.quantity)&&void 0!==Z?Z:0,O.id):null,renewal:!0}),1)[0],z=(0,f.Z)().analyticsLocations;if(null==F||null==U||null==O||null==k)return(0,t.jsx)(A.Z,{});var V=o.items.some((function(n){var e=n.planId;return!P.Z1.has(e)
})),W=V&&null==o.renewalMutations||null!=(null===(r=o.renewalMutations)||void 0===r?void 0:r.items.find((function(n){var e=n.planId;return!P.Z1.has(e)}))),$=N.some((function(n){var e=n.planId;return P.Z1.has(e)})),K=W||$?F.total-k.total:-k.total,q=U.interval,H=U.intervalCount;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(M.Z,{onClose:c}),(0,t.jsxs)(x.hz,{className:w().body,children:[(0,t.jsx)("div",{children:T.Z.Messages.PREMIUM_GUILD_SUBSCRIPTION_CANCEL_PREVIEW.format({endDate:F.subscriptionPeriodStart})}),(0,t.jsxs)(S.PO,{className:w().invoiceTable,children:[(0,t.jsx)(S.q9,{children:T.Z.Messages.PREMIUM_SUBSCRIPTION_UPDATES}),(0,t.jsx)(S.R$,{label:T.Z.Messages.PREMIUM_GUILD_SUBSCRIPTION_CANCEL_INVOICE_SUBSCRIPTION_CANCELLED.format({subscriptionCount:1}),value:(0,j.og)((0,j.T4)(K,o.currency),q,H),className:w().invoiceCancelRow}),(0,t.jsx)(S.KU,{}),(0,t.jsx)(v.nd,{premiumSubscription:o,renewalInvoice:F,isUpdate:!0})]})]}),(0,t.jsxs)(x.mz,{align:g.Z.Align.CENTER,
justify:g.Z.Justify.BETWEEN,children:[(0,t.jsx)(E.Co,{color:E.Co.Colors.RED,disabled:I,onClick:B((function(){return D(this,(function(n){switch(n.label){case 0:n.trys.push([0,2,,3]);y(!0);return[4,Y(o,N,z,a)];case 1:n.sent();u();return[3,3];case 2:n.sent();y(!1);return[3,3];case 3:return[2]}}))})),children:T.Z.Messages.PREMIUM_GUILD_SUBSCRIPTION_CANCEL_BUTTON}),(0,t.jsx)(h.Z,{onClick:s})]})]})}function $(n){var e=n.premiumSubscription,r=n.onClose;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(x.xB,{separator:!1,children:[(0,t.jsx)(_.vw,{tag:_.RB.H4,children:T.Z.Messages.PREMIUM_GUILD_SUBSCRIPTION_CONFIRM_TITLE}),(0,t.jsx)(x.ol,{onClick:r})]}),(0,t.jsxs)(x.hz,{className:w().body,children:[(0,t.jsx)("div",{className:w().cancelImage}),(0,t.jsx)("div",{children:T.Z.Messages.PREMIUM_GUILD_SUBSCRIPTION_CONFIRM_BODY.format({endDate:e.currentPeriodEnd})})]}),(0,t.jsx)(x.mz,{children:(0,t.jsx)(E.Co,{onClick:r,children:T.Z.Messages.OKAY})})]})}function K(n){
var e=n.guildBoostSlot,r=n.transitionState,o=n.onClose;i.useEffect((function(){N.Z.hasFetchedSubscriptions()||(0,s.jg)()}),[]);var a,u=(0,l.e7)([N.Z],(function(){return N.Z.getPremiumTypeSubscription()})),d=G(i.useState(k.START),2),p=d[0],m=d[1],I=(0,f.Z)(c.Z.GUILD_BOOST_CANCELLATION_MODAL).AnalyticsLocationProvider;if(null==u)a=(0,t.jsx)(x.hz,{children:(0,t.jsx)(A.Z,{})});else switch(p){case k.START:a=(0,t.jsx)(F,{premiumSubscription:u,isInventory:null==e.premiumGuildSubscription,onNext:function(){return m(k.PREVIEW)},onClose:o});break;case k.PREVIEW:a=(0,t.jsx)(W,{premiumSubscription:u,guildBoostSlotId:e.id,onBack:function(){return m(k.START)},onNext:function(){return m(k.CONFIRM)},onClose:o});break;case k.CONFIRM:a=(0,t.jsx)($,{premiumSubscription:u,onClose:o});break;default:throw new Error("Unexpected step: ".concat(p))}return(0,t.jsx)(I,{children:(0,t.jsx)(x.Y0,{transitionState:r,children:a})})}},447172:(n,e,r)=>{r.d(e,{Z:()=>m});var t=r(785893),i=(r(667294),
r(791462)),o=r(730189),a=r(409091),l=r(487502),s=r(384469),u=r(67416),c=r(728531),f=r.n(c);function d(n,e){(null==e||e>n.length)&&(e=n.length);for(var r=0,t=new Array(e);r<e;r++)t[r]=n[r];return t}function p(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var t,i,o=[],a=!0,l=!1;try{for(r=r.call(n);!(a=(t=r.next()).done);a=!0){o.push(t.value);if(e&&o.length===e)break}}catch(n){l=!0;i=n}finally{try{a||null==r.return||r.return()}finally{if(l)throw i}}return o}}(n,e)||function(n,e){if(!n)return;if("string"==typeof n)return d(n,e);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(n,e)}(n,e)||function(){
throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(n){var e=n.purchaseState,r=n.currentStep,c=n.onClose,d=p((0,a.z)({purchaseState:e,currentStep:r,initialScene:s.fe.Scenes.ENTRY,purchaseScene:s.fe.Scenes.STARS,errorScene:s.fe.Scenes.ERROR,successScene:s.fe.Scenes.SUCCESS}),2),m=d[0],I=d[1],y=(0,i.e7)([o.Z],(function(){return o.Z.useReducedMotion}));return(0,t.jsxs)(u.xB,{align:l.Z.Align.START,className:f().header,separator:!1,children:[(0,t.jsx)(s.fe,{className:f().animation,nextScene:m,onScenePlay:function(n){return I(s.fe.getNextScene(n))},pauseWhileUnfocused:!1,pause:y}),(0,t.jsx)("div",{className:f().headerTitle}),(0,t.jsx)(u.ol,{onClick:c,className:f().closeButton})]})}},124966:(n,e,r)=>{r.d(e,{Z:()=>t});const t=(0,r(553494).B)({kind:"user",id:"2022-12_localized_pricing_poland_notice",label:"Localized Pricing Poland Notice",defaultConfig:{enabled:!1},
treatments:[{id:1,label:"Enable Poland Notice",config:{enabled:!0}}]})},582421:(n,e,r)=>{r.d(e,{g:()=>c});var t=r(441143),i=r.n(t),o=r(916957),a=r(590483),l=r(298716);function s(n,e){(null==e||e>n.length)&&(e=n.length);for(var r=0,t=new Array(e);r<e;r++)t[r]=n[r];return t}function u(n){return function(n){if(Array.isArray(n))return s(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||function(n,e){if(!n)return;if("string"==typeof n)return s(n,e);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(n,e)}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(n,e){var r=o.Z.get(n.planId)
;i()(null!=r,"missing premium subscription plan");var t=o.Z.getForSkuAndInterval(l.Si.GUILD,r.interval,r.intervalCount);i()(null!=t,"missing premium guild plan");var s=null!=n.renewalMutations?n.renewalMutations.additionalPlans:n.additionalPlans,c=(0,a.uV)(s)+e,f=s.filter((function(n){return n.planId!==t.id}));if(c<0)throw new Error("Invalid adjustment");return 0===c?f:u(f).concat([{planId:t.id,quantity:c}])}},852097:(n,e,r)=>{r.d(e,{Z:()=>a});var t=r(791462),i=r(707955),o=r(720897);function a(){var n=(0,t.e7)([o.Z],(function(){return o.Z.getPremiumTypeSubscription()}));return(0,t.e7)([i.Z],(function(){var e;return null!=(null==n?void 0:n.paymentSourceId)?null===(e=i.Z.getPaymentSource(n.paymentSourceId))||void 0===e?void 0:e.country:null}))}},794057:(n,e,r)=>{r.d(e,{Z:()=>d});var t=r(785893),i=(r(667294),r(294184)),o=r.n(i),a=r(81951),l=r(95467),s=r(461061),u=r(959797),c=r(516178),f=r.n(c);const d=function(n){var e=n.fromBoostCancelModal,r=n.className;return(0,t.jsxs)("div",{
className:o()(f().noticeRoot,r),children:[(0,t.jsx)("div",{className:f().iconContainer,children:(0,t.jsx)(a.Z,{className:f().infoIcon})}),(0,t.jsx)("div",{className:f().text,children:(e?u.Z.Messages.LOCALIZED_PRICING_PLN_LEGACY_PRICING_BOOST_WARNING:u.Z.Messages.LOCALIZED_PRICING_PLN_LEGACY_PRICING_WARNING).format({helpCenterLink:l.Z.getArticleURL(s.BhN.LOCALIZED_PRICING)})})]})}},409091:(n,e,r)=>{r.d(e,{z:()=>s});var t=r(667294),i=r(390599),o=r(154765);function a(n,e){(null==e||e>n.length)&&(e=n.length);for(var r=0,t=new Array(e);r<e;r++)t[r]=n[r];return t}function l(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var t,i,o=[],a=!0,l=!1;try{for(r=r.call(n);!(a=(t=r.next()).done);a=!0){o.push(t.value);if(e&&o.length===e)break}}catch(n){l=!0;i=n}finally{try{a||null==r.return||r.return()}finally{if(l)throw i}}return o}}(n,e)||function(n,e){if(!n)return
;if("string"==typeof n)return a(n,e);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(n,e)}(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(n){var e=n.purchaseState,r=n.currentStep,a=n.initialScene,s=n.purchaseScene,u=n.errorScene,c=n.successScene,f=l((0,t.useState)(a),2),d=f[0],p=f[1];(0,t.useEffect)((function(){e===o.A.PURCHASING?p(s):e===o.A.FAIL&&p(u)}),[e,s,u]);(0,t.useEffect)((function(){r===i.h8.CONFIRM&&p(c)}),[r,c]);return[d,p]}},125313:(n,e,r)=>{r.d(e,{Z:()=>s});var t=r(785893),i=(r(667294),r(892472)),o=r(959797),a=r(241387),l=r.n(a);const s=function(n){var e=n.onClick;return(0,t.jsx)(i.Z,{onClick:e,className:l().link,children:o.Z.Messages.BACK})}}}]);
//# sourceMappingURL=cca31733accd11beb51d.js.map