"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[23286],{710680:(e,t,n)=>{n.r(t);n.d(t,{AccountConnectionResult:()=>w,default:()=>S});var r=n(785893),o=n(667294),i=n(294184),s=n.n(i),c=n(517563),a=n(690217),u=n(332233),l=n(772731),f=n(191940),p=n(82961),d=n(461061),y=n(959797),m=n(12066),v=n.n(m);function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function b(e){b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return b(e)}function g(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})))
;n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function C(e,t){return!t||"object"!==N(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function j(e,t){j=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return j(e,t)}var N=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=b(e);if(t){var o=b(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return C(this,n)}}var _=null!=window.opener;function w(e){
var t,n,i=e.verifying,c=e.verified,a=e.platformType,l=u.Z.get(a),d=o.useCallback((function(){window.close()}),[]);t=i?(0,r.jsx)("div",{className:v().message,children:y.Z.Messages.CONNECTED_ACCOUNT_VERIFYING.format({name:l.name})}):c?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:v().message,children:y.Z.Messages.CONNECTED_ACCOUNT_VERIFY_SUCCESS.format({name:l.name})}),(0,r.jsx)("div",{className:s()(v().message,v().details),children:y.Z.Messages.CONNECTED_ACCOUNT_VERIFY_SUCCESS_DETAILS})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:s()(v().message,v().error),children:y.Z.Messages.CONNECTED_ACCOUNT_VERIFY_FAILURE.format({name:l.name})}),(0,r.jsx)("div",{className:s()(v().message,v().details),children:y.Z.Messages.CONNECTED_ACCOUNT_VERIFY_FAILURE_DETAILS})]});(_||i)&&(n=(0,r.jsx)(f.Co,{className:v().btn,disabled:i,onClick:d,children:i?(0,r.jsx)(p.Z,{itemClassName:v().spinnerItem}):y.Z.Messages.DONE}));return(0,r.jsx)("div",{
className:v().verifyConnectedAccount,children:(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:v().logos,children:[(0,r.jsx)("div",{className:s()(v().logo,v().logoDiscord)}),(0,r.jsx)("div",{className:v().logosDivider}),(0,r.jsx)("div",{className:v().logo,style:{backgroundImage:'url("'.concat(l.icon.whiteSVG,'")')}})]}),t,n]})})}var T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&j(e,t)}(n,e);var t=E(n);function n(){h(this,n);var e;(e=t.apply(this,arguments)).state={verifying:!0,verified:!1};e.getType=function(){return e.props.match.params.type};return e}var o=n.prototype;o.componentDidMount=function(){var e=this,t=(0,c.parse)(this.props.location.search),n=t.code,r=t.state,o=t.oauth_verifier;if(null==t.loading){null!=o&&(n=o);var i;Object.keys(t).forEach((function(e){if(e.startsWith("openid.")){
null==i&&(i={});i[e]=t[e]}}));var s=function(t){var n=t.status,r=t.body;e.setState({verifying:!1,verified:204===n||200===n},(function(){e.state.verified&&_&&window.close()}));null!=(null==r?void 0:r.redirect)&&(window.location=r.redirect)},u={code:n,openid_params:i,state:r},f=function(t){return a.Z.callback(e.getType(),u,t).then(s,s)};_?f(!1):l.default.request(d.Etm.CONNECTIONS_CALLBACK,g(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){O(e,t,n[t])}))}return e}({},u),{providerType:this.getType()})).then(s,(function(e){return f("RPCError"!==e.name)})).then((function(){return l.default.disconnect()}))}};o.render=function(){var e=this.state,t=e.verifying,n=e.verified,o=this.getType();return u.Z.isSupported(o)?(0,r.jsx)(w,{
platformType:this.getType(),verifying:t,verified:n}):null};return n}(o.Component);const S=T}}]);
//# sourceMappingURL=6aaecd48ec801884b801.js.map