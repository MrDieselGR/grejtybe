"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[26466],{491681:(t,n,e)=>{e.d(n,{Z:()=>o});e(925334);var r=e(173436);function i(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function a(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var r,i,a=[],o=!0,u=!1;try{for(e=e.call(t);!(o=(r=e.next()).done);o=!0){a.push(r.value);if(n&&a.length===n)break}}catch(t){u=!0;i=t}finally{try{o||null==e.return||e.return()}finally{if(u)throw i}}return a}}(t,n)||function(t,n){if(!t)return;if("string"==typeof t)return i(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(e);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return i(t,n)}(t,n)||function(){
throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var o=function(){function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t);this.initializedCount=0;this.actions={};this.stores=new Map}var n=t.prototype;n.initialize=function(){this.initializedCount++;if(!(this.initializedCount>1)){this._initialize();Object.entries(this.actions).forEach((function(t){var n=a(t,2),e=n[0],i=n[1];r.Z.subscribe(e,"function"==typeof i?i:i.callback)}));this.stores.forEach((function(t,n){n.addChangeListener(t);t()}))}};n.terminate=function(t){if(!(this.initializedCount<=0)){t?this.initializedCount=0:this.initializedCount--;if(0===this.initializedCount){this._terminate();Object.entries(this.actions).forEach((function(t){var n=a(t,2),e=n[0],i=n[1];r.Z.subscribe(e,"function"==typeof i?i:i.callback)}))}}};n._initialize=function(){}
;n._terminate=function(){};return t}()},237064:(t,n,e)=>{e.d(n,{dj:()=>u,KV:()=>s,ZP:()=>l});var r=e(496486),i=e.n(r),a=e(5387),o=e.n(a);var u=100,s=[[0,u-1]];function c(t){var n={};t.forEach((function(t,e){n[e]=t}));return n}var l=function(){function t(n){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t);this._subscriptions={};this._onChange=n}var n=t.prototype;n.reset=function(){this._subscriptions={}};n.get=function(t){return c(this._get(t))};n._get=function(t){var n;return null!==(n=this._subscriptions[t])&&void 0!==n?n:new(o())({max:5})};n.clear=function(t){delete this._subscriptions[t]};n.subscribe=function(t,n,e){var r=this._get(t);if(i().isEqual(r.get(n),e))return!1;r.set(n,e);this._subscriptions[t]=r;this._onChange(t,c(r));return!0};return t}()},829568:(t,n,e)=>{e.d(n,{Z:()=>m});var r=e(791462),i=e(173436),a=e(819525),o=e(835279),u=e(859023);function s(t,n){
if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function c(t,n,e){n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e;return t}function l(t){l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)};return l(t)}function d(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{},r=Object.keys(e);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(e).filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))));r.forEach((function(n){c(t,n,e[n])}))}return t}function f(t,n){n=null!=n?n:{};Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):function(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})));e.push.apply(e,r)}
return e}(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}));return t}function h(t,n){return!n||"object"!==b(n)&&"function"!=typeof n?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):n}function _(t,n){_=Object.setPrototypeOf||function(t,n){t.__proto__=n;return t};return _(t,n)}var b=function(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function p(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function(){var e,r=l(t);if(n){var i=l(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return h(this,e)}}var g={};function v(t){var n=t.threads,e=t.firstMessages;if(null==e)return!1
;var r=!0,i=!1,a=void 0;try{for(var o,u=n[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var s=o.value;g[s.id]={loaded:!0,firstMessage:null}}}catch(t){i=!0;a=t}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}var c=!0,l=!1,d=void 0;try{for(var f,h=e[Symbol.iterator]();!(c=(f=h.next()).done);c=!0){var _=f.value;y(_.channel_id,_)}}catch(t){l=!0;d=t}finally{try{c||null==h.return||h.return()}finally{if(l)throw d}}}function y(t,n){var e=null==n?null:(0,a.e5)(n);g[t]={loaded:!0,firstMessage:e}}function E(t){var n=t.type,e=t.channelId,r=t.messageId,i=t.userId,a=t.emoji,o=t.optimistic,s=g[e];if(null==s||null==s.firstMessage)return!1;if(r!==s.firstMessage.id)return!1;var c=u.default.getCurrentUser(),l=null!=c&&c.id===i;if(o&&!l)return!1;g[e]=d({},s);if("MESSAGE_REACTION_ADD"===n){var f=t.burst,h=t.colors;g[e].firstMessage=s.firstMessage.addReaction(a,l,i,h,f)}else g[e].firstMessage=s.firstMessage.removeReaction(a,l)}var O=function(t){!function(t,n){
if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}});n&&_(t,n)}(e,t);var n=p(e);function e(){s(this,e);return n.apply(this,arguments)}var r=e.prototype;r.initialize=function(){this.waitFor(o.Z,u.default)};r.isLoading=function(t){var n;return!0!==(null===(n=g[t])||void 0===n?void 0:n.loaded)};r.getMessage=function(t){t in g||(g[t]={loaded:!1,firstMessage:null});return g[t]};r.__getLocalVars=function(){return{state:g}};return e}(r.ZP.Store);O.displayName="ForumPostMessagesStore";const m=new O(i.Z,{CONNECTION_OPEN:function(){g={}},MESSAGE_CREATE:function(t){if(t.isPushNotification)return!1;if(t.message.id!==t.message.channel_id)return!1;y(t.message.channel_id,t.message)},MESSAGE_UPDATE:function(t){if(t.message.id!==t.message.channel_id)return!1;var n=g[t.message.id];if(null==n)return!1;if(null==n.firstMessage)return!1
;g[t.message.id]=f(d({},n),{firstMessage:(0,a.wi)(n.firstMessage,t.message)})},MESSAGE_DELETE:function(t){if(t.id!==t.channelId)return!1;g[t.channelId]={loaded:!0,firstMessage:null}},THREAD_CREATE:function(t){if(null!=g[t.channel.id])return!1;if(!o.Z.isSubscribedToThreads(t.channel.guild_id))return!1;g[t.channel.id]={loaded:!0,firstMessage:null}},MESSAGE_REACTION_ADD:E,MESSAGE_REACTION_REMOVE:E,MESSAGE_REACTION_REMOVE_ALL:function(t){var n=t.channelId,e=t.messageId,r=g[n];if(null==r||null==r.firstMessage)return!1;if(e!==r.firstMessage.id)return!1;g[n]=f(d({},r),{firstMessage:r.firstMessage.set("reactions",[])})},MESSAGE_REACTION_REMOVE_EMOJI:function(t){var n=t.channelId,e=t.messageId,r=t.emoji,i=g[n];if(null==i||null==i.firstMessage)return!1;if(e!==i.firstMessage.id)return!1;g[n]=f(d({},i),{firstMessage:i.firstMessage.removeReactionsForEmoji(r)})},LOAD_FORUM_POSTS:function(t){var n=t.threads;for(var e in n)y(e,n[e].first_message)},LOAD_THREADS_SUCCESS:v,
LOAD_ARCHIVED_THREADS_SUCCESS:v,LOAD_MESSAGES_SUCCESS:function(t){var n=t.channelId,e=t.messages,r=e[e.length-1];null!=r&&r.id===n&&(g[n]={loaded:!0,firstMessage:(0,a.e5)(r)})}})},232779:(t,n,e)=>{e.d(n,{FS:()=>d,nC:()=>f,Uw:()=>_,nU:()=>b});var r=e(451964),i=e(356004),a=e(653772),o=e(718375),u=e(809633),s=e(959797);function c(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function l(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var r,i,a=[],o=!0,u=!1;try{for(e=e.call(t);!(o=(r=e.next()).done);o=!0){a.push(r.value);if(n&&a.length===n)break}}catch(t){u=!0;i=t}finally{try{o||null==e.return||e.return()}finally{if(u)throw i}}return a}}(t,n)||function(t,n){if(!t)return;if("string"==typeof t)return c(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name)
;if("Map"===e||"Set"===e)return Array.from(e);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return c(t,n)}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,n){var e=l(arguments.length>2&&void 0!==arguments[2]?arguments[2]:[o.ZP],1),r=e[0];return{isNew:!t.isArchivedThread()&&r.isNewForumThread(t.id,t.parent_id,n),hasUnreads:!t.isArchivedThread()&&r.isForumPostUnread(t.id)}}function f(t){var n=l(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[i.Z,a.Z,o.ZP],3),e=n[0],r=n[1],u=n[2],s=e.getChannel(t);if(null==s)return null;var c=r.getGuild(s.guild_id);return null==c?null:d(s,c,[u])}var h=function(){return{minutes:s.Z.Messages.FORM_POST_CREATED_AGO_TIMESTAMP_MINUTES,hours:s.Z.Messages.FORM_POST_CREATED_AGO_TIMESTAMP_HOURS,days:s.Z.Messages.FORM_POST_CREATED_AGO_TIMESTAMP_DAYS,
month:s.Z.Messages.FORM_POST_CREATED_AGO_TIMESTAMP_MORE_THAN_MONTH}};function _(t,n){if(n===u.R6.POSTED_DURATION_AGO&&t===r.z.CREATION_DATE)return h}function b(t,n){var e=l(n,1)[0],r=e.hasTrackedUnread(t),i=e.hasOpenedThread(t),a=null!=e.getTrackedAckMessageId(t);return r&&i&&a}},414077:(t,n,e)=>{e.d(n,{Z:()=>i});var r=e(356004);const i=new function t(){var n=this;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t);this.filterTagIds=null;this.sortOrder=null;this.layout=null;this.setFilterTagIds=function(t){n.filterTagIds=t};this.setSortOrder=function(t){n.sortOrder=t};this.setLayout=function(t){n.layout=t};this.getFilterTagIdsAnalytics=function(){return null!=n.filterTagIds?Array.from(n.filterTagIds):[]};this.getSortOrderAnalytics=function(t){var e,i;return null!==(i=n.sortOrder)&&void 0!==i?i:null===(e=r.Z.getChannel(t))||void 0===e?void 0:e.getDefaultSortOrder()};this.getLayoutAnalytics=function(t){var e,i
;return null!==(i=n.layout)&&void 0!==i?i:null===(e=r.Z.getChannel(t))||void 0===e?void 0:e.getDefaultLayout()}}},363708:(t,n,e)=>{e.d(n,{Z:()=>_});var r=e(491681),i=e(973381),a=e(631134),o=e(356004),u=e(232779);function s(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function c(t){c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)};return c(t)}function l(t,n){return!n||"object"!==f(n)&&"function"!=typeof n?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):n}function d(t,n){d=Object.setPrototypeOf||function(t,n){t.__proto__=n;return t};return d(t,n)}var f=function(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function h(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{
Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function(){var e,r=c(t);if(n){var i=c(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return l(this,e)}}const _=new(function(t){!function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}});n&&d(t,n)}(e,t);var n=h(e);function e(){s(this,e);var t;(t=n.apply(this,arguments)).readStateSnapshots={};t.actions={CHANNEL_SELECT:function(n){return t.handleChannelSelect(n)},THREAD_CREATE:function(n){return t.handleThreadCreate(n)}};t.handleChannelSelect=function(n){var e=n.channelId;if(null!=e){var r=o.Z.getChannel(e);if(null!=r&&r.isForumChannel()){t.readStateSnapshots={};t.processForumChannel(r.guild_id,e)}}};t.processForumChannel=function(n,e){var r=i.Z.getThreadsForParent(n,e)
;Object.keys(r).forEach((function(n){var e=(0,u.nC)(n);null!=e&&(t.readStateSnapshots[n]=e)}))};t.getReadStateSnapshotAnalytics=function(n){return t.readStateSnapshots[n]};return t}e.prototype.handleThreadCreate=function(t){var n=t.channel;if(n.isForumPost()){var e=n.ownerId===a.default.getId();this.readStateSnapshots[n.id]={isNew:!e,hasUnreads:!e}}};return e}(r.Z))},426466:(t,n,e)=>{e.d(n,{qs:()=>h,Js:()=>_,zI:()=>b,e7:()=>p,P_:()=>g,nH:()=>v,Vn:()=>y,Oq:()=>E,Je:()=>O,ab:()=>m,X0:()=>I,Hr:()=>S,B5:()=>T,KR:()=>C,Do:()=>M,B:()=>A,e5:()=>P,ws:()=>w,xI:()=>R,GX:()=>N,N3:()=>Z,MO:()=>D,lN:()=>L,qz:()=>j,HR:()=>U});var r=e(23816),i=e(356004),a=e(402124),o=e(932847),u=e(829568),s=e(774031),c=e(461061);function l(t,n,e){n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e;return t}function d(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{},r=Object.keys(e)
;"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(e).filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))));r.forEach((function(n){l(t,n,e[n])}))}return t}function f(t,n){n=null!=n?n:{};Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):function(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})));e.push.apply(e,r)}return e}(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}));return t}function h(t){var n=t.guildId,e=t.channelId,i=t.sessionId,a=t.postIds,o=t.additionalTimes;r.ZP.trackWithMetadata(c.rMx.FORUM_CHANNEL_SEEN_BATCH,f(d({},(0,s.xl)({channelId:e,sessionId:i})),{guild_id:n,channel_id:e,post_ids:a,additional_seen_time_millis:o}))}function _(t){var n=t.guildId,e=t.channelId,i=t.numSearchResults
;r.ZP.trackWithMetadata(c.rMx.FORUM_CHANNEL_SEARCHED,f(d({},(0,s.xl)({channelId:e})),{guild_id:n,channel_id:e,num_search_results:i}))}function b(t){var n=t.guildId,e=t.channelId;r.ZP.trackWithMetadata(c.rMx.FORUM_CHANNEL_SEARCH_CLEARED,f(d({},(0,s.xl)({channelId:e})),{guild_id:n,channel_id:e}))}function p(t){var n=t.guildId,e=t.channelId,i=t.tagId,a=t.filterTagIds,o=t.added,u=t.location;r.ZP.trackWithMetadata(c.rMx.FORUM_CHANNEL_TAG_FILTER_CLICKED,f(d({},(0,s.xl)({channelId:e})),{guild_id:n,channel_id:e,tag_id:i,filter_tag_ids:a,added:o,location:u}))}function g(t){var n=t.guildId,e=t.channelId;r.ZP.trackWithMetadata(c.rMx.FORUM_CHANNEL_CREATE_NEW_POST_CLICKED,f(d({},(0,s.xl)({channelId:e})),{guild_id:n,channel_id:e}))}function v(t){var n=t.guildId,e=t.channelId;r.ZP.trackWithMetadata(c.rMx.FORUM_CHANNEL_CREATE_NEW_POST_KEYBIND_USED,f(d({},(0,s.xl)({channelId:e})),{guild_id:n,channel_id:e}))}function y(t){var n,e,o,u,l=t.guildId,h=t.channelId,_=i.Z.getChannel(h);if(null!=_){
var b=a.Z.getThreadSettings(h),p=null===(n=_.template)||void 0===n?void 0:n.trim(),g=a.Z.getDraft(h,a.d.FirstThreadMessage),v=null==g||0===g.length||(null==g?void 0:g.trim())===p,y=null==(null==b?void 0:b.appliedTags)||0===(null==b||null===(e=b.appliedTags)||void 0===e?void 0:e.size),E=null==(null==b?void 0:b.name)||0===(null===(u=null==b||null===(o=b.name)||void 0===o?void 0:o.trim())||void 0===u?void 0:u.length);v&&y&&E||r.ZP.trackWithMetadata(c.rMx.FORUM_CHANNEL_NEW_POST_DRAFT_CREATED,f(d({},(0,s.xl)({channelId:h})),{guild_id:l,channel_id:h,applied_tag_ids:(0,s.q8)(h),num_attachments:(0,s.RR)(h)}))}}function E(t){var n=t.guildId,e=t.channelId;r.ZP.trackWithMetadata(c.rMx.FORUM_CHANNEL_NEW_POST_DRAFT_CLEARED,f(d({},(0,s.xl)({channelId:e})),{guild_id:n,channel_id:e}))}function O(t){var n=t.guildId,e=t.channelId,i=t.postId,a=function(){r.ZP.trackWithMetadata(c.rMx.FORUM_CHANNEL_POST_CREATED,f(d({},(0,s.n4)({channelId:i})),{guild_id:n,channel_id:e}))}
;u.Z.isLoading(i)?u.Z.addConditionalChangeListener((function(){if(u.Z.isLoading(i))return!0;a();return!1})):a()}function m(t){var n=t.guildId,e=t.channelId;r.ZP.trackWithMetadata(c.rMx.FORUM_CHANNEL_SCROLLED,f(d({},(0,s.xl)({channelId:e})),{guild_id:n,channel_id:e}))}function I(t){var n=t.guildId,e=t.channelId,i=t.gridViewAutoEnabled;r.ZP.trackWithMetadata(c.rMx.FORUM_CHANNEL_GRID_UPSELL_VIEWED,f(d({},(0,s.xl)({channelId:e})),{guild_id:n,channel_id:e,grid_view_auto_enabled:i}))}function S(t){var n=t.guildId,e=t.channelId,a=t.numArchivedThreads,u=t.hasMoreThreads,l=t.filterTagIds,h=t.sortOrder;o.default.track(c.rMx.FORUM_CHANNEL_MORE_POSTS_LOADED,f(d({},(0,r.hH)(n),(0,r.v_)(i.Z.getChannel(e)),(0,s.xl)({channelId:e})),{guild_id:n,channel_id:e,num_archived_threads:a,num_active_threads:(0,s.bE)(n,e),has_more_threads:u,filter_tag_ids:l,sort_order:h}))}function T(t){var n=t.guildId,e=t.channelId,i=t.postId,a=t.isSearchResult,o=t.location
;r.ZP.trackWithMetadata(c.rMx.FORUM_CHANNEL_POST_CLICKED,f(d({},(0,s.n4)({channelId:i})),{guild_id:n,channel_id:e,is_search_result:a,location:o}))}function C(t){var n=t.guildId,e=t.channelId,i=t.sortOrder;r.ZP.trackWithMetadata(c.rMx.FORUM_CHANNEL_POSTS_SORTED,f(d({},(0,s.xl)({channelId:e})),{guild_id:n,channel_id:e,sort_type:(0,s.t$)(i),sort_order:i,forum_channel_sort_order:i}))}function M(t){var n=t.guildId,e=t.channelId,i=t.forumLayout;r.ZP.trackWithMetadata(c.rMx.FORUM_CHANNEL_LAYOUT_UPDATED,f(d({},(0,s.xl)({channelId:e})),{guild_id:n,channel_id:e,forum_channel_layout:i}))}function A(t){var n=t.postId,e=t.location;r.ZP.trackWithMetadata(c.rMx.FORUM_POST_LINK_COPIED,{forum_post_id:n,location:e})}function P(t){var n=t.onboardingCTA;r.ZP.trackWithMetadata(c.rMx.FORUM_CHANNEL_ONBOARDING_CLICKED,{onboarding_cta_type:n})}function w(t){var n=t.forumDemoId;r.ZP.trackWithMetadata(c.rMx.FORUM_UPSELL_MODAL_CLICKED,{forum_demo_id:n})}function R(t){var n=t.added
;r.ZP.trackWithMetadata(c.rMx.FORUM_ADD_MEDIA_TO_ORIGINAL_POST_CLICKED,{added:n})}function N(t){var n=t.readGuideCta;r.ZP.trackWithMetadata(c.rMx.FORUM_CHANNEL_HELPER_CARD_CLICKED,{read_guide_cta:n})}function Z(t){var n=t.isMobile;r.ZP.trackWithMetadata(c.rMx.FORUM_CHANNEL_MEDIA_UPLOADER_CLICKED,{is_mobile:n})}function D(){r.ZP.trackWithMetadata(c.rMx.FORUM_CHANNEL_ENABLE_AUTOMOD_CLICKED)}function L(t){r.ZP.trackWithMetadata(c.rMx.CHANNEL_OPENED,f(d({},(0,r.hH)(t.guild_id),(0,r.v_)(t),(0,r.KG)(t,!0)),{channel_id:t.id,guild_id:t.guild_id,parent_id:t.parent_id,parent_channel_type:t.parentChannelThreadType,channel_view:"Split View"}))}function j(){r.ZP.trackWithMetadata(c.rMx.OPEN_MODAL,{type:"Forum Channel Upsell Modal",location:{section:c.jXE.CHANNEL_WELCOME_CTA}})}function U(t){var n=t.guildId,e=t.channelId;r.ZP.trackWithMetadata(c.rMx.THREAD_CREATION_STARTED,f(d({},(0,r.KG)(i.Z.getChannel(e))),{channel_id:e,guild_id:n}))}},774031:(t,n,e)=>{e.d(n,{xl:()=>L,n4:()=>j,t$:()=>C,WW:()=>T,
q8:()=>A,RR:()=>M,bE:()=>P});var r=e(451964),i=e(277563),a=e(973381),o=e(668479),u=e(320489),s=e(3056),c=e(356004),l=e(402124),d=e(940712),f=e(172701),h=e(829568),_=e(414077),b=e(363708),p=e(468811),g=e.n(p);function v(t){return{channelId:t,sessionId:g().v4()}}const y=new(function(){function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t)}t.prototype.getForumChannelSessionId=function(t){null==this.session&&(this.session=v(t));this.session.channelId!==t&&(this.session=v(t));return this.session.sessionId};return t}());var E=e(461061),O=e(35236),m=e(504003);function I(t,n,e){n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e;return t}function S(t,n){n=null!=n?n:{};Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):function(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){
return Object.getOwnPropertyDescriptor(t,n).enumerable})));e.push.apply(e,r)}return e}(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}));return t}function T(t){return y.getForumChannelSessionId(t)}function C(t){switch(t){case r.z.CREATION_DATE:return m.SX.CREATION_DATE;case r.z.LATEST_ACTIVITY:return m.SX.LATEST_ACTIVITY;default:throw new Error("Unexpected sort order ".concat(t))}}function M(t){return f.Z.getUploads(t,l.d.FirstThreadMessage).length}function A(t){var n,e=c.Z.getChannel(t);if(null==e)return[];var r,i=c.Z.getChannel(e.parent_id),a=null==i?void 0:i.availableTags;if(null==i||null==a)return[];var o=null!==(r=null===(n=l.Z.getThreadSettings(t))||void 0===n?void 0:n.appliedTags)&&void 0!==r?r:new Set,u=new Set(a.map((function(t){return t.id})));return Array.from(o).filter((function(t){return u.has(t)}))}function P(t,n){return Object.keys(a.Z.getThreadsForParent(t,n)).length}function w(t){
var n=h.Z.getMessage(t),e=n.loaded,r=n.firstMessage;return e?r:null}function R(t){var n=w(t);return null==n?0:n.reactions.length}function N(t){var n=w(t);return null==n?0:n.reactions.reduce((function(t,n){return t+n.count}),0)}function Z(t){var n,e=c.Z.getChannel(t);if(null==e)return[];var r=c.Z.getChannel(e.parent_id),i=null==r?void 0:r.availableTags;if(null==r||null==i)return[];var a,o=new Set(i.map((function(t){return t.id})));return null!==(a=null===(n=e.appliedTags)||void 0===n?void 0:n.filter((function(t){return o.has(t)})))&&void 0!==a?a:[]}function D(t){var n,e=w(t);return null==e?[]:e.attachments.map((function(t){return null!==(n=t.content_type)&&void 0!==n?n:"unknown"}))}function L(t){var n,e,r,i,a=t.channelId,o=t.sessionId,u=c.Z.getChannel(a);return null!=u&&u.isForumChannel()?{forum_channel_has_guidelines:null!=u.topic&&u.topic.trim().length>0,forum_channel_default_emoji_reaction_id:null===(n=u.defaultReactionEmoji)||void 0===n?void 0:n.emojiId,
forum_channel_default_emoji_reaction_name:null===(e=u.defaultReactionEmoji)||void 0===e?void 0:e.emojiName,forum_channel_available_tag_ids:null!==(i=null===(r=u.availableTags)||void 0===r?void 0:r.map((function(t){return t.id})))&&void 0!==i?i:[],forum_channel_tag_required:u.hasFlag(O.zZ.REQUIRE_TAG),forum_channel_can_create_post:d.Z.can(E.Plq.SEND_MESSAGES,u),forum_channel_filter_tag_ids:_.Z.getFilterTagIdsAnalytics(),forum_channel_sort_order:_.Z.getSortOrderAnalytics(u.id),forum_channel_session_id:null!=o?o:T(u.id),forum_channel_layout:_.Z.getLayoutAnalytics(u.id),forum_channel_default_sort_order:u.defaultSortOrder,forum_channel_default_layout:u.defaultForumLayout}:null}function j(t){var n,e,r,a,l,d=t.channelId,f=t.sessionId,h=c.Z.getChannel(d);if(null==h||!h.isForumPost())return null;var _,p,g=c.Z.getChannel(h.parent_id);return null!=g&&g.isForumChannel()?S(function(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{},r=Object.keys(e)
;"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(e).filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))));r.forEach((function(n){I(t,n,e[n])}))}return t}({},L({channelId:g.id,sessionId:f})),{thread_approximate_member_count:u.Z.getMemberCount(d),thread_approximate_message_count:s.Z.getCount(d),thread_archived:!0===(null===(n=h.threadMetadata)||void 0===n?void 0:n.archived),thread_locked:null!==(_=null===(e=h.threadMetadata)||void 0===e?void 0:e.locked)&&void 0!==_&&_,thread_auto_archive_duration_minutes:null!==(p=null===(r=h.threadMetadata)||void 0===r?void 0:r.autoArchiveDuration)&&void 0!==p?p:0,thread_approximate_creation_date:i.default.extractTimestamp(d),forum_post_id:h.id,forum_post_first_message_id:h.id,forum_post_num_reactions:N(h.id),forum_post_num_unique_reactions:R(h.id),forum_post_applied_tag_ids:Z(h.id),forum_post_is_pinned:h.hasFlag(O.zZ.PINNED),
forum_post_is_new:null===(a=b.Z.getReadStateSnapshotAnalytics(h.id))||void 0===a?void 0:a.isNew,forum_post_is_unread:null===(l=b.Z.getReadStateSnapshotAnalytics(h.id))||void 0===l?void 0:l.hasUnreads,forum_post_is_following:o.Z.hasJoined(h.id),forum_post_attachment_mimetypes:D(h.id)}):null}},835279:(t,n,e)=>{e.d(n,{Z:()=>V});var r=e(791462),i=e(173436),a=e(496486),o=e.n(a),u=e(365523),s=e(237064),c=e(832691);var l=function(){function t(n){var e=this;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t);this._subscriptions={};this._unsubscriptions={};this._unsubscribe=new u.sW(6e4,(function(){return e.flushUnsubscriptions()}));this._onChange=n}var n=t.prototype;n.reset=function(){this._subscriptions={};this._unsubscriptions={};this._unsubscribe.cancel()};n.get=function(t){var n,e=null!==(n=this._subscriptions[t])&&void 0!==n?n:{};return o().keys(e)};n.clear=function(t){delete this._subscriptions[t];delete this._unsubscriptions[t]}
;n.subscribe=function(t,n){var e,r,i=null!==(e=this._subscriptions[t])&&void 0!==e?e:{};i[n]=(null!==(r=i[n])&&void 0!==r?r:0)+1;this._subscriptions[t]=i;1===i[n]&&this._onChange(t,this.get(t));this.checkForLeaks(t,n)};n.isSubscribed=function(t,n){return null!=this._subscriptions[t]&&null!=this._subscriptions[t][n]};n.unsubscribe=function(t,n){if(this.isSubscribed(t,n)){var e,r,i=null!==(e=this._unsubscriptions[t])&&void 0!==e?e:{};i[n]=(null!==(r=i[n])&&void 0!==r?r:0)+1;this._unsubscriptions[t]=i;1===i[n]&&this._unsubscribe.delay(!1)}};n.checkForLeaks=function(t,n){var e,r,i,a,o=(null!==(i=null===(e=this._subscriptions[t])||void 0===e?void 0:e[n])&&void 0!==i?i:0)-(null!==(a=null===(r=this._unsubscriptions[t])||void 0===r?void 0:r[n])&&void 0!==a?a:0);o>5&&new c.Z("GuildMemberSubscriptions").warn("GuildMemberSubscriptions.subscribe(...): Potential reference leak! (".concat(o," subscriptions)"))};n.flushUnsubscriptions=function(){var t=this;if(!o().isEmpty(this._unsubscriptions)){
o().forEach(this._unsubscriptions,(function(n,e){var r=t._subscriptions[e];o().forEach(n,(function(t,n){var e;r[n]=(null!==(e=r[n])&&void 0!==e?e:0)-t;r[n]<=0&&delete r[n]}));o().isEmpty(r)&&delete t._subscriptions[e];t._onChange(e,t.get(e))}));this._unsubscriptions={}}};return t}(),d=e(5387),f=e.n(d);var h=function(){function t(n){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t);this._subscriptions={};this._onChange=n}var n=t.prototype;n.reset=function(){this._subscriptions={}};n.get=function(t){return this._get(t).keys()};n.getSubscribedThreadIds=function(){var t=new Set;for(var n in this._subscriptions){var e=!0,r=!1,i=void 0;try{for(var a,o=this._subscriptions[n].keys()[Symbol.iterator]();!(e=(a=o.next()).done);e=!0){var u=a.value;t.add(u)}}catch(t){r=!0;i=t}finally{try{e||null==o.return||o.return()}finally{if(r)throw i}}}return t};n._get=function(t){var n;return null!==(n=this._subscriptions[t])&&void 0!==n?n:new(f())({max:3,
updateAgeOnGet:!0})};n.clear=function(t){if(t in this._subscriptions){delete this._subscriptions[t];this._onChange(t,[])}};n.subscribe=function(t,n,e){var r=this._get(t);if(r.has(n)){r.set(n,Date.now());return!1}null!=e&&r.has(e)&&r.set(e,Date.now());r.set(n,Date.now());this._subscriptions[t]=r;this._onChange(t,r.keys());return!0};n.unsubscribe=function(t,n){if(!(t in this._subscriptions))return!1;var e=this._subscriptions[t];if(e.has(n)){e.del(n);this._onChange(t,e.keys());return!0}return!1};return t}(),_=e(461061);function b(t,n,e){n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e;return t}function p(t){return null!=t&&"null"!==t&&t!==_.ME&&"undefined"!==t&&t!==_.I_8}var g=function(){function t(n){var e=this;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t);this._members=new l((function(t,n){return e._enqueue(t,{members:n})}));this._channels=new s.ZP((function(t,n){return e._enqueue(t,{
channels:n})}));this._threadMemberLists=new h((function(t,n){return e._enqueue(t,{thread_member_lists:n})}));this._typing=new Set;this._threads=new Set;this._activities=new Set;this._subscribed=new Set;this._pending={};this._flush=new u.sW(0,(function(){return e.flush()}));this._onChange=n}var n=t.prototype;n._enqueue=function(t,n){this._pending[t]=function(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{},r=Object.keys(e);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(e).filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))));r.forEach((function(n){b(t,n,e[n])}))}return t}({},this._pending[t],n);this._flush.delay()};n.reset=function(){this._subscribed.clear();this._pending={};this._members.reset();this._channels.reset();this._threadMemberLists.reset();this._typing.clear();this._threads.clear();this._activities.clear()};n.get=function(t){return{typing:this._typing.has(t),
threads:this._threads.has(t),activities:this._activities.has(t),members:this._members.get(t),channels:this._channels.get(t),thread_member_lists:this._threadMemberLists.get(t)}};n.getSubscribedThreadIds=function(){return this._threadMemberLists.getSubscribedThreadIds()};n.isSubscribedToThreads=function(t){return this._threads.has(t)};n.forEach=function(t){this._subscribed.forEach(t)};n.clearWithoutFlushing=function(t,n){!n&&this._threads.has(t)||this._subscribed.delete(t);delete this._pending[t];this._members.clear(t);this._channels.clear(t);this._threadMemberLists.clear(t);this._typing.delete(t);n&&this._threads.delete(t);this._activities.delete(t)};n.flush=function(){var t=this;o().forEach(this._pending,(function(n,e){t._subscribed.add(e);t._onChange(e,n)}));this._pending={}};n.subscribeUser=function(t,n){p(t)&&this._members.subscribe(t,n)};n.unsubscribeUser=function(t,n){p(t)&&this._members.unsubscribe(t,n)};n.subscribeChannel=function(t,n,e){
return!!p(t)&&this._channels.subscribe(t,n,e)};n.subscribeThreadMemberList=function(t,n,e){return!!p(t)&&this._threadMemberLists.subscribe(t,n,e)};n.unsubscribeThreadMemberList=function(t,n){return!!p(t)&&this._threadMemberLists.unsubscribe(t,n)};n.subscribeToGuild=function(t){this._subscribeToFeature(t,this._typing,{typing:!0});this._subscribeToFeature(t,this._activities,{activities:!0});this._subscribeToFeature(t,this._threads,{threads:!0})};n._subscribeToFeature=function(t,n,e){if(p(t)&&!n.has(t)){n.add(t);this._enqueue(t,e)}};return t}(),v=e(830260),y=e(631134),E=e(915354),O=e(356004),m=e(152666),I=e(212218),S=e(653772),T=e(733285),C=e(105405),M=e(379822),A=e(971738);function P(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function w(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function R(t){R=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)}
;return R(t)}function N(t,n){return!n||"object"!==j(n)&&"function"!=typeof n?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):n}function Z(t,n){Z=Object.setPrototypeOf||function(t,n){t.__proto__=n;return t};return Z(t,n)}function D(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var r,i,a=[],o=!0,u=!1;try{for(e=e.call(t);!(o=(r=e.next()).done);o=!0){a.push(r.value);if(n&&a.length===n)break}}catch(t){u=!0;i=t}finally{try{o||null==e.return||e.return()}finally{if(u)throw i}}return a}}(t,n)||function(t,n){if(!t)return;if("string"==typeof t)return P(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(e);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return P(t,n)
}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var L,j=function(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function U(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function(){var e,r=R(t);if(n){var i=R(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return N(this,e)}}var F=new g((function(t,n){(null!=S.Z.getGuild(t)||m.Z.isUnavailable(t))&&i.Z.dispatch({type:"GUILD_SUBSCRIPTIONS_FLUSH",guildId:t,subscriptions:n})}));function x(t,n){F.forEach((function(e){var r
;if(e!==A.Z.getGuildId()&&e!==T.Z.getGuildId()&&e!==(null===(r=O.Z.getChannel(M.Z.getChannelId()))||void 0===r?void 0:r.getGuildId())&&(null==L||L.guildId!==e)){F.clearWithoutFlushing(e,t);n&&i.Z.dispatch({type:"GUILD_SUBSCRIPTIONS_FLUSH",guildId:e,subscriptions:F.get(e)})}}))}function k(t,n){F.subscribeToGuild(t);return null!=n&&E.ZP.getSection(n)===_.ULH.MEMBERS&&G(t,n,s.KV)}function G(t,n,e){var r=O.Z.getChannel(n);if(null==r)return!1;var i=r.getGuildId();i!==t&&t===_.I_8&&F.subscribeToGuild(i);return(null==r?void 0:r.isThread())?r.type===_.d4z.ANNOUNCEMENT_THREAD?F.subscribeChannel(i,r.parent_id,e):!!r.isActiveThread()&&F.subscribeThreadMemberList(i,n,M.Z.getChannelId()):F.subscribeChannel(i,n,e)}function H(t){"CONNECTION_OPEN"===t.type&&x(!0,!1);var n=A.Z.getGuildId();null!=n&&k(n,M.Z.getChannelId(n));F.forEach((function(t){null==S.Z.getGuild(t)?F.clearWithoutFlushing(t,!0):i.Z.dispatch({type:"GUILD_SUBSCRIPTIONS_FLUSH",guildId:t,subscriptions:F.get(t)})}))}function W(t){
var n=t.guildId,e=t.channelId;return!m.Z.isUnavailable(n)&&k(n,e)}function B(){return k(A.Z.getGuildId(),M.Z.getChannelId())}function z(){var t=v.Z.getSyncingWith();if(null==t){if(null!=L){F.unsubscribeUser(L.guildId,L.userId);L=null}}else{var n=t.userId;if(null!=L&&L.userId===n)return!1;if(C.Z.isFriend(n))return!1;var e=I.ZP.memberOf(n);if(0===e.length)return!1;var r=D(e,1)[0];L={guildId:r,userId:n};F.subscribeUser(r,n)}return!1}var K=function(t){!function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}});n&&Z(t,n)}(e,t);var n=U(e);function e(){w(this,e);return n.apply(this,arguments)}var r=e.prototype;r.initialize=function(){this.waitFor(O.Z,S.Z,A.Z,M.Z,T.Z,y.default,E.ZP);this.syncWith([v.Z],z);this.syncWith([E.ZP],B)};r.getSubscribedThreadIds=function(){return F.getSubscribedThreadIds()};r.isSubscribedToThreads=function(t){
return F.isSubscribedToThreads(t)};r.__getLocalVars=function(){return{syncingWith:L,subscriptions:F}};return e}(r.ZP.Store);K.displayName="GuildSubscriptionsStore";const V=new K(i.Z,{CONNECTION_OPEN:H,CONNECTION_RESUMED:H,CONNECTION_CLOSED:function(){x(!1,!1)},IDLE:function(t){if(!t.idle)return!1;x(!1,!0)},LOGOUT:function(){F.reset()},VOICE_CHANNEL_SELECT:W,CHANNEL_SELECT:W,GUILD_CREATE:function(t){t.guild.id===A.Z.getGuildId()&&B()},GUILD_DELETE:function(t){var n=t.guild;F.clearWithoutFlushing(n.id,!0)},GUILD_SUBSCRIPTIONS_MEMBERS_ADD:function(t){var n=t.guildId;t.userIds.forEach((function(t){t!==y.default.getId()&&F.subscribeUser(n,t)}));return!1},GUILD_SUBSCRIPTIONS_MEMBERS_REMOVE:function(t){var n=t.guildId;t.userIds.forEach((function(t){F.unsubscribeUser(n,t)}));return!1},GUILD_SUBSCRIPTIONS_CHANNEL:function(t){return G(t.guildId,t.channelId,t.ranges)},GUILD_SUBSCRIPTIONS:function(t){var n=t.guildId;return F.subscribeToGuild(n)},CHANNEL_PRELOAD:function(t){
return k(t.guildId,t.channelId)},INBOX_OPEN:function(t){var n=t.guildIds,e=!0,r=!1,i=void 0;try{for(var a,o=n[Symbol.iterator]();!(e=(a=o.next()).done);e=!0){var u=a.value;null!=u&&F.subscribeToGuild(u)}}catch(t){r=!0;i=t}finally{try{e||null==o.return||o.return()}finally{if(r)throw i}}return!1},THREAD_UPDATE:function(t){var n=t.channel;if(n.isArchivedThread())return F.unsubscribeThreadMemberList(n.guild_id,n.id);if(!n.isActiveThread()||M.Z.getChannelId()!==n.id)return!1;F.subscribeThreadMemberList(n.guild_id,n.id,M.Z.getChannelId())},THREAD_DELETE:function(t){var n=t.channel;return F.unsubscribeThreadMemberList(n.guild_id,n.id)},THREAD_LIST_SYNC:B})}}]);
//# sourceMappingURL=856b91048ccac4e2e531.js.map